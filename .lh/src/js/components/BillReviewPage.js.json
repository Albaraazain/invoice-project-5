{
    "sourceFile": "src/js/components/BillReviewPage.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 89,
            "patches": [
                {
                    "date": 1731478811255,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1731478822395,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,2 +1,3 @@\n import { gsap } from \"gsap\";\r\n-import { getBillData }  from \"../store/solarSizingState\";\n\\ No newline at end of file\n+import { getBillData }  from \"../store/solarSizingState\";\r\n+import { BillPreview } from \"./BillPreview\";\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731478851648,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,3 +1,15 @@\n import { gsap } from \"gsap\";\r\n import { getBillData }  from \"../store/solarSizingState\";\r\n-import { BillPreview } from \"./BillPreview\";\n\\ No newline at end of file\n+import { BillPreview } from \"./BillPreview\";\r\n+\r\n+export class BillReviewPage {\r\n+  constructor() {\r\n+    this.billData = getBillData();\r\n+    this.billPreview = new BillPreview();\r\n+  }\r\n+\r\n+  render() {\r\n+    const billData = getBillData();\r\n+    this.billPreview.render(billData);\r\n+  }\r\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731479078247,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,12 +4,85 @@\n \r\n export class BillReviewPage {\r\n   constructor() {\r\n     this.billData = getBillData();\r\n-    this.billPreview = new BillPreview();\r\n+    if (!this.billDatall) {\r\n+      throw new Error(\"Bill data is not available\");    \r\n   }\r\n+}\r\n \r\n   render() {\r\n-    const billData = getBillData();\r\n-    this.billPreview.render(billData);\r\n-  }\r\n+    const app = document.getElementById(\"app\");\r\n+    app.innerHTML = `\r\n+        <div class=\"h-screen w-screen bg-white transition-colors duration-1000 overflow-hidden\">\r\n+        <!-- Main Content -->\r\n+        <div class=\"h-full w-full flex relative\">\r\n+          <!-- Bill Preview Side -->\r\n+          <div class=\"w-1/2 h-full\" id=\"bill-preview-container\">\r\n+            <div id=\"bill-preview\" class=\"h-full\"></div>\r\n+          </div>\r\n+\r\n+          <!-- Insights Side -->\r\n+          <div class=\"w-1/2 h-full bg-gray-50 p-8 flex flex-col\">\r\n+            <div class=\"flex-1\">\r\n+              <h2 class=\"text-2xl font-bold text-gray-800 mb-6\">Bill Analysis</h2>\r\n+              \r\n+              <!-- Key Metrics -->\r\n+              <div class=\"space-y-6\">\r\n+                ${this.renderKeyMetric(\r\n+                  \"Monthly Consumption\",\r\n+                  `${this.billData.unitsConsumed} kWh`,\r\n+                  \"This is how much electricity you used last month\"\r\n+                )}\r\n+                \r\n+                ${this.renderKeyMetric(\r\n+                  \"Current Bill Amount\",\r\n+                  `Rs. ${this.billData.totalAmount}`,\r\n+                  \"Your total electricity charges including taxes\"\r\n+                )}\r\n+                \r\n+                ${this.renderKeyMetric(\r\n+                  \"Rate per Unit\",\r\n+                  `Rs. ${this.billData.ratePerUnit}/kWh`,\r\n+                  \"Your current electricity rate\"\r\n+                )}\r\n+              </div>\r\n+\r\n+              <!-- Analysis Summary -->\r\n+              <div class=\"mt-8 p-6 bg-white rounded-lg shadow-sm\">\r\n+                <h3 class=\"text-lg font-semibold text-gray-800 mb-3\">What This Means</h3>\r\n+                <p class=\"text-gray-600\">\r\n+                  Based on your consumption pattern, you could benefit from a solar installation.\r\n+                  Let's see how much you could save!\r\n+                </p>\r\n+              </div>\r\n+            </div>\r\n+\r\n+            <!-- Next Button -->\r\n+            <div class=\"mt-6\">\r\n+              <button \r\n+                id=\"proceed-to-quote\" \r\n+                class=\"w-full bg-primary text-white px-6 py-3 rounded-full font-medium hover:bg-primary-dark transition-colors duration-300\"\r\n+              >\r\n+                Generate My Solar Quote â†’\r\n+              </button>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n+    `;\r\n+\r\n+    this.attachEventListeners();\r\n+    this.renderBillPreview();\r\n+    this.initializeAnimations();\r\n+    }\r\n+\r\n+    renderKeyMetric(title, value, description) {\r\n+      return `\r\n+        <div class=\"metric-card opacity-0\">\r\n+          <h3 class=\"text-lg font-semibold text-gray-800 mb-3\">${title}</h3>\r\n+          <p class=\"text-gray-600\">${value}</p>\r\n+          <p class=\"text-gray-500 text-sm\">${description}</p>\r\n+        </div>\r\n+      `;\r\n+    }\r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731479103764,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -76,13 +76,15 @@\n     this.initializeAnimations();\r\n     }\r\n \r\n     renderKeyMetric(title, value, description) {\r\n-      return `\r\n+        return `\r\n         <div class=\"metric-card opacity-0\">\r\n-          <h3 class=\"text-lg font-semibold text-gray-800 mb-3\">${title}</h3>\r\n-          <p class=\"text-gray-600\">${value}</p>\r\n-          <p class=\"text-gray-500 text-sm\">${description}</p>\r\n+          <div class=\"flex justify-between items-start\">\r\n+            <h3 class=\"text-gray-600 font-medium\">${title}</h3>\r\n+            <span class=\"text-xl font-bold text-gray-900\">${value}</span>\r\n+          </div>\r\n+          <p class=\"text-sm text-gray-500 mt-1\">${description}</p>\r\n         </div>\r\n       `;\r\n     }\r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731479208128,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -86,5 +86,21 @@\n           <p class=\"text-sm text-gray-500 mt-1\">${description}</p>\r\n         </div>\r\n       `;\r\n     }\r\n+\r\n+    renderBillPreview() {\r\n+        const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n+        const billPreview = new BillPreview(this.billData);\r\n+        billPreview.render(billPreviewContainer);\r\n+    }\r\n+\r\n+    attachEventListeners() {\r\n+        const proceedButton = document.getElementById(\"proceed-to-quote\");\r\n+        proceedButton.addEventListener(\"click\", () => {\r\n+          window.router.push(\"/quote\");\r\n+        });\r\n+    }\r\n+\r\n+\r\n+    \r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731479232340,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,7 +100,35 @@\n           window.router.push(\"/quote\");\r\n         });\r\n     }\r\n \r\n+    initializeAnimations() {\r\n+        // Fade in metrics one by one\r\n+        gsap.fromTo(\r\n+          \".metric-card\",\r\n+          { opacity: 0, y: 20 },\r\n+          { \r\n+            opacity: 1, \r\n+            y: 0, \r\n+            duration: 0.5,\r\n+            stagger: 0.2,\r\n+            ease: \"power2.out\"\r\n+          }\r\n+        );\r\n+    \r\n+        // Animate the bill preview\r\n+        const billPreviewContainer = document.getElementById(\"bill-preview-container\");\r\n+        gsap.fromTo(\r\n+          billPreviewContainer,\r\n+          { opacity: 0, scale: 0.95 },\r\n+          { \r\n+            opacity: 1, \r\n+            scale: 1, \r\n+            duration: 0.8,\r\n+            ease: \"power2.out\"\r\n+          }\r\n+        );\r\n+      }\r\n \r\n+\r\n     \r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731479238791,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -128,7 +128,21 @@\n           }\r\n         );\r\n       }\r\n \r\n+      addBaseStyles() {\r\n+        const style = document.createElement(\"style\");\r\n+        style.textContent = `\r\n+          :root {\r\n+            --color-primary: #00a651;\r\n+            --color-primary-dark: #008c44;\r\n+          }\r\n+          \r\n+          .bg-primary { background-color: var(--color-primary); }\r\n+          .hover\\\\:bg-primary-dark:hover { background-color: var(--color-primary-dark); }\r\n+        `;\r\n+        document.head.appendChild(style);\r\n+      }\r\n \r\n+\r\n     \r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731480059668,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,14 +2,11 @@\n import { getBillData }  from \"../store/solarSizingState\";\r\n import { BillPreview } from \"./BillPreview\";\r\n \r\n export class BillReviewPage {\r\n-  constructor() {\r\n-    this.billData = getBillData();\r\n-    if (!this.billDatall) {\r\n-      throw new Error(\"Bill data is not available\");    \r\n-  }\r\n-}\r\n+    constructor() {\r\n+      this.billData = getBillData();\r\n+    }\r\n \r\n   render() {\r\n     const app = document.getElementById(\"app\");\r\n     app.innerHTML = `\r\n"
                },
                {
                    "date": 1731480077147,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,15 +1,21 @@\n import { gsap } from \"gsap\";\r\n-import { getBillData }  from \"../store/solarSizingState\";\r\n+import { getBillData } from \"../store/solarSizingState\";\r\n import { BillPreview } from \"./BillPreview\";\r\n \r\n export class BillReviewPage {\r\n-    constructor() {\r\n-      this.billData = getBillData();\r\n-    }\r\n+  constructor() {\r\n+    this.billData = getBillData();\r\n+  }\r\n \r\n   render() {\r\n     const app = document.getElementById(\"app\");\r\n+\r\n+    if (!this.billData) {\r\n+      this.renderError(app);\r\n+      return;\r\n+    }\r\n+\r\n     app.innerHTML = `\r\n         <div class=\"h-screen w-screen bg-white transition-colors duration-1000 overflow-hidden\">\r\n         <!-- Main Content -->\r\n         <div class=\"h-full w-full flex relative\">\r\n@@ -70,76 +76,75 @@\n \r\n     this.attachEventListeners();\r\n     this.renderBillPreview();\r\n     this.initializeAnimations();\r\n-    }\r\n+  }\r\n \r\n-    renderKeyMetric(title, value, description) {\r\n-        return `\r\n+  renderKeyMetric(title, value, description) {\r\n+    return `\r\n         <div class=\"metric-card opacity-0\">\r\n           <div class=\"flex justify-between items-start\">\r\n             <h3 class=\"text-gray-600 font-medium\">${title}</h3>\r\n             <span class=\"text-xl font-bold text-gray-900\">${value}</span>\r\n           </div>\r\n           <p class=\"text-sm text-gray-500 mt-1\">${description}</p>\r\n         </div>\r\n       `;\r\n-    }\r\n+  }\r\n \r\n-    renderBillPreview() {\r\n-        const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n-        const billPreview = new BillPreview(this.billData);\r\n-        billPreview.render(billPreviewContainer);\r\n-    }\r\n+  renderBillPreview() {\r\n+    const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n+    const billPreview = new BillPreview(this.billData);\r\n+    billPreview.render(billPreviewContainer);\r\n+  }\r\n \r\n-    attachEventListeners() {\r\n-        const proceedButton = document.getElementById(\"proceed-to-quote\");\r\n-        proceedButton.addEventListener(\"click\", () => {\r\n-          window.router.push(\"/quote\");\r\n-        });\r\n-    }\r\n+  attachEventListeners() {\r\n+    const proceedButton = document.getElementById(\"proceed-to-quote\");\r\n+    proceedButton.addEventListener(\"click\", () => {\r\n+      window.router.push(\"/quote\");\r\n+    });\r\n+  }\r\n \r\n-    initializeAnimations() {\r\n-        // Fade in metrics one by one\r\n-        gsap.fromTo(\r\n-          \".metric-card\",\r\n-          { opacity: 0, y: 20 },\r\n-          { \r\n-            opacity: 1, \r\n-            y: 0, \r\n-            duration: 0.5,\r\n-            stagger: 0.2,\r\n-            ease: \"power2.out\"\r\n-          }\r\n-        );\r\n-    \r\n-        // Animate the bill preview\r\n-        const billPreviewContainer = document.getElementById(\"bill-preview-container\");\r\n-        gsap.fromTo(\r\n-          billPreviewContainer,\r\n-          { opacity: 0, scale: 0.95 },\r\n-          { \r\n-            opacity: 1, \r\n-            scale: 1, \r\n-            duration: 0.8,\r\n-            ease: \"power2.out\"\r\n-          }\r\n-        );\r\n+  initializeAnimations() {\r\n+    // Fade in metrics one by one\r\n+    gsap.fromTo(\r\n+      \".metric-card\",\r\n\\ No newline at end of file\n+      { opacity: 0, y: 20 },\r\n+      {\r\n+        opacity: 1,\r\n+        y: 0,\r\n+        duration: 0.5,\r\n+        stagger: 0.2,\r\n+        ease: \"power2.out\",\r\n       }\r\n+    );\r\n \r\n-      addBaseStyles() {\r\n-        const style = document.createElement(\"style\");\r\n-        style.textContent = `\r\n+    // Animate the bill preview\r\n+    const billPreviewContainer = document.getElementById(\r\n+      \"bill-preview-container\"\r\n+    );\r\n+    gsap.fromTo(\r\n+      billPreviewContainer,\r\n+      { opacity: 0, scale: 0.95 },\r\n+      {\r\n+        opacity: 1,\r\n+        scale: 1,\r\n+        duration: 0.8,\r\n+        ease: \"power2.out\",\r\n+      }\r\n+    );\r\n+  }\r\n+\r\n+  addBaseStyles() {\r\n+    const style = document.createElement(\"style\");\r\n+    style.textContent = `\r\n           :root {\r\n             --color-primary: #00a651;\r\n             --color-primary-dark: #008c44;\r\n           }\r\n           \r\n           .bg-primary { background-color: var(--color-primary); }\r\n           .hover\\\\:bg-primary-dark:hover { background-color: var(--color-primary-dark); }\r\n         `;\r\n-        document.head.appendChild(style);\r\n-      }\r\n-\r\n-\r\n-    \r\n-}\n+    document.head.appendChild(style);\r\n+  }\r\n+}\r\n"
                },
                {
                    "date": 1731480092759,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,8 +90,24 @@\n         </div>\r\n       `;\r\n   }\r\n \r\n+  renderError(container) {\r\n+    container.innerHTML = `\r\n+      <div class=\"h-screen w-screen flex items-center justify-center bg-gray-50\">\r\n+        <div class=\"text-center\">\r\n+          <h2 class=\"text-2xl font-bold text-gray-800 mb-4\">No Bill Data Available</h2>\r\n+          <p class=\"text-gray-600 mb-6\">Please enter your reference number to get started.</p>\r\n+          <button \r\n+            class=\"px-6 py-3 bg-primary text-white rounded-full hover:bg-primary-dark transition-colors\"\r\n+            onclick=\"window.router.push('/')\">\r\n+            Go Back\r\n+          </button>\r\n+        </div>\r\n+      </div>\r\n+    `;\r\n+  }\r\n+\r\n   renderBillPreview() {\r\n     const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n     const billPreview = new BillPreview(this.billData);\r\n     billPreview.render(billPreviewContainer);\r\n@@ -146,5 +162,5 @@\n           .hover\\\\:bg-primary-dark:hover { background-color: var(--color-primary-dark); }\r\n         `;\r\n     document.head.appendChild(style);\r\n   }\r\n-}\n\\ No newline at end of file\n+}\r\n"
                },
                {
                    "date": 1731480131574,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,166 @@\n+import { gsap } from \"gsap\";\r\n+import { getBillData } from \"../store/solarSizingState\";\r\n+import { BillPreview } from \"./BillPreview\";\r\n+\r\n+export class BillReviewPage {\r\n+  constructor() {\r\n+    this.billData = getBillData();\r\n+  }\r\n+\r\n+  render() {\r\n+    const app = document.getElementById(\"app\");\r\n+\r\n+    if (!this.billData) {\r\n+      this.renderError(app);\r\n+      return;\r\n+    }\r\n+\r\n+    app.innerHTML = `\r\n+        <div class=\"h-screen w-screen bg-white transition-colors duration-1000 overflow-hidden\">\r\n+        <!-- Main Content -->\r\n+        <div class=\"h-full w-full flex relative\">\r\n+          <!-- Bill Preview Side -->\r\n+          <div class=\"w-1/2 h-full\" id=\"bill-preview-container\">\r\n+            <div id=\"bill-preview\" class=\"h-full\"></div>\r\n+          </div>\r\n+\r\n+          <!-- Insights Side -->\r\n+          <div class=\"w-1/2 h-full bg-gray-50 p-8 flex flex-col\">\r\n+            <div class=\"flex-1\">\r\n+              <h2 class=\"text-2xl font-bold text-gray-800 mb-6\">Bill Analysis</h2>\r\n+              \r\n+              <!-- Key Metrics -->\r\n+              <div class=\"space-y-6\">\r\n+                ${this.renderKeyMetric(\r\n+                  \"Monthly Consumption\",\r\n+                  `${this.billData.unitsConsumed} kWh`,\r\n+                  \"This is how much electricity you used last month\"\r\n+                )}\r\n+                \r\n+                ${this.renderKeyMetric(\r\n+                  \"Current Bill Amount\",\r\n+                  `Rs. ${this.billData.totalAmount}`,\r\n+                  \"Your total electricity charges including taxes\"\r\n+                )}\r\n+                \r\n+                ${this.renderKeyMetric(\r\n+                  \"Rate per Unit\",\r\n+                  `Rs. ${this.billData.ratePerUnit}/kWh`,\r\n+                  \"Your current electricity rate\"\r\n+                )}\r\n+              </div>\r\n+\r\n+              <!-- Analysis Summary -->\r\n+              <div class=\"mt-8 p-6 bg-white rounded-lg shadow-sm\">\r\n+                <h3 class=\"text-lg font-semibold text-gray-800 mb-3\">What This Means</h3>\r\n+                <p class=\"text-gray-600\">\r\n+                  Based on your consumption pattern, you could benefit from a solar installation.\r\n+                  Let's see how much you could save!\r\n+                </p>\r\n+              </div>\r\n+            </div>\r\n+\r\n+            <!-- Next Button -->\r\n+            <div class=\"mt-6\">\r\n+              <button \r\n+                id=\"proceed-to-quote\" \r\n+                class=\"w-full bg-primary text-white px-6 py-3 rounded-full font-medium hover:bg-primary-dark transition-colors duration-300\"\r\n+              >\r\n+                Generate My Solar Quote â†’\r\n+              </button>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n+    `;\r\n+\r\n+    this.attachEventListeners();\r\n+    this.renderBillPreview();\r\n+    this.initializeAnimations();\r\n+  }\r\n+\r\n+  renderKeyMetric(title, value, description) {\r\n+    return `\r\n+        <div class=\"metric-card opacity-0\">\r\n+          <div class=\"flex justify-between items-start\">\r\n+            <h3 class=\"text-gray-600 font-medium\">${title}</h3>\r\n+            <span class=\"text-xl font-bold text-gray-900\">${value}</span>\r\n+          </div>\r\n+          <p class=\"text-sm text-gray-500 mt-1\">${description}</p>\r\n+        </div>\r\n+      `;\r\n+  }\r\n+\r\n+  renderError(container) {\r\n+    container.innerHTML = `\r\n+      <div class=\"h-screen w-screen flex items-center justify-center bg-gray-50\">\r\n+        <div class=\"text-center\">\r\n+          <h2 class=\"text-2xl font-bold text-gray-800 mb-4\">No Bill Data Available</h2>\r\n+          <p class=\"text-gray-600 mb-6\">Please enter your reference number to get started.</p>\r\n+          <button \r\n+            class=\"px-6 py-3 bg-primary text-white rounded-full hover:bg-primary-dark transition-colors\"\r\n+            onclick=\"window.router.push('/')\">\r\n+            Go Back\r\n+          </button>\r\n+        </div>\r\n+      </div>\r\n+    `;\r\n+  }\r\n+\r\n+  renderBillPreview() {\r\n+    const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n+    const billPreview = new BillPreview(this.billData);\r\n+    billPreview.render(billPreviewContainer);\r\n+  }\r\n+\r\n+  attachEventListeners() {\r\n+    const proceedButton = document.getElementById(\"proceed-to-quote\");\r\n+    proceedButton.addEventListener(\"click\", () => {\r\n+      window.router.push(\"/quote\");\r\n+    });\r\n+  }\r\n+\r\n+  initializeAnimations() {\r\n+    // Fade in metrics one by one\r\n+    gsap.fromTo(\r\n+      \".metric-card\",\r\n+      { opacity: 0, y: 20 },\r\n+      {\r\n+        opacity: 1,\r\n+        y: 0,\r\n+        duration: 0.5,\r\n+        stagger: 0.2,\r\n+        ease: \"power2.out\",\r\n+      }\r\n+    );\r\n+\r\n+    // Animate the bill preview\r\n+    const billPreviewContainer = document.getElementById(\r\n+      \"bill-preview-container\"\r\n+    );\r\n+    gsap.fromTo(\r\n+      billPreviewContainer,\r\n+      { opacity: 0, scale: 0.95 },\r\n+      {\r\n+        opacity: 1,\r\n+        scale: 1,\r\n+        duration: 0.8,\r\n+        ease: \"power2.out\",\r\n+      }\r\n+    );\r\n+  }\r\n+\r\n+  addBaseStyles() {\r\n+    const style = document.createElement(\"style\");\r\n+    style.textContent = `\r\n+          :root {\r\n+            --color-primary: #00a651;\r\n+            --color-primary-dark: #008c44;\r\n+          }\r\n+          \r\n+          .bg-primary { background-color: var(--color-primary); }\r\n+          .hover\\\\:bg-primary-dark:hover { background-color: var(--color-primary-dark); }\r\n+        `;\r\n+    document.head.appendChild(style);\r\n+  }\r\n+}\r\n"
                },
                {
                    "date": 1731480354520,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,179 @@\n+// src/js/components/BillReviewPage.js\r\n+import { gsap } from \"gsap\";\r\n+import { getBillData } from \"../store/solarSizingState.js\";\r\n+import { BillPreview } from \"./BillPreview.js\";\r\n+\r\n+export class BillReviewPage {\r\n+  constructor() {\r\n+    this.billData = getBillData();\r\n+  }\r\n+\r\n+  render() {\r\n+    const app = document.getElementById(\"app\");\r\n+    \r\n+    if (!this.billData) {\r\n+      this.renderError(app);\r\n+      return;\r\n+    }\r\n+\r\n+    app.innerHTML = `\r\n+      <div class=\"h-screen w-screen bg-white transition-colors duration-1000 overflow-hidden\">\r\n+        <!-- Main Content -->\r\n+        <div class=\"h-full w-full flex relative\" id=\"main-content\">\r\n+          <!-- Bill Preview Side -->\r\n+          <div class=\"w-1/2 h-full\" id=\"bill-preview-container\">\r\n+            <div id=\"bill-preview\" class=\"h-full\"></div>\r\n+          </div>\r\n+\r\n+          <!-- Loading Indicator -->\r\n+          <div class=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center z-10\" \r\n+               id=\"loading-indicator\">\r\n+            <div class=\"w-10 h-10 border-4 border-primary border-l-transparent rounded-full animate-spin mb-2\"></div>\r\n+            <p class=\"text-primary font-medium\">Analyzing your bill...</p>\r\n+          </div>\r\n+\r\n+          <!-- Insights Side -->\r\n+          <div class=\"w-1/2 h-full bg-gray-50 p-8 flex flex-col\" id=\"insights-container\">\r\n+            <div class=\"flex-1\">\r\n+              <h2 class=\"text-2xl font-bold text-gray-800 mb-6 opacity-0\">Bill Analysis</h2>\r\n+              \r\n+              <!-- Key Metrics -->\r\n+              <div class=\"space-y-6\">\r\n+                ${this.renderKeyMetric(\r\n+                  \"Monthly Consumption\",\r\n+                  `${this.billData.unitsConsumed} kWh`,\r\n+                  \"This is how much electricity you used last month\"\r\n+                )}\r\n+                \r\n+                ${this.renderKeyMetric(\r\n+                  \"Current Bill Amount\",\r\n+                  `Rs. ${this.billData.totalAmount}`,\r\n+                  \"Your total electricity charges including taxes\"\r\n+                )}\r\n+                \r\n+                ${this.renderKeyMetric(\r\n+                  \"Rate per Unit\",\r\n+                  `Rs. ${this.billData.ratePerUnit}/kWh`,\r\n+                  \"Your current electricity rate\"\r\n+                )}\r\n+              </div>\r\n+\r\n+              <!-- Next Step Card -->\r\n+              <div class=\"mt-8 p-6 bg-white rounded-lg shadow-sm opacity-0\" id=\"next-step-card\">\r\n+                <h3 class=\"text-lg font-semibold text-gray-800 mb-3\">Ready For Your Solar Quote?</h3>\r\n+                <p class=\"text-gray-600 mb-4\">\r\n+                  We've analyzed your bill. Now let's see how much you could save with solar!\r\n+                </p>\r\n+                <button \r\n+                  id=\"proceed-to-quote\" \r\n+                  class=\"w-full bg-primary text-white px-6 py-3 rounded-full font-medium hover:bg-primary-dark transition-colors duration-300\"\r\n+                >\r\n+                  Generate My Solar Quote â†’\r\n+                </button>\r\n+              </div>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n+    `;\r\n+\r\n+    this.attachEventListeners();\r\n+    this.renderBillPreview();\r\n+    this.startAnimation();\r\n+  }\r\n+\r\n+  renderKeyMetric(title, value, description) {\r\n+    return `\r\n+      <div class=\"metric-card opacity-0\">\r\n+        <div class=\"flex justify-between items-start\">\r\n+          <h3 class=\"text-gray-600 font-medium\">${title}</h3>\r\n+          <span class=\"text-xl font-bold text-gray-900\">${value}</span>\r\n+        </div>\r\n+        <p class=\"text-sm text-gray-500 mt-1\">${description}</p>\r\n+      </div>\r\n+    `;\r\n+  }\r\n+\r\n+  renderBillPreview() {\r\n+    const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n+    const billPreview = new BillPreview(this.billData);\r\n+    billPreview.render(billPreviewContainer);\r\n+  }\r\n+\r\n+  async startAnimation() {\r\n+    const billPreviewContainer = document.getElementById(\"bill-preview-container\");\r\n+    const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n+    const insightsContainer = document.getElementById(\"insights-container\");\r\n+    const metrics = document.querySelectorAll(\".metric-card\");\r\n+    const nextStepCard = document.getElementById(\"next-step-card\");\r\n+    const pageTitle = document.querySelector(\"h2\");\r\n+\r\n+    // Initial states\r\n+    gsap.set([billPreviewContainer, loadingIndicator, metrics, nextStepCard, pageTitle], {\r\n+      opacity: 0\r\n+    });\r\n+    gsap.set(billPreviewContainer, {\r\n+      scale: 0.9,\r\n+      position: 'absolute',\r\n+      left: '50%',\r\n+      top: '50%',\r\n+      xPercent: -50,\r\n+      yPercent: -50,\r\n+      width: \"47.5%\"\r\n+    });\r\n+\r\n+    // Animation sequence\r\n+    const tl = gsap.timeline({\r\n+      defaults: { duration: 0.8, ease: \"power2.out\" }\r\n+    });\r\n+\r\n+    await tl\r\n+      .to(billPreviewContainer, {\r\n+        opacity: 1,\r\n+        scale: 1,\r\n+        duration: 1\r\n+      })\r\n+      .to(loadingIndicator, {\r\n+        opacity: 1,\r\n+        scale: 1,\r\n+        duration: 0.5\r\n+      })\r\n+      .to(loadingIndicator, {\r\n+        opacity: 0,\r\n+        scale: 0.5,\r\n+        delay: 1\r\n+      })\r\n+      .to(billPreviewContainer, {\r\n+        left: \"0%\",\r\n+        top: \"0%\",\r\n+        xPercent: 0,\r\n+        yPercent: 0,\r\n+        width: \"50%\",\r\n+        position: 'relative'\r\n+      }, \"-=0.3\")\r\n+      // Fade in insights section\r\n+      .to(pageTitle, {\r\n+        opacity: 1,\r\n+        y: 0,\r\n+        duration: 0.5\r\n+      })\r\n+      .to(metrics, {\r\n+        opacity: 1,\r\n+        y: 0,\r\n+        stagger: 0.2,\r\n+        duration: 0.5\r\n+      })\r\n+      .to(nextStepCard, {\r\n+        opacity: 1,\r\n+        y: 0,\r\n+        duration: 0.5\r\n+      });\r\n+  }\r\n+\r\n+  attachEventListeners() {\r\n+    const proceedButton = document.getElementById(\"proceed-to-quote\");\r\n+    proceedButton.addEventListener(\"click\", () => {\r\n+      window.router.push(\"/quote\");\r\n+    });\r\n+  }\r\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731480481880,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,9 @@\n   }\r\n \r\n   render() {\r\n     const app = document.getElementById(\"app\");\r\n-    \r\n+\r\n     if (!this.billData) {\r\n       this.renderError(app);\r\n       return;\r\n     }\r\n@@ -32,44 +32,84 @@\n             <p class=\"text-primary font-medium\">Analyzing your bill...</p>\r\n           </div>\r\n \r\n           <!-- Insights Side -->\r\n-          <div class=\"w-1/2 h-full bg-gray-50 p-8 flex flex-col\" id=\"insights-container\">\r\n+          <div class=\"w-1/2 h-full bg-gradient-to-br from-gray-50 to-white p-8 flex flex-col\" id=\"insights-container\">\r\n             <div class=\"flex-1\">\r\n-              <h2 class=\"text-2xl font-bold text-gray-800 mb-6 opacity-0\">Bill Analysis</h2>\r\n+              <div class=\"flex items-center space-x-3 mb-8 opacity-0\" id=\"page-header\">\r\n+                <div class=\"w-1 h-8 bg-primary rounded-full\"></div>\r\n+                <h2 class=\"text-2xl font-bold text-gray-800\">Bill Analysis</h2>\r\n+              </div>\r\n               \r\n-              <!-- Key Metrics -->\r\n-              <div class=\"space-y-6\">\r\n+              <!-- Progress Bar -->\r\n+              <div class=\"mb-8 flex items-center justify-between text-sm opacity-0\" id=\"progress-bar\">\r\n+                <div class=\"flex items-center\">\r\n+                  <div class=\"w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center font-semibold\">1</div>\r\n+                  <div class=\"ml-3\">\r\n+                    <p class=\"font-medium text-gray-800\">Bill Review</p>\r\n+                    <p class=\"text-gray-500\">Analyzing your consumption</p>\r\n+                  </div>\r\n+                </div>\r\n+                <div class=\"flex items-center\">\r\n+                  <div class=\"w-8 h-8 rounded-full bg-gray-200 text-gray-400 flex items-center justify-center font-semibold\">2</div>\r\n+                  <div class=\"ml-3\">\r\n+                    <p class=\"font-medium text-gray-400\">Solar Quote</p>\r\n+                    <p class=\"text-gray-400\">Up next</p>\r\n+                  </div>\r\n+                </div>\r\n+              </div>\r\n+\r\n+              <!-- Key Metrics Grid -->\r\n+              <div class=\"grid grid-cols-2 gap-4 mb-8\">\r\n                 ${this.renderKeyMetric(\r\n                   \"Monthly Consumption\",\r\n-                  `${this.billData.unitsConsumed} kWh`,\r\n-                  \"This is how much electricity you used last month\"\r\n+                  `${this.billData.unitsConsumed}`,\r\n+                  \"kWh\",\r\n+                  \"This is how much electricity you used last month\",\r\n+                  \"lightning-bolt\"\r\n                 )}\r\n                 \r\n                 ${this.renderKeyMetric(\r\n-                  \"Current Bill Amount\",\r\n-                  `Rs. ${this.billData.totalAmount}`,\r\n-                  \"Your total electricity charges including taxes\"\r\n+                  \"Current Bill\",\r\n+                  `${this.billData.totalAmount}`,\r\n+                  \"Rs.\",\r\n+                  \"Your total electricity charges including taxes\",\r\n+                  \"cash\"\r\n                 )}\r\n                 \r\n                 ${this.renderKeyMetric(\r\n                   \"Rate per Unit\",\r\n-                  `Rs. ${this.billData.ratePerUnit}/kWh`,\r\n-                  \"Your current electricity rate\"\r\n+                  `${this.billData.ratePerUnit}`,\r\n+                  \"Rs/kWh\",\r\n+                  \"Your current electricity rate\",\r\n+                  \"chart-bar\"\r\n                 )}\r\n+                \r\n+                ${this.renderKeyMetric(\r\n+                  \"Bill Due Date\",\r\n+                  `${this.billData.dueDate}`,\r\n+                  \"\",\r\n+                  \"Make sure to pay before this date\",\r\n+                  \"calendar\"\r\n+                )}\r\n               </div>\r\n \r\n               <!-- Next Step Card -->\r\n-              <div class=\"mt-8 p-6 bg-white rounded-lg shadow-sm opacity-0\" id=\"next-step-card\">\r\n-                <h3 class=\"text-lg font-semibold text-gray-800 mb-3\">Ready For Your Solar Quote?</h3>\r\n+              <div class=\"relative mt-auto p-6 bg-white rounded-2xl shadow-sm opacity-0 border border-gray-100\" id=\"next-step-card\">\r\n+                <div class=\"absolute -top-3 -right-3 w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center\">\r\n+                  <svg class=\"w-8 h-8 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 7l5 5m0 0l-5 5m5-5H6\"></path>\r\n+                  </svg>\r\n+                </div>\r\n+                <h3 class=\"text-lg font-semibold text-gray-800 mb-2\">Ready For Your Solar Quote?</h3>\r\n                 <p class=\"text-gray-600 mb-4\">\r\n                   We've analyzed your bill. Now let's see how much you could save with solar!\r\n                 </p>\r\n                 <button \r\n                   id=\"proceed-to-quote\" \r\n-                  class=\"w-full bg-primary text-white px-6 py-3 rounded-full font-medium hover:bg-primary-dark transition-colors duration-300\"\r\n+                  class=\"w-full bg-gradient-to-r from-primary to-primary-dark text-white px-6 py-3.5 rounded-xl font-medium hover:from-primary-dark hover:to-primary-dark transition-all duration-300 shadow-sm hover:shadow-md\"\r\n                 >\r\n-                  Generate My Solar Quote â†’\r\n+                  Generate My Solar Quote\r\n                 </button>\r\n               </div>\r\n             </div>\r\n           </div>\r\n@@ -100,74 +140,89 @@\n     billPreview.render(billPreviewContainer);\r\n   }\r\n \r\n   async startAnimation() {\r\n-    const billPreviewContainer = document.getElementById(\"bill-preview-container\");\r\n+    const billPreviewContainer = document.getElementById(\r\n+      \"bill-preview-container\"\r\n+    );\r\n     const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n     const insightsContainer = document.getElementById(\"insights-container\");\r\n     const metrics = document.querySelectorAll(\".metric-card\");\r\n     const nextStepCard = document.getElementById(\"next-step-card\");\r\n     const pageTitle = document.querySelector(\"h2\");\r\n \r\n     // Initial states\r\n-    gsap.set([billPreviewContainer, loadingIndicator, metrics, nextStepCard, pageTitle], {\r\n-      opacity: 0\r\n-    });\r\n+    gsap.set(\r\n+      [\r\n+        billPreviewContainer,\r\n+        loadingIndicator,\r\n+        metrics,\r\n+        nextStepCard,\r\n+        pageTitle,\r\n+      ],\r\n+      {\r\n+        opacity: 0,\r\n+      }\r\n+    );\r\n     gsap.set(billPreviewContainer, {\r\n       scale: 0.9,\r\n-      position: 'absolute',\r\n-      left: '50%',\r\n-      top: '50%',\r\n+      position: \"absolute\",\r\n+      left: \"50%\",\r\n+      top: \"50%\",\r\n       xPercent: -50,\r\n       yPercent: -50,\r\n-      width: \"47.5%\"\r\n+      width: \"47.5%\",\r\n     });\r\n \r\n     // Animation sequence\r\n     const tl = gsap.timeline({\r\n-      defaults: { duration: 0.8, ease: \"power2.out\" }\r\n+      defaults: { duration: 0.8, ease: \"power2.out\" },\r\n     });\r\n \r\n     await tl\r\n       .to(billPreviewContainer, {\r\n         opacity: 1,\r\n         scale: 1,\r\n-        duration: 1\r\n+        duration: 1,\r\n       })\r\n       .to(loadingIndicator, {\r\n         opacity: 1,\r\n         scale: 1,\r\n-        duration: 0.5\r\n+        duration: 0.5,\r\n       })\r\n       .to(loadingIndicator, {\r\n         opacity: 0,\r\n         scale: 0.5,\r\n-        delay: 1\r\n+        delay: 1,\r\n       })\r\n-      .to(billPreviewContainer, {\r\n-        left: \"0%\",\r\n-        top: \"0%\",\r\n-        xPercent: 0,\r\n-        yPercent: 0,\r\n-        width: \"50%\",\r\n-        position: 'relative'\r\n-      }, \"-=0.3\")\r\n+      .to(\r\n+        billPreviewContainer,\r\n+        {\r\n+          left: \"0%\",\r\n+          top: \"0%\",\r\n+          xPercent: 0,\r\n+          yPercent: 0,\r\n+          width: \"50%\",\r\n+          position: \"relative\",\r\n+        },\r\n+        \"-=0.3\"\r\n+      )\r\n       // Fade in insights section\r\n       .to(pageTitle, {\r\n         opacity: 1,\r\n         y: 0,\r\n-        duration: 0.5\r\n+        duration: 0.5,\r\n       })\r\n       .to(metrics, {\r\n         opacity: 1,\r\n         y: 0,\r\n         stagger: 0.2,\r\n-        duration: 0.5\r\n+        duration: 0.5,\r\n       })\r\n       .to(nextStepCard, {\r\n         opacity: 1,\r\n         y: 0,\r\n-        duration: 0.5\r\n+        duration: 0.5,\r\n       });\r\n   }\r\n \r\n   attachEventListeners() {\r\n@@ -175,337 +230,5 @@\n     proceedButton.addEventListener(\"click\", () => {\r\n       window.router.push(\"/quote\");\r\n     });\r\n   }\r\n-}\n-import { gsap } from \"gsap\";\r\n-import { getBillData } from \"../store/solarSizingState\";\r\n-import { BillPreview } from \"./BillPreview\";\r\n-\r\n-export class BillReviewPage {\r\n-  constructor() {\r\n-    this.billData = getBillData();\r\n-  }\r\n-\r\n-  render() {\r\n-    const app = document.getElementById(\"app\");\r\n-\r\n-    if (!this.billData) {\r\n-      this.renderError(app);\r\n-      return;\r\n-    }\r\n-\r\n-    app.innerHTML = `\r\n-        <div class=\"h-screen w-screen bg-white transition-colors duration-1000 overflow-hidden\">\r\n-        <!-- Main Content -->\r\n-        <div class=\"h-full w-full flex relative\">\r\n-          <!-- Bill Preview Side -->\r\n-          <div class=\"w-1/2 h-full\" id=\"bill-preview-container\">\r\n-            <div id=\"bill-preview\" class=\"h-full\"></div>\r\n-          </div>\r\n-\r\n-          <!-- Insights Side -->\r\n-          <div class=\"w-1/2 h-full bg-gray-50 p-8 flex flex-col\">\r\n-            <div class=\"flex-1\">\r\n-              <h2 class=\"text-2xl font-bold text-gray-800 mb-6\">Bill Analysis</h2>\r\n-              \r\n-              <!-- Key Metrics -->\r\n-              <div class=\"space-y-6\">\r\n-                ${this.renderKeyMetric(\r\n-                  \"Monthly Consumption\",\r\n-                  `${this.billData.unitsConsumed} kWh`,\r\n-                  \"This is how much electricity you used last month\"\r\n-                )}\r\n-                \r\n-                ${this.renderKeyMetric(\r\n-                  \"Current Bill Amount\",\r\n-                  `Rs. ${this.billData.totalAmount}`,\r\n-                  \"Your total electricity charges including taxes\"\r\n-                )}\r\n-                \r\n-                ${this.renderKeyMetric(\r\n-                  \"Rate per Unit\",\r\n-                  `Rs. ${this.billData.ratePerUnit}/kWh`,\r\n-                  \"Your current electricity rate\"\r\n-                )}\r\n-              </div>\r\n-\r\n-              <!-- Analysis Summary -->\r\n-              <div class=\"mt-8 p-6 bg-white rounded-lg shadow-sm\">\r\n-                <h3 class=\"text-lg font-semibold text-gray-800 mb-3\">What This Means</h3>\r\n-                <p class=\"text-gray-600\">\r\n-                  Based on your consumption pattern, you could benefit from a solar installation.\r\n-                  Let's see how much you could save!\r\n-                </p>\r\n-              </div>\r\n-            </div>\r\n-\r\n-            <!-- Next Button -->\r\n-            <div class=\"mt-6\">\r\n-              <button \r\n-                id=\"proceed-to-quote\" \r\n-                class=\"w-full bg-primary text-white px-6 py-3 rounded-full font-medium hover:bg-primary-dark transition-colors duration-300\"\r\n-              >\r\n-                Generate My Solar Quote â†’\r\n-              </button>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-      </div>\r\n-    `;\r\n-\r\n-    this.attachEventListeners();\r\n-    this.renderBillPreview();\r\n-    this.initializeAnimations();\r\n-  }\r\n-\r\n-  renderKeyMetric(title, value, description) {\r\n-    return `\r\n-        <div class=\"metric-card opacity-0\">\r\n-          <div class=\"flex justify-between items-start\">\r\n-            <h3 class=\"text-gray-600 font-medium\">${title}</h3>\r\n-            <span class=\"text-xl font-bold text-gray-900\">${value}</span>\r\n-          </div>\r\n-          <p class=\"text-sm text-gray-500 mt-1\">${description}</p>\r\n-        </div>\r\n-      `;\r\n-  }\r\n-\r\n-  renderError(container) {\r\n-    container.innerHTML = `\r\n-      <div class=\"h-screen w-screen flex items-center justify-center bg-gray-50\">\r\n-        <div class=\"text-center\">\r\n-          <h2 class=\"text-2xl font-bold text-gray-800 mb-4\">No Bill Data Available</h2>\r\n-          <p class=\"text-gray-600 mb-6\">Please enter your reference number to get started.</p>\r\n-          <button \r\n-            class=\"px-6 py-3 bg-primary text-white rounded-full hover:bg-primary-dark transition-colors\"\r\n-            onclick=\"window.router.push('/')\">\r\n-            Go Back\r\n-          </button>\r\n-        </div>\r\n-      </div>\r\n-    `;\r\n-  }\r\n-\r\n-  renderBillPreview() {\r\n-    const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n-    const billPreview = new BillPreview(this.billData);\r\n-    billPreview.render(billPreviewContainer);\r\n-  }\r\n-\r\n-  attachEventListeners() {\r\n-    const proceedButton = document.getElementById(\"proceed-to-quote\");\r\n-    proceedButton.addEventListener(\"click\", () => {\r\n-      window.router.push(\"/quote\");\r\n-    });\r\n-  }\r\n-\r\n-  initializeAnimations() {\r\n-    // Fade in metrics one by one\r\n-    gsap.fromTo(\r\n-      \".metric-card\",\r\n-      { opacity: 0, y: 20 },\r\n-      {\r\n-        opacity: 1,\r\n-        y: 0,\r\n-        duration: 0.5,\r\n-        stagger: 0.2,\r\n-        ease: \"power2.out\",\r\n-      }\r\n-    );\r\n-\r\n-    // Animate the bill preview\r\n-    const billPreviewContainer = document.getElementById(\r\n-      \"bill-preview-container\"\r\n-    );\r\n-    gsap.fromTo(\r\n-      billPreviewContainer,\r\n-      { opacity: 0, scale: 0.95 },\r\n-      {\r\n-        opacity: 1,\r\n-        scale: 1,\r\n-        duration: 0.8,\r\n-        ease: \"power2.out\",\r\n-      }\r\n-    );\r\n-  }\r\n-\r\n-  addBaseStyles() {\r\n-    const style = document.createElement(\"style\");\r\n-    style.textContent = `\r\n-          :root {\r\n-            --color-primary: #00a651;\r\n-            --color-primary-dark: #008c44;\r\n-          }\r\n-          \r\n-          .bg-primary { background-color: var(--color-primary); }\r\n-          .hover\\\\:bg-primary-dark:hover { background-color: var(--color-primary-dark); }\r\n-        `;\r\n-    document.head.appendChild(style);\r\n-  }\r\n }\r\n-import { gsap } from \"gsap\";\r\n-import { getBillData } from \"../store/solarSizingState\";\r\n-import { BillPreview } from \"./BillPreview\";\r\n-\r\n-export class BillReviewPage {\r\n-  constructor() {\r\n-    this.billData = getBillData();\r\n-  }\r\n-\r\n-  render() {\r\n-    const app = document.getElementById(\"app\");\r\n-\r\n-    if (!this.billData) {\r\n-      this.renderError(app);\r\n-      return;\r\n-    }\r\n-\r\n-    app.innerHTML = `\r\n-        <div class=\"h-screen w-screen bg-white transition-colors duration-1000 overflow-hidden\">\r\n-        <!-- Main Content -->\r\n-        <div class=\"h-full w-full flex relative\">\r\n-          <!-- Bill Preview Side -->\r\n-          <div class=\"w-1/2 h-full\" id=\"bill-preview-container\">\r\n-            <div id=\"bill-preview\" class=\"h-full\"></div>\r\n-          </div>\r\n-\r\n-          <!-- Insights Side -->\r\n-          <div class=\"w-1/2 h-full bg-gray-50 p-8 flex flex-col\">\r\n-            <div class=\"flex-1\">\r\n-              <h2 class=\"text-2xl font-bold text-gray-800 mb-6\">Bill Analysis</h2>\r\n-              \r\n-              <!-- Key Metrics -->\r\n-              <div class=\"space-y-6\">\r\n-                ${this.renderKeyMetric(\r\n-                  \"Monthly Consumption\",\r\n-                  `${this.billData.unitsConsumed} kWh`,\r\n-                  \"This is how much electricity you used last month\"\r\n-                )}\r\n-                \r\n-                ${this.renderKeyMetric(\r\n-                  \"Current Bill Amount\",\r\n-                  `Rs. ${this.billData.totalAmount}`,\r\n-                  \"Your total electricity charges including taxes\"\r\n-                )}\r\n-                \r\n-                ${this.renderKeyMetric(\r\n-                  \"Rate per Unit\",\r\n-                  `Rs. ${this.billData.ratePerUnit}/kWh`,\r\n-                  \"Your current electricity rate\"\r\n-                )}\r\n-              </div>\r\n-\r\n-              <!-- Analysis Summary -->\r\n-              <div class=\"mt-8 p-6 bg-white rounded-lg shadow-sm\">\r\n-                <h3 class=\"text-lg font-semibold text-gray-800 mb-3\">What This Means</h3>\r\n-                <p class=\"text-gray-600\">\r\n-                  Based on your consumption pattern, you could benefit from a solar installation.\r\n-                  Let's see how much you could save!\r\n-                </p>\r\n-              </div>\r\n-            </div>\r\n-\r\n-            <!-- Next Button -->\r\n-            <div class=\"mt-6\">\r\n-              <button \r\n-                id=\"proceed-to-quote\" \r\n-                class=\"w-full bg-primary text-white px-6 py-3 rounded-full font-medium hover:bg-primary-dark transition-colors duration-300\"\r\n-              >\r\n-                Generate My Solar Quote â†’\r\n-              </button>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-      </div>\r\n-    `;\r\n-\r\n-    this.attachEventListeners();\r\n-    this.renderBillPreview();\r\n-    this.initializeAnimations();\r\n-  }\r\n-\r\n-  renderKeyMetric(title, value, description) {\r\n-    return `\r\n-        <div class=\"metric-card opacity-0\">\r\n-          <div class=\"flex justify-between items-start\">\r\n-            <h3 class=\"text-gray-600 font-medium\">${title}</h3>\r\n-            <span class=\"text-xl font-bold text-gray-900\">${value}</span>\r\n-          </div>\r\n-          <p class=\"text-sm text-gray-500 mt-1\">${description}</p>\r\n-        </div>\r\n-      `;\r\n-  }\r\n-\r\n-  renderError(container) {\r\n-    container.innerHTML = `\r\n-      <div class=\"h-screen w-screen flex items-center justify-center bg-gray-50\">\r\n-        <div class=\"text-center\">\r\n-          <h2 class=\"text-2xl font-bold text-gray-800 mb-4\">No Bill Data Available</h2>\r\n-          <p class=\"text-gray-600 mb-6\">Please enter your reference number to get started.</p>\r\n-          <button \r\n-            class=\"px-6 py-3 bg-primary text-white rounded-full hover:bg-primary-dark transition-colors\"\r\n-            onclick=\"window.router.push('/')\">\r\n-            Go Back\r\n-          </button>\r\n-        </div>\r\n-      </div>\r\n-    `;\r\n-  }\r\n-\r\n-  renderBillPreview() {\r\n-    const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n-    const billPreview = new BillPreview(this.billData);\r\n-    billPreview.render(billPreviewContainer);\r\n-  }\r\n-\r\n-  attachEventListeners() {\r\n-    const proceedButton = document.getElementById(\"proceed-to-quote\");\r\n-    proceedButton.addEventListener(\"click\", () => {\r\n-      window.router.push(\"/quote\");\r\n-    });\r\n-  }\r\n-\r\n-  initializeAnimations() {\r\n-    // Fade in metrics one by one\r\n-    gsap.fromTo(\r\n-      \".metric-card\",\r\n-      { opacity: 0, y: 20 },\r\n-      {\r\n-        opacity: 1,\r\n-        y: 0,\r\n-        duration: 0.5,\r\n-        stagger: 0.2,\r\n-        ease: \"power2.out\",\r\n-      }\r\n-    );\r\n-\r\n-    // Animate the bill preview\r\n-    const billPreviewContainer = document.getElementById(\r\n-      \"bill-preview-container\"\r\n-    );\r\n-    gsap.fromTo(\r\n-      billPreviewContainer,\r\n-      { opacity: 0, scale: 0.95 },\r\n-      {\r\n-        opacity: 1,\r\n-        scale: 1,\r\n-        duration: 0.8,\r\n-        ease: \"power2.out\",\r\n-      }\r\n-    );\r\n-  }\r\n-\r\n-  addBaseStyles() {\r\n-    const style = document.createElement(\"style\");\r\n-    style.textContent = `\r\n-          :root {\r\n-            --color-primary: #00a651;\r\n-            --color-primary-dark: #008c44;\r\n-          }\r\n-          \r\n-          .bg-primary { background-color: var(--color-primary); }\r\n-          .hover\\\\:bg-primary-dark:hover { background-color: var(--color-primary-dark); }\r\n-        `;\r\n-    document.head.appendChild(style);\r\n-  }\r\n-}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731480519020,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -121,15 +121,32 @@\n     this.renderBillPreview();\r\n     this.startAnimation();\r\n   }\r\n \r\n-  renderKeyMetric(title, value, description) {\r\n+  renderKeyMetric(title, value, unit, description, icon) {\r\n+    const icons = {\r\n+      \"lightning-bolt\": `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />`,\r\n+      cash: `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />`,\r\n+      \"chart-bar\": `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />`,\r\n+      calendar: `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />`,\r\n+    };\r\n+\r\n     return `\r\n-      <div class=\"metric-card opacity-0\">\r\n-        <div class=\"flex justify-between items-start\">\r\n-          <h3 class=\"text-gray-600 font-medium\">${title}</h3>\r\n-          <span class=\"text-xl font-bold text-gray-900\">${value}</span>\r\n+      <div class=\"metric-card opacity-0 p-4 bg-white rounded-xl border border-gray-100 hover:shadow-md transition-shadow duration-300\">\r\n+        <div class=\"flex items-start justify-between mb-3\">\r\n+          <div class=\"flex items-center space-x-3\">\r\n+            <div class=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center\">\r\n+              <svg class=\"w-5 h-5 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                ${icons[icon]}\r\n+              </svg>\r\n+            </div>\r\n+            <h3 class=\"text-sm font-medium text-gray-600\">${title}</h3>\r\n+          </div>\r\n         </div>\r\n+        <div class=\"flex items-baseline space-x-1\">\r\n+          <span class=\"text-2xl font-bold text-gray-900\">${value}</span>\r\n+          <span class=\"text-sm font-medium text-gray-500\">${unit}</span>\r\n+        </div>\r\n         <p class=\"text-sm text-gray-500 mt-1\">${description}</p>\r\n       </div>\r\n     `;\r\n   }\r\n"
                },
                {
                    "date": 1731480575425,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -166,8 +166,10 @@\n     const metrics = document.querySelectorAll(\".metric-card\");\r\n     const nextStepCard = document.getElementById(\"next-step-card\");\r\n     const pageTitle = document.querySelector(\"h2\");\r\n \r\n+    \r\n+\r\n     // Initial states\r\n     gsap.set(\r\n       [\r\n         billPreviewContainer,\r\n@@ -223,24 +225,29 @@\n         },\r\n         \"-=0.3\"\r\n       )\r\n       // Fade in insights section\r\n-      .to(pageTitle, {\r\n+      .to(\"#page-header\", {\r\n         opacity: 1,\r\n         y: 0,\r\n-        duration: 0.5,\r\n+        duration: 0.5\r\n       })\r\n-      .to(metrics, {\r\n+      .to(\"#progress-bar\", {\r\n         opacity: 1,\r\n         y: 0,\r\n-        stagger: 0.2,\r\n-        duration: 0.5,\r\n-      })\r\n-      .to(nextStepCard, {\r\n+        duration: 0.5\r\n+      }, \"-=0.3\")\r\n+      .to(\".metric-card\", {\r\n         opacity: 1,\r\n         y: 0,\r\n-        duration: 0.5,\r\n-      });\r\n+        stagger: 0.15,\r\n+        duration: 0.5\r\n+      }, \"-=0.2\")\r\n+      .to(\"#next-step-card\", {\r\n+        opacity: 1,\r\n+        y: 0,\r\n+        duration: 0.5\r\n+      }, \"-=0.2\");\r\n   }\r\n \r\n   attachEventListeners() {\r\n     const proceedButton = document.getElementById(\"proceed-to-quote\");\r\n"
                },
                {
                    "date": 1731480803609,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,258 +1,256 @@\n-// src/js/components/BillReviewPage.js\r\n-import { gsap } from \"gsap\";\r\n-import { getBillData } from \"../store/solarSizingState.js\";\r\n-import { BillPreview } from \"./BillPreview.js\";\r\n+// Enhanced insights section in BillReviewPage class\r\n \r\n-export class BillReviewPage {\r\n-  constructor() {\r\n-    this.billData = getBillData();\r\n-  }\r\n-\r\n-  render() {\r\n-    const app = document.getElementById(\"app\");\r\n-\r\n-    if (!this.billData) {\r\n-      this.renderError(app);\r\n-      return;\r\n-    }\r\n-\r\n-    app.innerHTML = `\r\n-      <div class=\"h-screen w-screen bg-white transition-colors duration-1000 overflow-hidden\">\r\n-        <!-- Main Content -->\r\n-        <div class=\"h-full w-full flex relative\" id=\"main-content\">\r\n-          <!-- Bill Preview Side -->\r\n-          <div class=\"w-1/2 h-full\" id=\"bill-preview-container\">\r\n-            <div id=\"bill-preview\" class=\"h-full\"></div>\r\n+renderInsights() {\r\n+    const insightsContainer = document.querySelector(\"#insights-container\");\r\n+    if (!insightsContainer) return;\r\n+  \r\n+    // Generate trend data\r\n+    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'];\r\n+    const trendData = months.map(month => ({\r\n+      month,\r\n+      consumption: Math.floor(this.billData.unitsConsumed * (0.8 + Math.random() * 0.4))\r\n+    }));\r\n+  \r\n+    insightsContainer.innerHTML = `\r\n+      <div class=\"flex-1\">\r\n+        <!-- Header -->\r\n+        <div class=\"flex items-center space-x-3 mb-8 opacity-0\" id=\"page-header\">\r\n+          <div class=\"w-1 h-8 bg-blue-600 rounded-full\"></div>\r\n+          <h2 class=\"text-2xl font-bold text-gray-800\">Bill Analysis</h2>\r\n+        </div>\r\n+        \r\n+        <!-- Progress Bar -->\r\n+        <div class=\"mb-8 flex items-center justify-between text-sm opacity-0 bg-white rounded-xl p-6 shadow-sm\" id=\"progress-container\">\r\n+          <div class=\"flex items-center\">\r\n+            <div class=\"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center font-semibold\">1</div>\r\n+            <div class=\"ml-3\">\r\n+              <p class=\"font-medium text-gray-800\">Bill Review</p>\r\n+              <p class=\"text-gray-500\">Analyzing your consumption</p>\r\n+            </div>\r\n           </div>\r\n-\r\n-          <!-- Loading Indicator -->\r\n-          <div class=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center z-10\" \r\n-               id=\"loading-indicator\">\r\n-            <div class=\"w-10 h-10 border-4 border-primary border-l-transparent rounded-full animate-spin mb-2\"></div>\r\n-            <p class=\"text-primary font-medium\">Analyzing your bill...</p>\r\n+          <div class=\"flex items-center\">\r\n+            <div class=\"w-8 h-8 rounded-full bg-gray-200 text-gray-400 flex items-center justify-center font-semibold\">2</div>\r\n+            <div class=\"ml-3\">\r\n+              <p class=\"font-medium text-gray-400\">Solar Quote</p>\r\n+              <p class=\"text-gray-400\">Up next</p>\r\n+            </div>\r\n           </div>\r\n-\r\n-          <!-- Insights Side -->\r\n-          <div class=\"w-1/2 h-full bg-gradient-to-br from-gray-50 to-white p-8 flex flex-col\" id=\"insights-container\">\r\n-            <div class=\"flex-1\">\r\n-              <div class=\"flex items-center space-x-3 mb-8 opacity-0\" id=\"page-header\">\r\n-                <div class=\"w-1 h-8 bg-primary rounded-full\"></div>\r\n-                <h2 class=\"text-2xl font-bold text-gray-800\">Bill Analysis</h2>\r\n+        </div>\r\n+  \r\n+        <!-- Consumption Trend Chart -->\r\n+        <div class=\"mb-8 bg-white rounded-xl p-6 shadow-sm border border-gray-100 opacity-0\" id=\"trend-chart-container\">\r\n+          <div class=\"flex items-center justify-between mb-4\">\r\n+            <div class=\"flex items-center gap-3\">\r\n+              <div class=\"p-2 bg-blue-100 rounded-lg\">\r\n+                <svg class=\"w-5 h-5 text-blue-600\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n+                  <path d=\"M23 6l-9.5 9.5-5-5L1 18\" />\r\n+                </svg>\r\n               </div>\r\n-              \r\n-              <!-- Progress Bar -->\r\n-              <div class=\"mb-8 flex items-center justify-between text-sm opacity-0\" id=\"progress-bar\">\r\n-                <div class=\"flex items-center\">\r\n-                  <div class=\"w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center font-semibold\">1</div>\r\n-                  <div class=\"ml-3\">\r\n-                    <p class=\"font-medium text-gray-800\">Bill Review</p>\r\n-                    <p class=\"text-gray-500\">Analyzing your consumption</p>\r\n-                  </div>\r\n-                </div>\r\n-                <div class=\"flex items-center\">\r\n-                  <div class=\"w-8 h-8 rounded-full bg-gray-200 text-gray-400 flex items-center justify-center font-semibold\">2</div>\r\n-                  <div class=\"ml-3\">\r\n-                    <p class=\"font-medium text-gray-400\">Solar Quote</p>\r\n-                    <p class=\"text-gray-400\">Up next</p>\r\n-                  </div>\r\n-                </div>\r\n+              <div>\r\n+                <h3 class=\"font-medium text-gray-900\">Consumption Trend</h3>\r\n+                <p class=\"text-sm text-gray-500\">Last 6 months analysis</p>\r\n               </div>\r\n-\r\n-              <!-- Key Metrics Grid -->\r\n-              <div class=\"grid grid-cols-2 gap-4 mb-8\">\r\n-                ${this.renderKeyMetric(\r\n-                  \"Monthly Consumption\",\r\n-                  `${this.billData.unitsConsumed}`,\r\n-                  \"kWh\",\r\n-                  \"This is how much electricity you used last month\",\r\n-                  \"lightning-bolt\"\r\n-                )}\r\n-                \r\n-                ${this.renderKeyMetric(\r\n-                  \"Current Bill\",\r\n-                  `${this.billData.totalAmount}`,\r\n-                  \"Rs.\",\r\n-                  \"Your total electricity charges including taxes\",\r\n-                  \"cash\"\r\n-                )}\r\n-                \r\n-                ${this.renderKeyMetric(\r\n-                  \"Rate per Unit\",\r\n-                  `${this.billData.ratePerUnit}`,\r\n-                  \"Rs/kWh\",\r\n-                  \"Your current electricity rate\",\r\n-                  \"chart-bar\"\r\n-                )}\r\n-                \r\n-                ${this.renderKeyMetric(\r\n-                  \"Bill Due Date\",\r\n-                  `${this.billData.dueDate}`,\r\n-                  \"\",\r\n-                  \"Make sure to pay before this date\",\r\n-                  \"calendar\"\r\n-                )}\r\n+            </div>\r\n+          </div>\r\n+          <div class=\"h-48\">\r\n+            <canvas id=\"consumption-trend-chart\"></canvas>\r\n+          </div>\r\n+        </div>\r\n+  \r\n+        <!-- Key Metrics Grid -->\r\n+        <div class=\"grid grid-cols-2 gap-4 mb-8\">\r\n+          <!-- Current Bill Card -->\r\n+          <div class=\"metric-card opacity-0 bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all duration-300\">\r\n+            <div class=\"flex items-center gap-3 mb-4\">\r\n+              <div class=\"p-2 bg-green-100 rounded-lg\">\r\n+                <svg class=\"w-5 h-5 text-green-600\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n+                  <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"/>\r\n+                  <path d=\"M12 6v6l4 2\"/>\r\n+                </svg>\r\n               </div>\r\n-\r\n-              <!-- Next Step Card -->\r\n-              <div class=\"relative mt-auto p-6 bg-white rounded-2xl shadow-sm opacity-0 border border-gray-100\" id=\"next-step-card\">\r\n-                <div class=\"absolute -top-3 -right-3 w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center\">\r\n-                  <svg class=\"w-8 h-8 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 7l5 5m0 0l-5 5m5-5H6\"></path>\r\n-                  </svg>\r\n-                </div>\r\n-                <h3 class=\"text-lg font-semibold text-gray-800 mb-2\">Ready For Your Solar Quote?</h3>\r\n-                <p class=\"text-gray-600 mb-4\">\r\n-                  We've analyzed your bill. Now let's see how much you could save with solar!\r\n-                </p>\r\n-                <button \r\n-                  id=\"proceed-to-quote\" \r\n-                  class=\"w-full bg-gradient-to-r from-primary to-primary-dark text-white px-6 py-3.5 rounded-xl font-medium hover:from-primary-dark hover:to-primary-dark transition-all duration-300 shadow-sm hover:shadow-md\"\r\n-                >\r\n-                  Generate My Solar Quote\r\n-                </button>\r\n+              <div>\r\n+                <p class=\"text-sm text-gray-600\">Current Bill</p>\r\n+                <p class=\"text-2xl font-bold text-gray-900\">${this.formatCurrency(this.billData.totalAmount)}</p>\r\n               </div>\r\n             </div>\r\n+            <div class=\"flex items-center gap-2 text-sm\">\r\n+              <div class=\"px-3 py-1 bg-green-100 text-green-700 rounded-full\">\r\n+                Due in ${this.calculateDueDays()} days\r\n+              </div>\r\n+            </div>\r\n           </div>\r\n-        </div>\r\n-      </div>\r\n-    `;\r\n-\r\n-    this.attachEventListeners();\r\n-    this.renderBillPreview();\r\n-    this.startAnimation();\r\n-  }\r\n-\r\n-  renderKeyMetric(title, value, unit, description, icon) {\r\n-    const icons = {\r\n-      \"lightning-bolt\": `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />`,\r\n-      cash: `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />`,\r\n-      \"chart-bar\": `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />`,\r\n-      calendar: `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />`,\r\n-    };\r\n-\r\n-    return `\r\n-      <div class=\"metric-card opacity-0 p-4 bg-white rounded-xl border border-gray-100 hover:shadow-md transition-shadow duration-300\">\r\n-        <div class=\"flex items-start justify-between mb-3\">\r\n-          <div class=\"flex items-center space-x-3\">\r\n-            <div class=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center\">\r\n-              <svg class=\"w-5 h-5 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                ${icons[icon]}\r\n-              </svg>\r\n+  \r\n+          <!-- Units Consumed Card -->\r\n+          <div class=\"metric-card opacity-0 bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all duration-300\">\r\n+            <div class=\"flex items-center gap-3 mb-4\">\r\n+              <div class=\"p-2 bg-yellow-100 rounded-lg\">\r\n+                <svg class=\"w-5 h-5 text-yellow-600\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n+                  <path d=\"M13 2L3 14h9l-1 8 10-12h-9l1-8z\"/>\r\n+                </svg>\r\n+              </div>\r\n+              <div>\r\n+                <p class=\"text-sm text-gray-600\">Units Consumed</p>\r\n+                <p class=\"text-2xl font-bold text-gray-900\">${this.billData.unitsConsumed} kWh</p>\r\n+              </div>\r\n             </div>\r\n-            <h3 class=\"text-sm font-medium text-gray-600\">${title}</h3>\r\n+            <div class=\"flex items-center gap-2 text-sm\">\r\n+              <span class=\"text-gray-600\">Rate:</span>\r\n+              <span class=\"font-medium text-gray-900\">${this.formatCurrency(this.billData.ratePerUnit)}/kWh</span>\r\n+            </div>\r\n           </div>\r\n         </div>\r\n-        <div class=\"flex items-baseline space-x-1\">\r\n-          <span class=\"text-2xl font-bold text-gray-900\">${value}</span>\r\n-          <span class=\"text-sm font-medium text-gray-500\">${unit}</span>\r\n+  \r\n+        <!-- Next Step Card -->\r\n+        <div class=\"relative mt-auto p-6 bg-gradient-to-br from-blue-50 to-white rounded-2xl shadow-sm opacity-0 border border-blue-100\" id=\"next-step-card\">\r\n+          <div class=\"absolute -top-3 -right-3 w-16 h-16 bg-blue-500 bg-opacity-10 rounded-full flex items-center justify-center\">\r\n+            <svg class=\"w-8 h-8 text-blue-600\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n+              <circle cx=\"12\" cy=\"12\" r=\"5\"/>\r\n+              <path d=\"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42\"/>\r\n+            </svg>\r\n+          </div>\r\n+          <h3 class=\"text-lg font-semibold text-gray-800 mb-2\">Ready For Your Solar Quote?</h3>\r\n+          <p class=\"text-gray-600 mb-4\">\r\n+            We've analyzed your bill. Now let's see how much you could save with solar!\r\n+          </p>\r\n+          <button \r\n+            id=\"proceed-to-quote\" \r\n+            class=\"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-3.5 rounded-xl font-medium \r\n+                   hover:from-blue-700 hover:to-blue-800 transition-all duration-300 shadow-sm hover:shadow-md\r\n+                   flex items-center justify-center gap-2\"\r\n+          >\r\n+            Generate My Solar Quote\r\n+            <svg class=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n+              <path d=\"M5 12h14M12 5l7 7-7 7\"/>\r\n+            </svg>\r\n+          </button>\r\n         </div>\r\n-        <p class=\"text-sm text-gray-500 mt-1\">${description}</p>\r\n       </div>\r\n     `;\r\n+  \r\n+    // Initialize consumption trend chart\r\n+    this.initConsumptionTrendChart(trendData);\r\n+    \r\n+    // Start animations\r\n+    this.startInsightAnimations();\r\n   }\r\n-\r\n-  renderBillPreview() {\r\n-    const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n-    const billPreview = new BillPreview(this.billData);\r\n-    billPreview.render(billPreviewContainer);\r\n-  }\r\n-\r\n-  async startAnimation() {\r\n-    const billPreviewContainer = document.getElementById(\r\n-      \"bill-preview-container\"\r\n-    );\r\n-    const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n-    const insightsContainer = document.getElementById(\"insights-container\");\r\n-    const metrics = document.querySelectorAll(\".metric-card\");\r\n-    const nextStepCard = document.getElementById(\"next-step-card\");\r\n-    const pageTitle = document.querySelector(\"h2\");\r\n-\r\n-    \r\n-\r\n-    // Initial states\r\n-    gsap.set(\r\n-      [\r\n-        billPreviewContainer,\r\n-        loadingIndicator,\r\n-        metrics,\r\n-        nextStepCard,\r\n-        pageTitle,\r\n-      ],\r\n-      {\r\n-        opacity: 0,\r\n+  \r\n+  initConsumptionTrendChart(trendData) {\r\n+    const ctx = document.getElementById('consumption-trend-chart');\r\n+    if (!ctx) return;\r\n+  \r\n+    const chart = new Chart(ctx, {\r\n+      type: 'line',\r\n+      data: {\r\n+        labels: trendData.map(d => d.month),\r\n+        datasets: [{\r\n+          label: 'Consumption (kWh)',\r\n+          data: trendData.map(d => d.consumption),\r\n+          borderColor: '#2563eb',\r\n+          backgroundColor: 'rgba(37, 99, 235, 0.1)',\r\n+          tension: 0.4,\r\n+          fill: true,\r\n+          pointRadius: 4,\r\n+          pointHoverRadius: 6\r\n+        }]\r\n+      },\r\n+      options: {\r\n+        responsive: true,\r\n+        maintainAspectRatio: false,\r\n+        plugins: {\r\n+          legend: {\r\n+            display: false\r\n+          },\r\n+          tooltip: {\r\n+            mode: 'index',\r\n+            intersect: false,\r\n+            backgroundColor: 'white',\r\n+            titleColor: '#111827',\r\n+            bodyColor: '#4b5563',\r\n+            borderColor: '#e5e7eb',\r\n+            borderWidth: 1,\r\n+            padding: 8,\r\n+            bodyFont: {\r\n+              size: 13\r\n+            },\r\n+            callbacks: {\r\n+              label: (context) => `${context.parsed.y} kWh`\r\n+            }\r\n+          }\r\n+        },\r\n+        scales: {\r\n+          x: {\r\n+            grid: {\r\n+              display: false\r\n+            }\r\n+          },\r\n+          y: {\r\n+            beginAtZero: true,\r\n+            grid: {\r\n+              color: 'rgba(0, 0, 0, 0.05)'\r\n+            },\r\n+            ticks: {\r\n+              callback: (value) => `${value} kWh`\r\n+            }\r\n+          }\r\n+        }\r\n       }\r\n-    );\r\n-    gsap.set(billPreviewContainer, {\r\n-      scale: 0.9,\r\n-      position: \"absolute\",\r\n-      left: \"50%\",\r\n-      top: \"50%\",\r\n-      xPercent: -50,\r\n-      yPercent: -50,\r\n-      width: \"47.5%\",\r\n     });\r\n-\r\n-    // Animation sequence\r\n-    const tl = gsap.timeline({\r\n-      defaults: { duration: 0.8, ease: \"power2.out\" },\r\n-    });\r\n-\r\n-    await tl\r\n-      .to(billPreviewContainer, {\r\n-        opacity: 1,\r\n-        scale: 1,\r\n-        duration: 1,\r\n-      })\r\n-      .to(loadingIndicator, {\r\n-        opacity: 1,\r\n-        scale: 1,\r\n-        duration: 0.5,\r\n-      })\r\n-      .to(loadingIndicator, {\r\n-        opacity: 0,\r\n-        scale: 0.5,\r\n-        delay: 1,\r\n-      })\r\n-      .to(\r\n-        billPreviewContainer,\r\n-        {\r\n-          left: \"0%\",\r\n-          top: \"0%\",\r\n-          xPercent: 0,\r\n-          yPercent: 0,\r\n-          width: \"50%\",\r\n-          position: \"relative\",\r\n-        },\r\n-        \"-=0.3\"\r\n-      )\r\n-      // Fade in insights section\r\n-      .to(\"#page-header\", {\r\n-        opacity: 1,\r\n-        y: 0,\r\n-        duration: 0.5\r\n-      })\r\n-      .to(\"#progress-bar\", {\r\n-        opacity: 1,\r\n-        y: 0,\r\n-        duration: 0.5\r\n-      }, \"-=0.3\")\r\n-      .to(\".metric-card\", {\r\n-        opacity: 1,\r\n-        y: 0,\r\n-        stagger: 0.15,\r\n-        duration: 0.5\r\n-      }, \"-=0.2\")\r\n-      .to(\"#next-step-card\", {\r\n-        opacity: 1,\r\n-        y: 0,\r\n-        duration: 0.5\r\n-      }, \"-=0.2\");\r\n   }\r\n-\r\n-  attachEventListeners() {\r\n-    const proceedButton = document.getElementById(\"proceed-to-quote\");\r\n-    proceedButton.addEventListener(\"click\", () => {\r\n-      window.router.push(\"/quote\");\r\n+  \r\n+  startInsightAnimations() {\r\n+    // Animate header and progress\r\n+    gsap.to(\"#page-header\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.5,\r\n+      ease: \"power2.out\"\r\n     });\r\n+  \r\n+    gsap.to(\"#progress-container\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.5,\r\n+      delay: 0.2\r\n+    });\r\n+  \r\n+    // Animate trend chart\r\n+    gsap.to(\"#trend-chart-container\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.5,\r\n+      delay: 0.4\r\n+    });\r\n+  \r\n+    // Animate metric cards\r\n+    gsap.to(\".metric-card\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.5,\r\n+      stagger: 0.15,\r\n+      delay: 0.6\r\n+    });\r\n+  \r\n+    // Animate next step card\r\n+    gsap.to(\"#next-step-card\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.5,\r\n+      delay: 0.8\r\n+    });\r\n   }\r\n-}\r\n+  \r\n+  formatCurrency(value) {\r\n+    return new Intl.NumberFormat('en-PK', {\r\n+      style: 'currency',\r\n+      currency: 'PKR',\r\n+      minimumFractionDigits: 0,\r\n+      maximumFractionDigits: 0\r\n+    }).format(value);\r\n+  }\r\n+  \r\n+  calculateDueDays() {\r\n+    const dueDate = new Date(this.billData.dueDate);\r\n+    const today = new Date();\r\n+    const diffTime = Math.abs(dueDate - today);\r\n+    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n+  }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731480830027,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,256 +1,258 @@\n-// Enhanced insights section in BillReviewPage class\r\n+// src/js/components/BillReviewPage.js\r\n+import { gsap } from \"gsap\";\r\n+import { getBillData } from \"../store/solarSizingState.js\";\r\n+import { BillPreview } from \"./BillPreview.js\";\r\n \r\n-renderInsights() {\r\n-    const insightsContainer = document.querySelector(\"#insights-container\");\r\n-    if (!insightsContainer) return;\r\n-  \r\n-    // Generate trend data\r\n-    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'];\r\n-    const trendData = months.map(month => ({\r\n-      month,\r\n-      consumption: Math.floor(this.billData.unitsConsumed * (0.8 + Math.random() * 0.4))\r\n-    }));\r\n-  \r\n-    insightsContainer.innerHTML = `\r\n-      <div class=\"flex-1\">\r\n-        <!-- Header -->\r\n-        <div class=\"flex items-center space-x-3 mb-8 opacity-0\" id=\"page-header\">\r\n-          <div class=\"w-1 h-8 bg-blue-600 rounded-full\"></div>\r\n-          <h2 class=\"text-2xl font-bold text-gray-800\">Bill Analysis</h2>\r\n-        </div>\r\n-        \r\n-        <!-- Progress Bar -->\r\n-        <div class=\"mb-8 flex items-center justify-between text-sm opacity-0 bg-white rounded-xl p-6 shadow-sm\" id=\"progress-container\">\r\n-          <div class=\"flex items-center\">\r\n-            <div class=\"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center font-semibold\">1</div>\r\n-            <div class=\"ml-3\">\r\n-              <p class=\"font-medium text-gray-800\">Bill Review</p>\r\n-              <p class=\"text-gray-500\">Analyzing your consumption</p>\r\n-            </div>\r\n+export class BillReviewPage {\r\n+  constructor() {\r\n+    this.billData = getBillData();\r\n+  }\r\n+\r\n+  render() {\r\n+    const app = document.getElementById(\"app\");\r\n+\r\n+    if (!this.billData) {\r\n+      this.renderError(app);\r\n+      return;\r\n+    }\r\n+\r\n+    app.innerHTML = `\r\n+      <div class=\"h-screen w-screen bg-white transition-colors duration-1000 overflow-hidden\">\r\n+        <!-- Main Content -->\r\n+        <div class=\"h-full w-full flex relative\" id=\"main-content\">\r\n+          <!-- Bill Preview Side -->\r\n+          <div class=\"w-1/2 h-full\" id=\"bill-preview-container\">\r\n+            <div id=\"bill-preview\" class=\"h-full\"></div>\r\n           </div>\r\n-          <div class=\"flex items-center\">\r\n-            <div class=\"w-8 h-8 rounded-full bg-gray-200 text-gray-400 flex items-center justify-center font-semibold\">2</div>\r\n-            <div class=\"ml-3\">\r\n-              <p class=\"font-medium text-gray-400\">Solar Quote</p>\r\n-              <p class=\"text-gray-400\">Up next</p>\r\n-            </div>\r\n+\r\n+          <!-- Loading Indicator -->\r\n+          <div class=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center z-10\" \r\n+               id=\"loading-indicator\">\r\n+            <div class=\"w-10 h-10 border-4 border-primary border-l-transparent rounded-full animate-spin mb-2\"></div>\r\n+            <p class=\"text-primary font-medium\">Analyzing your bill...</p>\r\n           </div>\r\n-        </div>\r\n-  \r\n-        <!-- Consumption Trend Chart -->\r\n-        <div class=\"mb-8 bg-white rounded-xl p-6 shadow-sm border border-gray-100 opacity-0\" id=\"trend-chart-container\">\r\n-          <div class=\"flex items-center justify-between mb-4\">\r\n-            <div class=\"flex items-center gap-3\">\r\n-              <div class=\"p-2 bg-blue-100 rounded-lg\">\r\n-                <svg class=\"w-5 h-5 text-blue-600\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n-                  <path d=\"M23 6l-9.5 9.5-5-5L1 18\" />\r\n-                </svg>\r\n+\r\n+          <!-- Insights Side -->\r\n+          <div class=\"w-1/2 h-full bg-gradient-to-br from-gray-50 to-white p-8 flex flex-col\" id=\"insights-container\">\r\n+            <div class=\"flex-1\">\r\n+              <div class=\"flex items-center space-x-3 mb-8 opacity-0\" id=\"page-header\">\r\n+                <div class=\"w-1 h-8 bg-primary rounded-full\"></div>\r\n+                <h2 class=\"text-2xl font-bold text-gray-800\">Bill Analysis</h2>\r\n               </div>\r\n-              <div>\r\n-                <h3 class=\"font-medium text-gray-900\">Consumption Trend</h3>\r\n-                <p class=\"text-sm text-gray-500\">Last 6 months analysis</p>\r\n+              \r\n+              <!-- Progress Bar -->\r\n+              <div class=\"mb-8 flex items-center justify-between text-sm opacity-0\" id=\"progress-bar\">\r\n+                <div class=\"flex items-center\">\r\n+                  <div class=\"w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center font-semibold\">1</div>\r\n+                  <div class=\"ml-3\">\r\n+                    <p class=\"font-medium text-gray-800\">Bill Review</p>\r\n+                    <p class=\"text-gray-500\">Analyzing your consumption</p>\r\n+                  </div>\r\n+                </div>\r\n+                <div class=\"flex items-center\">\r\n+                  <div class=\"w-8 h-8 rounded-full bg-gray-200 text-gray-400 flex items-center justify-center font-semibold\">2</div>\r\n+                  <div class=\"ml-3\">\r\n+                    <p class=\"font-medium text-gray-400\">Solar Quote</p>\r\n+                    <p class=\"text-gray-400\">Up next</p>\r\n+                  </div>\r\n+                </div>\r\n               </div>\r\n-            </div>\r\n-          </div>\r\n-          <div class=\"h-48\">\r\n-            <canvas id=\"consumption-trend-chart\"></canvas>\r\n-          </div>\r\n-        </div>\r\n-  \r\n-        <!-- Key Metrics Grid -->\r\n-        <div class=\"grid grid-cols-2 gap-4 mb-8\">\r\n-          <!-- Current Bill Card -->\r\n-          <div class=\"metric-card opacity-0 bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all duration-300\">\r\n-            <div class=\"flex items-center gap-3 mb-4\">\r\n-              <div class=\"p-2 bg-green-100 rounded-lg\">\r\n-                <svg class=\"w-5 h-5 text-green-600\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n-                  <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"/>\r\n-                  <path d=\"M12 6v6l4 2\"/>\r\n-                </svg>\r\n+\r\n+              <!-- Key Metrics Grid -->\r\n+              <div class=\"grid grid-cols-2 gap-4 mb-8\">\r\n+                ${this.renderKeyMetric(\r\n+                  \"Monthly Consumption\",\r\n+                  `${this.billData.unitsConsumed}`,\r\n+                  \"kWh\",\r\n+                  \"This is how much electricity you used last month\",\r\n+                  \"lightning-bolt\"\r\n+                )}\r\n+                \r\n+                ${this.renderKeyMetric(\r\n+                  \"Current Bill\",\r\n+                  `${this.billData.totalAmount}`,\r\n+                  \"Rs.\",\r\n+                  \"Your total electricity charges including taxes\",\r\n+                  \"cash\"\r\n+                )}\r\n+                \r\n+                ${this.renderKeyMetric(\r\n+                  \"Rate per Unit\",\r\n+                  `${this.billData.ratePerUnit}`,\r\n+                  \"Rs/kWh\",\r\n+                  \"Your current electricity rate\",\r\n+                  \"chart-bar\"\r\n+                )}\r\n+                \r\n+                ${this.renderKeyMetric(\r\n+                  \"Bill Due Date\",\r\n+                  `${this.billData.dueDate}`,\r\n+                  \"\",\r\n+                  \"Make sure to pay before this date\",\r\n+                  \"calendar\"\r\n+                )}\r\n               </div>\r\n-              <div>\r\n-                <p class=\"text-sm text-gray-600\">Current Bill</p>\r\n-                <p class=\"text-2xl font-bold text-gray-900\">${this.formatCurrency(this.billData.totalAmount)}</p>\r\n+\r\n+              <!-- Next Step Card -->\r\n+              <div class=\"relative mt-auto p-6 bg-white rounded-2xl shadow-sm opacity-0 border border-gray-100\" id=\"next-step-card\">\r\n+                <div class=\"absolute -top-3 -right-3 w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center\">\r\n+                  <svg class=\"w-8 h-8 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 7l5 5m0 0l-5 5m5-5H6\"></path>\r\n+                  </svg>\r\n+                </div>\r\n+                <h3 class=\"text-lg font-semibold text-gray-800 mb-2\">Ready For Your Solar Quote?</h3>\r\n+                <p class=\"text-gray-600 mb-4\">\r\n+                  We've analyzed your bill. Now let's see how much you could save with solar!\r\n+                </p>\r\n+                <button \r\n+                  id=\"proceed-to-quote\" \r\n+                  class=\"w-full bg-gradient-to-r from-primary to-primary-dark text-white px-6 py-3.5 rounded-xl font-medium hover:from-primary-dark hover:to-primary-dark transition-all duration-300 shadow-sm hover:shadow-md\"\r\n+                >\r\n+                  Generate My Solar Quote\r\n+                </button>\r\n               </div>\r\n             </div>\r\n-            <div class=\"flex items-center gap-2 text-sm\">\r\n-              <div class=\"px-3 py-1 bg-green-100 text-green-700 rounded-full\">\r\n-                Due in ${this.calculateDueDays()} days\r\n-              </div>\r\n-            </div>\r\n           </div>\r\n-  \r\n-          <!-- Units Consumed Card -->\r\n-          <div class=\"metric-card opacity-0 bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all duration-300\">\r\n-            <div class=\"flex items-center gap-3 mb-4\">\r\n-              <div class=\"p-2 bg-yellow-100 rounded-lg\">\r\n-                <svg class=\"w-5 h-5 text-yellow-600\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n-                  <path d=\"M13 2L3 14h9l-1 8 10-12h-9l1-8z\"/>\r\n-                </svg>\r\n-              </div>\r\n-              <div>\r\n-                <p class=\"text-sm text-gray-600\">Units Consumed</p>\r\n-                <p class=\"text-2xl font-bold text-gray-900\">${this.billData.unitsConsumed} kWh</p>\r\n-              </div>\r\n+        </div>\r\n+      </div>\r\n+    `;\r\n+\r\n+    this.attachEventListeners();\r\n+    this.renderBillPreview();\r\n+    this.startAnimation();\r\n+  }\r\n+\r\n+  renderKeyMetric(title, value, unit, description, icon) {\r\n+    const icons = {\r\n+      \"lightning-bolt\": `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />`,\r\n+      cash: `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />`,\r\n+      \"chart-bar\": `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />`,\r\n+      calendar: `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />`,\r\n+    };\r\n+\r\n+    return `\r\n+      <div class=\"metric-card opacity-0 p-4 bg-white rounded-xl border border-gray-100 hover:shadow-md transition-shadow duration-300\">\r\n+        <div class=\"flex items-start justify-between mb-3\">\r\n+          <div class=\"flex items-center space-x-3\">\r\n+            <div class=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center\">\r\n+              <svg class=\"w-5 h-5 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                ${icons[icon]}\r\n+              </svg>\r\n             </div>\r\n-            <div class=\"flex items-center gap-2 text-sm\">\r\n-              <span class=\"text-gray-600\">Rate:</span>\r\n-              <span class=\"font-medium text-gray-900\">${this.formatCurrency(this.billData.ratePerUnit)}/kWh</span>\r\n-            </div>\r\n+            <h3 class=\"text-sm font-medium text-gray-600\">${title}</h3>\r\n           </div>\r\n         </div>\r\n-  \r\n-        <!-- Next Step Card -->\r\n-        <div class=\"relative mt-auto p-6 bg-gradient-to-br from-blue-50 to-white rounded-2xl shadow-sm opacity-0 border border-blue-100\" id=\"next-step-card\">\r\n-          <div class=\"absolute -top-3 -right-3 w-16 h-16 bg-blue-500 bg-opacity-10 rounded-full flex items-center justify-center\">\r\n-            <svg class=\"w-8 h-8 text-blue-600\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n-              <circle cx=\"12\" cy=\"12\" r=\"5\"/>\r\n-              <path d=\"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42\"/>\r\n-            </svg>\r\n-          </div>\r\n-          <h3 class=\"text-lg font-semibold text-gray-800 mb-2\">Ready For Your Solar Quote?</h3>\r\n-          <p class=\"text-gray-600 mb-4\">\r\n-            We've analyzed your bill. Now let's see how much you could save with solar!\r\n-          </p>\r\n-          <button \r\n-            id=\"proceed-to-quote\" \r\n-            class=\"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-3.5 rounded-xl font-medium \r\n-                   hover:from-blue-700 hover:to-blue-800 transition-all duration-300 shadow-sm hover:shadow-md\r\n-                   flex items-center justify-center gap-2\"\r\n-          >\r\n-            Generate My Solar Quote\r\n-            <svg class=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n-              <path d=\"M5 12h14M12 5l7 7-7 7\"/>\r\n-            </svg>\r\n\\ No newline at end of file\n-          </button>\r\n+        <div class=\"flex items-baseline space-x-1\">\r\n+          <span class=\"text-2xl font-bold text-gray-900\">${value}</span>\r\n+          <span class=\"text-sm font-medium text-gray-500\">${unit}</span>\r\n         </div>\r\n+        <p class=\"text-sm text-gray-500 mt-1\">${description}</p>\r\n       </div>\r\n     `;\r\n-  \r\n-    // Initialize consumption trend chart\r\n-    this.initConsumptionTrendChart(trendData);\r\n+  }\r\n+\r\n+  renderBillPreview() {\r\n+    const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n+    const billPreview = new BillPreview(this.billData);\r\n+    billPreview.render(billPreviewContainer);\r\n+  }\r\n+\r\n+  async startAnimation() {\r\n+    const billPreviewContainer = document.getElementById(\r\n+      \"bill-preview-container\"\r\n+    );\r\n+    const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n+    const insightsContainer = document.getElementById(\"insights-container\");\r\n+    const metrics = document.querySelectorAll(\".metric-card\");\r\n+    const nextStepCard = document.getElementById(\"next-step-card\");\r\n+    const pageTitle = document.querySelector(\"h2\");\r\n+\r\n     \r\n-    // Start animations\r\n-    this.startInsightAnimations();\r\n-  }\r\n-  \r\n-  initConsumptionTrendChart(trendData) {\r\n-    const ctx = document.getElementById('consumption-trend-chart');\r\n-    if (!ctx) return;\r\n-  \r\n-    const chart = new Chart(ctx, {\r\n-      type: 'line',\r\n-      data: {\r\n-        labels: trendData.map(d => d.month),\r\n-        datasets: [{\r\n-          label: 'Consumption (kWh)',\r\n-          data: trendData.map(d => d.consumption),\r\n-          borderColor: '#2563eb',\r\n-          backgroundColor: 'rgba(37, 99, 235, 0.1)',\r\n-          tension: 0.4,\r\n-          fill: true,\r\n-          pointRadius: 4,\r\n-          pointHoverRadius: 6\r\n-        }]\r\n-      },\r\n-      options: {\r\n-        responsive: true,\r\n-        maintainAspectRatio: false,\r\n-        plugins: {\r\n-          legend: {\r\n-            display: false\r\n-          },\r\n-          tooltip: {\r\n-            mode: 'index',\r\n-            intersect: false,\r\n-            backgroundColor: 'white',\r\n-            titleColor: '#111827',\r\n-            bodyColor: '#4b5563',\r\n-            borderColor: '#e5e7eb',\r\n-            borderWidth: 1,\r\n-            padding: 8,\r\n-            bodyFont: {\r\n-              size: 13\r\n-            },\r\n-            callbacks: {\r\n-              label: (context) => `${context.parsed.y} kWh`\r\n-            }\r\n-          }\r\n-        },\r\n-        scales: {\r\n-          x: {\r\n-            grid: {\r\n-              display: false\r\n-            }\r\n-          },\r\n-          y: {\r\n-            beginAtZero: true,\r\n-            grid: {\r\n-              color: 'rgba(0, 0, 0, 0.05)'\r\n-            },\r\n-            ticks: {\r\n-              callback: (value) => `${value} kWh`\r\n-            }\r\n-          }\r\n-        }\r\n+\r\n+    // Initial states\r\n+    gsap.set(\r\n+      [\r\n+        billPreviewContainer,\r\n+        loadingIndicator,\r\n+        metrics,\r\n+        nextStepCard,\r\n+        pageTitle,\r\n+      ],\r\n+      {\r\n+        opacity: 0,\r\n       }\r\n+    );\r\n+    gsap.set(billPreviewContainer, {\r\n+      scale: 0.9,\r\n+      position: \"absolute\",\r\n+      left: \"50%\",\r\n+      top: \"50%\",\r\n+      xPercent: -50,\r\n+      yPercent: -50,\r\n+      width: \"47.5%\",\r\n     });\r\n+\r\n+    // Animation sequence\r\n+    const tl = gsap.timeline({\r\n+      defaults: { duration: 0.8, ease: \"power2.out\" },\r\n+    });\r\n+\r\n+    await tl\r\n+      .to(billPreviewContainer, {\r\n+        opacity: 1,\r\n+        scale: 1,\r\n+        duration: 1,\r\n+      })\r\n+      .to(loadingIndicator, {\r\n+        opacity: 1,\r\n+        scale: 1,\r\n+        duration: 0.5,\r\n+      })\r\n+      .to(loadingIndicator, {\r\n+        opacity: 0,\r\n+        scale: 0.5,\r\n+        delay: 1,\r\n+      })\r\n+      .to(\r\n+        billPreviewContainer,\r\n+        {\r\n+          left: \"0%\",\r\n+          top: \"0%\",\r\n+          xPercent: 0,\r\n+          yPercent: 0,\r\n+          width: \"50%\",\r\n+          position: \"relative\",\r\n+        },\r\n+        \"-=0.3\"\r\n+      )\r\n+      // Fade in insights section\r\n+      .to(\"#page-header\", {\r\n+        opacity: 1,\r\n+        y: 0,\r\n+        duration: 0.5\r\n+      })\r\n+      .to(\"#progress-bar\", {\r\n+        opacity: 1,\r\n+        y: 0,\r\n+        duration: 0.5\r\n+      }, \"-=0.3\")\r\n+      .to(\".metric-card\", {\r\n+        opacity: 1,\r\n+        y: 0,\r\n+        stagger: 0.15,\r\n+        duration: 0.5\r\n+      }, \"-=0.2\")\r\n+      .to(\"#next-step-card\", {\r\n+        opacity: 1,\r\n+        y: 0,\r\n+        duration: 0.5\r\n+      }, \"-=0.2\");\r\n   }\r\n-  \r\n-  startInsightAnimations() {\r\n-    // Animate header and progress\r\n-    gsap.to(\"#page-header\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.5,\r\n-      ease: \"power2.out\"\r\n+\r\n+  attachEventListeners() {\r\n+    const proceedButton = document.getElementById(\"proceed-to-quote\");\r\n+    proceedButton.addEventListener(\"click\", () => {\r\n+      window.router.push(\"/quote\");\r\n     });\r\n-  \r\n-    gsap.to(\"#progress-container\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.5,\r\n-      delay: 0.2\r\n-    });\r\n-  \r\n-    // Animate trend chart\r\n-    gsap.to(\"#trend-chart-container\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.5,\r\n-      delay: 0.4\r\n-    });\r\n-  \r\n-    // Animate metric cards\r\n-    gsap.to(\".metric-card\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.5,\r\n-      stagger: 0.15,\r\n-      delay: 0.6\r\n-    });\r\n-  \r\n-    // Animate next step card\r\n-    gsap.to(\"#next-step-card\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.5,\r\n-      delay: 0.8\r\n-    });\r\n   }\r\n-  \r\n-  formatCurrency(value) {\r\n-    return new Intl.NumberFormat('en-PK', {\r\n-      style: 'currency',\r\n-      currency: 'PKR',\r\n-      minimumFractionDigits: 0,\r\n-      maximumFractionDigits: 0\r\n-    }).format(value);\r\n-  }\r\n-  \r\n-  calculateDueDays() {\r\n-    const dueDate = new Date(this.billData.dueDate);\r\n-    const today = new Date();\r\n-    const diffTime = Math.abs(dueDate - today);\r\n-    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n-  }\n+}\r\n"
                },
                {
                    "date": 1731481087484,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,12 +1,14 @@\n-// src/js/components/BillReviewPage.js\r\n+// BillReviewPage.js\r\n import { gsap } from \"gsap\";\r\n import { getBillData } from \"../store/solarSizingState.js\";\r\n import { BillPreview } from \"./BillPreview.js\";\r\n+import Chart from \"chart.js/auto\";\r\n \r\n export class BillReviewPage {\r\n   constructor() {\r\n     this.billData = getBillData();\r\n+    this.charts = {};\r\n   }\r\n \r\n   render() {\r\n     const app = document.getElementById(\"app\");\r\n@@ -16,9 +18,9 @@\n       return;\r\n     }\r\n \r\n     app.innerHTML = `\r\n-      <div class=\"h-screen w-screen bg-white transition-colors duration-1000 overflow-hidden\">\r\n+      <div class=\"h-screen w-screen bg-slate-50 transition-colors duration-1000 overflow-hidden\">\r\n         <!-- Main Content -->\r\n         <div class=\"h-full w-full flex relative\" id=\"main-content\">\r\n           <!-- Bill Preview Side -->\r\n           <div class=\"w-1/2 h-full\" id=\"bill-preview-container\">\r\n@@ -27,232 +29,172 @@\n \r\n           <!-- Loading Indicator -->\r\n           <div class=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center z-10\" \r\n                id=\"loading-indicator\">\r\n-            <div class=\"w-10 h-10 border-4 border-primary border-l-transparent rounded-full animate-spin mb-2\"></div>\r\n-            <p class=\"text-primary font-medium\">Analyzing your bill...</p>\r\n+            <div class=\"loading-spinner\"></div>\r\n+            <p class=\"text-primary font-medium mt-4\">Analyzing your bill...</p>\r\n           </div>\r\n \r\n           <!-- Insights Side -->\r\n-          <div class=\"w-1/2 h-full bg-gradient-to-br from-gray-50 to-white p-8 flex flex-col\" id=\"insights-container\">\r\n-            <div class=\"flex-1\">\r\n-              <div class=\"flex items-center space-x-3 mb-8 opacity-0\" id=\"page-header\">\r\n-                <div class=\"w-1 h-8 bg-primary rounded-full\"></div>\r\n-                <h2 class=\"text-2xl font-bold text-gray-800\">Bill Analysis</h2>\r\n-              </div>\r\n-              \r\n-              <!-- Progress Bar -->\r\n-              <div class=\"mb-8 flex items-center justify-between text-sm opacity-0\" id=\"progress-bar\">\r\n-                <div class=\"flex items-center\">\r\n-                  <div class=\"w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center font-semibold\">1</div>\r\n-                  <div class=\"ml-3\">\r\n-                    <p class=\"font-medium text-gray-800\">Bill Review</p>\r\n-                    <p class=\"text-gray-500\">Analyzing your consumption</p>\r\n-                  </div>\r\n-                </div>\r\n-                <div class=\"flex items-center\">\r\n-                  <div class=\"w-8 h-8 rounded-full bg-gray-200 text-gray-400 flex items-center justify-center font-semibold\">2</div>\r\n-                  <div class=\"ml-3\">\r\n-                    <p class=\"font-medium text-gray-400\">Solar Quote</p>\r\n-                    <p class=\"text-gray-400\">Up next</p>\r\n-                  </div>\r\n-                </div>\r\n-              </div>\r\n-\r\n-              <!-- Key Metrics Grid -->\r\n-              <div class=\"grid grid-cols-2 gap-4 mb-8\">\r\n-                ${this.renderKeyMetric(\r\n-                  \"Monthly Consumption\",\r\n-                  `${this.billData.unitsConsumed}`,\r\n-                  \"kWh\",\r\n-                  \"This is how much electricity you used last month\",\r\n-                  \"lightning-bolt\"\r\n-                )}\r\n-                \r\n-                ${this.renderKeyMetric(\r\n-                  \"Current Bill\",\r\n-                  `${this.billData.totalAmount}`,\r\n-                  \"Rs.\",\r\n-                  \"Your total electricity charges including taxes\",\r\n-                  \"cash\"\r\n-                )}\r\n-                \r\n-                ${this.renderKeyMetric(\r\n-                  \"Rate per Unit\",\r\n-                  `${this.billData.ratePerUnit}`,\r\n-                  \"Rs/kWh\",\r\n-                  \"Your current electricity rate\",\r\n-                  \"chart-bar\"\r\n-                )}\r\n-                \r\n-                ${this.renderKeyMetric(\r\n-                  \"Bill Due Date\",\r\n-                  `${this.billData.dueDate}`,\r\n-                  \"\",\r\n-                  \"Make sure to pay before this date\",\r\n-                  \"calendar\"\r\n-                )}\r\n-              </div>\r\n-\r\n-              <!-- Next Step Card -->\r\n-              <div class=\"relative mt-auto p-6 bg-white rounded-2xl shadow-sm opacity-0 border border-gray-100\" id=\"next-step-card\">\r\n-                <div class=\"absolute -top-3 -right-3 w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center\">\r\n-                  <svg class=\"w-8 h-8 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 7l5 5m0 0l-5 5m5-5H6\"></path>\r\n-                  </svg>\r\n-                </div>\r\n-                <h3 class=\"text-lg font-semibold text-gray-800 mb-2\">Ready For Your Solar Quote?</h3>\r\n-                <p class=\"text-gray-600 mb-4\">\r\n-                  We've analyzed your bill. Now let's see how much you could save with solar!\r\n-                </p>\r\n-                <button \r\n-                  id=\"proceed-to-quote\" \r\n-                  class=\"w-full bg-gradient-to-r from-primary to-primary-dark text-white px-6 py-3.5 rounded-xl font-medium hover:from-primary-dark hover:to-primary-dark transition-all duration-300 shadow-sm hover:shadow-md\"\r\n-                >\r\n-                  Generate My Solar Quote\r\n-                </button>\r\n-              </div>\r\n-            </div>\r\n+          <div class=\"w-1/2 h-full\" id=\"insights-container\">\r\n           </div>\r\n         </div>\r\n       </div>\r\n     `;\r\n \r\n-    this.attachEventListeners();\r\n+    this.attachBaseStyles();\r\n     this.renderBillPreview();\r\n+    this.renderInsights();\r\n     this.startAnimation();\r\n   }\r\n \r\n-  renderKeyMetric(title, value, unit, description, icon) {\r\n-    const icons = {\r\n-      \"lightning-bolt\": `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />`,\r\n-      cash: `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />`,\r\n-      \"chart-bar\": `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />`,\r\n-      calendar: `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />`,\r\n-    };\r\n+  attachBaseStyles() {\r\n+    const style = document.createElement('style');\r\n+    style.textContent = this.getBaseStyles();\r\n+    document.head.appendChild(style);\r\n+  }\r\n \r\n+  getBaseStyles() {\r\n     return `\r\n-      <div class=\"metric-card opacity-0 p-4 bg-white rounded-xl border border-gray-100 hover:shadow-md transition-shadow duration-300\">\r\n-        <div class=\"flex items-start justify-between mb-3\">\r\n-          <div class=\"flex items-center space-x-3\">\r\n-            <div class=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center\">\r\n-              <svg class=\"w-5 h-5 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                ${icons[icon]}\r\n-              </svg>\r\n-            </div>\r\n-            <h3 class=\"text-sm font-medium text-gray-600\">${title}</h3>\r\n-          </div>\r\n-        </div>\r\n-        <div class=\"flex items-baseline space-x-1\">\r\n-          <span class=\"text-2xl font-bold text-gray-900\">${value}</span>\r\n-          <span class=\"text-sm font-medium text-gray-500\">${unit}</span>\r\n-        </div>\r\n-        <p class=\"text-sm text-gray-500 mt-1\">${description}</p>\r\n-      </div>\r\n-    `;\r\n-  }\r\n+      /* Base Theme Colors */\r\n+      :root {\r\n+        --color-primary: #3b82f6;\r\n+        --color-primary-dark: #2563eb;\r\n+        --color-primary-light: #93c5fd;\r\n+        --color-success: #10b981;\r\n+        --color-warning: #f59e0b;\r\n+        --color-error: #ef4444;\r\n+        --color-gray-50: #f8fafc;\r\n+        --color-gray-100: #f1f5f9;\r\n+        --color-gray-200: #e2e8f0;\r\n+        --color-gray-300: #cbd5e1;\r\n+        --color-gray-400: #94a3b8;\r\n+        --color-gray-500: #64748b;\r\n+        --color-gray-600: #475569;\r\n+        --color-gray-700: #334155;\r\n+        --color-gray-800: #1e293b;\r\n+        --color-gray-900: #0f172a;\r\n+      }\r\n \r\n-  renderBillPreview() {\r\n-    const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n-    const billPreview = new BillPreview(this.billData);\r\n-    billPreview.render(billPreviewContainer);\r\n-  }\r\n+      /* Loading Spinner */\r\n+      .loading-spinner {\r\n+        width: 40px;\r\n+        height: 40px;\r\n+        border: 4px solid var(--color-gray-200);\r\n+        border-left-color: var(--color-primary);\r\n+        border-radius: 50%;\r\n+        animation: spin 1s linear infinite;\r\n+      }\r\n \r\n-  async startAnimation() {\r\n-    const billPreviewContainer = document.getElementById(\r\n-      \"bill-preview-container\"\r\n-    );\r\n-    const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n-    const insightsContainer = document.getElementById(\"insights-container\");\r\n-    const metrics = document.querySelectorAll(\".metric-card\");\r\n-    const nextStepCard = document.getElementById(\"next-step-card\");\r\n-    const pageTitle = document.querySelector(\"h2\");\r\n+      @keyframes spin {\r\n+        to { transform: rotate(360deg); }\r\n+      }\r\n \r\n-    \r\n+      /* Card Styles */\r\n+      .insight-card {\r\n+        background: white;\r\n+        border-radius: 1rem;\r\n+        box-shadow: 0 1px 3px rgba(0,0,0,0.1);\r\n+        transition: all 0.3s ease;\r\n+        border: 1px solid var(--color-gray-100);\r\n+      }\r\n \r\n-    // Initial states\r\n-    gsap.set(\r\n-      [\r\n-        billPreviewContainer,\r\n-        loadingIndicator,\r\n-        metrics,\r\n-        nextStepCard,\r\n-        pageTitle,\r\n-      ],\r\n-      {\r\n-        opacity: 0,\r\n+      .insight-card:hover {\r\n+        transform: translateY(-2px);\r\n+        box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);\r\n       }\r\n-    );\r\n-    gsap.set(billPreviewContainer, {\r\n-      scale: 0.9,\r\n-      position: \"absolute\",\r\n-      left: \"50%\",\r\n-      top: \"50%\",\r\n-      xPercent: -50,\r\n-      yPercent: -50,\r\n-      width: \"47.5%\",\r\n-    });\r\n \r\n-    // Animation sequence\r\n-    const tl = gsap.timeline({\r\n-      defaults: { duration: 0.8, ease: \"power2.out\" },\r\n-    });\r\n+      /* Glass Effect */\r\n+      .glass-effect {\r\n+        background: rgba(255, 255, 255, 0.7);\r\n+        backdrop-filter: blur(10px);\r\n+        border: 1px solid rgba(255, 255, 255, 0.3);\r\n+      }\r\n \r\n-    await tl\r\n-      .to(billPreviewContainer, {\r\n-        opacity: 1,\r\n-        scale: 1,\r\n-        duration: 1,\r\n-      })\r\n-      .to(loadingIndicator, {\r\n-        opacity: 1,\r\n-        scale: 1,\r\n-        duration: 0.5,\r\n-      })\r\n-      .to(loadingIndicator, {\r\n-        opacity: 0,\r\n-        scale: 0.5,\r\n-        delay: 1,\r\n-      })\r\n-      .to(\r\n-        billPreviewContainer,\r\n-        {\r\n-          left: \"0%\",\r\n-          top: \"0%\",\r\n-          xPercent: 0,\r\n-          yPercent: 0,\r\n-          width: \"50%\",\r\n-          position: \"relative\",\r\n-        },\r\n-        \"-=0.3\"\r\n-      )\r\n-      // Fade in insights section\r\n-      .to(\"#page-header\", {\r\n-        opacity: 1,\r\n-        y: 0,\r\n-        duration: 0.5\r\n-      })\r\n-      .to(\"#progress-bar\", {\r\n-        opacity: 1,\r\n-        y: 0,\r\n-        duration: 0.5\r\n-      }, \"-=0.3\")\r\n-      .to(\".metric-card\", {\r\n-        opacity: 1,\r\n-        y: 0,\r\n-        stagger: 0.15,\r\n-        duration: 0.5\r\n-      }, \"-=0.2\")\r\n-      .to(\"#next-step-card\", {\r\n-        opacity: 1,\r\n-        y: 0,\r\n-        duration: 0.5\r\n-      }, \"-=0.2\");\r\n-  }\r\n+      /* Custom Scrollbar */\r\n+      .custom-scrollbar {\r\n+        scrollbar-width: thin;\r\n+        scrollbar-color: var(--color-gray-300) transparent;\r\n+      }\r\n \r\n-  attachEventListeners() {\r\n-    const proceedButton = document.getElementById(\"proceed-to-quote\");\r\n-    proceedButton.addEventListener(\"click\", () => {\r\n-      window.router.push(\"/quote\");\r\n-    });\r\n-  }\r\n-}\r\n+      .custom-scrollbar::-webkit-scrollbar {\r\n+        width: 6px;\r\n+      }\r\n+\r\n+      .custom-scrollbar::-webkit-scrollbar-track {\r\n+        background: transparent;\r\n+      }\r\n+\r\n+      .custom-scrollbar::-webkit-scrollbar-thumb {\r\n+        background-color: var(--color-gray-300);\r\n+        border-radius: 3px;\r\n+      }\r\n+\r\n+      /* Progress Bar */\r\n+      .progress-step {\r\n+        position: relative;\r\n+        z-index: 1;\r\n+      }\r\n+\r\n+      .progress-step::after {\r\n+        content: '';\r\n+        position: absolute;\r\n+        top: 50%;\r\n+        left: 100%;\r\n+        width: 100%;\r\n+        height: 2px;\r\n+        background: var(--color-gray-200);\r\n+        transform: translateY(-50%);\r\n+      }\r\n+\r\n+      .progress-step.active::after {\r\n+        background: var(--color-primary);\r\n+      }\r\n+\r\n+      /* Animated Gradients */\r\n+      .animated-gradient {\r\n+        background: linear-gradient(\r\n+          45deg,\r\n+          var(--color-primary),\r\n+          var(--color-primary-dark),\r\n+          var(--color-primary)\r\n+        );\r\n+        background-size: 200% 200%;\r\n+        animation: gradient 15s ease infinite;\r\n+      }\r\n+\r\n+      @keyframes gradient {\r\n+        0% { background-position: 0% 50%; }\r\n+        50% { background-position: 100% 50%; }\r\n+        100% { background-position: 0% 50%; }\r\n+      }\r\n+\r\n+      /* Responsive Design */\r\n+      @media (max-width: 1024px) {\r\n+        .insight-card {\r\n+          padding: 1rem;\r\n+        }\r\n+      }\r\n+\r\n+      @media (max-width: 768px) {\r\n+        #main-content {\r\n+          flex-direction: column;\r\n+        }\r\n+\r\n+        #bill-preview-container,\r\n+        #insights-container {\r\n+          width: 100%;\r\n+          height: 50%;\r\n+        }\r\n+      }\r\n+\r\n+      /* Chart Tooltips */\r\n+      .chart-tooltip {\r\n+        background: rgba(255, 255, 255, 0.95) !important;\r\n+        backdrop-filter: blur(4px);\r\n+        border: 1px solid var(--color-gray-200) !important;\r\n+        border-radius: 0.5rem !important;\r\n+        padding: 0.75rem !important;\r\n+        box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1) !important;\r\n+      }\r\n+    `;\r\n+  }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731481249295,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -196,5 +196,315 @@\n         padding: 0.75rem !important;\r\n         box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1) !important;\r\n       }\r\n     `;\r\n+  }// Part 2 of BillReviewPage.js - continuing from previous part\r\n+\r\n+renderInsights() {\r\n+    const insightsContainer = document.querySelector(\"#insights-container\");\r\n+    if (!insightsContainer) return;\r\n+  \r\n+    // Generate trend data for the last 6 months\r\n+    const trendData = this.generateTrendData();\r\n+  \r\n+    insightsContainer.innerHTML = `\r\n+      <div class=\"h-full flex flex-col p-8 custom-scrollbar\">\r\n+        <!-- Header Section -->\r\n+        <div class=\"flex items-center space-x-4 mb-8 opacity-0\" id=\"insights-header\">\r\n+          <div class=\"flex-shrink-0\">\r\n+            <div class=\"w-12 h-12 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center\">\r\n+              <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n+              </svg>\r\n+            </div>\r\n+          </div>\r\n+          <div>\r\n+            <h2 class=\"text-2xl font-bold text-gray-900\">Bill Analysis</h2>\r\n+            <p class=\"text-gray-500\">Understanding your energy consumption</p>\r\n+          </div>\r\n+        </div>\r\n+  \r\n+        <!-- Progress Tracker -->\r\n+        <div class=\"glass-effect rounded-xl p-6 mb-8 opacity-0\" id=\"progress-tracker\">\r\n+          <div class=\"flex justify-between\">\r\n+            <div class=\"flex items-center\">\r\n+              <div class=\"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-semibold\">1</div>\r\n+              <div class=\"ml-4\">\r\n+                <p class=\"font-semibold text-gray-900\">Bill Review</p>\r\n+                <p class=\"text-sm text-gray-500\">Analyzing consumption patterns</p>\r\n+              </div>\r\n+            </div>\r\n+            <div class=\"w-32 h-0.5 self-center bg-gray-200\"></div>\r\n+            <div class=\"flex items-center\">\r\n+              <div class=\"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold\">2</div>\r\n+              <div class=\"ml-4\">\r\n+                <p class=\"font-semibold text-gray-400\">Solar Quote</p>\r\n+                <p class=\"text-sm text-gray-400\">Up next</p>\r\n+              </div>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+  \r\n+        <!-- Consumption Analysis Card -->\r\n+        <div class=\"insight-card p-6 mb-6 opacity-0\" id=\"consumption-card\">\r\n+          <div class=\"flex justify-between items-center mb-6\">\r\n+            <div>\r\n+              <h3 class=\"text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n+              <p class=\"text-sm text-gray-500\">Last 6 months trend</p>\r\n+            </div>\r\n+            <div class=\"px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-sm font-medium\">\r\n+              ${this.formatChange(trendData)}% vs last month\r\n+            </div>\r\n+          </div>\r\n+          <div class=\"h-64\">\r\n+            <canvas id=\"consumption-trend-chart\"></canvas>\r\n+          </div>\r\n+        </div>\r\n+  \r\n+        <!-- Key Metrics Grid -->\r\n+        <div class=\"grid grid-cols-2 gap-6 mb-8\">\r\n+          <!-- Current Bill Card -->\r\n+          <div class=\"insight-card p-6 opacity-0 consumption-metric\">\r\n+            <div class=\"flex items-center justify-between mb-4\">\r\n+              <div class=\"w-12 h-12 rounded-lg bg-green-50 flex items-center justify-center\">\r\n+                <svg class=\"w-6 h-6 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n+                </svg>\r\n+              </div>\r\n+              <span class=\"px-2 py-1 bg-green-50 text-green-600 text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n+            </div>\r\n+            <p class=\"text-sm text-gray-500 mb-1\">Current Bill</p>\r\n+            <p class=\"text-2xl font-bold text-gray-900\">${this.formatCurrency(this.billData.totalAmount)}</p>\r\n+            <div class=\"mt-4 h-1 bg-gray-100 rounded\">\r\n+              <div class=\"h-full bg-green-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n+            </div>\r\n+          </div>\r\n+  \r\n+          <!-- Units Consumed Card -->\r\n+          <div class=\"insight-card p-6 opacity-0 consumption-metric\">\r\n+            <div class=\"flex items-center justify-between mb-4\">\r\n+              <div class=\"w-12 h-12 rounded-lg bg-blue-50 flex items-center justify-center\">\r\n+                <svg class=\"w-6 h-6 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n+                </svg>\r\n+              </div>\r\n+              <span class=\"px-2 py-1 bg-blue-50 text-blue-600 text-sm rounded-full\">\r\n+                ${this.calculateEfficiency()} efficiency\r\n+              </span>\r\n+            </div>\r\n+            <p class=\"text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n+            <p class=\"text-2xl font-bold text-gray-900\">${this.billData.unitsConsumed} kWh</p>\r\n+            <p class=\"text-sm text-gray-500 mt-2\">\r\n+              Rate: ${this.formatCurrency(this.billData.ratePerUnit)}/kWh\r\n+            </p>\r\n+          </div>\r\n+        </div>\r\n+  \r\n+        <!-- Next Steps Card -->\r\n+        <div class=\"mt-auto\">\r\n+          <div class=\"insight-card p-6 opacity-0\" id=\"next-steps-card\">\r\n+            <div class=\"absolute -top-3 -right-3\">\r\n+              <div class=\"w-16 h-16 animated-gradient rounded-full flex items-center justify-center\">\r\n+                <svg class=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n+                </svg>\r\n+              </div>\r\n+            </div>\r\n+            <div class=\"max-w-lg\">\r\n+              <h3 class=\"text-xl font-semibold text-gray-900 mb-2\">Ready For Your Solar Quote?</h3>\r\n+              <p class=\"text-gray-600 mb-6\">\r\n+                We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n+              </p>\r\n+              <button \r\n+                id=\"proceed-to-quote\" \r\n+                class=\"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4 rounded-xl font-medium\r\n+                       hover:from-blue-700 hover:to-blue-800 transition-all duration-300 shadow-sm hover:shadow-lg\r\n+                       flex items-center justify-center gap-2 group\"\r\n+              >\r\n+                Generate My Solar Quote\r\n+                <svg class=\"w-5 h-5 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n+                </svg>\r\n+              </button>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n+    `;\r\n+  \r\n+    this.initializeCharts(trendData);\r\n+    this.startInsightAnimations();\r\n+    this.attachEventListeners();\r\n+  }\r\n+  \r\n+  generateTrendData() {\r\n+    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'];\r\n+    return months.map(month => ({\r\n+      month,\r\n+      consumption: Math.floor(this.billData.unitsConsumed * (0.8 + Math.random() * 0.4))\r\n+    }));\r\n+  }\r\n+  \r\n+  initializeCharts(trendData) {\r\n+    const ctx = document.getElementById('consumption-trend-chart');\r\n+    if (!ctx) return;\r\n+  \r\n+    this.charts.consumption = new Chart(ctx, {\r\n+      type: 'line',\r\n+      data: {\r\n+        labels: trendData.map(d => d.month),\r\n+        datasets: [{\r\n+          label: 'Consumption (kWh)',\r\n+          data: trendData.map(d => d.consumption),\r\n+          borderColor: '#3b82f6',\r\n+          backgroundColor: 'rgba(59, 130, 246, 0.1)',\r\n+          tension: 0.4,\r\n+          fill: true,\r\n+          pointRadius: 6,\r\n+          pointHoverRadius: 8,\r\n+          pointBackgroundColor: '#ffffff',\r\n+          pointBorderColor: '#3b82f6',\r\n+          pointBorderWidth: 2\r\n+        }]\r\n+      },\r\n+      options: {\r\n+        responsive: true,\r\n+        maintainAspectRatio: false,\r\n+        plugins: {\r\n+          legend: {\r\n+            display: false\r\n+          },\r\n+          tooltip: {\r\n+            backgroundColor: 'white',\r\n+            titleColor: '#1f2937',\r\n+            bodyColor: '#4b5563',\r\n+            borderColor: '#e5e7eb',\r\n+            borderWidth: 1,\r\n+            padding: 12,\r\n+            titleFont: {\r\n+              size: 14,\r\n+              weight: 'bold'\r\n+            },\r\n+            bodyFont: {\r\n+              size: 13\r\n+            },\r\n+            displayColors: false,\r\n+            callbacks: {\r\n+              label: (context) => `${context.parsed.y.toLocaleString()} kWh`\r\n+            }\r\n+          }\r\n+        },\r\n+        scales: {\r\n+          x: {\r\n+            grid: {\r\n+              display: false\r\n+            },\r\n+            ticks: {\r\n+              font: {\r\n+                size: 12\r\n+              }\r\n+            }\r\n+          },\r\n+          y: {\r\n+            beginAtZero: true,\r\n+            grid: {\r\n+              color: 'rgba(0, 0, 0, 0.05)'\r\n+            },\r\n+            ticks: {\r\n+              font: {\r\n+                size: 12\r\n+              },\r\n+              callback: (value) => `${value} kWh`\r\n+            }\r\n+          }\r\n+        }\r\n+      }\r\n+    });\r\n+  }\r\n+  \r\n+  startInsightAnimations() {\r\n+    gsap.to(\"#insights-header\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      ease: \"power2.out\"\r\n+    });\r\n+  \r\n+    gsap.to(\"#progress-tracker\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      delay: 0.2,\r\n+      ease: \"power2.out\"\r\n+    });\r\n+  \r\n+    gsap.to(\"#consumption-card\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      delay: 0.4,\r\n+      ease: \"power2.out\"\r\n+    });\r\n+  \r\n+    gsap.to(\".consumption-metric\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      stagger: 0.2,\r\n+      delay: 0.6,\r\n+      ease: \"power2.out\"\r\n+    });\r\n+  \r\n+    gsap.to(\"#next-steps-card\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      delay: 1,\r\n+      ease: \"power2.out\"\r\n+    });\r\n+  }\r\n+  \r\n+  // Utility methods\r\n+  formatCurrency(value) {\r\n+    return new Intl.NumberFormat('en-PK', {\r\n+      style: 'currency',\r\n+      currency: 'PKR',\r\n+      minimumFractionDigits: 0,\r\n+      maximumFractionDigits: 0\r\n+    }).format(value);\r\n+  }\r\n+  \r\n+  calculateDueDays() {\r\n+    const dueDate = new Date(this.billData.dueDate);\r\n+    const today = new Date();\r\n+    const diffTime = Math.abs(dueDate - today);\r\n+    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n+  }\r\n+  \r\n+  calculateBillProgress() {\r\n+    const daysInMonth = 30;\r\n+    const today = new Date();\r\n+    const billDate = new Date(this.billData.issueDate);\r\n+    const daysPassed = Math.ceil((today - billDate) / (1000 * 60 * 60 * 24));\r\n+    return Math.min((daysPassed / daysInMonth) * 100, 100);\r\n+  }\r\n+  \r\n+  calculateEfficiency() {\r\n+    const avgConsumption = 500; // Example average consumption\r\n+    const efficiency = (this.billData.unitsConsumed / avgConsumption) * 100;\r\n+    return efficiency <= 100 ? 'High' : 'Low';\r\n+  }\r\n+  \r\n+  formatChange(data) {\r\n+    const lastTwo = data.slice(-2);\r\n+    const change = ((lastTwo[1].consumption - lastTwo[0].consumption) / lastTwo[0].consumption) * 100;\r\n+    return change.toFixed(1);\r\n+  }\r\n+  \r\n+  attachEventListeners() {\r\n+    const quoteButton = document.getElementById('proceed-to-quote');\r\n+    if (quoteButton) {\r\n+      quoteButton.addEventListener('click', () => {\r\n+        window.router.push('/quote');\r\n+      });\r\n+    }\r\n   }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731481255528,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -506,5 +506,6 @@\n       quoteButton.addEventListener('click', () => {\r\n         window.router.push('/quote');\r\n       });\r\n     }\r\n-  }\n\\ No newline at end of file\n+  }\r\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731613127259,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,9 +47,9 @@\n     this.startAnimation();\r\n   }\r\n \r\n   attachBaseStyles() {\r\n-    const style = document.createElement('style');\r\n+    const style = document.createElement(\"style\");\r\n     style.textContent = this.getBaseStyles();\r\n     document.head.appendChild(style);\r\n   }\r\n \r\n@@ -196,17 +196,49 @@\n         padding: 0.75rem !important;\r\n         box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1) !important;\r\n       }\r\n     `;\r\n-  }// Part 2 of BillReviewPage.js - continuing from previous part\r\n+  } \r\n \r\n-renderInsights() {\r\n+  renderBillPreview() {\r\n+    if (!this.billData) {\r\n+      console.error(\"Bill data is not available\");\r\n+      this.renderError(document.getElementById(\"app\"));\r\n+      return;\r\n+    }\r\n+\r\n+    const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n+    if (!billPreviewContainer) {\r\n+      console.error(\"Bill preview container not found\");\r\n+      return;\r\n+    }\r\n+\r\n+    const billPreview = new BillPreview(this.billData);\r\n+    billPreview.render(billPreviewContainer);\r\n+  }\r\n+\r\n+  renderError(container) {\r\n+    container.innerHTML = `\r\n+        <div class=\"flex items-center justify-center h-screen\">\r\n+            <div class=\"text-center\">\r\n+                <h2 class=\"text-xl font-semibold text-gray-800 mb-2\">Error</h2>\r\n+                <p class=\"text-gray-600\">Bill data is not available. Please try again.</p>\r\n+                <button onclick=\"window.router.push('/')\" \r\n+                        class=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors\">\r\n+                    Go Back\r\n+                </button>\r\n+            </div>\r\n+        </div>\r\n+    `;\r\n+  }\r\n+\r\n+  renderInsights() {\r\n     const insightsContainer = document.querySelector(\"#insights-container\");\r\n     if (!insightsContainer) return;\r\n-  \r\n+\r\n     // Generate trend data for the last 6 months\r\n     const trendData = this.generateTrendData();\r\n-  \r\n+\r\n     insightsContainer.innerHTML = `\r\n       <div class=\"h-full flex flex-col p-8 custom-scrollbar\">\r\n         <!-- Header Section -->\r\n         <div class=\"flex items-center space-x-4 mb-8 opacity-0\" id=\"insights-header\">\r\n@@ -272,9 +304,11 @@\n               </div>\r\n               <span class=\"px-2 py-1 bg-green-50 text-green-600 text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n             </div>\r\n             <p class=\"text-sm text-gray-500 mb-1\">Current Bill</p>\r\n-            <p class=\"text-2xl font-bold text-gray-900\">${this.formatCurrency(this.billData.totalAmount)}</p>\r\n+            <p class=\"text-2xl font-bold text-gray-900\">${this.formatCurrency(\r\n+              this.billData.totalAmount\r\n+            )}</p>\r\n             <div class=\"mt-4 h-1 bg-gray-100 rounded\">\r\n               <div class=\"h-full bg-green-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n             </div>\r\n           </div>\r\n@@ -291,9 +325,11 @@\n                 ${this.calculateEfficiency()} efficiency\r\n               </span>\r\n             </div>\r\n             <p class=\"text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n-            <p class=\"text-2xl font-bold text-gray-900\">${this.billData.unitsConsumed} kWh</p>\r\n+            <p class=\"text-2xl font-bold text-gray-900\">${\r\n+              this.billData.unitsConsumed\r\n+            } kWh</p>\r\n             <p class=\"text-sm text-gray-500 mt-2\">\r\n               Rate: ${this.formatCurrency(this.billData.ratePerUnit)}/kWh\r\n             </p>\r\n           </div>\r\n@@ -329,183 +365,190 @@\n           </div>\r\n         </div>\r\n       </div>\r\n     `;\r\n-  \r\n+\r\n     this.initializeCharts(trendData);\r\n     this.startInsightAnimations();\r\n     this.attachEventListeners();\r\n   }\r\n-  \r\n+\r\n   generateTrendData() {\r\n-    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'];\r\n-    return months.map(month => ({\r\n+    const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\"];\r\n+    return months.map((month) => ({\r\n       month,\r\n-      consumption: Math.floor(this.billData.unitsConsumed * (0.8 + Math.random() * 0.4))\r\n+      consumption: Math.floor(\r\n+        this.billData.unitsConsumed * (0.8 + Math.random() * 0.4)\r\n+      ),\r\n     }));\r\n   }\r\n-  \r\n+\r\n   initializeCharts(trendData) {\r\n-    const ctx = document.getElementById('consumption-trend-chart');\r\n+    const ctx = document.getElementById(\"consumption-trend-chart\");\r\n     if (!ctx) return;\r\n-  \r\n+\r\n     this.charts.consumption = new Chart(ctx, {\r\n-      type: 'line',\r\n+      type: \"line\",\r\n       data: {\r\n-        labels: trendData.map(d => d.month),\r\n-        datasets: [{\r\n-          label: 'Consumption (kWh)',\r\n-          data: trendData.map(d => d.consumption),\r\n-          borderColor: '#3b82f6',\r\n-          backgroundColor: 'rgba(59, 130, 246, 0.1)',\r\n-          tension: 0.4,\r\n-          fill: true,\r\n-          pointRadius: 6,\r\n-          pointHoverRadius: 8,\r\n-          pointBackgroundColor: '#ffffff',\r\n-          pointBorderColor: '#3b82f6',\r\n-          pointBorderWidth: 2\r\n-        }]\r\n+        labels: trendData.map((d) => d.month),\r\n+        datasets: [\r\n+          {\r\n+            label: \"Consumption (kWh)\",\r\n+            data: trendData.map((d) => d.consumption),\r\n+            borderColor: \"#3b82f6\",\r\n+            backgroundColor: \"rgba(59, 130, 246, 0.1)\",\r\n+            tension: 0.4,\r\n+            fill: true,\r\n+            pointRadius: 6,\r\n+            pointHoverRadius: 8,\r\n+            pointBackgroundColor: \"#ffffff\",\r\n+            pointBorderColor: \"#3b82f6\",\r\n+            pointBorderWidth: 2,\r\n+          },\r\n+        ],\r\n       },\r\n       options: {\r\n         responsive: true,\r\n         maintainAspectRatio: false,\r\n         plugins: {\r\n           legend: {\r\n-            display: false\r\n+            display: false,\r\n           },\r\n           tooltip: {\r\n-            backgroundColor: 'white',\r\n-            titleColor: '#1f2937',\r\n-            bodyColor: '#4b5563',\r\n-            borderColor: '#e5e7eb',\r\n+            backgroundColor: \"white\",\r\n+            titleColor: \"#1f2937\",\r\n+            bodyColor: \"#4b5563\",\r\n+            borderColor: \"#e5e7eb\",\r\n             borderWidth: 1,\r\n             padding: 12,\r\n             titleFont: {\r\n               size: 14,\r\n-              weight: 'bold'\r\n+              weight: \"bold\",\r\n             },\r\n             bodyFont: {\r\n-              size: 13\r\n+              size: 13,\r\n             },\r\n             displayColors: false,\r\n             callbacks: {\r\n-              label: (context) => `${context.parsed.y.toLocaleString()} kWh`\r\n-            }\r\n-          }\r\n+              label: (context) => `${context.parsed.y.toLocaleString()} kWh`,\r\n+            },\r\n+          },\r\n         },\r\n         scales: {\r\n           x: {\r\n             grid: {\r\n-              display: false\r\n+              display: false,\r\n             },\r\n             ticks: {\r\n               font: {\r\n-                size: 12\r\n-              }\r\n-            }\r\n+                size: 12,\r\n+              },\r\n+            },\r\n           },\r\n           y: {\r\n             beginAtZero: true,\r\n             grid: {\r\n-              color: 'rgba(0, 0, 0, 0.05)'\r\n+              color: \"rgba(0, 0, 0, 0.05)\",\r\n             },\r\n             ticks: {\r\n               font: {\r\n-                size: 12\r\n+                size: 12,\r\n               },\r\n-              callback: (value) => `${value} kWh`\r\n-            }\r\n-          }\r\n-        }\r\n-      }\r\n+              callback: (value) => `${value} kWh`,\r\n+            },\r\n+          },\r\n+        },\r\n+      },\r\n     });\r\n   }\r\n-  \r\n+\r\n   startInsightAnimations() {\r\n     gsap.to(\"#insights-header\", {\r\n       opacity: 1,\r\n       y: 0,\r\n       duration: 0.6,\r\n-      ease: \"power2.out\"\r\n+      ease: \"power2.out\",\r\n     });\r\n-  \r\n+\r\n     gsap.to(\"#progress-tracker\", {\r\n       opacity: 1,\r\n       y: 0,\r\n       duration: 0.6,\r\n       delay: 0.2,\r\n-      ease: \"power2.out\"\r\n+      ease: \"power2.out\",\r\n     });\r\n-  \r\n+\r\n     gsap.to(\"#consumption-card\", {\r\n       opacity: 1,\r\n       y: 0,\r\n       duration: 0.6,\r\n       delay: 0.4,\r\n-      ease: \"power2.out\"\r\n+      ease: \"power2.out\",\r\n     });\r\n-  \r\n+\r\n     gsap.to(\".consumption-metric\", {\r\n       opacity: 1,\r\n       y: 0,\r\n       duration: 0.6,\r\n       stagger: 0.2,\r\n       delay: 0.6,\r\n-      ease: \"power2.out\"\r\n+      ease: \"power2.out\",\r\n     });\r\n\\ No newline at end of file\n-  \r\n+\r\n     gsap.to(\"#next-steps-card\", {\r\n       opacity: 1,\r\n       y: 0,\r\n       duration: 0.6,\r\n       delay: 1,\r\n-      ease: \"power2.out\"\r\n+      ease: \"power2.out\",\r\n     });\r\n   }\r\n-  \r\n+\r\n   // Utility methods\r\n   formatCurrency(value) {\r\n-    return new Intl.NumberFormat('en-PK', {\r\n-      style: 'currency',\r\n-      currency: 'PKR',\r\n+    return new Intl.NumberFormat(\"en-PK\", {\r\n+      style: \"currency\",\r\n+      currency: \"PKR\",\r\n       minimumFractionDigits: 0,\r\n-      maximumFractionDigits: 0\r\n+      maximumFractionDigits: 0,\r\n     }).format(value);\r\n   }\r\n-  \r\n+\r\n   calculateDueDays() {\r\n     const dueDate = new Date(this.billData.dueDate);\r\n     const today = new Date();\r\n     const diffTime = Math.abs(dueDate - today);\r\n     return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n   }\r\n-  \r\n+\r\n   calculateBillProgress() {\r\n     const daysInMonth = 30;\r\n     const today = new Date();\r\n     const billDate = new Date(this.billData.issueDate);\r\n     const daysPassed = Math.ceil((today - billDate) / (1000 * 60 * 60 * 24));\r\n     return Math.min((daysPassed / daysInMonth) * 100, 100);\r\n   }\r\n-  \r\n+\r\n   calculateEfficiency() {\r\n     const avgConsumption = 500; // Example average consumption\r\n     const efficiency = (this.billData.unitsConsumed / avgConsumption) * 100;\r\n-    return efficiency <= 100 ? 'High' : 'Low';\r\n+    return efficiency <= 100 ? \"High\" : \"Low\";\r\n   }\r\n-  \r\n+\r\n   formatChange(data) {\r\n     const lastTwo = data.slice(-2);\r\n-    const change = ((lastTwo[1].consumption - lastTwo[0].consumption) / lastTwo[0].consumption) * 100;\r\n+    const change =\r\n+      ((lastTwo[1].consumption - lastTwo[0].consumption) /\r\n+        lastTwo[0].consumption) *\r\n+      100;\r\n     return change.toFixed(1);\r\n   }\r\n-  \r\n+\r\n   attachEventListeners() {\r\n-    const quoteButton = document.getElementById('proceed-to-quote');\r\n+    const quoteButton = document.getElementById(\"proceed-to-quote\");\r\n     if (quoteButton) {\r\n-      quoteButton.addEventListener('click', () => {\r\n-        window.router.push('/quote');\r\n+      quoteButton.addEventListener(\"click\", () => {\r\n+        window.router.push(\"/quote\");\r\n       });\r\n     }\r\n   }\r\n-}\n+}\r\n"
                },
                {
                    "date": 1731613330994,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -46,8 +46,111 @@\n     this.renderInsights();\r\n     this.startAnimation();\r\n   }\r\n \r\n+  async startAnimation() {\r\n+    if (this.error) {\r\n+      this.showError();\r\n+      return;\r\n+    }\r\n+\r\n+    const billPreviewContainer = document.getElementById(\r\n+      \"bill-preview-container\"\r\n+    );\r\n+    const insightsContainer = document.getElementById(\"insights-container\");\r\n+    const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n+    const billReviewPage = document.getElementById(\"bill-review-page\");\r\n+\r\n+    if (\r\n+      !billPreviewContainer ||\r\n+      !insightsContainer ||\r\n+      !loadingIndicator ||\r\n+      !billReviewPage\r\n+    ) {\r\n+      console.error(\"Required DOM elements not found\");\r\n+      return;\r\n+    }\r\n+\r\n+    // Initial states\r\n+    gsap.set([billPreviewContainer, insightsContainer, loadingIndicator], {\r\n+      opacity: 0,\r\n+    });\r\n+    gsap.set(billPreviewContainer, {\r\n+      scale: 0.9,\r\n+      position: \"absolute\",\r\n+      left: \"50%\",\r\n+      top: \"50%\",\r\n+      xPercent: -50,\r\n+      yPercent: -50,\r\n+      width: \"47.5%\",\r\n+    });\r\n+    gsap.set(insightsContainer, {\r\n+      xPercent: 100,\r\n+    });\r\n+    gsap.set(loadingIndicator, {\r\n+      scale: 0.5,\r\n+    });\r\n+\r\n+    try {\r\n+      // Create animation timeline\r\n+      const tl = gsap.timeline({\r\n+        defaults: { duration: 0.8, ease: \"power2.out\" },\r\n+      });\r\n+\r\n+      // Animation sequence\r\n+      await tl\r\n+        .to(billPreviewContainer, {\r\n+          opacity: 1,\r\n+          scale: 1,\r\n+          duration: 1,\r\n+        })\r\n+        .to(loadingIndicator, {\r\n+          opacity: 1,\r\n+          scale: 1,\r\n+          duration: 0.5,\r\n+        })\r\n+        .to(loadingIndicator, {\r\n+          opacity: 0,\r\n+          scale: 0.5,\r\n+          delay: 1,\r\n+        })\r\n+        .to(\r\n+          billPreviewContainer,\r\n+          {\r\n+            left: \"0%\",\r\n+            top: \"0%\",\r\n+            xPercent: 0,\r\n+            yPercent: 0,\r\n+            width: \"50%\",\r\n+            position: \"relative\",\r\n+          },\r\n+          \"-=0.3\"\r\n+        )\r\n+        .to(\r\n+          insightsContainer,\r\n+          {\r\n+            opacity: 1,\r\n+            xPercent: 0,\r\n+          },\r\n+          \"-=0.5\"\r\n+        )\r\n+        .to(\r\n+          billReviewPage,\r\n+          {\r\n+            backgroundColor: \"var(--color-bg-secondary)\",\r\n+            duration: 1,\r\n+          },\r\n+          \"-=0.5\"\r\n+        );\r\n+\r\n+      // Render insights after animations\r\n+      this.renderInsights();\r\n+    } catch (error) {\r\n+      console.error(\"Animation error:\", error);\r\n+      this.showError();\r\n+    }\r\n+  }\r\n+\r\n   attachBaseStyles() {\r\n     const style = document.createElement(\"style\");\r\n     style.textContent = this.getBaseStyles();\r\n     document.head.appendChild(style);\r\n@@ -196,9 +299,9 @@\n         padding: 0.75rem !important;\r\n         box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1) !important;\r\n       }\r\n     `;\r\n-  } \r\n+  }\r\n \r\n   renderBillPreview() {\r\n     if (!this.billData) {\r\n       console.error(\"Bill data is not available\");\r\n@@ -550,5 +653,5 @@\n         window.router.push(\"/quote\");\r\n       });\r\n     }\r\n   }\r\n-}\n\\ No newline at end of file\n+}\r\n"
                },
                {
                    "date": 1731613486865,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,108 +48,78 @@\n   }\r\n \r\n   async startAnimation() {\r\n     if (this.error) {\r\n-      this.showError();\r\n-      return;\r\n+        this.showError();\r\n+        return;\r\n     }\r\n \r\n-    const billPreviewContainer = document.getElementById(\r\n-      \"bill-preview-container\"\r\n-    );\r\n-    const insightsContainer = document.getElementById(\"insights-container\");\r\n+    const billPreviewContainer = document.getElementById(\"bill-preview-container\");\r\n+    const systemSizingContainer = document.getElementById(\"system-sizing-container\");\r\n     const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n-    const billReviewPage = document.getElementById(\"bill-review-page\");\r\n+    const quoteResultPage = document.getElementById(\"quote-result-page\");\r\n \r\n-    if (\r\n-      !billPreviewContainer ||\r\n-      !insightsContainer ||\r\n-      !loadingIndicator ||\r\n-      !billReviewPage\r\n-    ) {\r\n-      console.error(\"Required DOM elements not found\");\r\n-      return;\r\n-    }\r\n-\r\n     // Initial states\r\n-    gsap.set([billPreviewContainer, insightsContainer, loadingIndicator], {\r\n-      opacity: 0,\r\n+    gsap.set([billPreviewContainer, systemSizingContainer, loadingIndicator], {\r\n+        opacity: 0\r\n     });\r\n     gsap.set(billPreviewContainer, {\r\n-      scale: 0.9,\r\n-      position: \"absolute\",\r\n-      left: \"50%\",\r\n-      top: \"50%\",\r\n-      xPercent: -50,\r\n-      yPercent: -50,\r\n-      width: \"47.5%\",\r\n+        scale: 0.9,\r\n+        position: 'absolute',\r\n+        left: '50%',\r\n+        top: '50%',\r\n+        xPercent: -50,\r\n+        yPercent: -50,\r\n+        width: \"47.5%\"\r\n     });\r\n-    gsap.set(insightsContainer, {\r\n-      xPercent: 100,\r\n+    gsap.set(systemSizingContainer, {\r\n+        xPercent: 100\r\n     });\r\n     gsap.set(loadingIndicator, {\r\n-      scale: 0.5,\r\n+        scale: 0.5\r\n     });\r\n \r\n-    try {\r\n-      // Create animation timeline\r\n-      const tl = gsap.timeline({\r\n-        defaults: { duration: 0.8, ease: \"power2.out\" },\r\n-      });\r\n+    const tl = gsap.timeline({\r\n+        defaults: { duration: 0.8, ease: \"power2.out\" }\r\n+    });\r\n \r\n-      // Animation sequence\r\n-      await tl\r\n+    // Animation sequence\r\n+    await tl\r\n         .to(billPreviewContainer, {\r\n-          opacity: 1,\r\n-          scale: 1,\r\n-          duration: 1,\r\n+            opacity: 1,\r\n+            scale: 1,\r\n+            duration: 1\r\n         })\r\n         .to(loadingIndicator, {\r\n-          opacity: 1,\r\n-          scale: 1,\r\n-          duration: 0.5,\r\n+            opacity: 1,\r\n+            scale: 1,\r\n+            duration: 0.5\r\n         })\r\n         .to(loadingIndicator, {\r\n-          opacity: 0,\r\n-          scale: 0.5,\r\n-          delay: 1,\r\n+            opacity: 0,\r\n+            scale: 0.5,\r\n+            delay: 1\r\n         })\r\n-        .to(\r\n-          billPreviewContainer,\r\n-          {\r\n+        .to(billPreviewContainer, {\r\n             left: \"0%\",\r\n             top: \"0%\",\r\n             xPercent: 0,\r\n             yPercent: 0,\r\n             width: \"50%\",\r\n-            position: \"relative\",\r\n-          },\r\n-          \"-=0.3\"\r\n-        )\r\n-        .to(\r\n-          insightsContainer,\r\n-          {\r\n+            position: 'relative'\r\n+        }, \"-=0.3\")\r\n+        .to(systemSizingContainer, {\r\n             opacity: 1,\r\n-            xPercent: 0,\r\n-          },\r\n-          \"-=0.5\"\r\n-        )\r\n-        .to(\r\n-          billReviewPage,\r\n-          {\r\n+            xPercent: 0\r\n+        }, \"-=0.5\")\r\n+        .to(quoteResultPage, {\r\n             backgroundColor: \"var(--color-bg-secondary)\",\r\n-            duration: 1,\r\n-          },\r\n-          \"-=0.5\"\r\n-        );\r\n+            duration: 1\r\n+        }, \"-=0.5\");\r\n \r\n-      // Render insights after animations\r\n-      this.renderInsights();\r\n-    } catch (error) {\r\n-      console.error(\"Animation error:\", error);\r\n-      this.showError();\r\n-    }\r\n-  }\r\n+    // Render system sizing after animations\r\n+    this.renderSystemSizing();\r\n+}\r\n \r\n   attachBaseStyles() {\r\n     const style = document.createElement(\"style\");\r\n     style.textContent = this.getBaseStyles();\r\n"
                },
                {
                    "date": 1731613580882,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,78 +48,92 @@\n   }\r\n \r\n   async startAnimation() {\r\n     if (this.error) {\r\n-        this.showError();\r\n-        return;\r\n+      this.showError();\r\n+      return;\r\n     }\r\n \r\n-    const billPreviewContainer = document.getElementById(\"bill-preview-container\");\r\n-    const systemSizingContainer = document.getElementById(\"system-sizing-container\");\r\n+    const billPreviewContainer = document.getElementById(\r\n+      \"bill-preview-container\"\r\n+    );\r\n+    const insightsContainer = document.getElementById(\"insights-container\");\r\n     const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n-    const quoteResultPage = document.getElementById(\"quote-result-page\");\r\n+    const billReviewPage = document.getElementById(\"bill-review-page\");\r\n \r\n+    // Hide insights container initially\r\n+    insightsContainer.style.visibility = \"hidden\";\r\n+\r\n     // Initial states\r\n-    gsap.set([billPreviewContainer, systemSizingContainer, loadingIndicator], {\r\n-        opacity: 0\r\n+    gsap.set([billPreviewContainer, loadingIndicator], {\r\n+      opacity: 0,\r\n     });\r\n     gsap.set(billPreviewContainer, {\r\n-        scale: 0.9,\r\n-        position: 'absolute',\r\n-        left: '50%',\r\n-        top: '50%',\r\n-        xPercent: -50,\r\n-        yPercent: -50,\r\n-        width: \"47.5%\"\r\n+      scale: 0.9,\r\n+      position: \"absolute\",\r\n+      left: \"50%\",\r\n+      top: \"50%\",\r\n+      xPercent: -50,\r\n+      yPercent: -50,\r\n+      width: \"47.5%\",\r\n     });\r\n-    gsap.set(systemSizingContainer, {\r\n-        xPercent: 100\r\n-    });\r\n     gsap.set(loadingIndicator, {\r\n-        scale: 0.5\r\n+      scale: 0.5,\r\n     });\r\n \r\n     const tl = gsap.timeline({\r\n-        defaults: { duration: 0.8, ease: \"power2.out\" }\r\n+      defaults: { duration: 0.8, ease: \"power2.out\" },\r\n     });\r\n \r\n     // Animation sequence\r\n     await tl\r\n-        .to(billPreviewContainer, {\r\n-            opacity: 1,\r\n-            scale: 1,\r\n-            duration: 1\r\n-        })\r\n-        .to(loadingIndicator, {\r\n-            opacity: 1,\r\n-            scale: 1,\r\n-            duration: 0.5\r\n-        })\r\n-        .to(loadingIndicator, {\r\n-            opacity: 0,\r\n-            scale: 0.5,\r\n-            delay: 1\r\n-        })\r\n-        .to(billPreviewContainer, {\r\n-            left: \"0%\",\r\n-            top: \"0%\",\r\n-            xPercent: 0,\r\n-            yPercent: 0,\r\n-            width: \"50%\",\r\n-            position: 'relative'\r\n-        }, \"-=0.3\")\r\n-        .to(systemSizingContainer, {\r\n-            opacity: 1,\r\n-            xPercent: 0\r\n-        }, \"-=0.5\")\r\n-        .to(quoteResultPage, {\r\n-            backgroundColor: \"var(--color-bg-secondary)\",\r\n-            duration: 1\r\n-        }, \"-=0.5\");\r\n+      .to(billPreviewContainer, {\r\n+        opacity: 1,\r\n+        scale: 1,\r\n+        duration: 1,\r\n+      })\r\n+      .to(loadingIndicator, {\r\n+        opacity: 1,\r\n+        scale: 1,\r\n+        duration: 0.5,\r\n+      })\r\n+      .to(loadingIndicator, {\r\n+        opacity: 0,\r\n+        scale: 0.5,\r\n+        delay: 1,\r\n+      })\r\n+      .to(\r\n+        billPreviewContainer,\r\n+        {\r\n+          left: \"0%\",\r\n+          top: \"0%\",\r\n+          xPercent: 0,\r\n+          yPercent: 0,\r\n+          width: \"50%\",\r\n+          position: \"relative\",\r\n+        },\r\n+        \"-=0.3\"\r\n+      )\r\n+      .call(() => {\r\n+        // Show insights container before its animation\r\n+        insightsContainer.style.visibility = \"visible\";\r\n+      })\r\n+      .to(insightsContainer, {\r\n+        opacity: 1,\r\n+        duration: 0.5,\r\n+      })\r\n+      .to(\r\n+        billReviewPage,\r\n+        {\r\n+          backgroundColor: \"var(--color-bg-secondary)\",\r\n+          duration: 1,\r\n+        },\r\n+        \"-=0.5\"\r\n+      );\r\n \r\n-    // Render system sizing after animations\r\n-    this.renderSystemSizing();\r\n-}\r\n+    // Render insights after animations\r\n+    this.renderInsights();\r\n+  }\r\n \r\n   attachBaseStyles() {\r\n     const style = document.createElement(\"style\");\r\n     style.textContent = this.getBaseStyles();\r\n"
                },
                {
                    "date": 1731662016459,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,658 @@\n+// BillReviewPage.js\r\n+import { gsap } from \"gsap\";\r\n+import { getBillData } from \"../store/solarSizingState.js\";\r\n+import { BillPreview } from \"./BillPreview.js\";\r\n+import Chart from \"chart.js/auto\";\r\n+\r\n+export class BillReviewPage {\r\n+  constructor() {\r\n+    this.billData = getBillData();\r\n+    this.charts = {};\r\n+  }\r\n+\r\n+  // In BillReviewPage.js\r\n+  render() {\r\n+    const app = document.getElementById(\"app\");\r\n+\r\n+    if (!this.billData) {\r\n+      this.renderError(app);\r\n+      return;\r\n+    }\r\n+\r\n+    // First set invisible container\r\n+    app.innerHTML = `\r\n+      <div class=\"h-screen w-screen bg-white transition-colors duration-1000 overflow-hidden opacity-0\" id=\"quote-result-page\">\r\n+          <!-- Main Content -->\r\n+          <div class=\"h-full w-full flex relative\" id=\"main-content\">\r\n+              <!-- Bill Preview Side -->\r\n+              <div class=\"w-1/2 h-full\" id=\"bill-preview-container\">\r\n+                  <div id=\"bill-preview\" class=\"h-full\"></div>\r\n+              </div>\r\n+\r\n+              <!-- Loading Indicator -->\r\n+              <div class=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center z-10\" \r\n+                   id=\"loading-indicator\">\r\n+                  <div class=\"loading-spinner\"></div>\r\n+                  <p class=\"text-primary font-medium\">Analyzing your bill...</p>\r\n+              </div>\r\n+\r\n+              <!-- Insights Side -->\r\n+              <div class=\"w-1/2 h-full invisible\" id=\"insights-container\">\r\n+              </div>\r\n+          </div>\r\n+      </div>\r\n+  `;\r\n+\r\n+    this.attachBaseStyles();\r\n+\r\n+    // Use requestAnimationFrame to ensure styles are applied before starting\r\n+    requestAnimationFrame(() => {\r\n+      requestAnimationFrame(() => {\r\n+        // Make container visible\r\n+        const container = document.getElementById(\"quote-result-page\");\r\n+        if (container) {\r\n+          container.classList.remove(\"opacity-0\");\r\n+        }\r\n+\r\n+        // Now render bill preview and start animation\r\n+        this.renderBillPreview();\r\n+        this.startAnimation().catch((error) => {\r\n+          console.error(\"Animation failed:\", error);\r\n+          this.showError();\r\n+        });\r\n+      });\r\n+    });\r\n+  }\r\n+\r\n+  async startAnimation() {\r\n+    if (this.error) {\r\n+      this.showError();\r\n+      return;\r\n+    }\r\n+\r\n+    const billPreviewContainer = document.getElementById(\r\n+      \"bill-preview-container\"\r\n+    );\r\n+    const insightsContainer = document.getElementById(\"insights-container\");\r\n+    const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n+    const billReviewPage = document.getElementById(\"bill-review-page\");\r\n+\r\n+    // Hide insights container initially\r\n+    insightsContainer.style.visibility = \"hidden\";\r\n+\r\n+    // Initial states\r\n+    gsap.set([billPreviewContainer, loadingIndicator], {\r\n+      opacity: 0,\r\n+    });\r\n+    gsap.set(billPreviewContainer, {\r\n+      scale: 0.9,\r\n+      position: \"absolute\",\r\n+      left: \"50%\",\r\n+      top: \"50%\",\r\n+      xPercent: -50,\r\n+      yPercent: -50,\r\n+      width: \"47.5%\",\r\n+    });\r\n+    gsap.set(loadingIndicator, {\r\n+      scale: 0.5,\r\n+    });\r\n+\r\n+    const tl = gsap.timeline({\r\n+      defaults: { duration: 0.8, ease: \"power2.out\" },\r\n+    });\r\n+\r\n+    // Animation sequence\r\n+    await tl\r\n+      .to(billPreviewContainer, {\r\n+        opacity: 1,\r\n+        scale: 1,\r\n+        duration: 1,\r\n+      })\r\n+      .to(loadingIndicator, {\r\n+        opacity: 1,\r\n+        scale: 1,\r\n+        duration: 0.5,\r\n+      })\r\n+      .to(loadingIndicator, {\r\n+        opacity: 0,\r\n+        scale: 0.5,\r\n+        delay: 1,\r\n+      })\r\n+      .to(\r\n+        billPreviewContainer,\r\n+        {\r\n+          left: \"0%\",\r\n+          top: \"0%\",\r\n+          xPercent: 0,\r\n+          yPercent: 0,\r\n+          width: \"50%\",\r\n+          position: \"relative\",\r\n+        },\r\n+        \"-=0.3\"\r\n+      )\r\n+      .call(() => {\r\n+        // Show insights container before its animation\r\n+        insightsContainer.style.visibility = \"visible\";\r\n+      })\r\n+      .to(insightsContainer, {\r\n+        opacity: 1,\r\n+        duration: 0.5,\r\n+      })\r\n+      .to(\r\n+        billReviewPage,\r\n+        {\r\n+          backgroundColor: \"var(--color-bg-secondary)\",\r\n+          duration: 1,\r\n+        },\r\n+        \"-=0.5\"\r\n+      );\r\n+\r\n+    // Render insights after animations\r\n+    this.renderInsights();\r\n+  }\r\n+\r\n+  attachBaseStyles() {\r\n+    const style = document.createElement(\"style\");\r\n+    style.textContent = this.getBaseStyles();\r\n+    document.head.appendChild(style);\r\n+  }\r\n+\r\n+  getBaseStyles() {\r\n+    return `\r\n+      /* Base Theme Colors */\r\n+      :root {\r\n+        --color-primary: #3b82f6;\r\n+        --color-primary-dark: #2563eb;\r\n+        --color-primary-light: #93c5fd;\r\n+        --color-success: #10b981;\r\n+        --color-warning: #f59e0b;\r\n+        --color-error: #ef4444;\r\n+        --color-gray-50: #f8fafc;\r\n+        --color-gray-100: #f1f5f9;\r\n+        --color-gray-200: #e2e8f0;\r\n+        --color-gray-300: #cbd5e1;\r\n+        --color-gray-400: #94a3b8;\r\n+        --color-gray-500: #64748b;\r\n+        --color-gray-600: #475569;\r\n+        --color-gray-700: #334155;\r\n+        --color-gray-800: #1e293b;\r\n+        --color-gray-900: #0f172a;\r\n+      }\r\n+\r\n+      /* Loading Spinner */\r\n+      .loading-spinner {\r\n+        width: 40px;\r\n+        height: 40px;\r\n+        border: 4px solid var(--color-gray-200);\r\n+        border-left-color: var(--color-primary);\r\n+        border-radius: 50%;\r\n+        animation: spin 1s linear infinite;\r\n+      }\r\n+\r\n+      @keyframes spin {\r\n+        to { transform: rotate(360deg); }\r\n+      }\r\n+\r\n+      /* Card Styles */\r\n+      .insight-card {\r\n+        background: white;\r\n+        border-radius: 1rem;\r\n+        box-shadow: 0 1px 3px rgba(0,0,0,0.1);\r\n+        transition: all 0.3s ease;\r\n+        border: 1px solid var(--color-gray-100);\r\n+      }\r\n+\r\n+      .insight-card:hover {\r\n+        transform: translateY(-2px);\r\n+        box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);\r\n+      }\r\n+\r\n+      /* Glass Effect */\r\n+      .glass-effect {\r\n+        background: rgba(255, 255, 255, 0.7);\r\n+        backdrop-filter: blur(10px);\r\n+        border: 1px solid rgba(255, 255, 255, 0.3);\r\n+      }\r\n+\r\n+      /* Custom Scrollbar */\r\n+      .custom-scrollbar {\r\n+        scrollbar-width: thin;\r\n+        scrollbar-color: var(--color-gray-300) transparent;\r\n+      }\r\n+\r\n+      .custom-scrollbar::-webkit-scrollbar {\r\n+        width: 6px;\r\n+      }\r\n+\r\n+      .custom-scrollbar::-webkit-scrollbar-track {\r\n+        background: transparent;\r\n+      }\r\n+\r\n+      .custom-scrollbar::-webkit-scrollbar-thumb {\r\n+        background-color: var(--color-gray-300);\r\n+        border-radius: 3px;\r\n+      }\r\n+\r\n+      /* Progress Bar */\r\n+      .progress-step {\r\n+        position: relative;\r\n+        z-index: 1;\r\n+      }\r\n+\r\n+      .progress-step::after {\r\n+        content: '';\r\n+        position: absolute;\r\n+        top: 50%;\r\n+        left: 100%;\r\n+        width: 100%;\r\n+        height: 2px;\r\n+        background: var(--color-gray-200);\r\n+        transform: translateY(-50%);\r\n+      }\r\n+\r\n+      .progress-step.active::after {\r\n+        background: var(--color-primary);\r\n+      }\r\n+\r\n+      /* Animated Gradients */\r\n+      .animated-gradient {\r\n+        background: linear-gradient(\r\n+          45deg,\r\n+          var(--color-primary),\r\n+          var(--color-primary-dark),\r\n+          var(--color-primary)\r\n+        );\r\n+        background-size: 200% 200%;\r\n+        animation: gradient 15s ease infinite;\r\n+      }\r\n+\r\n+      @keyframes gradient {\r\n+        0% { background-position: 0% 50%; }\r\n+        50% { background-position: 100% 50%; }\r\n+        100% { background-position: 0% 50%; }\r\n+      }\r\n+\r\n+      /* Responsive Design */\r\n+      @media (max-width: 1024px) {\r\n+        .insight-card {\r\n+          padding: 1rem;\r\n+        }\r\n+      }\r\n+\r\n+      @media (max-width: 768px) {\r\n+        #main-content {\r\n+          flex-direction: column;\r\n+        }\r\n+\r\n+        #bill-preview-container,\r\n+        #insights-container {\r\n+          width: 100%;\r\n+          height: 50%;\r\n+        }\r\n+      }\r\n+\r\n+      /* Chart Tooltips */\r\n+      .chart-tooltip {\r\n+        background: rgba(255, 255, 255, 0.95) !important;\r\n+        backdrop-filter: blur(4px);\r\n+        border: 1px solid var(--color-gray-200) !important;\r\n+        border-radius: 0.5rem !important;\r\n+        padding: 0.75rem !important;\r\n+        box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1) !important;\r\n+      }\r\n+    `;\r\n+  }\r\n+\r\n+  renderBillPreview() {\r\n+    if (!this.billData) {\r\n+      console.error(\"Bill data is not available\");\r\n+      this.renderError(document.getElementById(\"app\"));\r\n+      return;\r\n+    }\r\n+\r\n+    const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n+    if (!billPreviewContainer) {\r\n+      console.error(\"Bill preview container not found\");\r\n+      return;\r\n+    }\r\n+\r\n+    const billPreview = new BillPreview(this.billData);\r\n+    billPreview.render(billPreviewContainer);\r\n+  }\r\n+\r\n+  renderError(container) {\r\n+    container.innerHTML = `\r\n+        <div class=\"flex items-center justify-center h-screen\">\r\n+            <div class=\"text-center\">\r\n+                <h2 class=\"text-xl font-semibold text-gray-800 mb-2\">Error</h2>\r\n+                <p class=\"text-gray-600\">Bill data is not available. Please try again.</p>\r\n+                <button onclick=\"window.router.push('/')\" \r\n+                        class=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors\">\r\n+                    Go Back\r\n+                </button>\r\n+            </div>\r\n+        </div>\r\n+    `;\r\n+  }\r\n+\r\n+  renderInsights() {\r\n+    const insightsContainer = document.querySelector(\"#insights-container\");\r\n+    if (!insightsContainer) return;\r\n+\r\n+    // Generate trend data for the last 6 months\r\n+    const trendData = this.generateTrendData();\r\n+\r\n+    insightsContainer.innerHTML = `\r\n+      <div class=\"h-full flex flex-col p-8 custom-scrollbar\">\r\n+        <!-- Header Section -->\r\n+        <div class=\"flex items-center space-x-4 mb-8 opacity-0\" id=\"insights-header\">\r\n+          <div class=\"flex-shrink-0\">\r\n+            <div class=\"w-12 h-12 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center\">\r\n+              <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n+              </svg>\r\n+            </div>\r\n+          </div>\r\n+          <div>\r\n+            <h2 class=\"text-2xl font-bold text-gray-900\">Bill Analysis</h2>\r\n+            <p class=\"text-gray-500\">Understanding your energy consumption</p>\r\n+          </div>\r\n+        </div>\r\n+  \r\n+        <!-- Progress Tracker -->\r\n+        <div class=\"glass-effect rounded-xl p-6 mb-8 opacity-0\" id=\"progress-tracker\">\r\n+          <div class=\"flex justify-between\">\r\n+            <div class=\"flex items-center\">\r\n+              <div class=\"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-semibold\">1</div>\r\n+              <div class=\"ml-4\">\r\n+                <p class=\"font-semibold text-gray-900\">Bill Review</p>\r\n+                <p class=\"text-sm text-gray-500\">Analyzing consumption patterns</p>\r\n+              </div>\r\n+            </div>\r\n+            <div class=\"w-32 h-0.5 self-center bg-gray-200\"></div>\r\n+            <div class=\"flex items-center\">\r\n+              <div class=\"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold\">2</div>\r\n+              <div class=\"ml-4\">\r\n+                <p class=\"font-semibold text-gray-400\">Solar Quote</p>\r\n+                <p class=\"text-sm text-gray-400\">Up next</p>\r\n+              </div>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+  \r\n+        <!-- Consumption Analysis Card -->\r\n+        <div class=\"insight-card p-6 mb-6 opacity-0\" id=\"consumption-card\">\r\n+          <div class=\"flex justify-between items-center mb-6\">\r\n+            <div>\r\n+              <h3 class=\"text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n+              <p class=\"text-sm text-gray-500\">Last 6 months trend</p>\r\n+            </div>\r\n+            <div class=\"px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-sm font-medium\">\r\n+              ${this.formatChange(trendData)}% vs last month\r\n+            </div>\r\n+          </div>\r\n+          <div class=\"h-64\">\r\n+            <canvas id=\"consumption-trend-chart\"></canvas>\r\n+          </div>\r\n+        </div>\r\n+  \r\n+        <!-- Key Metrics Grid -->\r\n+        <div class=\"grid grid-cols-2 gap-6 mb-8\">\r\n+          <!-- Current Bill Card -->\r\n+          <div class=\"insight-card p-6 opacity-0 consumption-metric\">\r\n+            <div class=\"flex items-center justify-between mb-4\">\r\n+              <div class=\"w-12 h-12 rounded-lg bg-green-50 flex items-center justify-center\">\r\n+                <svg class=\"w-6 h-6 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n+                </svg>\r\n+              </div>\r\n+              <span class=\"px-2 py-1 bg-green-50 text-green-600 text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n+            </div>\r\n+            <p class=\"text-sm text-gray-500 mb-1\">Current Bill</p>\r\n+            <p class=\"text-2xl font-bold text-gray-900\">${this.formatCurrency(\r\n+              this.billData.totalAmount\r\n+            )}</p>\r\n+            <div class=\"mt-4 h-1 bg-gray-100 rounded\">\r\n+              <div class=\"h-full bg-green-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n+            </div>\r\n+          </div>\r\n+  \r\n+          <!-- Units Consumed Card -->\r\n+          <div class=\"insight-card p-6 opacity-0 consumption-metric\">\r\n+            <div class=\"flex items-center justify-between mb-4\">\r\n+              <div class=\"w-12 h-12 rounded-lg bg-blue-50 flex items-center justify-center\">\r\n+                <svg class=\"w-6 h-6 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n+                </svg>\r\n+              </div>\r\n+              <span class=\"px-2 py-1 bg-blue-50 text-blue-600 text-sm rounded-full\">\r\n+                ${this.calculateEfficiency()} efficiency\r\n+              </span>\r\n+            </div>\r\n+            <p class=\"text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n+            <p class=\"text-2xl font-bold text-gray-900\">${\r\n+              this.billData.unitsConsumed\r\n+            } kWh</p>\r\n+            <p class=\"text-sm text-gray-500 mt-2\">\r\n+              Rate: ${this.formatCurrency(this.billData.ratePerUnit)}/kWh\r\n+            </p>\r\n+          </div>\r\n+        </div>\r\n+  \r\n+        <!-- Next Steps Card -->\r\n+        <div class=\"mt-auto\">\r\n+          <div class=\"insight-card p-6 opacity-0\" id=\"next-steps-card\">\r\n+            <div class=\"absolute -top-3 -right-3\">\r\n+              <div class=\"w-16 h-16 animated-gradient rounded-full flex items-center justify-center\">\r\n+                <svg class=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n+                </svg>\r\n+              </div>\r\n+            </div>\r\n+            <div class=\"max-w-lg\">\r\n+              <h3 class=\"text-xl font-semibold text-gray-900 mb-2\">Ready For Your Solar Quote?</h3>\r\n+              <p class=\"text-gray-600 mb-6\">\r\n+                We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n+              </p>\r\n+              <button \r\n+                id=\"proceed-to-quote\" \r\n+                class=\"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4 rounded-xl font-medium\r\n+                       hover:from-blue-700 hover:to-blue-800 transition-all duration-300 shadow-sm hover:shadow-lg\r\n+                       flex items-center justify-center gap-2 group\"\r\n+              >\r\n+                Generate My Solar Quote\r\n+                <svg class=\"w-5 h-5 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n+                </svg>\r\n+              </button>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n+    `;\r\n+\r\n+    this.initializeCharts(trendData);\r\n+    this.startInsightAnimations();\r\n+    this.attachEventListeners();\r\n+  }\r\n+\r\n+  generateTrendData() {\r\n+    const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\"];\r\n+    return months.map((month) => ({\r\n+      month,\r\n+      consumption: Math.floor(\r\n+        this.billData.unitsConsumed * (0.8 + Math.random() * 0.4)\r\n+      ),\r\n+    }));\r\n+  }\r\n+\r\n+  initializeCharts(trendData) {\r\n+    const ctx = document.getElementById(\"consumption-trend-chart\");\r\n+    if (!ctx) return;\r\n+\r\n+    this.charts.consumption = new Chart(ctx, {\r\n+      type: \"line\",\r\n+      data: {\r\n+        labels: trendData.map((d) => d.month),\r\n+        datasets: [\r\n+          {\r\n+            label: \"Consumption (kWh)\",\r\n+            data: trendData.map((d) => d.consumption),\r\n+            borderColor: \"#3b82f6\",\r\n+            backgroundColor: \"rgba(59, 130, 246, 0.1)\",\r\n+            tension: 0.4,\r\n+            fill: true,\r\n+            pointRadius: 6,\r\n+            pointHoverRadius: 8,\r\n+            pointBackgroundColor: \"#ffffff\",\r\n+            pointBorderColor: \"#3b82f6\",\r\n+            pointBorderWidth: 2,\r\n+          },\r\n+        ],\r\n+      },\r\n+      options: {\r\n+        responsive: true,\r\n+        maintainAspectRatio: false,\r\n+        plugins: {\r\n+          legend: {\r\n+            display: false,\r\n+          },\r\n+          tooltip: {\r\n+            backgroundColor: \"white\",\r\n+            titleColor: \"#1f2937\",\r\n+            bodyColor: \"#4b5563\",\r\n+            borderColor: \"#e5e7eb\",\r\n+            borderWidth: 1,\r\n+            padding: 12,\r\n+            titleFont: {\r\n+              size: 14,\r\n+              weight: \"bold\",\r\n+            },\r\n+            bodyFont: {\r\n+              size: 13,\r\n+            },\r\n+            displayColors: false,\r\n+            callbacks: {\r\n+              label: (context) => `${context.parsed.y.toLocaleString()} kWh`,\r\n+            },\r\n+          },\r\n+        },\r\n+        scales: {\r\n+          x: {\r\n+            grid: {\r\n+              display: false,\r\n+            },\r\n+            ticks: {\r\n+              font: {\r\n+                size: 12,\r\n+              },\r\n+            },\r\n+          },\r\n+          y: {\r\n+            beginAtZero: true,\r\n+            grid: {\r\n+              color: \"rgba(0, 0, 0, 0.05)\",\r\n+            },\r\n+            ticks: {\r\n+              font: {\r\n+                size: 12,\r\n+              },\r\n+              callback: (value) => `${value} kWh`,\r\n+            },\r\n+          },\r\n+        },\r\n+      },\r\n+    });\r\n+  }\r\n+\r\n+  startInsightAnimations() {\r\n+    gsap.to(\"#insights-header\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      ease: \"power2.out\",\r\n+    });\r\n+\r\n+    gsap.to(\"#progress-tracker\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      delay: 0.2,\r\n+      ease: \"power2.out\",\r\n+    });\r\n+\r\n+    gsap.to(\"#consumption-card\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      delay: 0.4,\r\n+      ease: \"power2.out\",\r\n+    });\r\n+\r\n+    gsap.to(\".consumption-metric\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      stagger: 0.2,\r\n+      delay: 0.6,\r\n+      ease: \"power2.out\",\r\n+    });\r\n+\r\n+    gsap.to(\"#next-steps-card\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      delay: 1,\r\n+      ease: \"power2.out\",\r\n+    });\r\n+  }\r\n+\r\n+  // Utility methods\r\n+  formatCurrency(value) {\r\n+    return new Intl.NumberFormat(\"en-PK\", {\r\n+      style: \"currency\",\r\n+      currency: \"PKR\",\r\n+      minimumFractionDigits: 0,\r\n+      maximumFractionDigits: 0,\r\n+    }).format(value);\r\n+  }\r\n+\r\n+  calculateDueDays() {\r\n+    const dueDate = new Date(this.billData.dueDate);\r\n+    const today = new Date();\r\n+    const diffTime = Math.abs(dueDate - today);\r\n+    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n+  }\r\n+\r\n+  calculateBillProgress() {\r\n+    const daysInMonth = 30;\r\n+    const today = new Date();\r\n+    const billDate = new Date(this.billData.issueDate);\r\n+    const daysPassed = Math.ceil((today - billDate) / (1000 * 60 * 60 * 24));\r\n+    return Math.min((daysPassed / daysInMonth) * 100, 100);\r\n+  }\r\n+\r\n+  calculateEfficiency() {\r\n+    const avgConsumption = 500; // Example average consumption\r\n+    const efficiency = (this.billData.unitsConsumed / avgConsumption) * 100;\r\n+    return efficiency <= 100 ? \"High\" : \"Low\";\r\n+  }\r\n+\r\n+  formatChange(data) {\r\n+    const lastTwo = data.slice(-2);\r\n+    const change =\r\n+      ((lastTwo[1].consumption - lastTwo[0].consumption) /\r\n+        lastTwo[0].consumption) *\r\n+      100;\r\n+    return change.toFixed(1);\r\n+  }\r\n+\r\n+  attachEventListeners() {\r\n+    const quoteButton = document.getElementById(\"proceed-to-quote\");\r\n+    if (quoteButton) {\r\n+      quoteButton.addEventListener(\"click\", () => {\r\n+        window.router.push(\"/quote\");\r\n+      });\r\n+    }\r\n+  }\r\n+}\r\n"
                },
                {
                    "date": 1731662022461,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,8 @@\n     this.billData = getBillData();\r\n     this.charts = {};\r\n   }\r\n \r\n-  // In BillReviewPage.js\r\n   render() {\r\n     const app = document.getElementById(\"app\");\r\n \r\n     if (!this.billData) {\r\n@@ -655,645 +654,4 @@\n       });\r\n     }\r\n   }\r\n }\r\n-// BillReviewPage.js\r\n-import { gsap } from \"gsap\";\r\n-import { getBillData } from \"../store/solarSizingState.js\";\r\n-import { BillPreview } from \"./BillPreview.js\";\r\n-import Chart from \"chart.js/auto\";\r\n-\r\n-export class BillReviewPage {\r\n-  constructor() {\r\n-    this.billData = getBillData();\r\n-    this.charts = {};\r\n-  }\r\n-\r\n-  render() {\r\n-    const app = document.getElementById(\"app\");\r\n-\r\n-    if (!this.billData) {\r\n-      this.renderError(app);\r\n-      return;\r\n-    }\r\n-\r\n-    app.innerHTML = `\r\n-      <div class=\"h-screen w-screen bg-slate-50 transition-colors duration-1000 overflow-hidden\">\r\n-        <!-- Main Content -->\r\n-        <div class=\"h-full w-full flex relative\" id=\"main-content\">\r\n-          <!-- Bill Preview Side -->\r\n-          <div class=\"w-1/2 h-full\" id=\"bill-preview-container\">\r\n-            <div id=\"bill-preview\" class=\"h-full\"></div>\r\n-          </div>\r\n-\r\n-          <!-- Loading Indicator -->\r\n-          <div class=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center z-10\" \r\n-               id=\"loading-indicator\">\r\n-            <div class=\"loading-spinner\"></div>\r\n-            <p class=\"text-primary font-medium mt-4\">Analyzing your bill...</p>\r\n-          </div>\r\n-\r\n-          <!-- Insights Side -->\r\n-          <div class=\"w-1/2 h-full\" id=\"insights-container\">\r\n-          </div>\r\n-        </div>\r\n-      </div>\r\n-    `;\r\n-\r\n-    this.attachBaseStyles();\r\n-    this.renderBillPreview();\r\n-    this.renderInsights();\r\n-    this.startAnimation();\r\n-  }\r\n-\r\n-  async startAnimation() {\r\n-    if (this.error) {\r\n-      this.showError();\r\n-      return;\r\n-    }\r\n-\r\n-    const billPreviewContainer = document.getElementById(\r\n-      \"bill-preview-container\"\r\n-    );\r\n-    const insightsContainer = document.getElementById(\"insights-container\");\r\n-    const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n-    const billReviewPage = document.getElementById(\"bill-review-page\");\r\n-\r\n-    // Hide insights container initially\r\n-    insightsContainer.style.visibility = \"hidden\";\r\n-\r\n-    // Initial states\r\n-    gsap.set([billPreviewContainer, loadingIndicator], {\r\n-      opacity: 0,\r\n-    });\r\n-    gsap.set(billPreviewContainer, {\r\n-      scale: 0.9,\r\n-      position: \"absolute\",\r\n-      left: \"50%\",\r\n-      top: \"50%\",\r\n-      xPercent: -50,\r\n-      yPercent: -50,\r\n-      width: \"47.5%\",\r\n-    });\r\n-    gsap.set(loadingIndicator, {\r\n-      scale: 0.5,\r\n-    });\r\n-\r\n-    const tl = gsap.timeline({\r\n-      defaults: { duration: 0.8, ease: \"power2.out\" },\r\n-    });\r\n-\r\n-    // Animation sequence\r\n-    await tl\r\n-      .to(billPreviewContainer, {\r\n-        opacity: 1,\r\n-        scale: 1,\r\n-        duration: 1,\r\n-      })\r\n-      .to(loadingIndicator, {\r\n-        opacity: 1,\r\n-        scale: 1,\r\n-        duration: 0.5,\r\n-      })\r\n-      .to(loadingIndicator, {\r\n-        opacity: 0,\r\n-        scale: 0.5,\r\n-        delay: 1,\r\n-      })\r\n-      .to(\r\n-        billPreviewContainer,\r\n-        {\r\n-          left: \"0%\",\r\n-          top: \"0%\",\r\n-          xPercent: 0,\r\n-          yPercent: 0,\r\n-          width: \"50%\",\r\n-          position: \"relative\",\r\n-        },\r\n-        \"-=0.3\"\r\n-      )\r\n-      .call(() => {\r\n-        // Show insights container before its animation\r\n-        insightsContainer.style.visibility = \"visible\";\r\n-      })\r\n-      .to(insightsContainer, {\r\n-        opacity: 1,\r\n-        duration: 0.5,\r\n-      })\r\n-      .to(\r\n-        billReviewPage,\r\n-        {\r\n-          backgroundColor: \"var(--color-bg-secondary)\",\r\n-          duration: 1,\r\n-        },\r\n-        \"-=0.5\"\r\n-      );\r\n-\r\n-    // Render insights after animations\r\n-    this.renderInsights();\r\n-  }\r\n-\r\n-  attachBaseStyles() {\r\n-    const style = document.createElement(\"style\");\r\n-    style.textContent = this.getBaseStyles();\r\n-    document.head.appendChild(style);\r\n-  }\r\n-\r\n-  getBaseStyles() {\r\n-    return `\r\n-      /* Base Theme Colors */\r\n-      :root {\r\n-        --color-primary: #3b82f6;\r\n-        --color-primary-dark: #2563eb;\r\n-        --color-primary-light: #93c5fd;\r\n-        --color-success: #10b981;\r\n-        --color-warning: #f59e0b;\r\n-        --color-error: #ef4444;\r\n-        --color-gray-50: #f8fafc;\r\n-        --color-gray-100: #f1f5f9;\r\n-        --color-gray-200: #e2e8f0;\r\n-        --color-gray-300: #cbd5e1;\r\n-        --color-gray-400: #94a3b8;\r\n-        --color-gray-500: #64748b;\r\n-        --color-gray-600: #475569;\r\n-        --color-gray-700: #334155;\r\n-        --color-gray-800: #1e293b;\r\n-        --color-gray-900: #0f172a;\r\n-      }\r\n-\r\n-      /* Loading Spinner */\r\n-      .loading-spinner {\r\n-        width: 40px;\r\n-        height: 40px;\r\n-        border: 4px solid var(--color-gray-200);\r\n-        border-left-color: var(--color-primary);\r\n-        border-radius: 50%;\r\n-        animation: spin 1s linear infinite;\r\n-      }\r\n-\r\n-      @keyframes spin {\r\n-        to { transform: rotate(360deg); }\r\n-      }\r\n-\r\n-      /* Card Styles */\r\n-      .insight-card {\r\n-        background: white;\r\n-        border-radius: 1rem;\r\n-        box-shadow: 0 1px 3px rgba(0,0,0,0.1);\r\n-        transition: all 0.3s ease;\r\n-        border: 1px solid var(--color-gray-100);\r\n-      }\r\n-\r\n-      .insight-card:hover {\r\n-        transform: translateY(-2px);\r\n-        box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);\r\n-      }\r\n-\r\n-      /* Glass Effect */\r\n-      .glass-effect {\r\n-        background: rgba(255, 255, 255, 0.7);\r\n-        backdrop-filter: blur(10px);\r\n-        border: 1px solid rgba(255, 255, 255, 0.3);\r\n-      }\r\n-\r\n-      /* Custom Scrollbar */\r\n-      .custom-scrollbar {\r\n-        scrollbar-width: thin;\r\n-        scrollbar-color: var(--color-gray-300) transparent;\r\n-      }\r\n-\r\n-      .custom-scrollbar::-webkit-scrollbar {\r\n-        width: 6px;\r\n-      }\r\n-\r\n-      .custom-scrollbar::-webkit-scrollbar-track {\r\n-        background: transparent;\r\n-      }\r\n-\r\n-      .custom-scrollbar::-webkit-scrollbar-thumb {\r\n-        background-color: var(--color-gray-300);\r\n-        border-radius: 3px;\r\n-      }\r\n-\r\n-      /* Progress Bar */\r\n-      .progress-step {\r\n-        position: relative;\r\n-        z-index: 1;\r\n-      }\r\n-\r\n-      .progress-step::after {\r\n-        content: '';\r\n-        position: absolute;\r\n-        top: 50%;\r\n-        left: 100%;\r\n-        width: 100%;\r\n-        height: 2px;\r\n-        background: var(--color-gray-200);\r\n-        transform: translateY(-50%);\r\n-      }\r\n-\r\n-      .progress-step.active::after {\r\n-        background: var(--color-primary);\r\n-      }\r\n-\r\n-      /* Animated Gradients */\r\n-      .animated-gradient {\r\n-        background: linear-gradient(\r\n-          45deg,\r\n-          var(--color-primary),\r\n-          var(--color-primary-dark),\r\n-          var(--color-primary)\r\n-        );\r\n-        background-size: 200% 200%;\r\n-        animation: gradient 15s ease infinite;\r\n-      }\r\n-\r\n-      @keyframes gradient {\r\n-        0% { background-position: 0% 50%; }\r\n-        50% { background-position: 100% 50%; }\r\n-        100% { background-position: 0% 50%; }\r\n-      }\r\n-\r\n-      /* Responsive Design */\r\n-      @media (max-width: 1024px) {\r\n-        .insight-card {\r\n-          padding: 1rem;\r\n-        }\r\n-      }\r\n-\r\n-      @media (max-width: 768px) {\r\n-        #main-content {\r\n-          flex-direction: column;\r\n-        }\r\n-\r\n-        #bill-preview-container,\r\n-        #insights-container {\r\n-          width: 100%;\r\n-          height: 50%;\r\n-        }\r\n-      }\r\n-\r\n-      /* Chart Tooltips */\r\n-      .chart-tooltip {\r\n-        background: rgba(255, 255, 255, 0.95) !important;\r\n-        backdrop-filter: blur(4px);\r\n-        border: 1px solid var(--color-gray-200) !important;\r\n-        border-radius: 0.5rem !important;\r\n-        padding: 0.75rem !important;\r\n-        box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1) !important;\r\n-      }\r\n-    `;\r\n-  }\r\n-\r\n-  renderBillPreview() {\r\n-    if (!this.billData) {\r\n-      console.error(\"Bill data is not available\");\r\n-      this.renderError(document.getElementById(\"app\"));\r\n-      return;\r\n-    }\r\n-\r\n-    const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n-    if (!billPreviewContainer) {\r\n-      console.error(\"Bill preview container not found\");\r\n-      return;\r\n-    }\r\n-\r\n-    const billPreview = new BillPreview(this.billData);\r\n-    billPreview.render(billPreviewContainer);\r\n-  }\r\n-\r\n-  renderError(container) {\r\n-    container.innerHTML = `\r\n-        <div class=\"flex items-center justify-center h-screen\">\r\n-            <div class=\"text-center\">\r\n-                <h2 class=\"text-xl font-semibold text-gray-800 mb-2\">Error</h2>\r\n-                <p class=\"text-gray-600\">Bill data is not available. Please try again.</p>\r\n-                <button onclick=\"window.router.push('/')\" \r\n-                        class=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors\">\r\n-                    Go Back\r\n-                </button>\r\n-            </div>\r\n-        </div>\r\n-    `;\r\n-  }\r\n-\r\n-  renderInsights() {\r\n-    const insightsContainer = document.querySelector(\"#insights-container\");\r\n-    if (!insightsContainer) return;\r\n-\r\n-    // Generate trend data for the last 6 months\r\n-    const trendData = this.generateTrendData();\r\n-\r\n-    insightsContainer.innerHTML = `\r\n-      <div class=\"h-full flex flex-col p-8 custom-scrollbar\">\r\n-        <!-- Header Section -->\r\n-        <div class=\"flex items-center space-x-4 mb-8 opacity-0\" id=\"insights-header\">\r\n-          <div class=\"flex-shrink-0\">\r\n-            <div class=\"w-12 h-12 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center\">\r\n-              <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n-              </svg>\r\n-            </div>\r\n-          </div>\r\n-          <div>\r\n-            <h2 class=\"text-2xl font-bold text-gray-900\">Bill Analysis</h2>\r\n-            <p class=\"text-gray-500\">Understanding your energy consumption</p>\r\n-          </div>\r\n-        </div>\r\n-  \r\n-        <!-- Progress Tracker -->\r\n-        <div class=\"glass-effect rounded-xl p-6 mb-8 opacity-0\" id=\"progress-tracker\">\r\n-          <div class=\"flex justify-between\">\r\n-            <div class=\"flex items-center\">\r\n-              <div class=\"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-semibold\">1</div>\r\n-              <div class=\"ml-4\">\r\n-                <p class=\"font-semibold text-gray-900\">Bill Review</p>\r\n-                <p class=\"text-sm text-gray-500\">Analyzing consumption patterns</p>\r\n-              </div>\r\n-            </div>\r\n-            <div class=\"w-32 h-0.5 self-center bg-gray-200\"></div>\r\n-            <div class=\"flex items-center\">\r\n-              <div class=\"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold\">2</div>\r\n-              <div class=\"ml-4\">\r\n-                <p class=\"font-semibold text-gray-400\">Solar Quote</p>\r\n-                <p class=\"text-sm text-gray-400\">Up next</p>\r\n-              </div>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-  \r\n-        <!-- Consumption Analysis Card -->\r\n-        <div class=\"insight-card p-6 mb-6 opacity-0\" id=\"consumption-card\">\r\n-          <div class=\"flex justify-between items-center mb-6\">\r\n-            <div>\r\n-              <h3 class=\"text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n-              <p class=\"text-sm text-gray-500\">Last 6 months trend</p>\r\n-            </div>\r\n-            <div class=\"px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-sm font-medium\">\r\n-              ${this.formatChange(trendData)}% vs last month\r\n-            </div>\r\n-          </div>\r\n-          <div class=\"h-64\">\r\n-            <canvas id=\"consumption-trend-chart\"></canvas>\r\n-          </div>\r\n-        </div>\r\n-  \r\n-        <!-- Key Metrics Grid -->\r\n-        <div class=\"grid grid-cols-2 gap-6 mb-8\">\r\n-          <!-- Current Bill Card -->\r\n-          <div class=\"insight-card p-6 opacity-0 consumption-metric\">\r\n-            <div class=\"flex items-center justify-between mb-4\">\r\n-              <div class=\"w-12 h-12 rounded-lg bg-green-50 flex items-center justify-center\">\r\n-                <svg class=\"w-6 h-6 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n-                </svg>\r\n-              </div>\r\n-              <span class=\"px-2 py-1 bg-green-50 text-green-600 text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n-            </div>\r\n-            <p class=\"text-sm text-gray-500 mb-1\">Current Bill</p>\r\n-            <p class=\"text-2xl font-bold text-gray-900\">${this.formatCurrency(\r\n-              this.billData.totalAmount\r\n-            )}</p>\r\n-            <div class=\"mt-4 h-1 bg-gray-100 rounded\">\r\n-              <div class=\"h-full bg-green-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n-            </div>\r\n-          </div>\r\n-  \r\n-          <!-- Units Consumed Card -->\r\n-          <div class=\"insight-card p-6 opacity-0 consumption-metric\">\r\n-            <div class=\"flex items-center justify-between mb-4\">\r\n-              <div class=\"w-12 h-12 rounded-lg bg-blue-50 flex items-center justify-center\">\r\n-                <svg class=\"w-6 h-6 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n-                </svg>\r\n-              </div>\r\n-              <span class=\"px-2 py-1 bg-blue-50 text-blue-600 text-sm rounded-full\">\r\n-                ${this.calculateEfficiency()} efficiency\r\n-              </span>\r\n-            </div>\r\n-            <p class=\"text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n-            <p class=\"text-2xl font-bold text-gray-900\">${\r\n-              this.billData.unitsConsumed\r\n-            } kWh</p>\r\n-            <p class=\"text-sm text-gray-500 mt-2\">\r\n-              Rate: ${this.formatCurrency(this.billData.ratePerUnit)}/kWh\r\n-            </p>\r\n-          </div>\r\n-        </div>\r\n-  \r\n-        <!-- Next Steps Card -->\r\n-        <div class=\"mt-auto\">\r\n-          <div class=\"insight-card p-6 opacity-0\" id=\"next-steps-card\">\r\n-            <div class=\"absolute -top-3 -right-3\">\r\n-              <div class=\"w-16 h-16 animated-gradient rounded-full flex items-center justify-center\">\r\n-                <svg class=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n-                </svg>\r\n-              </div>\r\n-            </div>\r\n-            <div class=\"max-w-lg\">\r\n-              <h3 class=\"text-xl font-semibold text-gray-900 mb-2\">Ready For Your Solar Quote?</h3>\r\n-              <p class=\"text-gray-600 mb-6\">\r\n-                We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n-              </p>\r\n-              <button \r\n-                id=\"proceed-to-quote\" \r\n-                class=\"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4 rounded-xl font-medium\r\n-                       hover:from-blue-700 hover:to-blue-800 transition-all duration-300 shadow-sm hover:shadow-lg\r\n-                       flex items-center justify-center gap-2 group\"\r\n-              >\r\n-                Generate My Solar Quote\r\n-                <svg class=\"w-5 h-5 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n-                </svg>\r\n-              </button>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-      </div>\r\n-    `;\r\n-\r\n-    this.initializeCharts(trendData);\r\n-    this.startInsightAnimations();\r\n-    this.attachEventListeners();\r\n-  }\r\n-\r\n-  generateTrendData() {\r\n-    const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\"];\r\n-    return months.map((month) => ({\r\n-      month,\r\n-      consumption: Math.floor(\r\n-        this.billData.unitsConsumed * (0.8 + Math.random() * 0.4)\r\n-      ),\r\n-    }));\r\n-  }\r\n-\r\n-  initializeCharts(trendData) {\r\n-    const ctx = document.getElementById(\"consumption-trend-chart\");\r\n-    if (!ctx) return;\r\n-\r\n-    this.charts.consumption = new Chart(ctx, {\r\n-      type: \"line\",\r\n-      data: {\r\n-        labels: trendData.map((d) => d.month),\r\n-        datasets: [\r\n-          {\r\n-            label: \"Consumption (kWh)\",\r\n-            data: trendData.map((d) => d.consumption),\r\n-            borderColor: \"#3b82f6\",\r\n-            backgroundColor: \"rgba(59, 130, 246, 0.1)\",\r\n-            tension: 0.4,\r\n-            fill: true,\r\n-            pointRadius: 6,\r\n-            pointHoverRadius: 8,\r\n-            pointBackgroundColor: \"#ffffff\",\r\n-            pointBorderColor: \"#3b82f6\",\r\n-            pointBorderWidth: 2,\r\n-          },\r\n-        ],\r\n-      },\r\n-      options: {\r\n-        responsive: true,\r\n-        maintainAspectRatio: false,\r\n-        plugins: {\r\n-          legend: {\r\n-            display: false,\r\n-          },\r\n-          tooltip: {\r\n-            backgroundColor: \"white\",\r\n-            titleColor: \"#1f2937\",\r\n-            bodyColor: \"#4b5563\",\r\n-            borderColor: \"#e5e7eb\",\r\n-            borderWidth: 1,\r\n-            padding: 12,\r\n-            titleFont: {\r\n-              size: 14,\r\n-              weight: \"bold\",\r\n-            },\r\n-            bodyFont: {\r\n-              size: 13,\r\n-            },\r\n-            displayColors: false,\r\n-            callbacks: {\r\n-              label: (context) => `${context.parsed.y.toLocaleString()} kWh`,\r\n-            },\r\n-          },\r\n-        },\r\n-        scales: {\r\n-          x: {\r\n-            grid: {\r\n-              display: false,\r\n-            },\r\n-            ticks: {\r\n-              font: {\r\n-                size: 12,\r\n-              },\r\n-            },\r\n-          },\r\n-          y: {\r\n-            beginAtZero: true,\r\n-            grid: {\r\n-              color: \"rgba(0, 0, 0, 0.05)\",\r\n-            },\r\n-            ticks: {\r\n-              font: {\r\n-                size: 12,\r\n-              },\r\n-              callback: (value) => `${value} kWh`,\r\n-            },\r\n-          },\r\n-        },\r\n-      },\r\n-    });\r\n-  }\r\n-\r\n-  startInsightAnimations() {\r\n-    gsap.to(\"#insights-header\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-\r\n-    gsap.to(\"#progress-tracker\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      delay: 0.2,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-\r\n-    gsap.to(\"#consumption-card\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      delay: 0.4,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-\r\n-    gsap.to(\".consumption-metric\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      stagger: 0.2,\r\n-      delay: 0.6,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-\r\n-    gsap.to(\"#next-steps-card\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      delay: 1,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-  }\r\n-\r\n-  // Utility methods\r\n-  formatCurrency(value) {\r\n-    return new Intl.NumberFormat(\"en-PK\", {\r\n-      style: \"currency\",\r\n-      currency: \"PKR\",\r\n-      minimumFractionDigits: 0,\r\n-      maximumFractionDigits: 0,\r\n-    }).format(value);\r\n-  }\r\n-\r\n-  calculateDueDays() {\r\n-    const dueDate = new Date(this.billData.dueDate);\r\n-    const today = new Date();\r\n-    const diffTime = Math.abs(dueDate - today);\r\n-    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n-  }\r\n-\r\n-  calculateBillProgress() {\r\n-    const daysInMonth = 30;\r\n-    const today = new Date();\r\n-    const billDate = new Date(this.billData.issueDate);\r\n-    const daysPassed = Math.ceil((today - billDate) / (1000 * 60 * 60 * 24));\r\n-    return Math.min((daysPassed / daysInMonth) * 100, 100);\r\n-  }\r\n-\r\n-  calculateEfficiency() {\r\n-    const avgConsumption = 500; // Example average consumption\r\n-    const efficiency = (this.billData.unitsConsumed / avgConsumption) * 100;\r\n-    return efficiency <= 100 ? \"High\" : \"Low\";\r\n-  }\r\n-\r\n-  formatChange(data) {\r\n-    const lastTwo = data.slice(-2);\r\n-    const change =\r\n-      ((lastTwo[1].consumption - lastTwo[0].consumption) /\r\n-        lastTwo[0].consumption) *\r\n-      100;\r\n-    return change.toFixed(1);\r\n-  }\r\n-\r\n-  attachEventListeners() {\r\n-    const quoteButton = document.getElementById(\"proceed-to-quote\");\r\n-    if (quoteButton) {\r\n-      quoteButton.addEventListener(\"click\", () => {\r\n-        window.router.push(\"/quote\");\r\n-      });\r\n-    }\r\n-  }\r\n-}\r\n"
                },
                {
                    "date": 1731665632251,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,13 +73,10 @@\n       \"bill-preview-container\"\r\n     );\r\n     const insightsContainer = document.getElementById(\"insights-container\");\r\n     const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n-    const billReviewPage = document.getElementById(\"bill-review-page\");\r\n+    const quoteResultPage = document.getElementById(\"quote-result-page\");\r\n \r\n-    // Hide insights container initially\r\n-    insightsContainer.style.visibility = \"hidden\";\r\n-\r\n     // Initial states\r\n     gsap.set([billPreviewContainer, loadingIndicator], {\r\n       opacity: 0,\r\n     });\r\n@@ -129,17 +126,16 @@\n         },\r\n         \"-=0.3\"\r\n       )\r\n       .call(() => {\r\n-        // Show insights container before its animation\r\n         insightsContainer.style.visibility = \"visible\";\r\n       })\r\n       .to(insightsContainer, {\r\n         opacity: 1,\r\n         duration: 0.5,\r\n       })\r\n       .to(\r\n-        billReviewPage,\r\n+        quoteResultPage,\r\n         {\r\n           backgroundColor: \"var(--color-bg-secondary)\",\r\n           duration: 1,\r\n         },\r\n"
                },
                {
                    "date": 1731665852374,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,39 +9,61 @@\n     this.billData = getBillData();\r\n     this.charts = {};\r\n   }\r\n \r\n+  addScrollStyles() {\r\n+    const style = document.createElement(\"style\");\r\n+    style.textContent = `\r\n+        .custom-scrollbar {\r\n+            scrollbar-width: thin;\r\n+            scrollbar-color: rgba(0, 0, 0, 0.2) transparent;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar {\r\n+            width: 6px;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar-track {\r\n+            background: transparent;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar-thumb {\r\n+            background-color: rgba(0, 0, 0, 0.2);\r\n+            border-radius: 3px;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar-thumb:hover {\r\n+            background-color: rgba(0, 0, 0, 0.3);\r\n+        }\r\n+    `;\r\n+    document.head.appendChild(style);\r\n+  }\r\n+\r\n+  // Update the main container structure in render method\r\n   render() {\r\n     const app = document.getElementById(\"app\");\r\n \r\n-    if (!this.billData) {\r\n-      this.renderError(app);\r\n-      return;\r\n-    }\r\n-\r\n-    // First set invisible container\r\n     app.innerHTML = `\r\n-      <div class=\"h-screen w-screen bg-white transition-colors duration-1000 overflow-hidden opacity-0\" id=\"quote-result-page\">\r\n-          <!-- Main Content -->\r\n-          <div class=\"h-full w-full flex relative\" id=\"main-content\">\r\n-              <!-- Bill Preview Side -->\r\n-              <div class=\"w-1/2 h-full\" id=\"bill-preview-container\">\r\n-                  <div id=\"bill-preview\" class=\"h-full\"></div>\r\n-              </div>\r\n+        <div class=\"h-screen w-screen bg-white transition-colors duration-1000 overflow-hidden opacity-0\" id=\"quote-result-page\">\r\n+            <div class=\"h-full w-full flex relative\" id=\"main-content\">\r\n+                <!-- Bill Preview Side -->\r\n+                <div class=\"w-1/2 h-full overflow-hidden\" id=\"bill-preview-container\">  <!-- Added overflow-hidden -->\r\n+                    <div id=\"bill-preview\" class=\"h-full\"></div>\r\n+                </div>\r\n \r\n-              <!-- Loading Indicator -->\r\n-              <div class=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center z-10\" \r\n-                   id=\"loading-indicator\">\r\n-                  <div class=\"loading-spinner\"></div>\r\n-                  <p class=\"text-primary font-medium\">Analyzing your bill...</p>\r\n-              </div>\r\n+                <!-- Loading Indicator -->\r\n+                <div class=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center z-10\" \r\n+                     id=\"loading-indicator\">\r\n+                    <div class=\"loading-spinner\"></div>\r\n+                    <p class=\"text-primary font-medium\">Analyzing your bill...</p>\r\n+                </div>\r\n \r\n-              <!-- Insights Side -->\r\n-              <div class=\"w-1/2 h-full invisible\" id=\"insights-container\">\r\n-              </div>\r\n-          </div>\r\n-      </div>\r\n-  `;\r\n+                <!-- Insights Side -->\r\n+                <div class=\"w-1/2 h-full invisible overflow-hidden\" id=\"insights-container\">  <!-- Added overflow-hidden -->\r\n+                </div>\r\n+            </div>\r\n+        </div>\r\n+    `;\r\n \r\n     this.attachBaseStyles();\r\n \r\n     // Use requestAnimationFrame to ensure styles are applied before starting\r\n"
                },
                {
                    "date": 1731665963185,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -359,9 +359,9 @@\n     // Generate trend data for the last 6 months\r\n     const trendData = this.generateTrendData();\r\n \r\n     insightsContainer.innerHTML = `\r\n-      <div class=\"h-full flex flex-col p-8 custom-scrollbar\">\r\n+      <div class=\"h-full flex flex-col p-8 overflow-y-auto custom-scrollbar\">\r\n         <!-- Header Section -->\r\n         <div class=\"flex items-center space-x-4 mb-8 opacity-0\" id=\"insights-header\">\r\n           <div class=\"flex-shrink-0\">\r\n             <div class=\"w-12 h-12 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center\">\r\n"
                },
                {
                    "date": 1731665997299,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -457,9 +457,9 @@\n         </div>\r\n   \r\n         <!-- Next Steps Card -->\r\n         <div class=\"mt-auto\">\r\n-          <div class=\"insight-card p-6 opacity-0\" id=\"next-steps-card\">\r\n+          <div class=\"insight-card p-6 opacity-0 relative\" id=\"next-steps-card\">\r\n             <div class=\"absolute -top-3 -right-3\">\r\n               <div class=\"w-16 h-16 animated-gradient rounded-full flex items-center justify-center\">\r\n                 <svg class=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                   <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n"
                },
                {
                    "date": 1731666034285,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -490,8 +490,9 @@\n \r\n     this.initializeCharts(trendData);\r\n     this.startInsightAnimations();\r\n     this.attachEventListeners();\r\n+    this.addScrollStyles();\r\n   }\r\n \r\n   generateTrendData() {\r\n     const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\"];\r\n"
                },
                {
                    "date": 1731666166165,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -466,20 +466,20 @@\n                 </svg>\r\n               </div>\r\n             </div>\r\n             <div class=\"max-w-lg\">\r\n-              <h3 class=\"text-xl font-semibold text-gray-900 mb-2\">Ready For Your Solar Quote?</h3>\r\n-              <p class=\"text-gray-600 mb-6\">\r\n+              <h3 class=\"text-lg font-semibold text-gray-900 mb-2\">Ready For Your Solar Quote?</h3> <!-- Reduced from text-xl -->\r\n+              <p class=\"text-sm text-gray-600 mb-4\">\r\n                 We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n               </p>\r\n               <button \r\n                 id=\"proceed-to-quote\" \r\n-                class=\"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4 rounded-xl font-medium\r\n+                class=\"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white px-4 py-3 rounded-xl font-medium\r\n                        hover:from-blue-700 hover:to-blue-800 transition-all duration-300 shadow-sm hover:shadow-lg\r\n                        flex items-center justify-center gap-2 group\"\r\n               >\r\n                 Generate My Solar Quote\r\n-                <svg class=\"w-5 h-5 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                   <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n                 </svg>\r\n               </button>\r\n             </div>\r\n@@ -490,9 +490,8 @@\n \r\n     this.initializeCharts(trendData);\r\n     this.startInsightAnimations();\r\n     this.attachEventListeners();\r\n-    this.addScrollStyles();\r\n   }\r\n \r\n   generateTrendData() {\r\n     const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\"];\r\n"
                },
                {
                    "date": 1731666206032,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -457,12 +457,12 @@\n         </div>\r\n   \r\n         <!-- Next Steps Card -->\r\n         <div class=\"mt-auto\">\r\n-          <div class=\"insight-card p-6 opacity-0 relative\" id=\"next-steps-card\">\r\n-            <div class=\"absolute -top-3 -right-3\">\r\n-              <div class=\"w-16 h-16 animated-gradient rounded-full flex items-center justify-center\">\r\n-                <svg class=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+          <div class=\"insight-card p-4 opacity-0 relative\" id=\"next-steps-card\"> <!-- Reduced padding -->\r\n+            <div class=\"absolute -top-2 -right-2\"> <!-- Adjusted position -->\r\n+              <div class=\"w-12 h-12 animated-gradient rounded-full flex items-center justify-center\"> <!-- Reduced from w-16 h-16 -->\r\n+                <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                   <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n                 </svg>\r\n               </div>\r\n             </div>\r\n"
                },
                {
                    "date": 1731666292272,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -413,14 +413,14 @@\n           </div>\r\n         </div>\r\n   \r\n         <!-- Key Metrics Grid -->\r\n-        <div class=\"grid grid-cols-2 gap-6 mb-8\">\r\n+        <div class=\"grid grid-cols-2 gap-4 mb-4\"> <!-- Reduced gap and margin -->\r\n           <!-- Current Bill Card -->\r\n-          <div class=\"insight-card p-6 opacity-0 consumption-metric\">\r\n-            <div class=\"flex items-center justify-between mb-4\">\r\n-              <div class=\"w-12 h-12 rounded-lg bg-green-50 flex items-center justify-center\">\r\n-                <svg class=\"w-6 h-6 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+          <div class=\"insight-card p-4 opacity-0 consumption-metric\"> <!-- Reduced padding -->\r\n+            <div class=\"flex items-center justify-between mb-2\"> <!-- Reduced margin -->\r\n+              <div class=\"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center\"> <!-- Reduced size -->\r\n+                <svg class=\"w-4 h-4 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                   <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                 </svg>\r\n               </div>\r\n               <span class=\"px-2 py-1 bg-green-50 text-green-600 text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n"
                },
                {
                    "date": 1731666343535,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -359,57 +359,57 @@\n     // Generate trend data for the last 6 months\r\n     const trendData = this.generateTrendData();\r\n \r\n     insightsContainer.innerHTML = `\r\n-      <div class=\"h-full flex flex-col p-8 overflow-y-auto custom-scrollbar\">\r\n-        <!-- Header Section -->\r\n-        <div class=\"flex items-center space-x-4 mb-8 opacity-0\" id=\"insights-header\">\r\n+      <div class=\"h-full flex flex-col p-6\">  <!-- Reduced padding from p-8 to p-6 -->\r\n+        <!-- Header Section - reduced margin -->\r\n+        <div class=\"flex items-center space-x-4 mb-4 opacity-0\" id=\"insights-header\">\r\n           <div class=\"flex-shrink-0\">\r\n-            <div class=\"w-12 h-12 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center\">\r\n-              <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+            <div class=\"w-10 h-10 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center\"> <!-- Reduced from w-12 h-12 -->\r\n+              <svg class=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                 <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n               </svg>\r\n             </div>\r\n           </div>\r\n           <div>\r\n-            <h2 class=\"text-2xl font-bold text-gray-900\">Bill Analysis</h2>\r\n-            <p class=\"text-gray-500\">Understanding your energy consumption</p>\r\n+            <h2 class=\"text-xl font-bold text-gray-900\">Bill Analysis</h2> <!-- Reduced from text-2xl -->\r\n+            <p class=\"text-sm text-gray-500\">Understanding your energy consumption</p>\r\n           </div>\r\n         </div>\r\n   \r\n-        <!-- Progress Tracker -->\r\n-        <div class=\"glass-effect rounded-xl p-6 mb-8 opacity-0\" id=\"progress-tracker\">\r\n+        <!-- Progress Tracker - reduced padding and margin -->\r\n+        <div class=\"glass-effect rounded-xl p-4 mb-4 opacity-0\" id=\"progress-tracker\"> <!-- Reduced padding and margin -->\r\n           <div class=\"flex justify-between\">\r\n             <div class=\"flex items-center\">\r\n-              <div class=\"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-semibold\">1</div>\r\n-              <div class=\"ml-4\">\r\n+              <div class=\"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-white font-semibold\">1</div> <!-- Reduced from w-10 h-10 -->\r\n+              <div class=\"ml-3\"> <!-- Reduced margin -->\r\n                 <p class=\"font-semibold text-gray-900\">Bill Review</p>\r\n-                <p class=\"text-sm text-gray-500\">Analyzing consumption patterns</p>\r\n+                <p class=\"text-xs text-gray-500\">Analyzing consumption patterns</p> <!-- Reduced from text-sm -->\r\n               </div>\r\n             </div>\r\n             <div class=\"w-32 h-0.5 self-center bg-gray-200\"></div>\r\n             <div class=\"flex items-center\">\r\n-              <div class=\"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold\">2</div>\r\n-              <div class=\"ml-4\">\r\n+              <div class=\"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold\">2</div>\r\n+              <div class=\"ml-3\">\r\n                 <p class=\"font-semibold text-gray-400\">Solar Quote</p>\r\n-                <p class=\"text-sm text-gray-400\">Up next</p>\r\n+                <p class=\"text-xs text-gray-400\">Up next</p>\r\n               </div>\r\n             </div>\r\n           </div>\r\n         </div>\r\n   \r\n-        <!-- Consumption Analysis Card -->\r\n-        <div class=\"insight-card p-6 mb-6 opacity-0\" id=\"consumption-card\">\r\n-          <div class=\"flex justify-between items-center mb-6\">\r\n+        <!-- Consumption Analysis Card - reduced height -->\r\n+        <div class=\"insight-card p-4 mb-4 opacity-0\" id=\"consumption-card\"> <!-- Reduced padding and margin -->\r\n+          <div class=\"flex justify-between items-center mb-3\"> <!-- Reduced margin -->\r\n             <div>\r\n-              <h3 class=\"text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n-              <p class=\"text-sm text-gray-500\">Last 6 months trend</p>\r\n+              <h3 class=\"text-base font-semibold text-gray-900\">Consumption Analysis</h3> <!-- Reduced from text-lg -->\r\n+              <p class=\"text-xs text-gray-500\">Last 6 months trend</p>\r\n             </div>\r\n-            <div class=\"px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-sm font-medium\">\r\n+            <div class=\"px-2 py-1 bg-blue-50 text-blue-600 rounded-full text-xs font-medium\">\r\n               ${this.formatChange(trendData)}% vs last month\r\n             </div>\r\n           </div>\r\n-          <div class=\"h-64\">\r\n+          <div class=\"h-48\"> <!-- Reduced from h-64 -->\r\n             <canvas id=\"consumption-trend-chart\"></canvas>\r\n           </div>\r\n         </div>\r\n   \r\n"
                },
                {
                    "date": 1731679002245,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,29 +42,144 @@\n   render() {\r\n     const app = document.getElementById(\"app\");\r\n \r\n     app.innerHTML = `\r\n-        <div class=\"h-screen w-screen bg-white transition-colors duration-1000 overflow-hidden opacity-0\" id=\"quote-result-page\">\r\n-            <div class=\"h-full w-full flex relative\" id=\"main-content\">\r\n-                <!-- Bill Preview Side -->\r\n-                <div class=\"w-1/2 h-full overflow-hidden\" id=\"bill-preview-container\">  <!-- Added overflow-hidden -->\r\n-                    <div id=\"bill-preview\" class=\"h-full\"></div>\r\n+    <div class=\"h-screen w-full overflow-hidden bg-gray-50\">\r\n+        <div class=\"h-full w-full flex flex-col p-2 sm:p-4 lg:p-8\">\r\n+            <!-- Header -->\r\n+            <div class=\"flex-none mb-3 sm:mb-4 lg:mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-4\">\r\n+                <div>\r\n+                    <h1 class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">Bill Analysis</h1>\r\n+                    <p class=\"text-xs sm:text-sm lg:text-base text-gray-500\">Understanding your energy consumption</p>\r\n                 </div>\r\n+                <button \r\n+                    onclick=\"window.router.push('/')\"\r\n+                    class=\"inline-flex items-center px-2 py-1 sm:px-3 sm:py-1.5 lg:px-4 lg:py-2 rounded-lg bg-white border border-gray-200 shadow-sm hover:bg-gray-50 transition-colors text-xs sm:text-sm lg:text-base\"\r\n+                >\r\n+                    <svg class=\"w-3 h-3 sm:w-4 sm:h-4 mr-1.5 sm:mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 19l-7-7 7-7\" />\r\n+                    </svg>\r\n+                    Back\r\n+                </button>\r\n+            </div>\r\n \r\n-                <!-- Loading Indicator -->\r\n-                <div class=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center z-10\" \r\n-                     id=\"loading-indicator\">\r\n-                    <div class=\"loading-spinner\"></div>\r\n-                    <p class=\"text-primary font-medium\">Analyzing your bill...</p>\r\n-                </div>\r\n+            <!-- Main Content Area -->\r\n+            <div class=\"flex-1 min-h-0 relative\">\r\n+                <div class=\"absolute inset-0 overflow-auto\">\r\n+                    <div class=\"h-full max-w-[1136px] mx-auto pb-4 sm:pb-6\">\r\n+                        <div class=\"grid grid-cols-1 xl:grid-cols-[1fr,324px] gap-3 sm:gap-4 lg:gap-6\">\r\n+                            <!-- Left Column - Bill Preview -->\r\n+                            <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6\">\r\n+                                <div id=\"bill-preview\" class=\"h-full\"></div>\r\n+                            </div>\r\n \r\n-                <!-- Insights Side -->\r\n-                <div class=\"w-1/2 h-full invisible overflow-hidden\" id=\"insights-container\">  <!-- Added overflow-hidden -->\r\n+                            <!-- Right Column - Analysis -->\r\n+                            <div class=\"space-y-3 sm:space-y-4 lg:space-y-6\">\r\n+                                <!-- Progress Card -->\r\n+                                <div class=\"bg-white/70 backdrop-blur rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6\">\r\n+                                    <div class=\"flex justify-between items-center\">\r\n+                                        <div class=\"flex items-start gap-3\">\r\n+                                            <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-semibold text-sm sm:text-base\">1</div>\r\n+                                            <div>\r\n+                                                <p class=\"font-semibold text-gray-900 text-sm sm:text-base\">Bill Review</p>\r\n+                                                <p class=\"text-xs sm:text-sm text-gray-500\">Analyzing consumption patterns</p>\r\n+                                            </div>\r\n+                                        </div>\r\n+                                        <div class=\"flex items-center gap-2\">\r\n+                                            <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm sm:text-base\">2</div>\r\n+                                            <div class=\"hidden sm:block\">\r\n+                                                <p class=\"font-semibold text-gray-400 text-sm sm:text-base\">Solar Quote</p>\r\n+                                                <p class=\"text-xs sm:text-sm text-gray-400\">Up next</p>\r\n+                                            </div>\r\n+                                        </div>\r\n+                                    </div>\r\n+                                </div>\r\n+\r\n+                                <!-- Consumption Analysis Card -->\r\n+                                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6\">\r\n+                                    <div class=\"flex justify-between items-center mb-3 sm:mb-4\">\r\n+                                        <h3 class=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n+                                        <div class=\"px-2 py-1 bg-blue-50 text-blue-600 rounded-full text-xs sm:text-sm font-medium\">\r\n+                                            Monthly Trend\r\n+                                        </div>\r\n+                                    </div>\r\n+                                    <div class=\"h-[200px] sm:h-[250px]\">\r\n+                                        <canvas id=\"consumption-trend-chart\"></canvas>\r\n+                                    </div>\r\n+                                </div>\r\n+\r\n+                                <!-- Key Metrics Grid -->\r\n+                                <div class=\"grid grid-cols-2 gap-3 sm:gap-4\">\r\n+                                    <!-- Current Bill Card -->\r\n+                                    <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6\">\r\n+                                        <div class=\"flex items-center justify-between mb-2\">\r\n+                                            <div class=\"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center\">\r\n+                                                <svg class=\"w-4 h-4 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n+                                                </svg>\r\n+                                            </div>\r\n+                                            <span class=\"px-2 py-1 bg-green-50 text-green-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n+                                        </div>\r\n+                                        <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Current Bill</p>\r\n+                                        <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${this.formatCurrency(\r\n+                                          this.billData.amount\r\n+                                        )}</p>\r\n+                                    </div>\r\n+\r\n+                                    <!-- Units Consumed Card -->\r\n+                                    <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6\">\r\n+                                        <div class=\"flex items-center justify-between mb-2\">\r\n+                                            <div class=\"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center\">\r\n+                                                <svg class=\"w-4 h-4 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n+                                                </svg>\r\n+                                            </div>\r\n+                                            <span class=\"px-2 py-1 bg-blue-50 text-blue-600 text-xs sm:text-sm rounded-full\">\r\n+                                                ${this.calculateEfficiency()} efficiency\r\n+                                            </span>\r\n+                                        </div>\r\n+                                        <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n+                                        <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${\r\n+                                          this.billData.unitsConsumed\r\n+                                        } kWh</p>\r\n+                                    </div>\r\n+                                </div>\r\n+\r\n+                                <!-- Next Steps Card -->\r\n+                                <div class=\"bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 text-white relative\">\r\n+                                    <div class=\"absolute -top-2 -right-2\">\r\n+                                        <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n+                                            <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n+                                            </svg>\r\n+                                        </div>\r\n+                                    </div>\r\n+                                    <div class=\"max-w-lg\">\r\n+                                        <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold mb-2\">Ready For Your Solar Quote?</h3>\r\n+                                        <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n+                                            We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n+                                        </p>\r\n+                                        <button \r\n+                                            id=\"proceed-to-quote\" \r\n+                                            class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n+                                                   transition-all duration-300 shadow-sm hover:shadow-lg\r\n+                                                   flex items-center justify-center gap-2 group\"\r\n+                                        >\r\n+                                            Generate My Solar Quote\r\n+                                            <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n+                                            </svg>\r\n+                                        </button>\r\n+                                    </div>\r\n+                                </div>\r\n+                            </div>\r\n+                        </div>\r\n+                    </div>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n+    </div>\r\n     `;\r\n-\r\n     this.attachBaseStyles();\r\n \r\n     // Use requestAnimationFrame to ensure styles are applied before starting\r\n     requestAnimationFrame(() => {\r\n"
                },
                {
                    "date": 1731679124115,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -431,8 +431,47 @@\n         border-radius: 0.5rem !important;\r\n         padding: 0.75rem !important;\r\n         box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1) !important;\r\n       }\r\n+      \r\n+       .animated-gradient {\r\n+        background: linear-gradient(\r\n+            45deg,\r\n+            rgba(255,255,255,0.1),\r\n+            rgba(255,255,255,0.2),\r\n+            rgba(255,255,255,0.1)\r\n+        );\r\n+        background-size: 200% 200%;\r\n+        animation: gradient 15s ease infinite;\r\n+    }\r\n+\r\n+    @keyframes gradient {\r\n+        0% { background-position: 0% 50%; }\r\n+        50% { background-position: 100% 50%; }\r\n+        100% { background-position: 0% 50%; }\r\n+    }\r\n+\r\n+    .overflow-auto {\r\n+        scrollbar-width: thin;\r\n+        scrollbar-color: rgba(156, 163, 175, 0.3) transparent;\r\n+    }\r\n+    \r\n+    .overflow-auto::-webkit-scrollbar {\r\n+        width: 6px;\r\n+    }\r\n+    \r\n+    .overflow-auto::-webkit-scrollbar-track {\r\n+        background: transparent;\r\n+    }\r\n+    \r\n+    .overflow-auto::-webkit-scrollbar-thumb {\r\n+        background-color: rgba(156, 163, 175, 0.3);\r\n+        border-radius: 3px;\r\n+    }\r\n+    \r\n+    .overflow-auto::-webkit-scrollbar-thumb:hover {\r\n+        background-color: rgba(156, 163, 175, 0.5);\r\n+    }\r\n     `;\r\n   }\r\n \r\n   renderBillPreview() {\r\n"
                },
                {
                    "date": 1731679157053,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -177,9 +177,9 @@\n                 </div>\r\n             </div>\r\n         </div>\r\n     </div>\r\n-    `;\r\n+`;\r\n     this.attachBaseStyles();\r\n \r\n     // Use requestAnimationFrame to ensure styles are applied before starting\r\n     requestAnimationFrame(() => {\r\n@@ -431,47 +431,8 @@\n         border-radius: 0.5rem !important;\r\n         padding: 0.75rem !important;\r\n         box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1) !important;\r\n       }\r\n-      \r\n-       .animated-gradient {\r\n-        background: linear-gradient(\r\n-            45deg,\r\n-            rgba(255,255,255,0.1),\r\n-            rgba(255,255,255,0.2),\r\n-            rgba(255,255,255,0.1)\r\n-        );\r\n-        background-size: 200% 200%;\r\n-        animation: gradient 15s ease infinite;\r\n-    }\r\n-\r\n-    @keyframes gradient {\r\n-        0% { background-position: 0% 50%; }\r\n-        50% { background-position: 100% 50%; }\r\n-        100% { background-position: 0% 50%; }\r\n-    }\r\n-\r\n-    .overflow-auto {\r\n-        scrollbar-width: thin;\r\n-        scrollbar-color: rgba(156, 163, 175, 0.3) transparent;\r\n-    }\r\n-    \r\n-    .overflow-auto::-webkit-scrollbar {\r\n-        width: 6px;\r\n-    }\r\n-    \r\n-    .overflow-auto::-webkit-scrollbar-track {\r\n-        background: transparent;\r\n-    }\r\n-    \r\n-    .overflow-auto::-webkit-scrollbar-thumb {\r\n-        background-color: rgba(156, 163, 175, 0.3);\r\n-        border-radius: 3px;\r\n-    }\r\n-    \r\n-    .overflow-auto::-webkit-scrollbar-thumb:hover {\r\n-        background-color: rgba(156, 163, 175, 0.5);\r\n-    }\r\n     `;\r\n   }\r\n \r\n   renderBillPreview() {\r\n"
                },
                {
                    "date": 1731679382298,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,797 @@\n+// BillReviewPage.js\r\n+import { gsap } from \"gsap\";\r\n+import { getBillData } from \"../store/solarSizingState.js\";\r\n+import { BillPreview } from \"./BillPreview.js\";\r\n+import Chart from \"chart.js/auto\";\r\n+\r\n+export class BillReviewPage {\r\n+  constructor() {\r\n+    this.billData = getBillData();\r\n+    this.charts = {};\r\n+  }\r\n+\r\n+  addScrollStyles() {\r\n+    const style = document.createElement(\"style\");\r\n+    style.textContent = `\r\n+        .custom-scrollbar {\r\n+            scrollbar-width: thin;\r\n+            scrollbar-color: rgba(0, 0, 0, 0.2) transparent;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar {\r\n+            width: 6px;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar-track {\r\n+            background: transparent;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar-thumb {\r\n+            background-color: rgba(0, 0, 0, 0.2);\r\n+            border-radius: 3px;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar-thumb:hover {\r\n+            background-color: rgba(0, 0, 0, 0.3);\r\n+        }\r\n+    `;\r\n+    document.head.appendChild(style);\r\n+  }\r\n+\r\n+  // Update the main container structure in render method\r\n+  render() {\r\n+    const app = document.getElementById(\"app\");\r\n+\r\n+    app.innerHTML = `\r\n+    <div class=\"h-screen w-full overflow-hidden bg-white transition-colors duration-1000\" id=\"quote-result-page\">\r\n+        <div class=\"h-full w-full flex relative\" id=\"main-content\">\r\n+            <!-- Bill Preview Side -->\r\n+            <div class=\"w-1/2 h-full overflow-hidden\" id=\"bill-preview-container\">\r\n+                <div id=\"bill-preview\" class=\"h-full\"></div>\r\n+            </div>\r\n+\r\n+            <!-- Loading Indicator -->\r\n+            <div class=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center z-10\" \r\n+                 id=\"loading-indicator\">\r\n+                <div class=\"loading-spinner\"></div>\r\n+                <p class=\"text-primary font-medium\">Analyzing your bill...</p>\r\n+            </div>\r\n+\r\n+            <!-- Insights Side -->\r\n+            <div class=\"w-1/2 h-full invisible overflow-hidden\" id=\"insights-container\">\r\n+                <div class=\"h-full w-full flex flex-col p-2 sm:p-4 lg:p-6 overflow-auto\">\r\n+                    <!-- Header Section -->\r\n+                    <div class=\"flex items-center space-x-4 mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"insights-header\">\r\n+                        <div class=\"flex-shrink-0\">\r\n+                            <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center\">\r\n+                                <svg class=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n+                                </svg>\r\n+                            </div>\r\n+                        </div>\r\n+                        <div>\r\n+                            <h2 class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">Bill Analysis</h2>\r\n+                            <p class=\"text-xs sm:text-sm lg:text-base text-gray-500\">Understanding your energy consumption</p>\r\n+                        </div>\r\n+                    </div>\r\n+\r\n+                    <!-- Progress Tracker -->\r\n+                    <div class=\"bg-white/70 backdrop-blur rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"progress-tracker\">\r\n+                        <div class=\"flex justify-between\">\r\n+                            <div class=\"flex items-center\">\r\n+                                <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-semibold text-sm sm:text-base\">1</div>\r\n+                                <div class=\"ml-3\">\r\n+                                    <p class=\"font-semibold text-gray-900 text-sm sm:text-base\">Bill Review</p>\r\n+                                    <p class=\"text-xs sm:text-sm text-gray-500\">Analyzing consumption patterns</p>\r\n+                                </div>\r\n+                            </div>\r\n+                            <div class=\"w-24 sm:w-32 h-0.5 self-center bg-gray-200\"></div>\r\n+                            <div class=\"flex items-center\">\r\n+                                <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm sm:text-base\">2</div>\r\n+                                <div class=\"ml-3\">\r\n+                                    <p class=\"font-semibold text-gray-400 text-sm sm:text-base\">Solar Quote</p>\r\n+                                    <p class=\"text-xs sm:text-sm text-gray-400\">Up next</p>\r\n+                                </div>\r\n+                            </div>\r\n+                        </div>\r\n+                    </div>\r\n+\r\n+                    <!-- Consumption Analysis Card -->\r\n+                    <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"consumption-card\">\r\n+                        <div class=\"flex justify-between items-center mb-3 sm:mb-4\">\r\n+                            <h3 class=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n+                            <div class=\"px-2 py-1 bg-blue-50 text-blue-600 rounded-full text-xs sm:text-sm font-medium\">\r\n+                                ${this.formatChange(\r\n+                                  this.generateTrendData()\r\n+                                )}% vs last month\r\n+                            </div>\r\n+                        </div>\r\n+                        <div class=\"h-[200px] sm:h-[250px]\">\r\n+                            <canvas id=\"consumption-trend-chart\"></canvas>\r\n+                        </div>\r\n+                    </div>\r\n+\r\n+                    <!-- Key Metrics Grid -->\r\n+                    <div class=\"grid grid-cols-2 gap-3 sm:gap-4 lg:gap-6 mb-3 sm:mb-4 lg:mb-6\">\r\n+                        <!-- Current Bill Card -->\r\n+                        <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n+                            <div class=\"flex items-center justify-between mb-2\">\r\n+                                <div class=\"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center\">\r\n+                                    <svg class=\"w-4 h-4 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n+                                    </svg>\r\n+                                </div>\r\n+                                <span class=\"px-2 py-1 bg-green-50 text-green-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n+                            </div>\r\n+                            <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Current Bill</p>\r\n+                            <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${this.formatCurrency(\r\n+                              this.billData.amount\r\n+                            )}</p>\r\n+                            <div class=\"mt-4 h-1 bg-gray-100 rounded\">\r\n+                                <div class=\"h-full bg-green-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n+                            </div>\r\n+                        </div>\r\n+\r\n+                        <!-- Units Consumed Card -->\r\n+                        <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n+                            <div class=\"flex items-center justify-between mb-2\">\r\n+                                <div class=\"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center\">\r\n+                                    <svg class=\"w-4 h-4 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n+                                    </svg>\r\n+                                </div>\r\n+                                <span class=\"px-2 py-1 bg-blue-50 text-blue-600 text-xs sm:text-sm rounded-full\">\r\n+                                    ${this.calculateEfficiency()} efficiency\r\n+                                </span>\r\n+                            </div>\r\n+                            <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n+                            <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${\r\n+                              this.billData.unitsConsumed\r\n+                            } kWh</p>\r\n+                        </div>\r\n+                    </div>\r\n+\r\n+                    <!-- Next Steps Card -->\r\n+                    <div class=\"mt-auto\">\r\n+                        <div class=\"bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n+                            <div class=\"absolute -top-2 -right-2\">\r\n+                                <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n+                                    <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n+                                    </svg>\r\n+                                </div>\r\n+                            </div>\r\n+                            <div class=\"max-w-lg\">\r\n+                                <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n+                                <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n+                                    We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n+                                </p>\r\n+                                <button \r\n+                                    id=\"proceed-to-quote\" \r\n+                                    class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n+                                           transition-all duration-300 shadow-sm hover:shadow-lg\r\n+                                           flex items-center justify-center gap-2 group\"\r\n+                                >\r\n+                                    Generate My Solar Quote\r\n+                                    <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n+                                    </svg>\r\n+                                </button>\r\n+                            </div>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+        </div>\r\n+    </div>\r\n+`;\r\n+\r\n+    this.attachBaseStyles();\r\n+\r\n+    // Use requestAnimationFrame to ensure styles are applied before starting\r\n+    requestAnimationFrame(() => {\r\n+      requestAnimationFrame(() => {\r\n+        // Make container visible\r\n+        const container = document.getElementById(\"quote-result-page\");\r\n+        if (container) {\r\n+          container.classList.remove(\"opacity-0\");\r\n+        }\r\n+\r\n+        // Now render bill preview and start animation\r\n+        this.renderBillPreview();\r\n+        this.startAnimation().catch((error) => {\r\n+          console.error(\"Animation failed:\", error);\r\n+          this.showError();\r\n+        });\r\n+      });\r\n+    });\r\n+  }\r\n+\r\n+  async startAnimation() {\r\n+    if (this.error) {\r\n+      this.showError();\r\n+      return;\r\n+    }\r\n+\r\n+    const billPreviewContainer = document.getElementById(\r\n+      \"bill-preview-container\"\r\n+    );\r\n+    const insightsContainer = document.getElementById(\"insights-container\");\r\n+    const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n+    const quoteResultPage = document.getElementById(\"quote-result-page\");\r\n+\r\n+    // Initial states\r\n+    gsap.set([billPreviewContainer, loadingIndicator], {\r\n+      opacity: 0,\r\n+    });\r\n+    gsap.set(billPreviewContainer, {\r\n+      scale: 0.9,\r\n+      position: \"absolute\",\r\n+      left: \"50%\",\r\n+      top: \"50%\",\r\n+      xPercent: -50,\r\n+      yPercent: -50,\r\n+      width: \"47.5%\",\r\n+    });\r\n+    gsap.set(loadingIndicator, {\r\n+      scale: 0.5,\r\n+    });\r\n+\r\n+    const tl = gsap.timeline({\r\n+      defaults: { duration: 0.8, ease: \"power2.out\" },\r\n+    });\r\n+\r\n+    // Animation sequence\r\n+    await tl\r\n+      .to(billPreviewContainer, {\r\n+        opacity: 1,\r\n+        scale: 1,\r\n+        duration: 1,\r\n+      })\r\n+      .to(loadingIndicator, {\r\n+        opacity: 1,\r\n+        scale: 1,\r\n+        duration: 0.5,\r\n+      })\r\n+      .to(loadingIndicator, {\r\n+        opacity: 0,\r\n+        scale: 0.5,\r\n+        delay: 1,\r\n+      })\r\n+      .to(\r\n+        billPreviewContainer,\r\n+        {\r\n+          left: \"0%\",\r\n+          top: \"0%\",\r\n+          xPercent: 0,\r\n+          yPercent: 0,\r\n+          width: \"50%\",\r\n+          position: \"relative\",\r\n+        },\r\n+        \"-=0.3\"\r\n+      )\r\n+      .call(() => {\r\n+        insightsContainer.style.visibility = \"visible\";\r\n+      })\r\n+      .to(insightsContainer, {\r\n+        opacity: 1,\r\n+        duration: 0.5,\r\n+      })\r\n+      .to(\r\n+        quoteResultPage,\r\n+        {\r\n+          backgroundColor: \"var(--color-bg-secondary)\",\r\n+          duration: 1,\r\n+        },\r\n+        \"-=0.5\"\r\n+      );\r\n+\r\n+    // Render insights after animations\r\n+    this.renderInsights();\r\n+  }\r\n+\r\n+  attachBaseStyles() {\r\n+    const style = document.createElement(\"style\");\r\n+    style.textContent = this.getBaseStyles();\r\n+    document.head.appendChild(style);\r\n+  }\r\n+\r\n+  getBaseStyles() {\r\n+    return `\r\n+      /* Base Theme Colors */\r\n+      :root {\r\n+        --color-primary: #3b82f6;\r\n+        --color-primary-dark: #2563eb;\r\n+        --color-primary-light: #93c5fd;\r\n+        --color-success: #10b981;\r\n+        --color-warning: #f59e0b;\r\n+        --color-error: #ef4444;\r\n+        --color-gray-50: #f8fafc;\r\n+        --color-gray-100: #f1f5f9;\r\n+        --color-gray-200: #e2e8f0;\r\n+        --color-gray-300: #cbd5e1;\r\n+        --color-gray-400: #94a3b8;\r\n+        --color-gray-500: #64748b;\r\n+        --color-gray-600: #475569;\r\n+        --color-gray-700: #334155;\r\n+        --color-gray-800: #1e293b;\r\n+        --color-gray-900: #0f172a;\r\n+      }\r\n+\r\n+      /* Loading Spinner */\r\n+      .loading-spinner {\r\n+        width: 40px;\r\n+        height: 40px;\r\n+        border: 4px solid var(--color-gray-200);\r\n+        border-left-color: var(--color-primary);\r\n+        border-radius: 50%;\r\n+        animation: spin 1s linear infinite;\r\n+      }\r\n+\r\n+      @keyframes spin {\r\n+        to { transform: rotate(360deg); }\r\n+      }\r\n+\r\n+      /* Card Styles */\r\n+      .insight-card {\r\n+        background: white;\r\n+        border-radius: 1rem;\r\n+        box-shadow: 0 1px 3px rgba(0,0,0,0.1);\r\n+        transition: all 0.3s ease;\r\n+        border: 1px solid var(--color-gray-100);\r\n+      }\r\n+\r\n+      .insight-card:hover {\r\n+        transform: translateY(-2px);\r\n+        box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);\r\n+      }\r\n+\r\n+      /* Glass Effect */\r\n+      .glass-effect {\r\n+        background: rgba(255, 255, 255, 0.7);\r\n+        backdrop-filter: blur(10px);\r\n+        border: 1px solid rgba(255, 255, 255, 0.3);\r\n+      }\r\n+\r\n+      /* Custom Scrollbar */\r\n+      .custom-scrollbar {\r\n+        scrollbar-width: thin;\r\n+        scrollbar-color: var(--color-gray-300) transparent;\r\n+      }\r\n+\r\n+      .custom-scrollbar::-webkit-scrollbar {\r\n+        width: 6px;\r\n+      }\r\n+\r\n+      .custom-scrollbar::-webkit-scrollbar-track {\r\n+        background: transparent;\r\n+      }\r\n+\r\n+      .custom-scrollbar::-webkit-scrollbar-thumb {\r\n+        background-color: var(--color-gray-300);\r\n+        border-radius: 3px;\r\n+      }\r\n+\r\n+      /* Progress Bar */\r\n+      .progress-step {\r\n+        position: relative;\r\n+        z-index: 1;\r\n+      }\r\n+\r\n+      .progress-step::after {\r\n+        content: '';\r\n+        position: absolute;\r\n+        top: 50%;\r\n+        left: 100%;\r\n+        width: 100%;\r\n+        height: 2px;\r\n+        background: var(--color-gray-200);\r\n+        transform: translateY(-50%);\r\n+      }\r\n+\r\n+      .progress-step.active::after {\r\n+        background: var(--color-primary);\r\n+      }\r\n+\r\n+      /* Animated Gradients */\r\n+      .animated-gradient {\r\n+        background: linear-gradient(\r\n+          45deg,\r\n+          var(--color-primary),\r\n+          var(--color-primary-dark),\r\n+          var(--color-primary)\r\n+        );\r\n+        background-size: 200% 200%;\r\n+        animation: gradient 15s ease infinite;\r\n+      }\r\n+\r\n+      @keyframes gradient {\r\n+        0% { background-position: 0% 50%; }\r\n+        50% { background-position: 100% 50%; }\r\n+        100% { background-position: 0% 50%; }\r\n+      }\r\n+\r\n+      /* Responsive Design */\r\n+      @media (max-width: 1024px) {\r\n+        .insight-card {\r\n+          padding: 1rem;\r\n+        }\r\n+      }\r\n+\r\n+      @media (max-width: 768px) {\r\n+        #main-content {\r\n+          flex-direction: column;\r\n+        }\r\n+\r\n+        #bill-preview-container,\r\n+        #insights-container {\r\n+          width: 100%;\r\n+          height: 50%;\r\n+        }\r\n+      }\r\n+\r\n+      /* Chart Tooltips */\r\n+      .chart-tooltip {\r\n+        background: rgba(255, 255, 255, 0.95) !important;\r\n+        backdrop-filter: blur(4px);\r\n+        border: 1px solid var(--color-gray-200) !important;\r\n+        border-radius: 0.5rem !important;\r\n+        padding: 0.75rem !important;\r\n+        box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1) !important;\r\n+      }\r\n+    `;\r\n+  }\r\n+\r\n+  renderBillPreview() {\r\n+    if (!this.billData) {\r\n+      console.error(\"Bill data is not available\");\r\n+      this.renderError(document.getElementById(\"app\"));\r\n+      return;\r\n+    }\r\n+\r\n+    const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n+    if (!billPreviewContainer) {\r\n+      console.error(\"Bill preview container not found\");\r\n+      return;\r\n+    }\r\n+\r\n+    const billPreview = new BillPreview(this.billData);\r\n+    billPreview.render(billPreviewContainer);\r\n+  }\r\n+\r\n+  renderError(container) {\r\n+    container.innerHTML = `\r\n+        <div class=\"flex items-center justify-center h-screen\">\r\n+            <div class=\"text-center\">\r\n+                <h2 class=\"text-xl font-semibold text-gray-800 mb-2\">Error</h2>\r\n+                <p class=\"text-gray-600\">Bill data is not available. Please try again.</p>\r\n+                <button onclick=\"window.router.push('/')\" \r\n+                        class=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors\">\r\n+                    Go Back\r\n+                </button>\r\n+            </div>\r\n+        </div>\r\n+    `;\r\n+  }\r\n+\r\n+  renderInsights() {\r\n+    const insightsContainer = document.querySelector(\"#insights-container\");\r\n+    if (!insightsContainer) return;\r\n+\r\n+    // Generate trend data for the last 6 months\r\n+    const trendData = this.generateTrendData();\r\n+\r\n+    insightsContainer.innerHTML = `\r\n+      <div class=\"h-full flex flex-col p-6\">  <!-- Reduced padding from p-8 to p-6 -->\r\n+        <!-- Header Section - reduced margin -->\r\n+        <div class=\"flex items-center space-x-4 mb-4 opacity-0\" id=\"insights-header\">\r\n+          <div class=\"flex-shrink-0\">\r\n+            <div class=\"w-10 h-10 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center\"> <!-- Reduced from w-12 h-12 -->\r\n+              <svg class=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n+              </svg>\r\n+            </div>\r\n+          </div>\r\n+          <div>\r\n+            <h2 class=\"text-xl font-bold text-gray-900\">Bill Analysis</h2> <!-- Reduced from text-2xl -->\r\n+            <p class=\"text-sm text-gray-500\">Understanding your energy consumption</p>\r\n+          </div>\r\n+        </div>\r\n+  \r\n+        <!-- Progress Tracker - reduced padding and margin -->\r\n+        <div class=\"glass-effect rounded-xl p-4 mb-4 opacity-0\" id=\"progress-tracker\"> <!-- Reduced padding and margin -->\r\n+          <div class=\"flex justify-between\">\r\n+            <div class=\"flex items-center\">\r\n+              <div class=\"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-white font-semibold\">1</div> <!-- Reduced from w-10 h-10 -->\r\n+              <div class=\"ml-3\"> <!-- Reduced margin -->\r\n+                <p class=\"font-semibold text-gray-900\">Bill Review</p>\r\n+                <p class=\"text-xs text-gray-500\">Analyzing consumption patterns</p> <!-- Reduced from text-sm -->\r\n+              </div>\r\n+            </div>\r\n+            <div class=\"w-32 h-0.5 self-center bg-gray-200\"></div>\r\n+            <div class=\"flex items-center\">\r\n+              <div class=\"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold\">2</div>\r\n+              <div class=\"ml-3\">\r\n+                <p class=\"font-semibold text-gray-400\">Solar Quote</p>\r\n+                <p class=\"text-xs text-gray-400\">Up next</p>\r\n+              </div>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+  \r\n+        <!-- Consumption Analysis Card - reduced height -->\r\n+        <div class=\"insight-card p-4 mb-4 opacity-0\" id=\"consumption-card\"> <!-- Reduced padding and margin -->\r\n+          <div class=\"flex justify-between items-center mb-3\"> <!-- Reduced margin -->\r\n+            <div>\r\n+              <h3 class=\"text-base font-semibold text-gray-900\">Consumption Analysis</h3> <!-- Reduced from text-lg -->\r\n+              <p class=\"text-xs text-gray-500\">Last 6 months trend</p>\r\n+            </div>\r\n+            <div class=\"px-2 py-1 bg-blue-50 text-blue-600 rounded-full text-xs font-medium\">\r\n+              ${this.formatChange(trendData)}% vs last month\r\n+            </div>\r\n+          </div>\r\n+          <div class=\"h-48\"> <!-- Reduced from h-64 -->\r\n+            <canvas id=\"consumption-trend-chart\"></canvas>\r\n+          </div>\r\n+        </div>\r\n+  \r\n+        <!-- Key Metrics Grid -->\r\n+        <div class=\"grid grid-cols-2 gap-4 mb-4\"> <!-- Reduced gap and margin -->\r\n+          <!-- Current Bill Card -->\r\n+          <div class=\"insight-card p-4 opacity-0 consumption-metric\"> <!-- Reduced padding -->\r\n+            <div class=\"flex items-center justify-between mb-2\"> <!-- Reduced margin -->\r\n+              <div class=\"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center\"> <!-- Reduced size -->\r\n+                <svg class=\"w-4 h-4 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n+                </svg>\r\n+              </div>\r\n+              <span class=\"px-2 py-1 bg-green-50 text-green-600 text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n+            </div>\r\n+            <p class=\"text-sm text-gray-500 mb-1\">Current Bill</p>\r\n+            <p class=\"text-2xl font-bold text-gray-900\">${this.formatCurrency(\r\n+              this.billData.totalAmount\r\n+            )}</p>\r\n+            <div class=\"mt-4 h-1 bg-gray-100 rounded\">\r\n+              <div class=\"h-full bg-green-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n+            </div>\r\n+          </div>\r\n+  \r\n+          <!-- Units Consumed Card -->\r\n+          <div class=\"insight-card p-6 opacity-0 consumption-metric\">\r\n+            <div class=\"flex items-center justify-between mb-4\">\r\n+              <div class=\"w-12 h-12 rounded-lg bg-blue-50 flex items-center justify-center\">\r\n+                <svg class=\"w-6 h-6 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n+                </svg>\r\n+              </div>\r\n+              <span class=\"px-2 py-1 bg-blue-50 text-blue-600 text-sm rounded-full\">\r\n+                ${this.calculateEfficiency()} efficiency\r\n+              </span>\r\n+            </div>\r\n+            <p class=\"text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n+            <p class=\"text-2xl font-bold text-gray-900\">${\r\n+              this.billData.unitsConsumed\r\n+            } kWh</p>\r\n+            <p class=\"text-sm text-gray-500 mt-2\">\r\n+              Rate: ${this.formatCurrency(this.billData.ratePerUnit)}/kWh\r\n+            </p>\r\n+          </div>\r\n+        </div>\r\n+  \r\n+        <!-- Next Steps Card -->\r\n+        <div class=\"mt-auto\">\r\n+          <div class=\"insight-card p-4 opacity-0 relative\" id=\"next-steps-card\"> <!-- Reduced padding -->\r\n+            <div class=\"absolute -top-2 -right-2\"> <!-- Adjusted position -->\r\n+              <div class=\"w-12 h-12 animated-gradient rounded-full flex items-center justify-center\"> <!-- Reduced from w-16 h-16 -->\r\n+                <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n+                </svg>\r\n+              </div>\r\n+            </div>\r\n+            <div class=\"max-w-lg\">\r\n+              <h3 class=\"text-lg font-semibold text-gray-900 mb-2\">Ready For Your Solar Quote?</h3> <!-- Reduced from text-xl -->\r\n+              <p class=\"text-sm text-gray-600 mb-4\">\r\n+                We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n+              </p>\r\n+              <button \r\n+                id=\"proceed-to-quote\" \r\n+                class=\"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white px-4 py-3 rounded-xl font-medium\r\n+                       hover:from-blue-700 hover:to-blue-800 transition-all duration-300 shadow-sm hover:shadow-lg\r\n+                       flex items-center justify-center gap-2 group\"\r\n+              >\r\n+                Generate My Solar Quote\r\n+                <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n+                </svg>\r\n+              </button>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n+    `;\r\n+\r\n+    this.initializeCharts(trendData);\r\n+    this.startInsightAnimations();\r\n+    this.attachEventListeners();\r\n+  }\r\n+\r\n+  generateTrendData() {\r\n+    const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\"];\r\n+    return months.map((month) => ({\r\n+      month,\r\n+      consumption: Math.floor(\r\n+        this.billData.unitsConsumed * (0.8 + Math.random() * 0.4)\r\n+      ),\r\n+    }));\r\n+  }\r\n+\r\n+  initializeCharts(trendData) {\r\n+    const ctx = document.getElementById(\"consumption-trend-chart\");\r\n+    if (!ctx) return;\r\n+\r\n+    this.charts.consumption = new Chart(ctx, {\r\n+      type: \"line\",\r\n+      data: {\r\n+        labels: trendData.map((d) => d.month),\r\n+        datasets: [\r\n+          {\r\n+            label: \"Consumption (kWh)\",\r\n+            data: trendData.map((d) => d.consumption),\r\n+            borderColor: \"#3b82f6\",\r\n+            backgroundColor: \"rgba(59, 130, 246, 0.1)\",\r\n+            tension: 0.4,\r\n+            fill: true,\r\n+            pointRadius: 6,\r\n+            pointHoverRadius: 8,\r\n+            pointBackgroundColor: \"#ffffff\",\r\n+            pointBorderColor: \"#3b82f6\",\r\n+            pointBorderWidth: 2,\r\n+          },\r\n+        ],\r\n+      },\r\n+      options: {\r\n+        responsive: true,\r\n+        maintainAspectRatio: false,\r\n+        plugins: {\r\n+          legend: {\r\n+            display: false,\r\n+          },\r\n+          tooltip: {\r\n+            backgroundColor: \"white\",\r\n+            titleColor: \"#1f2937\",\r\n+            bodyColor: \"#4b5563\",\r\n+            borderColor: \"#e5e7eb\",\r\n+            borderWidth: 1,\r\n+            padding: 12,\r\n+            titleFont: {\r\n+              size: 14,\r\n+              weight: \"bold\",\r\n+            },\r\n+            bodyFont: {\r\n+              size: 13,\r\n+            },\r\n+            displayColors: false,\r\n+            callbacks: {\r\n+              label: (context) => `${context.parsed.y.toLocaleString()} kWh`,\r\n+            },\r\n+          },\r\n+        },\r\n+        scales: {\r\n+          x: {\r\n+            grid: {\r\n+              display: false,\r\n+            },\r\n+            ticks: {\r\n+              font: {\r\n+                size: 12,\r\n+              },\r\n+            },\r\n+          },\r\n+          y: {\r\n+            beginAtZero: true,\r\n+            grid: {\r\n+              color: \"rgba(0, 0, 0, 0.05)\",\r\n+            },\r\n+            ticks: {\r\n+              font: {\r\n+                size: 12,\r\n+              },\r\n+              callback: (value) => `${value} kWh`,\r\n+            },\r\n+          },\r\n+        },\r\n+      },\r\n+    });\r\n+  }\r\n+\r\n+  startInsightAnimations() {\r\n+    gsap.to(\"#insights-header\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      ease: \"power2.out\",\r\n+    });\r\n+\r\n+    gsap.to(\"#progress-tracker\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      delay: 0.2,\r\n+      ease: \"power2.out\",\r\n+    });\r\n+\r\n+    gsap.to(\"#consumption-card\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      delay: 0.4,\r\n+      ease: \"power2.out\",\r\n+    });\r\n+\r\n+    gsap.to(\".consumption-metric\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      stagger: 0.2,\r\n+      delay: 0.6,\r\n+      ease: \"power2.out\",\r\n+    });\r\n+\r\n+    gsap.to(\"#next-steps-card\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      delay: 1,\r\n+      ease: \"power2.out\",\r\n+    });\r\n+  }\r\n+\r\n+  // Utility methods\r\n+  formatCurrency(value) {\r\n+    return new Intl.NumberFormat(\"en-PK\", {\r\n+      style: \"currency\",\r\n+      currency: \"PKR\",\r\n+      minimumFractionDigits: 0,\r\n+      maximumFractionDigits: 0,\r\n+    }).format(value);\r\n+  }\r\n+\r\n+  calculateDueDays() {\r\n+    const dueDate = new Date(this.billData.dueDate);\r\n+    const today = new Date();\r\n+    const diffTime = Math.abs(dueDate - today);\r\n+    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n+  }\r\n+\r\n+  calculateBillProgress() {\r\n+    const daysInMonth = 30;\r\n+    const today = new Date();\r\n+    const billDate = new Date(this.billData.issueDate);\r\n+    const daysPassed = Math.ceil((today - billDate) / (1000 * 60 * 60 * 24));\r\n+    return Math.min((daysPassed / daysInMonth) * 100, 100);\r\n+  }\r\n+\r\n+  calculateEfficiency() {\r\n+    const avgConsumption = 500; // Example average consumption\r\n+    const efficiency = (this.billData.unitsConsumed / avgConsumption) * 100;\r\n+    return efficiency <= 100 ? \"High\" : \"Low\";\r\n+  }\r\n+\r\n+  formatChange(data) {\r\n+    const lastTwo = data.slice(-2);\r\n+    const change =\r\n+      ((lastTwo[1].consumption - lastTwo[0].consumption) /\r\n+        lastTwo[0].consumption) *\r\n+      100;\r\n+    return change.toFixed(1);\r\n+  }\r\n+\r\n+  attachEventListeners() {\r\n+    const quoteButton = document.getElementById(\"proceed-to-quote\");\r\n+    if (quoteButton) {\r\n+      quoteButton.addEventListener(\"click\", () => {\r\n+        window.router.push(\"/quote\");\r\n+      });\r\n+    }\r\n+  }\r\n+}\r\n"
                },
                {
                    "date": 1731679400997,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -794,794 +794,4 @@\n       });\r\n     }\r\n   }\r\n }\r\n-// BillReviewPage.js\r\n-import { gsap } from \"gsap\";\r\n-import { getBillData } from \"../store/solarSizingState.js\";\r\n-import { BillPreview } from \"./BillPreview.js\";\r\n-import Chart from \"chart.js/auto\";\r\n-\r\n-export class BillReviewPage {\r\n-  constructor() {\r\n-    this.billData = getBillData();\r\n-    this.charts = {};\r\n-  }\r\n-\r\n-  addScrollStyles() {\r\n-    const style = document.createElement(\"style\");\r\n-    style.textContent = `\r\n-        .custom-scrollbar {\r\n-            scrollbar-width: thin;\r\n-            scrollbar-color: rgba(0, 0, 0, 0.2) transparent;\r\n-        }\r\n-\r\n-        .custom-scrollbar::-webkit-scrollbar {\r\n-            width: 6px;\r\n-        }\r\n-\r\n-        .custom-scrollbar::-webkit-scrollbar-track {\r\n-            background: transparent;\r\n-        }\r\n-\r\n-        .custom-scrollbar::-webkit-scrollbar-thumb {\r\n-            background-color: rgba(0, 0, 0, 0.2);\r\n-            border-radius: 3px;\r\n-        }\r\n-\r\n-        .custom-scrollbar::-webkit-scrollbar-thumb:hover {\r\n-            background-color: rgba(0, 0, 0, 0.3);\r\n-        }\r\n-    `;\r\n-    document.head.appendChild(style);\r\n-  }\r\n-\r\n-  // Update the main container structure in render method\r\n-  render() {\r\n-    const app = document.getElementById(\"app\");\r\n-\r\n-    app.innerHTML = `\r\n-    <div class=\"h-screen w-full overflow-hidden bg-gray-50\">\r\n-        <div class=\"h-full w-full flex flex-col p-2 sm:p-4 lg:p-8\">\r\n-            <!-- Header -->\r\n-            <div class=\"flex-none mb-3 sm:mb-4 lg:mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-4\">\r\n-                <div>\r\n-                    <h1 class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">Bill Analysis</h1>\r\n-                    <p class=\"text-xs sm:text-sm lg:text-base text-gray-500\">Understanding your energy consumption</p>\r\n-                </div>\r\n-                <button \r\n-                    onclick=\"window.router.push('/')\"\r\n-                    class=\"inline-flex items-center px-2 py-1 sm:px-3 sm:py-1.5 lg:px-4 lg:py-2 rounded-lg bg-white border border-gray-200 shadow-sm hover:bg-gray-50 transition-colors text-xs sm:text-sm lg:text-base\"\r\n-                >\r\n-                    <svg class=\"w-3 h-3 sm:w-4 sm:h-4 mr-1.5 sm:mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 19l-7-7 7-7\" />\r\n-                    </svg>\r\n-                    Back\r\n-                </button>\r\n-            </div>\r\n-\r\n-            <!-- Main Content Area -->\r\n-            <div class=\"flex-1 min-h-0 relative\">\r\n-                <div class=\"absolute inset-0 overflow-auto\">\r\n-                    <div class=\"h-full max-w-[1136px] mx-auto pb-4 sm:pb-6\">\r\n-                        <div class=\"grid grid-cols-1 xl:grid-cols-[1fr,324px] gap-3 sm:gap-4 lg:gap-6\">\r\n-                            <!-- Left Column - Bill Preview -->\r\n-                            <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6\">\r\n-                                <div id=\"bill-preview\" class=\"h-full\"></div>\r\n-                            </div>\r\n-\r\n-                            <!-- Right Column - Analysis -->\r\n-                            <div class=\"space-y-3 sm:space-y-4 lg:space-y-6\">\r\n-                                <!-- Progress Card -->\r\n-                                <div class=\"bg-white/70 backdrop-blur rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6\">\r\n-                                    <div class=\"flex justify-between items-center\">\r\n-                                        <div class=\"flex items-start gap-3\">\r\n-                                            <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-semibold text-sm sm:text-base\">1</div>\r\n-                                            <div>\r\n-                                                <p class=\"font-semibold text-gray-900 text-sm sm:text-base\">Bill Review</p>\r\n-                                                <p class=\"text-xs sm:text-sm text-gray-500\">Analyzing consumption patterns</p>\r\n-                                            </div>\r\n-                                        </div>\r\n-                                        <div class=\"flex items-center gap-2\">\r\n-                                            <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm sm:text-base\">2</div>\r\n-                                            <div class=\"hidden sm:block\">\r\n-                                                <p class=\"font-semibold text-gray-400 text-sm sm:text-base\">Solar Quote</p>\r\n-                                                <p class=\"text-xs sm:text-sm text-gray-400\">Up next</p>\r\n-                                            </div>\r\n-                                        </div>\r\n-                                    </div>\r\n-                                </div>\r\n-\r\n-                                <!-- Consumption Analysis Card -->\r\n-                                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6\">\r\n-                                    <div class=\"flex justify-between items-center mb-3 sm:mb-4\">\r\n-                                        <h3 class=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n-                                        <div class=\"px-2 py-1 bg-blue-50 text-blue-600 rounded-full text-xs sm:text-sm font-medium\">\r\n-                                            Monthly Trend\r\n-                                        </div>\r\n-                                    </div>\r\n-                                    <div class=\"h-[200px] sm:h-[250px]\">\r\n-                                        <canvas id=\"consumption-trend-chart\"></canvas>\r\n-                                    </div>\r\n-                                </div>\r\n-\r\n-                                <!-- Key Metrics Grid -->\r\n-                                <div class=\"grid grid-cols-2 gap-3 sm:gap-4\">\r\n-                                    <!-- Current Bill Card -->\r\n-                                    <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6\">\r\n-                                        <div class=\"flex items-center justify-between mb-2\">\r\n-                                            <div class=\"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center\">\r\n-                                                <svg class=\"w-4 h-4 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n-                                                </svg>\r\n-                                            </div>\r\n-                                            <span class=\"px-2 py-1 bg-green-50 text-green-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n-                                        </div>\r\n-                                        <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Current Bill</p>\r\n-                                        <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${this.formatCurrency(\r\n-                                          this.billData.amount\r\n-                                        )}</p>\r\n-                                    </div>\r\n-\r\n-                                    <!-- Units Consumed Card -->\r\n-                                    <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6\">\r\n-                                        <div class=\"flex items-center justify-between mb-2\">\r\n-                                            <div class=\"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center\">\r\n-                                                <svg class=\"w-4 h-4 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n-                                                </svg>\r\n-                                            </div>\r\n-                                            <span class=\"px-2 py-1 bg-blue-50 text-blue-600 text-xs sm:text-sm rounded-full\">\r\n-                                                ${this.calculateEfficiency()} efficiency\r\n-                                            </span>\r\n-                                        </div>\r\n-                                        <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n-                                        <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${\r\n-                                          this.billData.unitsConsumed\r\n-                                        } kWh</p>\r\n-                                    </div>\r\n-                                </div>\r\n-\r\n-                                <!-- Next Steps Card -->\r\n-                                <div class=\"bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 text-white relative\">\r\n-                                    <div class=\"absolute -top-2 -right-2\">\r\n-                                        <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n-                                            <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n-                                            </svg>\r\n-                                        </div>\r\n-                                    </div>\r\n-                                    <div class=\"max-w-lg\">\r\n-                                        <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold mb-2\">Ready For Your Solar Quote?</h3>\r\n-                                        <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n-                                            We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n-                                        </p>\r\n-                                        <button \r\n-                                            id=\"proceed-to-quote\" \r\n-                                            class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n-                                                   transition-all duration-300 shadow-sm hover:shadow-lg\r\n-                                                   flex items-center justify-center gap-2 group\"\r\n-                                        >\r\n-                                            Generate My Solar Quote\r\n-                                            <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n-                                            </svg>\r\n-                                        </button>\r\n-                                    </div>\r\n-                                </div>\r\n-                            </div>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-        </div>\r\n-    </div>\r\n-`;\r\n-    this.attachBaseStyles();\r\n-\r\n-    // Use requestAnimationFrame to ensure styles are applied before starting\r\n-    requestAnimationFrame(() => {\r\n-      requestAnimationFrame(() => {\r\n-        // Make container visible\r\n-        const container = document.getElementById(\"quote-result-page\");\r\n-        if (container) {\r\n-          container.classList.remove(\"opacity-0\");\r\n-        }\r\n-\r\n-        // Now render bill preview and start animation\r\n-        this.renderBillPreview();\r\n-        this.startAnimation().catch((error) => {\r\n-          console.error(\"Animation failed:\", error);\r\n-          this.showError();\r\n-        });\r\n-      });\r\n-    });\r\n-  }\r\n-\r\n-  async startAnimation() {\r\n-    if (this.error) {\r\n-      this.showError();\r\n-      return;\r\n-    }\r\n-\r\n-    const billPreviewContainer = document.getElementById(\r\n-      \"bill-preview-container\"\r\n-    );\r\n-    const insightsContainer = document.getElementById(\"insights-container\");\r\n-    const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n-    const quoteResultPage = document.getElementById(\"quote-result-page\");\r\n-\r\n-    // Initial states\r\n-    gsap.set([billPreviewContainer, loadingIndicator], {\r\n-      opacity: 0,\r\n-    });\r\n-    gsap.set(billPreviewContainer, {\r\n-      scale: 0.9,\r\n-      position: \"absolute\",\r\n-      left: \"50%\",\r\n-      top: \"50%\",\r\n-      xPercent: -50,\r\n-      yPercent: -50,\r\n-      width: \"47.5%\",\r\n-    });\r\n-    gsap.set(loadingIndicator, {\r\n-      scale: 0.5,\r\n-    });\r\n-\r\n-    const tl = gsap.timeline({\r\n-      defaults: { duration: 0.8, ease: \"power2.out\" },\r\n-    });\r\n-\r\n-    // Animation sequence\r\n-    await tl\r\n-      .to(billPreviewContainer, {\r\n-        opacity: 1,\r\n-        scale: 1,\r\n-        duration: 1,\r\n-      })\r\n-      .to(loadingIndicator, {\r\n-        opacity: 1,\r\n-        scale: 1,\r\n-        duration: 0.5,\r\n-      })\r\n-      .to(loadingIndicator, {\r\n-        opacity: 0,\r\n-        scale: 0.5,\r\n-        delay: 1,\r\n-      })\r\n-      .to(\r\n-        billPreviewContainer,\r\n-        {\r\n-          left: \"0%\",\r\n-          top: \"0%\",\r\n-          xPercent: 0,\r\n-          yPercent: 0,\r\n-          width: \"50%\",\r\n-          position: \"relative\",\r\n-        },\r\n-        \"-=0.3\"\r\n-      )\r\n-      .call(() => {\r\n-        insightsContainer.style.visibility = \"visible\";\r\n-      })\r\n-      .to(insightsContainer, {\r\n-        opacity: 1,\r\n-        duration: 0.5,\r\n-      })\r\n-      .to(\r\n-        quoteResultPage,\r\n-        {\r\n-          backgroundColor: \"var(--color-bg-secondary)\",\r\n-          duration: 1,\r\n-        },\r\n-        \"-=0.5\"\r\n-      );\r\n-\r\n-    // Render insights after animations\r\n-    this.renderInsights();\r\n-  }\r\n-\r\n-  attachBaseStyles() {\r\n-    const style = document.createElement(\"style\");\r\n-    style.textContent = this.getBaseStyles();\r\n-    document.head.appendChild(style);\r\n-  }\r\n-\r\n-  getBaseStyles() {\r\n-    return `\r\n-      /* Base Theme Colors */\r\n-      :root {\r\n-        --color-primary: #3b82f6;\r\n-        --color-primary-dark: #2563eb;\r\n-        --color-primary-light: #93c5fd;\r\n-        --color-success: #10b981;\r\n-        --color-warning: #f59e0b;\r\n-        --color-error: #ef4444;\r\n-        --color-gray-50: #f8fafc;\r\n-        --color-gray-100: #f1f5f9;\r\n-        --color-gray-200: #e2e8f0;\r\n-        --color-gray-300: #cbd5e1;\r\n-        --color-gray-400: #94a3b8;\r\n-        --color-gray-500: #64748b;\r\n-        --color-gray-600: #475569;\r\n-        --color-gray-700: #334155;\r\n-        --color-gray-800: #1e293b;\r\n-        --color-gray-900: #0f172a;\r\n-      }\r\n-\r\n-      /* Loading Spinner */\r\n-      .loading-spinner {\r\n-        width: 40px;\r\n-        height: 40px;\r\n-        border: 4px solid var(--color-gray-200);\r\n-        border-left-color: var(--color-primary);\r\n-        border-radius: 50%;\r\n-        animation: spin 1s linear infinite;\r\n-      }\r\n-\r\n-      @keyframes spin {\r\n-        to { transform: rotate(360deg); }\r\n-      }\r\n-\r\n-      /* Card Styles */\r\n-      .insight-card {\r\n-        background: white;\r\n-        border-radius: 1rem;\r\n-        box-shadow: 0 1px 3px rgba(0,0,0,0.1);\r\n-        transition: all 0.3s ease;\r\n-        border: 1px solid var(--color-gray-100);\r\n-      }\r\n-\r\n-      .insight-card:hover {\r\n-        transform: translateY(-2px);\r\n-        box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);\r\n-      }\r\n-\r\n-      /* Glass Effect */\r\n-      .glass-effect {\r\n-        background: rgba(255, 255, 255, 0.7);\r\n-        backdrop-filter: blur(10px);\r\n-        border: 1px solid rgba(255, 255, 255, 0.3);\r\n-      }\r\n-\r\n-      /* Custom Scrollbar */\r\n-      .custom-scrollbar {\r\n-        scrollbar-width: thin;\r\n-        scrollbar-color: var(--color-gray-300) transparent;\r\n-      }\r\n-\r\n-      .custom-scrollbar::-webkit-scrollbar {\r\n-        width: 6px;\r\n-      }\r\n-\r\n-      .custom-scrollbar::-webkit-scrollbar-track {\r\n-        background: transparent;\r\n-      }\r\n-\r\n-      .custom-scrollbar::-webkit-scrollbar-thumb {\r\n-        background-color: var(--color-gray-300);\r\n-        border-radius: 3px;\r\n-      }\r\n-\r\n-      /* Progress Bar */\r\n-      .progress-step {\r\n-        position: relative;\r\n-        z-index: 1;\r\n-      }\r\n-\r\n-      .progress-step::after {\r\n-        content: '';\r\n-        position: absolute;\r\n-        top: 50%;\r\n-        left: 100%;\r\n-        width: 100%;\r\n-        height: 2px;\r\n-        background: var(--color-gray-200);\r\n-        transform: translateY(-50%);\r\n-      }\r\n-\r\n-      .progress-step.active::after {\r\n-        background: var(--color-primary);\r\n-      }\r\n-\r\n-      /* Animated Gradients */\r\n-      .animated-gradient {\r\n-        background: linear-gradient(\r\n-          45deg,\r\n-          var(--color-primary),\r\n-          var(--color-primary-dark),\r\n-          var(--color-primary)\r\n-        );\r\n-        background-size: 200% 200%;\r\n-        animation: gradient 15s ease infinite;\r\n-      }\r\n-\r\n-      @keyframes gradient {\r\n-        0% { background-position: 0% 50%; }\r\n-        50% { background-position: 100% 50%; }\r\n-        100% { background-position: 0% 50%; }\r\n-      }\r\n-\r\n-      /* Responsive Design */\r\n-      @media (max-width: 1024px) {\r\n-        .insight-card {\r\n-          padding: 1rem;\r\n-        }\r\n-      }\r\n-\r\n-      @media (max-width: 768px) {\r\n-        #main-content {\r\n-          flex-direction: column;\r\n-        }\r\n-\r\n-        #bill-preview-container,\r\n-        #insights-container {\r\n-          width: 100%;\r\n-          height: 50%;\r\n-        }\r\n-      }\r\n-\r\n-      /* Chart Tooltips */\r\n-      .chart-tooltip {\r\n-        background: rgba(255, 255, 255, 0.95) !important;\r\n-        backdrop-filter: blur(4px);\r\n-        border: 1px solid var(--color-gray-200) !important;\r\n-        border-radius: 0.5rem !important;\r\n-        padding: 0.75rem !important;\r\n-        box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1) !important;\r\n-      }\r\n-    `;\r\n-  }\r\n-\r\n-  renderBillPreview() {\r\n-    if (!this.billData) {\r\n-      console.error(\"Bill data is not available\");\r\n-      this.renderError(document.getElementById(\"app\"));\r\n-      return;\r\n-    }\r\n-\r\n-    const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n-    if (!billPreviewContainer) {\r\n-      console.error(\"Bill preview container not found\");\r\n-      return;\r\n-    }\r\n-\r\n-    const billPreview = new BillPreview(this.billData);\r\n-    billPreview.render(billPreviewContainer);\r\n-  }\r\n-\r\n-  renderError(container) {\r\n-    container.innerHTML = `\r\n-        <div class=\"flex items-center justify-center h-screen\">\r\n-            <div class=\"text-center\">\r\n-                <h2 class=\"text-xl font-semibold text-gray-800 mb-2\">Error</h2>\r\n-                <p class=\"text-gray-600\">Bill data is not available. Please try again.</p>\r\n-                <button onclick=\"window.router.push('/')\" \r\n-                        class=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors\">\r\n-                    Go Back\r\n-                </button>\r\n-            </div>\r\n-        </div>\r\n-    `;\r\n-  }\r\n-\r\n-  renderInsights() {\r\n-    const insightsContainer = document.querySelector(\"#insights-container\");\r\n-    if (!insightsContainer) return;\r\n-\r\n-    // Generate trend data for the last 6 months\r\n-    const trendData = this.generateTrendData();\r\n-\r\n-    insightsContainer.innerHTML = `\r\n-      <div class=\"h-full flex flex-col p-6\">  <!-- Reduced padding from p-8 to p-6 -->\r\n-        <!-- Header Section - reduced margin -->\r\n-        <div class=\"flex items-center space-x-4 mb-4 opacity-0\" id=\"insights-header\">\r\n-          <div class=\"flex-shrink-0\">\r\n-            <div class=\"w-10 h-10 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center\"> <!-- Reduced from w-12 h-12 -->\r\n-              <svg class=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n-              </svg>\r\n-            </div>\r\n-          </div>\r\n-          <div>\r\n-            <h2 class=\"text-xl font-bold text-gray-900\">Bill Analysis</h2> <!-- Reduced from text-2xl -->\r\n-            <p class=\"text-sm text-gray-500\">Understanding your energy consumption</p>\r\n-          </div>\r\n-        </div>\r\n-  \r\n-        <!-- Progress Tracker - reduced padding and margin -->\r\n-        <div class=\"glass-effect rounded-xl p-4 mb-4 opacity-0\" id=\"progress-tracker\"> <!-- Reduced padding and margin -->\r\n-          <div class=\"flex justify-between\">\r\n-            <div class=\"flex items-center\">\r\n-              <div class=\"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-white font-semibold\">1</div> <!-- Reduced from w-10 h-10 -->\r\n-              <div class=\"ml-3\"> <!-- Reduced margin -->\r\n-                <p class=\"font-semibold text-gray-900\">Bill Review</p>\r\n-                <p class=\"text-xs text-gray-500\">Analyzing consumption patterns</p> <!-- Reduced from text-sm -->\r\n-              </div>\r\n-            </div>\r\n-            <div class=\"w-32 h-0.5 self-center bg-gray-200\"></div>\r\n-            <div class=\"flex items-center\">\r\n-              <div class=\"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold\">2</div>\r\n-              <div class=\"ml-3\">\r\n-                <p class=\"font-semibold text-gray-400\">Solar Quote</p>\r\n-                <p class=\"text-xs text-gray-400\">Up next</p>\r\n-              </div>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-  \r\n-        <!-- Consumption Analysis Card - reduced height -->\r\n-        <div class=\"insight-card p-4 mb-4 opacity-0\" id=\"consumption-card\"> <!-- Reduced padding and margin -->\r\n-          <div class=\"flex justify-between items-center mb-3\"> <!-- Reduced margin -->\r\n-            <div>\r\n-              <h3 class=\"text-base font-semibold text-gray-900\">Consumption Analysis</h3> <!-- Reduced from text-lg -->\r\n-              <p class=\"text-xs text-gray-500\">Last 6 months trend</p>\r\n-            </div>\r\n-            <div class=\"px-2 py-1 bg-blue-50 text-blue-600 rounded-full text-xs font-medium\">\r\n-              ${this.formatChange(trendData)}% vs last month\r\n-            </div>\r\n-          </div>\r\n-          <div class=\"h-48\"> <!-- Reduced from h-64 -->\r\n-            <canvas id=\"consumption-trend-chart\"></canvas>\r\n-          </div>\r\n-        </div>\r\n-  \r\n-        <!-- Key Metrics Grid -->\r\n-        <div class=\"grid grid-cols-2 gap-4 mb-4\"> <!-- Reduced gap and margin -->\r\n-          <!-- Current Bill Card -->\r\n-          <div class=\"insight-card p-4 opacity-0 consumption-metric\"> <!-- Reduced padding -->\r\n-            <div class=\"flex items-center justify-between mb-2\"> <!-- Reduced margin -->\r\n-              <div class=\"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center\"> <!-- Reduced size -->\r\n-                <svg class=\"w-4 h-4 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n-                </svg>\r\n-              </div>\r\n-              <span class=\"px-2 py-1 bg-green-50 text-green-600 text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n-            </div>\r\n-            <p class=\"text-sm text-gray-500 mb-1\">Current Bill</p>\r\n-            <p class=\"text-2xl font-bold text-gray-900\">${this.formatCurrency(\r\n-              this.billData.totalAmount\r\n-            )}</p>\r\n-            <div class=\"mt-4 h-1 bg-gray-100 rounded\">\r\n-              <div class=\"h-full bg-green-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n-            </div>\r\n-          </div>\r\n-  \r\n-          <!-- Units Consumed Card -->\r\n-          <div class=\"insight-card p-6 opacity-0 consumption-metric\">\r\n-            <div class=\"flex items-center justify-between mb-4\">\r\n-              <div class=\"w-12 h-12 rounded-lg bg-blue-50 flex items-center justify-center\">\r\n-                <svg class=\"w-6 h-6 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n-                </svg>\r\n-              </div>\r\n-              <span class=\"px-2 py-1 bg-blue-50 text-blue-600 text-sm rounded-full\">\r\n-                ${this.calculateEfficiency()} efficiency\r\n-              </span>\r\n-            </div>\r\n-            <p class=\"text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n-            <p class=\"text-2xl font-bold text-gray-900\">${\r\n-              this.billData.unitsConsumed\r\n-            } kWh</p>\r\n-            <p class=\"text-sm text-gray-500 mt-2\">\r\n-              Rate: ${this.formatCurrency(this.billData.ratePerUnit)}/kWh\r\n-            </p>\r\n-          </div>\r\n-        </div>\r\n-  \r\n-        <!-- Next Steps Card -->\r\n-        <div class=\"mt-auto\">\r\n-          <div class=\"insight-card p-4 opacity-0 relative\" id=\"next-steps-card\"> <!-- Reduced padding -->\r\n-            <div class=\"absolute -top-2 -right-2\"> <!-- Adjusted position -->\r\n-              <div class=\"w-12 h-12 animated-gradient rounded-full flex items-center justify-center\"> <!-- Reduced from w-16 h-16 -->\r\n-                <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n-                </svg>\r\n-              </div>\r\n-            </div>\r\n-            <div class=\"max-w-lg\">\r\n-              <h3 class=\"text-lg font-semibold text-gray-900 mb-2\">Ready For Your Solar Quote?</h3> <!-- Reduced from text-xl -->\r\n-              <p class=\"text-sm text-gray-600 mb-4\">\r\n-                We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n-              </p>\r\n-              <button \r\n-                id=\"proceed-to-quote\" \r\n-                class=\"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white px-4 py-3 rounded-xl font-medium\r\n-                       hover:from-blue-700 hover:to-blue-800 transition-all duration-300 shadow-sm hover:shadow-lg\r\n-                       flex items-center justify-center gap-2 group\"\r\n-              >\r\n-                Generate My Solar Quote\r\n-                <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n-                </svg>\r\n-              </button>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-      </div>\r\n-    `;\r\n-\r\n-    this.initializeCharts(trendData);\r\n-    this.startInsightAnimations();\r\n-    this.attachEventListeners();\r\n-  }\r\n-\r\n-  generateTrendData() {\r\n-    const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\"];\r\n-    return months.map((month) => ({\r\n-      month,\r\n-      consumption: Math.floor(\r\n-        this.billData.unitsConsumed * (0.8 + Math.random() * 0.4)\r\n-      ),\r\n-    }));\r\n-  }\r\n-\r\n-  initializeCharts(trendData) {\r\n-    const ctx = document.getElementById(\"consumption-trend-chart\");\r\n-    if (!ctx) return;\r\n-\r\n-    this.charts.consumption = new Chart(ctx, {\r\n-      type: \"line\",\r\n-      data: {\r\n-        labels: trendData.map((d) => d.month),\r\n-        datasets: [\r\n-          {\r\n-            label: \"Consumption (kWh)\",\r\n-            data: trendData.map((d) => d.consumption),\r\n-            borderColor: \"#3b82f6\",\r\n-            backgroundColor: \"rgba(59, 130, 246, 0.1)\",\r\n-            tension: 0.4,\r\n-            fill: true,\r\n-            pointRadius: 6,\r\n-            pointHoverRadius: 8,\r\n-            pointBackgroundColor: \"#ffffff\",\r\n-            pointBorderColor: \"#3b82f6\",\r\n-            pointBorderWidth: 2,\r\n-          },\r\n-        ],\r\n-      },\r\n-      options: {\r\n-        responsive: true,\r\n-        maintainAspectRatio: false,\r\n-        plugins: {\r\n-          legend: {\r\n-            display: false,\r\n-          },\r\n-          tooltip: {\r\n-            backgroundColor: \"white\",\r\n-            titleColor: \"#1f2937\",\r\n-            bodyColor: \"#4b5563\",\r\n-            borderColor: \"#e5e7eb\",\r\n-            borderWidth: 1,\r\n-            padding: 12,\r\n-            titleFont: {\r\n-              size: 14,\r\n-              weight: \"bold\",\r\n-            },\r\n-            bodyFont: {\r\n-              size: 13,\r\n-            },\r\n-            displayColors: false,\r\n-            callbacks: {\r\n-              label: (context) => `${context.parsed.y.toLocaleString()} kWh`,\r\n-            },\r\n-          },\r\n-        },\r\n-        scales: {\r\n-          x: {\r\n-            grid: {\r\n-              display: false,\r\n-            },\r\n-            ticks: {\r\n-              font: {\r\n-                size: 12,\r\n-              },\r\n-            },\r\n-          },\r\n-          y: {\r\n-            beginAtZero: true,\r\n-            grid: {\r\n-              color: \"rgba(0, 0, 0, 0.05)\",\r\n-            },\r\n-            ticks: {\r\n-              font: {\r\n-                size: 12,\r\n-              },\r\n-              callback: (value) => `${value} kWh`,\r\n-            },\r\n-          },\r\n-        },\r\n-      },\r\n-    });\r\n-  }\r\n-\r\n-  startInsightAnimations() {\r\n-    gsap.to(\"#insights-header\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-\r\n-    gsap.to(\"#progress-tracker\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      delay: 0.2,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-\r\n-    gsap.to(\"#consumption-card\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      delay: 0.4,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-\r\n-    gsap.to(\".consumption-metric\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      stagger: 0.2,\r\n-      delay: 0.6,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-\r\n-    gsap.to(\"#next-steps-card\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      delay: 1,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-  }\r\n-\r\n-  // Utility methods\r\n-  formatCurrency(value) {\r\n-    return new Intl.NumberFormat(\"en-PK\", {\r\n-      style: \"currency\",\r\n-      currency: \"PKR\",\r\n-      minimumFractionDigits: 0,\r\n-      maximumFractionDigits: 0,\r\n-    }).format(value);\r\n-  }\r\n-\r\n-  calculateDueDays() {\r\n-    const dueDate = new Date(this.billData.dueDate);\r\n-    const today = new Date();\r\n-    const diffTime = Math.abs(dueDate - today);\r\n-    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n-  }\r\n-\r\n-  calculateBillProgress() {\r\n-    const daysInMonth = 30;\r\n-    const today = new Date();\r\n-    const billDate = new Date(this.billData.issueDate);\r\n-    const daysPassed = Math.ceil((today - billDate) / (1000 * 60 * 60 * 24));\r\n-    return Math.min((daysPassed / daysInMonth) * 100, 100);\r\n-  }\r\n-\r\n-  calculateEfficiency() {\r\n-    const avgConsumption = 500; // Example average consumption\r\n-    const efficiency = (this.billData.unitsConsumed / avgConsumption) * 100;\r\n-    return efficiency <= 100 ? \"High\" : \"Low\";\r\n-  }\r\n-\r\n-  formatChange(data) {\r\n-    const lastTwo = data.slice(-2);\r\n-    const change =\r\n-      ((lastTwo[1].consumption - lastTwo[0].consumption) /\r\n-        lastTwo[0].consumption) *\r\n-      100;\r\n-    return change.toFixed(1);\r\n-  }\r\n-\r\n-  attachEventListeners() {\r\n-    const quoteButton = document.getElementById(\"proceed-to-quote\");\r\n-    if (quoteButton) {\r\n-      quoteButton.addEventListener(\"click\", () => {\r\n-        window.router.push(\"/quote\");\r\n-      });\r\n-    }\r\n-  }\r\n-}\r\n"
                },
                {
                    "date": 1731679556881,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -481,134 +481,133 @@\n     // Generate trend data for the last 6 months\r\n     const trendData = this.generateTrendData();\r\n \r\n     insightsContainer.innerHTML = `\r\n-      <div class=\"h-full flex flex-col p-6\">  <!-- Reduced padding from p-8 to p-6 -->\r\n-        <!-- Header Section - reduced margin -->\r\n-        <div class=\"flex items-center space-x-4 mb-4 opacity-0\" id=\"insights-header\">\r\n-          <div class=\"flex-shrink-0\">\r\n-            <div class=\"w-10 h-10 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center\"> <!-- Reduced from w-12 h-12 -->\r\n-              <svg class=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n-              </svg>\r\n+        <div class=\"h-full flex flex-col p-2 sm:p-4 lg:p-6 overflow-auto\">\r\n+            <!-- Header Section -->\r\n+            <div class=\"flex-none mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"insights-header\">\r\n+                <div class=\"flex items-center gap-3 sm:gap-4\">\r\n+                    <div class=\"flex-shrink-0\">\r\n+                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center\">\r\n+                            <svg class=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n+                            </svg>\r\n+                        </div>\r\n+                    </div>\r\n+                    <div>\r\n+                        <h2 class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">Bill Analysis</h2>\r\n+                        <p class=\"text-xs sm:text-sm lg:text-base text-gray-500\">Understanding your consumption</p>\r\n+                    </div>\r\n+                </div>\r\n             </div>\r\n-          </div>\r\n-          <div>\r\n-            <h2 class=\"text-xl font-bold text-gray-900\">Bill Analysis</h2> <!-- Reduced from text-2xl -->\r\n-            <p class=\"text-sm text-gray-500\">Understanding your energy consumption</p>\r\n-          </div>\r\n-        </div>\r\n-  \r\n-        <!-- Progress Tracker - reduced padding and margin -->\r\n-        <div class=\"glass-effect rounded-xl p-4 mb-4 opacity-0\" id=\"progress-tracker\"> <!-- Reduced padding and margin -->\r\n-          <div class=\"flex justify-between\">\r\n-            <div class=\"flex items-center\">\r\n-              <div class=\"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-white font-semibold\">1</div> <!-- Reduced from w-10 h-10 -->\r\n-              <div class=\"ml-3\"> <!-- Reduced margin -->\r\n-                <p class=\"font-semibold text-gray-900\">Bill Review</p>\r\n-                <p class=\"text-xs text-gray-500\">Analyzing consumption patterns</p> <!-- Reduced from text-sm -->\r\n-              </div>\r\n+\r\n+            <!-- Progress Tracker -->\r\n+            <div class=\"bg-white/70 backdrop-blur rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"progress-tracker\">\r\n+                <div class=\"flex justify-between items-center\">\r\n+                    <div class=\"flex items-center gap-3\">\r\n+                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-semibold text-sm sm:text-base\">1</div>\r\n+                        <div>\r\n+                            <p class=\"font-semibold text-gray-900 text-sm sm:text-base\">Bill Review</p>\r\n+                            <p class=\"text-xs sm:text-sm text-gray-500\">Analyzing patterns</p>\r\n+                        </div>\r\n+                    </div>\r\n+                    <div class=\"h-0.5 w-16 sm:w-24 bg-gray-200\"></div>\r\n+                    <div class=\"flex items-center gap-3\">\r\n+                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm sm:text-base\">2</div>\r\n+                        <div>\r\n+                            <p class=\"font-semibold text-gray-400 text-sm sm:text-base\">Solar Quote</p>\r\n+                            <p class=\"text-xs sm:text-sm text-gray-400\">Up next</p>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n             </div>\r\n-            <div class=\"w-32 h-0.5 self-center bg-gray-200\"></div>\r\n-            <div class=\"flex items-center\">\r\n-              <div class=\"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold\">2</div>\r\n-              <div class=\"ml-3\">\r\n-                <p class=\"font-semibold text-gray-400\">Solar Quote</p>\r\n-                <p class=\"text-xs text-gray-400\">Up next</p>\r\n-              </div>\r\n+\r\n+            <!-- Content Grid -->\r\n+            <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 lg:gap-6 flex-1\">\r\n+                <!-- Consumption Analysis Card -->\r\n+                <div class=\"sm:col-span-2 bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0\" id=\"consumption-card\">\r\n+                    <div class=\"flex justify-between items-center mb-3 sm:mb-4\">\r\n+                        <h3 class=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n+                        <div class=\"px-2 py-1 bg-blue-50 text-blue-600 rounded-full text-xs sm:text-sm font-medium\">\r\n+                            ${this.formatChange(trendData)}% vs last month\r\n+                        </div>\r\n+                    </div>\r\n+                    <div class=\"h-[200px] sm:h-[250px]\">\r\n+                        <canvas id=\"consumption-trend-chart\"></canvas>\r\n+                    </div>\r\n+                </div>\r\n+\r\n+                <!-- Current Bill Card -->\r\n+                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n+                    <div class=\"flex items-center justify-between mb-2\">\r\n+                        <div class=\"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center\">\r\n+                            <svg class=\"w-4 h-4 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n+                            </svg>\r\n+                        </div>\r\n+                        <span class=\"px-2 py-1 bg-green-50 text-green-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n+                    </div>\r\n+                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Current Bill</p>\r\n+                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${this.formatCurrency(\r\n+                      this.billData.totalAmount\r\n+                    )}</p>\r\n+                    <div class=\"mt-4 h-1 bg-gray-100 rounded\">\r\n+                        <div class=\"h-full bg-green-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n+                    </div>\r\n+                </div>\r\n+\r\n+                <!-- Units Consumed Card -->\r\n+                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n+                    <div class=\"flex items-center justify-between mb-2\">\r\n+                        <div class=\"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center\">\r\n+                            <svg class=\"w-4 h-4 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n+                            </svg>\r\n+                        </div>\r\n+                        <span class=\"px-2 py-1 bg-blue-50 text-blue-600 text-xs sm:text-sm rounded-full\">\r\n+                            ${this.calculateEfficiency()} efficiency\r\n+                        </span>\r\n+                    </div>\r\n+                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n+                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${\r\n+                      this.billData.unitsConsumed\r\n+                    } kWh</p>\r\n+                    <p class=\"text-xs sm:text-sm text-gray-500 mt-2\">Rate: ${this.formatCurrency(\r\n+                      this.billData.ratePerUnit\r\n+                    )}/kWh</p>\r\n+                </div>\r\n+\r\n+                <!-- Next Steps Card -->\r\n+                <div class=\"sm:col-span-2 mt-auto\">\r\n+                    <div class=\"bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n+                        <div class=\"absolute -top-2 -right-2\">\r\n+                            <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n+                                <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n+                                </svg>\r\n+                            </div>\r\n+                        </div>\r\n+                        <div class=\"max-w-lg\">\r\n+                            <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n+                            <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n+                                We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n+                            </p>\r\n+                            <button \r\n+                                id=\"proceed-to-quote\" \r\n+                                class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n+                                       transition-all duration-300 shadow-sm hover:shadow-lg\r\n+                                       flex items-center justify-center gap-2 group\"\r\n+                            >\r\n+                                Generate My Solar Quote\r\n+                                <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n+                                </svg>\r\n+                            </button>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n             </div>\r\n-          </div>\r\n         </div>\r\n-  \r\n-        <!-- Consumption Analysis Card - reduced height -->\r\n-        <div class=\"insight-card p-4 mb-4 opacity-0\" id=\"consumption-card\"> <!-- Reduced padding and margin -->\r\n-          <div class=\"flex justify-between items-center mb-3\"> <!-- Reduced margin -->\r\n-            <div>\r\n-              <h3 class=\"text-base font-semibold text-gray-900\">Consumption Analysis</h3> <!-- Reduced from text-lg -->\r\n-              <p class=\"text-xs text-gray-500\">Last 6 months trend</p>\r\n-            </div>\r\n-            <div class=\"px-2 py-1 bg-blue-50 text-blue-600 rounded-full text-xs font-medium\">\r\n-              ${this.formatChange(trendData)}% vs last month\r\n-            </div>\r\n-          </div>\r\n-          <div class=\"h-48\"> <!-- Reduced from h-64 -->\r\n-            <canvas id=\"consumption-trend-chart\"></canvas>\r\n-          </div>\r\n-        </div>\r\n-  \r\n-        <!-- Key Metrics Grid -->\r\n-        <div class=\"grid grid-cols-2 gap-4 mb-4\"> <!-- Reduced gap and margin -->\r\n-          <!-- Current Bill Card -->\r\n-          <div class=\"insight-card p-4 opacity-0 consumption-metric\"> <!-- Reduced padding -->\r\n-            <div class=\"flex items-center justify-between mb-2\"> <!-- Reduced margin -->\r\n-              <div class=\"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center\"> <!-- Reduced size -->\r\n-                <svg class=\"w-4 h-4 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n-                </svg>\r\n-              </div>\r\n-              <span class=\"px-2 py-1 bg-green-50 text-green-600 text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n-            </div>\r\n-            <p class=\"text-sm text-gray-500 mb-1\">Current Bill</p>\r\n-            <p class=\"text-2xl font-bold text-gray-900\">${this.formatCurrency(\r\n-              this.billData.totalAmount\r\n-            )}</p>\r\n-            <div class=\"mt-4 h-1 bg-gray-100 rounded\">\r\n-              <div class=\"h-full bg-green-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n-            </div>\r\n-          </div>\r\n-  \r\n-          <!-- Units Consumed Card -->\r\n-          <div class=\"insight-card p-6 opacity-0 consumption-metric\">\r\n-            <div class=\"flex items-center justify-between mb-4\">\r\n-              <div class=\"w-12 h-12 rounded-lg bg-blue-50 flex items-center justify-center\">\r\n-                <svg class=\"w-6 h-6 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n-                </svg>\r\n-              </div>\r\n-              <span class=\"px-2 py-1 bg-blue-50 text-blue-600 text-sm rounded-full\">\r\n-                ${this.calculateEfficiency()} efficiency\r\n-              </span>\r\n-            </div>\r\n-            <p class=\"text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n-            <p class=\"text-2xl font-bold text-gray-900\">${\r\n-              this.billData.unitsConsumed\r\n-            } kWh</p>\r\n-            <p class=\"text-sm text-gray-500 mt-2\">\r\n-              Rate: ${this.formatCurrency(this.billData.ratePerUnit)}/kWh\r\n-            </p>\r\n-          </div>\r\n-        </div>\r\n-  \r\n-        <!-- Next Steps Card -->\r\n-        <div class=\"mt-auto\">\r\n-          <div class=\"insight-card p-4 opacity-0 relative\" id=\"next-steps-card\"> <!-- Reduced padding -->\r\n-            <div class=\"absolute -top-2 -right-2\"> <!-- Adjusted position -->\r\n-              <div class=\"w-12 h-12 animated-gradient rounded-full flex items-center justify-center\"> <!-- Reduced from w-16 h-16 -->\r\n-                <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n-                </svg>\r\n-              </div>\r\n-            </div>\r\n-            <div class=\"max-w-lg\">\r\n-              <h3 class=\"text-lg font-semibold text-gray-900 mb-2\">Ready For Your Solar Quote?</h3> <!-- Reduced from text-xl -->\r\n-              <p class=\"text-sm text-gray-600 mb-4\">\r\n-                We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n-              </p>\r\n-              <button \r\n-                id=\"proceed-to-quote\" \r\n-                class=\"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white px-4 py-3 rounded-xl font-medium\r\n-                       hover:from-blue-700 hover:to-blue-800 transition-all duration-300 shadow-sm hover:shadow-lg\r\n-                       flex items-center justify-center gap-2 group\"\r\n-              >\r\n-                Generate My Solar Quote\r\n-                <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n-                </svg>\r\n-              </button>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-      </div>\r\n     `;\r\n \r\n     this.initializeCharts(trendData);\r\n     this.startInsightAnimations();\r\n"
                },
                {
                    "date": 1731679746395,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -486,9 +486,9 @@\n             <!-- Header Section -->\r\n             <div class=\"flex-none mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"insights-header\">\r\n                 <div class=\"flex items-center gap-3 sm:gap-4\">\r\n                     <div class=\"flex-shrink-0\">\r\n-                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center\">\r\n+                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-600 flex items-center justify-center\">\r\n                             <svg class=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                 <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n                             </svg>\r\n                         </div>\r\n@@ -503,9 +503,9 @@\n             <!-- Progress Tracker -->\r\n             <div class=\"bg-white/70 backdrop-blur rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"progress-tracker\">\r\n                 <div class=\"flex justify-between items-center\">\r\n                     <div class=\"flex items-center gap-3\">\r\n-                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-semibold text-sm sm:text-base\">1</div>\r\n+                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-emerald-600 flex items-center justify-center text-white font-semibold text-sm sm:text-base\">1</div>\r\n                         <div>\r\n                             <p class=\"font-semibold text-gray-900 text-sm sm:text-base\">Bill Review</p>\r\n                             <p class=\"text-xs sm:text-sm text-gray-500\">Analyzing patterns</p>\r\n                         </div>\r\n@@ -526,9 +526,9 @@\n                 <!-- Consumption Analysis Card -->\r\n                 <div class=\"sm:col-span-2 bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0\" id=\"consumption-card\">\r\n                     <div class=\"flex justify-between items-center mb-3 sm:mb-4\">\r\n                         <h3 class=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n-                        <div class=\"px-2 py-1 bg-blue-50 text-blue-600 rounded-full text-xs sm:text-sm font-medium\">\r\n+                        <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs sm:text-sm font-medium\">\r\n                             ${this.formatChange(trendData)}% vs last month\r\n                         </div>\r\n                     </div>\r\n                     <div class=\"h-[200px] sm:h-[250px]\">\r\n@@ -538,33 +538,33 @@\n \r\n                 <!-- Current Bill Card -->\r\n                 <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n                     <div class=\"flex items-center justify-between mb-2\">\r\n-                        <div class=\"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center\">\r\n-                            <svg class=\"w-4 h-4 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n+                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                 <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                             </svg>\r\n                         </div>\r\n-                        <span class=\"px-2 py-1 bg-green-50 text-green-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n+                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n                     </div>\r\n                     <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Current Bill</p>\r\n                     <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${this.formatCurrency(\r\n                       this.billData.totalAmount\r\n                     )}</p>\r\n                     <div class=\"mt-4 h-1 bg-gray-100 rounded\">\r\n-                        <div class=\"h-full bg-green-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n+                        <div class=\"h-full bg-emerald-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n                     </div>\r\n                 </div>\r\n \r\n                 <!-- Units Consumed Card -->\r\n                 <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n                     <div class=\"flex items-center justify-between mb-2\">\r\n-                        <div class=\"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center\">\r\n-                            <svg class=\"w-4 h-4 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n+                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                 <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n                             </svg>\r\n                         </div>\r\n-                        <span class=\"px-2 py-1 bg-blue-50 text-blue-600 text-xs sm:text-sm rounded-full\">\r\n+                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">\r\n                             ${this.calculateEfficiency()} efficiency\r\n                         </span>\r\n                     </div>\r\n                     <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n@@ -577,9 +577,9 @@\n                 </div>\r\n \r\n                 <!-- Next Steps Card -->\r\n                 <div class=\"sm:col-span-2 mt-auto\">\r\n-                    <div class=\"bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n+                    <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n                         <div class=\"absolute -top-2 -right-2\">\r\n                             <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n                                 <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                     <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n@@ -608,8 +608,9 @@\n             </div>\r\n         </div>\r\n     `;\r\n \r\n+    // Update the chart colors in initializeCharts\r\n     this.initializeCharts(trendData);\r\n     this.startInsightAnimations();\r\n     this.attachEventListeners();\r\n   }\r\n"
                },
                {
                    "date": 1731679868089,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -636,16 +636,16 @@\n         datasets: [\r\n           {\r\n             label: \"Consumption (kWh)\",\r\n             data: trendData.map((d) => d.consumption),\r\n-            borderColor: \"#3b82f6\",\r\n-            backgroundColor: \"rgba(59, 130, 246, 0.1)\",\r\n+            borderColor: \"#059669\", // Changed to emerald-600\r\n+            backgroundColor: \"rgba(5, 150, 105, 0.1)\", // Changed to emerald-600 with opacity\r\n             tension: 0.4,\r\n             fill: true,\r\n-            pointRadius: 6,\r\n-            pointHoverRadius: 8,\r\n+            pointRadius: 4,\r\n+            pointHoverRadius: 6,\r\n             pointBackgroundColor: \"#ffffff\",\r\n-            pointBorderColor: \"#3b82f6\",\r\n+            pointBorderColor: \"#059669\",\r\n             pointBorderWidth: 2,\r\n           },\r\n         ],\r\n       },\r\n"
                },
                {
                    "date": 1731680343384,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,886 @@\n+// BillReviewPage.js\r\n+import { gsap } from \"gsap\";\r\n+import { getBillData } from \"../store/solarSizingState.js\";\r\n+import { BillPreview } from \"./BillPreview.js\";\r\n+import Chart from \"chart.js/auto\";\r\n+\r\n+export class BillReviewPage {\r\n+  constructor() {\r\n+    this.billData = getBillData();\r\n+    this.charts = {};\r\n+  }\r\n+\r\n+  addScrollStyles() {\r\n+    const style = document.createElement(\"style\");\r\n+    style.textContent = `\r\n+        .custom-scrollbar {\r\n+            scrollbar-width: thin;\r\n+            scrollbar-color: rgba(0, 0, 0, 0.2) transparent;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar {\r\n+            width: 6px;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar-track {\r\n+            background: transparent;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar-thumb {\r\n+            background-color: rgba(0, 0, 0, 0.2);\r\n+            border-radius: 3px;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar-thumb:hover {\r\n+            background-color: rgba(0, 0, 0, 0.3);\r\n+        }\r\n+    `;\r\n+    document.head.appendChild(style);\r\n+  }\r\n+\r\n+  // Update the main container structure in render method\r\n+  render() {\r\n+    const app = document.getElementById(\"app\");\r\n+\r\n+    app.innerHTML = `\r\n+    <div class=\"h-screen w-full overflow-hidden bg-white transition-colors duration-1000\" id=\"quote-result-page\">\r\n+        <div class=\"h-full w-full flex relative\" id=\"main-content\">\r\n+            <!-- Bill Preview Side -->\r\n+            <div class=\"w-1/2 h-full overflow-hidden\" id=\"bill-preview-container\">\r\n+                <div id=\"bill-preview\" class=\"h-full\"></div>\r\n+            </div>\r\n+\r\n+            <!-- Loading Indicator -->\r\n+            <div class=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center z-10\" \r\n+                 id=\"loading-indicator\">\r\n+                <div class=\"loading-spinner\"></div>\r\n+                <p class=\"text-emerald-600 font-medium\">Analyzing your bill...</p>\r\n+            </div>\r\n+\r\n+            <!-- Insights Side -->\r\n+            <div class=\"w-1/2 h-full invisible overflow-hidden\" id=\"insights-container\">\r\n+                <div class=\"h-full flex flex-col p-2 sm:p-4 lg:p-6 xl:p-8\">\r\n+                    <!-- Top Section: Fixed Height -->\r\n+                    <div class=\"flex-none space-y-3 sm:space-y-4 lg:space-y-5\">\r\n+                        <!-- Header Section -->\r\n+                        <div class=\"opacity-0\" id=\"insights-header\">\r\n+                            <div class=\"flex items-center gap-3 sm:gap-4\">\r\n+                                <div class=\"flex-shrink-0\">\r\n+                                    <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-600 flex items-center justify-center\">\r\n+                                        <svg class=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n+                                        </svg>\r\n+                                    </div>\r\n+                                </div>\r\n+                                <div>\r\n+                                    <h2 class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">Bill Analysis</h2>\r\n+                                    <p class=\"text-xs sm:text-sm lg:text-base text-gray-500\">Understanding your consumption</p>\r\n+                                </div>\r\n+                            </div>\r\n+                        </div>\r\n+\r\n+                        <!-- Progress Tracker -->\r\n+                        <div class=\"bg-white/70 backdrop-blur rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 opacity-0\" id=\"progress-tracker\">\r\n+                            <div class=\"flex justify-between items-center\">\r\n+                                <div class=\"flex items-center gap-3\">\r\n+                                    <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-emerald-600 flex items-center justify-center text-white font-semibold text-sm sm:text-base\">1</div>\r\n+                                    <div>\r\n+                                        <p class=\"font-semibold text-gray-900 text-sm sm:text-base\">Bill Review</p>\r\n+                                        <p class=\"text-xs sm:text-sm text-gray-500\">Analyzing patterns</p>\r\n+                                    </div>\r\n+                                </div>\r\n+                                <div class=\"h-0.5 w-16 sm:w-24 bg-gray-200\"></div>\r\n+                                <div class=\"flex items-center gap-3\">\r\n+                                    <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm sm:text-base\">2</div>\r\n+                                    <div>\r\n+                                        <p class=\"font-semibold text-gray-400 text-sm sm:text-base\">Solar Quote</p>\r\n+                                        <p class=\"text-xs sm:text-sm text-gray-400\">Up next</p>\r\n+                                    </div>\r\n+                                </div>\r\n+                            </div>\r\n+                        </div>\r\n+                    </div>\r\n+\r\n+                    <!-- Main Content Area: Flexible Height -->\r\n+                    <div class=\"flex-1 min-h-0 mt-3 sm:mt-4 lg:mt-5\">\r\n+                        <div class=\"h-full grid grid-rows-[auto_1fr_auto] gap-3 sm:gap-4 lg:gap-5\">\r\n+                            <!-- Consumption Analysis Card -->\r\n+                            <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 opacity-0\" id=\"consumption-card\">\r\n+                                <div class=\"flex justify-between items-center mb-2 sm:mb-3\">\r\n+                                    <h3 class=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n+                                    <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs sm:text-sm font-medium\">\r\n+                                        ${this.formatChange(\r\n+                                          trendData\r\n+                                        )}% vs last month\r\n+                                    </div>\r\n+                                </div>\r\n+                                <div class=\"h-[150px] sm:h-[180px] lg:h-[200px] xl:h-[220px]\">\r\n+                                    <canvas id=\"consumption-trend-chart\"></canvas>\r\n+                                </div>\r\n+                            </div>\r\n+                            <!-- Metrics Cards -->\r\n+                            <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 lg:gap-5\">\r\n+                                <!-- Current Bill Card -->\r\n+                                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 opacity-0 consumption-metric h-auto\">\r\n+                                    <div class=\"flex items-center justify-between mb-2\">\r\n+                                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n+                                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n+                                            </svg>\r\n+                                        </div>\r\n+                                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n+                                    </div>\r\n+                                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Current Bill</p>\r\n+                                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${this.formatCurrency(\r\n+                                      this.billData.totalAmount\r\n+                                    )}</p>\r\n+                                    <div class=\"mt-3 h-1 bg-gray-100 rounded\">\r\n+                                        <div class=\"h-full bg-emerald-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n+                                    </div>\r\n+                                </div>\r\n+\r\n+                                <!-- Units Consumed Card -->\r\n+                                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 opacity-0 consumption-metric h-auto\">\r\n+                                    <div class=\"flex items-center justify-between mb-2\">\r\n+                                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n+                                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n+                                            </svg>\r\n+                                        </div>\r\n+                                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">\r\n+                                            ${this.calculateEfficiency()} efficiency\r\n+                                        </span>\r\n+                                    </div>\r\n+                                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n+                                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${\r\n+                                      this.billData.unitsConsumed\r\n+                                    } kWh</p>\r\n+                                    <p class=\"text-xs sm:text-sm text-gray-500 mt-2\">Rate: ${this.formatCurrency(\r\n+                                      this.billData.ratePerUnit\r\n+                                    )}/kWh</p>\r\n+                                </div>\r\n+                            </div>\r\n+\r\n+                            <!-- Next Steps Card -->\r\n+                            <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 relative opacity-0\" id=\"next-steps-card\">\r\n+                                <div class=\"absolute -top-2 -right-2\">\r\n+                                    <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n+                                        <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n+                                        </svg>\r\n+                                    </div>\r\n+                                </div>\r\n+                                <div class=\"max-w-lg\">\r\n+                                    <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n+                                    <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n+                                        We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n+                                    </p>\r\n+                                    <button \r\n+                                        id=\"proceed-to-quote\" \r\n+                                        class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n+                                               transition-all duration-300 shadow-sm hover:shadow-lg\r\n+                                               flex items-center justify-center gap-2 group\"\r\n+                                    >\r\n+                                        Generate My Solar Quote\r\n+                                        <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n+                                        </svg>\r\n+                                    </button>\r\n+                                </div>\r\n+                            </div>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+        </div>\r\n+    </div>\r\n+`;\r\n+\r\n+    // Add the responsive styles\r\n+    const style = document.createElement(\"style\");\r\n+    style.textContent = `\r\n+    @media (min-width: 1280px) {\r\n+        #insights-container .h-full {\r\n+            height: 100vh;\r\n+            max-height: 100vh;\r\n+        }\r\n+    }\r\n+\r\n+    @media (max-width: 1279px) {\r\n+        #insights-container .overflow-auto {\r\n+            overflow-y: auto;\r\n+            -webkit-overflow-scrolling: touch;\r\n+        }\r\n+    }\r\n+\r\n+    @media (min-height: 800px) {\r\n+        #insights-container .consumption-metric {\r\n+            min-height: 180px;\r\n+        }\r\n+    }\r\n+\r\n+    @media (max-height: 800px) {\r\n+        #insights-container .consumption-metric {\r\n+            min-height: 150px;\r\n+        }\r\n+    }\r\n+\r\n+    .animated-gradient {\r\n+        background: linear-gradient(\r\n+            45deg,\r\n+            rgba(255,255,255,0.1),\r\n+            rgba(255,255,255,0.2),\r\n+            rgba(255,255,255,0.1)\r\n+        );\r\n+        background-size: 200% 200%;\r\n+        animation: gradient 15s ease infinite;\r\n+    }\r\n+\r\n+    @keyframes gradient {\r\n+        0% { background-position: 0% 50%; }\r\n+        50% { background-position: 100% 50%; }\r\n+        100% { background-position: 0% 50%; }\r\n+    }\r\n+\r\n+    .loading-spinner {\r\n+        width: 40px;\r\n+        height: 40px;\r\n+        border: 3px solid rgba(16, 185, 129, 0.1);\r\n+        border-radius: 50%;\r\n+        border-top-color: #10b981;\r\n+        animation: spin 1s ease-in-out infinite;\r\n+    }\r\n+\r\n+    @keyframes spin {\r\n+        to { transform: rotate(360deg); }\r\n+    }\r\n+\r\n+    #insights-container .overflow-auto {\r\n+        scrollbar-width: thin;\r\n+        scrollbar-color: rgba(156, 163, 175, 0.3) transparent;\r\n+    }\r\n+    \r\n+    #insights-container .overflow-auto::-webkit-scrollbar {\r\n+        width: 4px;\r\n+    }\r\n+    \r\n+    #insights-container .overflow-auto::-webkit-scrollbar-track {\r\n+        background: transparent;\r\n+    }\r\n+    \r\n+    #insights-container .overflow-auto::-webkit-scrollbar-thumb {\r\n+        background-color: rgba(156, 163, 175, 0.3);\r\n+        border-radius: 2px;\r\n+    }\r\n+`;\r\n+    document.head.appendChild(style);\r\n+\r\n+    this.attachBaseStyles();\r\n+\r\n+    // Use requestAnimationFrame to ensure styles are applied before starting\r\n+    requestAnimationFrame(() => {\r\n+      requestAnimationFrame(() => {\r\n+        // Make container visible\r\n+        const container = document.getElementById(\"quote-result-page\");\r\n+        if (container) {\r\n+          container.classList.remove(\"opacity-0\");\r\n+        }\r\n+\r\n+        // Now render bill preview and start animation\r\n+        this.renderBillPreview();\r\n+        this.startAnimation().catch((error) => {\r\n+          console.error(\"Animation failed:\", error);\r\n+          this.showError();\r\n+        });\r\n+      });\r\n+    });\r\n+  }\r\n+\r\n+  async startAnimation() {\r\n+    if (this.error) {\r\n+      this.showError();\r\n+      return;\r\n+    }\r\n+\r\n+    const billPreviewContainer = document.getElementById(\r\n+      \"bill-preview-container\"\r\n+    );\r\n+    const insightsContainer = document.getElementById(\"insights-container\");\r\n+    const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n+    const quoteResultPage = document.getElementById(\"quote-result-page\");\r\n+\r\n+    // Initial states\r\n+    gsap.set([billPreviewContainer, loadingIndicator], {\r\n+      opacity: 0,\r\n+    });\r\n+    gsap.set(billPreviewContainer, {\r\n+      scale: 0.9,\r\n+      position: \"absolute\",\r\n+      left: \"50%\",\r\n+      top: \"50%\",\r\n+      xPercent: -50,\r\n+      yPercent: -50,\r\n+      width: \"47.5%\",\r\n+    });\r\n+    gsap.set(loadingIndicator, {\r\n+      scale: 0.5,\r\n+    });\r\n+\r\n+    const tl = gsap.timeline({\r\n+      defaults: { duration: 0.8, ease: \"power2.out\" },\r\n+    });\r\n+\r\n+    // Animation sequence\r\n+    await tl\r\n+      .to(billPreviewContainer, {\r\n+        opacity: 1,\r\n+        scale: 1,\r\n+        duration: 1,\r\n+      })\r\n+      .to(loadingIndicator, {\r\n+        opacity: 1,\r\n+        scale: 1,\r\n+        duration: 0.5,\r\n+      })\r\n+      .to(loadingIndicator, {\r\n+        opacity: 0,\r\n+        scale: 0.5,\r\n+        delay: 1,\r\n+      })\r\n+      .to(\r\n+        billPreviewContainer,\r\n+        {\r\n+          left: \"0%\",\r\n+          top: \"0%\",\r\n+          xPercent: 0,\r\n+          yPercent: 0,\r\n+          width: \"50%\",\r\n+          position: \"relative\",\r\n+        },\r\n+        \"-=0.3\"\r\n+      )\r\n+      .call(() => {\r\n+        insightsContainer.style.visibility = \"visible\";\r\n+      })\r\n+      .to(insightsContainer, {\r\n+        opacity: 1,\r\n+        duration: 0.5,\r\n+      })\r\n+      .to(\r\n+        quoteResultPage,\r\n+        {\r\n+          backgroundColor: \"var(--color-bg-secondary)\",\r\n+          duration: 1,\r\n+        },\r\n+        \"-=0.5\"\r\n+      );\r\n+\r\n+    // Render insights after animations\r\n+    this.renderInsights();\r\n+  }\r\n+\r\n+  attachBaseStyles() {\r\n+    const style = document.createElement(\"style\");\r\n+    style.textContent = this.getBaseStyles();\r\n+    document.head.appendChild(style);\r\n+  }\r\n+\r\n+  getBaseStyles() {\r\n+    return `\r\n+      /* Base Theme Colors */\r\n+      :root {\r\n+        --color-primary: #3b82f6;\r\n+        --color-primary-dark: #2563eb;\r\n+        --color-primary-light: #93c5fd;\r\n+        --color-success: #10b981;\r\n+        --color-warning: #f59e0b;\r\n+        --color-error: #ef4444;\r\n+        --color-gray-50: #f8fafc;\r\n+        --color-gray-100: #f1f5f9;\r\n+        --color-gray-200: #e2e8f0;\r\n+        --color-gray-300: #cbd5e1;\r\n+        --color-gray-400: #94a3b8;\r\n+        --color-gray-500: #64748b;\r\n+        --color-gray-600: #475569;\r\n+        --color-gray-700: #334155;\r\n+        --color-gray-800: #1e293b;\r\n+        --color-gray-900: #0f172a;\r\n+      }\r\n+\r\n+      /* Loading Spinner */\r\n+      .loading-spinner {\r\n+        width: 40px;\r\n+        height: 40px;\r\n+        border: 4px solid var(--color-gray-200);\r\n+        border-left-color: var(--color-primary);\r\n+        border-radius: 50%;\r\n+        animation: spin 1s linear infinite;\r\n+      }\r\n+\r\n+      @keyframes spin {\r\n+        to { transform: rotate(360deg); }\r\n+      }\r\n+\r\n+      /* Card Styles */\r\n+      .insight-card {\r\n+        background: white;\r\n+        border-radius: 1rem;\r\n+        box-shadow: 0 1px 3px rgba(0,0,0,0.1);\r\n+        transition: all 0.3s ease;\r\n+        border: 1px solid var(--color-gray-100);\r\n+      }\r\n+\r\n+      .insight-card:hover {\r\n+        transform: translateY(-2px);\r\n+        box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);\r\n+      }\r\n+\r\n+      /* Glass Effect */\r\n+      .glass-effect {\r\n+        background: rgba(255, 255, 255, 0.7);\r\n+        backdrop-filter: blur(10px);\r\n+        border: 1px solid rgba(255, 255, 255, 0.3);\r\n+      }\r\n+\r\n+      /* Custom Scrollbar */\r\n+      .custom-scrollbar {\r\n+        scrollbar-width: thin;\r\n+        scrollbar-color: var(--color-gray-300) transparent;\r\n+      }\r\n+\r\n+      .custom-scrollbar::-webkit-scrollbar {\r\n+        width: 6px;\r\n+      }\r\n+\r\n+      .custom-scrollbar::-webkit-scrollbar-track {\r\n+        background: transparent;\r\n+      }\r\n+\r\n+      .custom-scrollbar::-webkit-scrollbar-thumb {\r\n+        background-color: var(--color-gray-300);\r\n+        border-radius: 3px;\r\n+      }\r\n+\r\n+      /* Progress Bar */\r\n+      .progress-step {\r\n+        position: relative;\r\n+        z-index: 1;\r\n+      }\r\n+\r\n+      .progress-step::after {\r\n+        content: '';\r\n+        position: absolute;\r\n+        top: 50%;\r\n+        left: 100%;\r\n+        width: 100%;\r\n+        height: 2px;\r\n+        background: var(--color-gray-200);\r\n+        transform: translateY(-50%);\r\n+      }\r\n+\r\n+      .progress-step.active::after {\r\n+        background: var(--color-primary);\r\n+      }\r\n+\r\n+      /* Animated Gradients */\r\n+      .animated-gradient {\r\n+        background: linear-gradient(\r\n+          45deg,\r\n+          var(--color-primary),\r\n+          var(--color-primary-dark),\r\n+          var(--color-primary)\r\n+        );\r\n+        background-size: 200% 200%;\r\n+        animation: gradient 15s ease infinite;\r\n+      }\r\n+\r\n+      @keyframes gradient {\r\n+        0% { background-position: 0% 50%; }\r\n+        50% { background-position: 100% 50%; }\r\n+        100% { background-position: 0% 50%; }\r\n+      }\r\n+\r\n+      /* Responsive Design */\r\n+      @media (max-width: 1024px) {\r\n+        .insight-card {\r\n+          padding: 1rem;\r\n+        }\r\n+      }\r\n+\r\n+      @media (max-width: 768px) {\r\n+        #main-content {\r\n+          flex-direction: column;\r\n+        }\r\n+\r\n+        #bill-preview-container,\r\n+        #insights-container {\r\n+          width: 100%;\r\n+          height: 50%;\r\n+        }\r\n+      }\r\n+\r\n+      /* Chart Tooltips */\r\n+      .chart-tooltip {\r\n+        background: rgba(255, 255, 255, 0.95) !important;\r\n+        backdrop-filter: blur(4px);\r\n+        border: 1px solid var(--color-gray-200) !important;\r\n+        border-radius: 0.5rem !important;\r\n+        padding: 0.75rem !important;\r\n+        box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1) !important;\r\n+      }\r\n+    `;\r\n+  }\r\n+\r\n+  renderBillPreview() {\r\n+    if (!this.billData) {\r\n+      console.error(\"Bill data is not available\");\r\n+      this.renderError(document.getElementById(\"app\"));\r\n+      return;\r\n+    }\r\n+\r\n+    const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n+    if (!billPreviewContainer) {\r\n+      console.error(\"Bill preview container not found\");\r\n+      return;\r\n+    }\r\n+\r\n+    const billPreview = new BillPreview(this.billData);\r\n+    billPreview.render(billPreviewContainer);\r\n+  }\r\n+\r\n+  renderError(container) {\r\n+    container.innerHTML = `\r\n+        <div class=\"flex items-center justify-center h-screen\">\r\n+            <div class=\"text-center\">\r\n+                <h2 class=\"text-xl font-semibold text-gray-800 mb-2\">Error</h2>\r\n+                <p class=\"text-gray-600\">Bill data is not available. Please try again.</p>\r\n+                <button onclick=\"window.router.push('/')\" \r\n+                        class=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors\">\r\n+                    Go Back\r\n+                </button>\r\n+            </div>\r\n+        </div>\r\n+    `;\r\n+  }\r\n+\r\n+  renderInsights() {\r\n+    const insightsContainer = document.querySelector(\"#insights-container\");\r\n+    if (!insightsContainer) return;\r\n+\r\n+    // Generate trend data for the last 6 months\r\n+    const trendData = this.generateTrendData();\r\n+\r\n+    insightsContainer.innerHTML = `\r\n+        <div class=\"h-full flex flex-col p-2 sm:p-4 lg:p-6 overflow-auto\">\r\n+            <!-- Header Section -->\r\n+            <div class=\"flex-none mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"insights-header\">\r\n+                <div class=\"flex items-center gap-3 sm:gap-4\">\r\n+                    <div class=\"flex-shrink-0\">\r\n+                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-600 flex items-center justify-center\">\r\n+                            <svg class=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n+                            </svg>\r\n+                        </div>\r\n+                    </div>\r\n+                    <div>\r\n+                        <h2 class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">Bill Analysis</h2>\r\n+                        <p class=\"text-xs sm:text-sm lg:text-base text-gray-500\">Understanding your consumption</p>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+\r\n+            <!-- Progress Tracker -->\r\n+            <div class=\"bg-white/70 backdrop-blur rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"progress-tracker\">\r\n+                <div class=\"flex justify-between items-center\">\r\n+                    <div class=\"flex items-center gap-3\">\r\n+                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-emerald-600 flex items-center justify-center text-white font-semibold text-sm sm:text-base\">1</div>\r\n+                        <div>\r\n+                            <p class=\"font-semibold text-gray-900 text-sm sm:text-base\">Bill Review</p>\r\n+                            <p class=\"text-xs sm:text-sm text-gray-500\">Analyzing patterns</p>\r\n+                        </div>\r\n+                    </div>\r\n+                    <div class=\"h-0.5 w-16 sm:w-24 bg-gray-200\"></div>\r\n+                    <div class=\"flex items-center gap-3\">\r\n+                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm sm:text-base\">2</div>\r\n+                        <div>\r\n+                            <p class=\"font-semibold text-gray-400 text-sm sm:text-base\">Solar Quote</p>\r\n+                            <p class=\"text-xs sm:text-sm text-gray-400\">Up next</p>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+\r\n+            <!-- Content Grid -->\r\n+            <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 lg:gap-6 flex-1\">\r\n+                <!-- Consumption Analysis Card -->\r\n+                <div class=\"sm:col-span-2 bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0\" id=\"consumption-card\">\r\n+                    <div class=\"flex justify-between items-center mb-3 sm:mb-4\">\r\n+                        <h3 class=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n+                        <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs sm:text-sm font-medium\">\r\n+                            ${this.formatChange(trendData)}% vs last month\r\n+                        </div>\r\n+                    </div>\r\n+                    <div class=\"h-[200px] sm:h-[250px]\">\r\n+                        <canvas id=\"consumption-trend-chart\"></canvas>\r\n+                    </div>\r\n+                </div>\r\n+\r\n+                <!-- Current Bill Card -->\r\n+                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n+                    <div class=\"flex items-center justify-between mb-2\">\r\n+                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n+                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n+                            </svg>\r\n+                        </div>\r\n+                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n+                    </div>\r\n+                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Current Bill</p>\r\n+                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${this.formatCurrency(\r\n+                      this.billData.totalAmount\r\n+                    )}</p>\r\n+                    <div class=\"mt-4 h-1 bg-gray-100 rounded\">\r\n+                        <div class=\"h-full bg-emerald-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n+                    </div>\r\n+                </div>\r\n+\r\n+                <!-- Units Consumed Card -->\r\n+                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n+                    <div class=\"flex items-center justify-between mb-2\">\r\n+                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n+                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n+                            </svg>\r\n+                        </div>\r\n+                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">\r\n+                            ${this.calculateEfficiency()} efficiency\r\n+                        </span>\r\n+                    </div>\r\n+                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n+                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${\r\n+                      this.billData.unitsConsumed\r\n+                    } kWh</p>\r\n+                    <p class=\"text-xs sm:text-sm text-gray-500 mt-2\">Rate: ${this.formatCurrency(\r\n+                      this.billData.ratePerUnit\r\n+                    )}/kWh</p>\r\n+                </div>\r\n+\r\n+                <!-- Next Steps Card -->\r\n+                <div class=\"sm:col-span-2 mt-auto\">\r\n+                    <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n+                        <div class=\"absolute -top-2 -right-2\">\r\n+                            <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n+                                <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n+                                </svg>\r\n+                            </div>\r\n+                        </div>\r\n+                        <div class=\"max-w-lg\">\r\n+                            <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n+                            <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n+                                We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n+                            </p>\r\n+                            <button \r\n+                                id=\"proceed-to-quote\" \r\n+                                class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n+                                       transition-all duration-300 shadow-sm hover:shadow-lg\r\n+                                       flex items-center justify-center gap-2 group\"\r\n+                            >\r\n+                                Generate My Solar Quote\r\n+                                <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n+                                </svg>\r\n+                            </button>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+        </div>\r\n+    `;\r\n+\r\n+    // Update the chart colors in initializeCharts\r\n+    this.initializeCharts(trendData);\r\n+    this.startInsightAnimations();\r\n+    this.attachEventListeners();\r\n+  }\r\n+\r\n+  generateTrendData() {\r\n+    const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\"];\r\n+    return months.map((month) => ({\r\n+      month,\r\n+      consumption: Math.floor(\r\n+        this.billData.unitsConsumed * (0.8 + Math.random() * 0.4)\r\n+      ),\r\n+    }));\r\n+  }\r\n+\r\n+  initializeCharts(trendData) {\r\n+    const ctx = document.getElementById(\"consumption-trend-chart\");\r\n+    if (!ctx) return;\r\n+\r\n+    this.charts.consumption = new Chart(ctx, {\r\n+      type: \"line\",\r\n+      data: {\r\n+        labels: trendData.map((d) => d.month),\r\n+        datasets: [\r\n+          {\r\n+            label: \"Consumption (kWh)\",\r\n+            data: trendData.map((d) => d.consumption),\r\n+            borderColor: \"#059669\", // Changed to emerald-600\r\n+            backgroundColor: \"rgba(5, 150, 105, 0.1)\", // Changed to emerald-600 with opacity\r\n+            tension: 0.4,\r\n+            fill: true,\r\n+            pointRadius: 4,\r\n+            pointHoverRadius: 6,\r\n+            pointBackgroundColor: \"#ffffff\",\r\n+            pointBorderColor: \"#059669\",\r\n+            pointBorderWidth: 2,\r\n+          },\r\n+        ],\r\n+      },\r\n+      options: {\r\n+        responsive: true,\r\n+        maintainAspectRatio: false,\r\n+        plugins: {\r\n+          legend: {\r\n+            display: false,\r\n+          },\r\n+          tooltip: {\r\n+            backgroundColor: \"white\",\r\n+            titleColor: \"#1f2937\",\r\n+            bodyColor: \"#4b5563\",\r\n+            borderColor: \"#e5e7eb\",\r\n+            borderWidth: 1,\r\n+            padding: 12,\r\n+            titleFont: {\r\n+              size: 14,\r\n+              weight: \"bold\",\r\n+            },\r\n+            bodyFont: {\r\n+              size: 13,\r\n+            },\r\n+            displayColors: false,\r\n+            callbacks: {\r\n+              label: (context) => `${context.parsed.y.toLocaleString()} kWh`,\r\n+            },\r\n+          },\r\n+        },\r\n+        scales: {\r\n+          x: {\r\n+            grid: {\r\n+              display: false,\r\n+            },\r\n+            ticks: {\r\n+              font: {\r\n+                size: 12,\r\n+              },\r\n+            },\r\n+          },\r\n+          y: {\r\n+            beginAtZero: true,\r\n+            grid: {\r\n+              color: \"rgba(0, 0, 0, 0.05)\",\r\n+            },\r\n+            ticks: {\r\n+              font: {\r\n+                size: 12,\r\n+              },\r\n+              callback: (value) => `${value} kWh`,\r\n+            },\r\n+          },\r\n+        },\r\n+      },\r\n+    });\r\n+  }\r\n+\r\n+  startInsightAnimations() {\r\n+    gsap.to(\"#insights-header\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      ease: \"power2.out\",\r\n+    });\r\n+\r\n+    gsap.to(\"#progress-tracker\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      delay: 0.2,\r\n+      ease: \"power2.out\",\r\n+    });\r\n+\r\n+    gsap.to(\"#consumption-card\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      delay: 0.4,\r\n+      ease: \"power2.out\",\r\n+    });\r\n+\r\n+    gsap.to(\".consumption-metric\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      stagger: 0.2,\r\n+      delay: 0.6,\r\n+      ease: \"power2.out\",\r\n+    });\r\n+\r\n+    gsap.to(\"#next-steps-card\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      delay: 1,\r\n+      ease: \"power2.out\",\r\n+    });\r\n+  }\r\n+\r\n+  // Utility methods\r\n+  formatCurrency(value) {\r\n+    return new Intl.NumberFormat(\"en-PK\", {\r\n+      style: \"currency\",\r\n+      currency: \"PKR\",\r\n+      minimumFractionDigits: 0,\r\n+      maximumFractionDigits: 0,\r\n+    }).format(value);\r\n+  }\r\n+\r\n+  calculateDueDays() {\r\n+    const dueDate = new Date(this.billData.dueDate);\r\n+    const today = new Date();\r\n+    const diffTime = Math.abs(dueDate - today);\r\n+    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n+  }\r\n+\r\n+  calculateBillProgress() {\r\n+    const daysInMonth = 30;\r\n+    const today = new Date();\r\n+    const billDate = new Date(this.billData.issueDate);\r\n+    const daysPassed = Math.ceil((today - billDate) / (1000 * 60 * 60 * 24));\r\n+    return Math.min((daysPassed / daysInMonth) * 100, 100);\r\n+  }\r\n+\r\n+  calculateEfficiency() {\r\n+    const avgConsumption = 500; // Example average consumption\r\n+    const efficiency = (this.billData.unitsConsumed / avgConsumption) * 100;\r\n+    return efficiency <= 100 ? \"High\" : \"Low\";\r\n+  }\r\n+\r\n+  formatChange(data) {\r\n+    const lastTwo = data.slice(-2);\r\n+    const change =\r\n+      ((lastTwo[1].consumption - lastTwo[0].consumption) /\r\n+        lastTwo[0].consumption) *\r\n+      100;\r\n+    return change.toFixed(1);\r\n+  }\r\n+\r\n+  attachEventListeners() {\r\n+    const quoteButton = document.getElementById(\"proceed-to-quote\");\r\n+    if (quoteButton) {\r\n+      quoteButton.addEventListener(\"click\", () => {\r\n+        window.router.push(\"/quote\");\r\n+      });\r\n+    }\r\n+  }\r\n+}\r\n"
                },
                {
                    "date": 1731680393775,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -717,880 +717,98 @@\n   initializeCharts(trendData) {\r\n     const ctx = document.getElementById(\"consumption-trend-chart\");\r\n     if (!ctx) return;\r\n \r\n+    const isMobile = window.innerWidth < 640;\r\n+    const isTablet = window.innerWidth < 1024;\r\n+\r\n     this.charts.consumption = new Chart(ctx, {\r\n-      type: \"line\",\r\n-      data: {\r\n-        labels: trendData.map((d) => d.month),\r\n-        datasets: [\r\n-          {\r\n-            label: \"Consumption (kWh)\",\r\n-            data: trendData.map((d) => d.consumption),\r\n-            borderColor: \"#059669\", // Changed to emerald-600\r\n-            backgroundColor: \"rgba(5, 150, 105, 0.1)\", // Changed to emerald-600 with opacity\r\n-            tension: 0.4,\r\n-            fill: true,\r\n-            pointRadius: 4,\r\n-            pointHoverRadius: 6,\r\n-            pointBackgroundColor: \"#ffffff\",\r\n-            pointBorderColor: \"#059669\",\r\n-            pointBorderWidth: 2,\r\n-          },\r\n-        ],\r\n-      },\r\n-      options: {\r\n-        responsive: true,\r\n-        maintainAspectRatio: false,\r\n-        plugins: {\r\n-          legend: {\r\n-            display: false,\r\n-          },\r\n-          tooltip: {\r\n-            backgroundColor: \"white\",\r\n-            titleColor: \"#1f2937\",\r\n-            bodyColor: \"#4b5563\",\r\n-            borderColor: \"#e5e7eb\",\r\n-            borderWidth: 1,\r\n-            padding: 12,\r\n-            titleFont: {\r\n-              size: 14,\r\n-              weight: \"bold\",\r\n-            },\r\n-            bodyFont: {\r\n-              size: 13,\r\n-            },\r\n-            displayColors: false,\r\n-            callbacks: {\r\n-              label: (context) => `${context.parsed.y.toLocaleString()} kWh`,\r\n-            },\r\n-          },\r\n+        type: \"line\",\r\n+        data: {\r\n+            labels: trendData.map(d => d.month),\r\n+            datasets: [{\r\n+                label: \"Consumption (kWh)\",\r\n+                data: trendData.map(d => d.consumption),\r\n+                borderColor: \"#059669\",\r\n+                backgroundColor: \"rgba(5, 150, 105, 0.1)\",\r\n+                tension: 0.4,\r\n+                fill: true,\r\n+                pointRadius: isMobile ? 2 : (isTablet ? 3 : 4),\r\n+                pointHoverRadius: isMobile ? 4 : (isTablet ? 5 : 6),\r\n+                pointBackgroundColor: \"#ffffff\",\r\n+                pointBorderColor: \"#059669\",\r\n+                pointBorderWidth: isMobile ? 1 : 2,\r\n+            }]\r\n         },\r\n-        scales: {\r\n-          x: {\r\n-            grid: {\r\n-              display: false,\r\n+        options: {\r\n+            responsive: true,\r\n+            maintainAspectRatio: false,\r\n+            interaction: {\r\n+                mode: 'nearest',\r\n+                intersect: false,\r\n+                axis: 'x'\r\n             },\r\n-            ticks: {\r\n-              font: {\r\n-                size: 12,\r\n-              },\r\n+            plugins: {\r\n+                legend: {\r\n+                    display: false\r\n+                },\r\n+                tooltip: {\r\n+                    enabled: true,\r\n+                    backgroundColor: 'white',\r\n+                    titleColor: '#1f2937',\r\n+                    bodyColor: '#4b5563',\r\n+                    borderColor: '#e5e7eb',\r\n+                    borderWidth: 1,\r\n+                    padding: isMobile ? 8 : 12,\r\n+                    titleFont: {\r\n+                        size: isMobile ? 12 : 14,\r\n+                        weight: 'bold'\r\n+                    },\r\n+                    bodyFont: {\r\n+                        size: isMobile ? 11 : 13\r\n+                    },\r\n+                    displayColors: false\r\n+                }\r\n             },\r\n-          },\r\n-          y: {\r\n-            beginAtZero: true,\r\n-            grid: {\r\n-              color: \"rgba(0, 0, 0, 0.05)\",\r\n-            },\r\n-            ticks: {\r\n-              font: {\r\n-                size: 12,\r\n-              },\r\n-              callback: (value) => `${value} kWh`,\r\n-            },\r\n-          },\r\n-        },\r\n-      },\r\n+            scales: {\r\n+                x: {\r\n+                    grid: {\r\n+                        display: false\r\n+                    },\r\n+                    ticks: {\r\n+                        font: {\r\n+                            size: isMobile ? 10 : (isTablet ? 11 : 12)\r\n+                        }\r\n+                    }\r\n+                },\r\n+                y: {\r\n+                    beginAtZero: true,\r\n+                    grid: {\r\n+                        color: 'rgba(0, 0, 0, 0.05)'\r\n+                    },\r\n+                    ticks: {\r\n+                        font: {\r\n+                            size: isMobile ? 10 : (isTablet ? 11 : 12)\r\n+                        }\r\n+                    }\r\n+                }\r\n+            }\r\n+        }\r\n     });\r\n-  }\r\n \r\n-  startInsightAnimations() {\r\n-    gsap.to(\"#insights-header\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-\r\n-    gsap.to(\"#progress-tracker\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      delay: 0.2,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-\r\n-    gsap.to(\"#consumption-card\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      delay: 0.4,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-\r\n-    gsap.to(\".consumption-metric\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      stagger: 0.2,\r\n-      delay: 0.6,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-\r\n-    gsap.to(\"#next-steps-card\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      delay: 1,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-  }\r\n-\r\n-  // Utility methods\r\n-  formatCurrency(value) {\r\n-    return new Intl.NumberFormat(\"en-PK\", {\r\n-      style: \"currency\",\r\n-      currency: \"PKR\",\r\n-      minimumFractionDigits: 0,\r\n-      maximumFractionDigits: 0,\r\n-    }).format(value);\r\n-  }\r\n-\r\n-  calculateDueDays() {\r\n-    const dueDate = new Date(this.billData.dueDate);\r\n-    const today = new Date();\r\n-    const diffTime = Math.abs(dueDate - today);\r\n-    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n-  }\r\n-\r\n-  calculateBillProgress() {\r\n-    const daysInMonth = 30;\r\n-    const today = new Date();\r\n-    const billDate = new Date(this.billData.issueDate);\r\n-    const daysPassed = Math.ceil((today - billDate) / (1000 * 60 * 60 * 24));\r\n-    return Math.min((daysPassed / daysInMonth) * 100, 100);\r\n-  }\r\n-\r\n-  calculateEfficiency() {\r\n-    const avgConsumption = 500; // Example average consumption\r\n-    const efficiency = (this.billData.unitsConsumed / avgConsumption) * 100;\r\n-    return efficiency <= 100 ? \"High\" : \"Low\";\r\n-  }\r\n-\r\n-  formatChange(data) {\r\n-    const lastTwo = data.slice(-2);\r\n-    const change =\r\n-      ((lastTwo[1].consumption - lastTwo[0].consumption) /\r\n-        lastTwo[0].consumption) *\r\n-      100;\r\n-    return change.toFixed(1);\r\n-  }\r\n-\r\n-  attachEventListeners() {\r\n-    const quoteButton = document.getElementById(\"proceed-to-quote\");\r\n-    if (quoteButton) {\r\n-      quoteButton.addEventListener(\"click\", () => {\r\n-        window.router.push(\"/quote\");\r\n-      });\r\n-    }\r\n-  }\r\n+    // Add resize handler\r\n+    window.addEventListener('resize', this.handleResize.bind(this));\r\n }\r\n-// BillReviewPage.js\r\n-import { gsap } from \"gsap\";\r\n-import { getBillData } from \"../store/solarSizingState.js\";\r\n-import { BillPreview } from \"./BillPreview.js\";\r\n-import Chart from \"chart.js/auto\";\r\n \r\n-export class BillReviewPage {\r\n-  constructor() {\r\n-    this.billData = getBillData();\r\n-    this.charts = {};\r\n-  }\r\n-\r\n-  addScrollStyles() {\r\n-    const style = document.createElement(\"style\");\r\n-    style.textContent = `\r\n-        .custom-scrollbar {\r\n-            scrollbar-width: thin;\r\n-            scrollbar-color: rgba(0, 0, 0, 0.2) transparent;\r\n+handleResize() {\r\n+    clearTimeout(this.resizeTimeout);\r\n+    this.resizeTimeout = setTimeout(() => {\r\n+        if (this.charts.consumption) {\r\n+            this.charts.consumption.resize();\r\n         }\r\n+    }, 250);\r\n+}\r\n \r\n-        .custom-scrollbar::-webkit-scrollbar {\r\n-            width: 6px;\r\n-        }\r\n-\r\n-        .custom-scrollbar::-webkit-scrollbar-track {\r\n-            background: transparent;\r\n-        }\r\n-\r\n-        .custom-scrollbar::-webkit-scrollbar-thumb {\r\n-            background-color: rgba(0, 0, 0, 0.2);\r\n-            border-radius: 3px;\r\n-        }\r\n-\r\n-        .custom-scrollbar::-webkit-scrollbar-thumb:hover {\r\n-            background-color: rgba(0, 0, 0, 0.3);\r\n-        }\r\n-    `;\r\n-    document.head.appendChild(style);\r\n-  }\r\n-\r\n-  // Update the main container structure in render method\r\n-  render() {\r\n-    const app = document.getElementById(\"app\");\r\n-\r\n-    app.innerHTML = `\r\n-    <div class=\"h-screen w-full overflow-hidden bg-white transition-colors duration-1000\" id=\"quote-result-page\">\r\n-        <div class=\"h-full w-full flex relative\" id=\"main-content\">\r\n-            <!-- Bill Preview Side -->\r\n-            <div class=\"w-1/2 h-full overflow-hidden\" id=\"bill-preview-container\">\r\n-                <div id=\"bill-preview\" class=\"h-full\"></div>\r\n-            </div>\r\n-\r\n-            <!-- Loading Indicator -->\r\n-            <div class=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center z-10\" \r\n-                 id=\"loading-indicator\">\r\n-                <div class=\"loading-spinner\"></div>\r\n-                <p class=\"text-primary font-medium\">Analyzing your bill...</p>\r\n-            </div>\r\n-\r\n-            <!-- Insights Side -->\r\n-            <div class=\"w-1/2 h-full invisible overflow-hidden\" id=\"insights-container\">\r\n-                <div class=\"h-full w-full flex flex-col p-2 sm:p-4 lg:p-6 overflow-auto\">\r\n-                    <!-- Header Section -->\r\n-                    <div class=\"flex items-center space-x-4 mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"insights-header\">\r\n-                        <div class=\"flex-shrink-0\">\r\n-                            <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center\">\r\n-                                <svg class=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n-                                </svg>\r\n-                            </div>\r\n-                        </div>\r\n-                        <div>\r\n-                            <h2 class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">Bill Analysis</h2>\r\n-                            <p class=\"text-xs sm:text-sm lg:text-base text-gray-500\">Understanding your energy consumption</p>\r\n-                        </div>\r\n-                    </div>\r\n-\r\n-                    <!-- Progress Tracker -->\r\n-                    <div class=\"bg-white/70 backdrop-blur rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"progress-tracker\">\r\n-                        <div class=\"flex justify-between\">\r\n-                            <div class=\"flex items-center\">\r\n-                                <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-semibold text-sm sm:text-base\">1</div>\r\n-                                <div class=\"ml-3\">\r\n-                                    <p class=\"font-semibold text-gray-900 text-sm sm:text-base\">Bill Review</p>\r\n-                                    <p class=\"text-xs sm:text-sm text-gray-500\">Analyzing consumption patterns</p>\r\n-                                </div>\r\n-                            </div>\r\n-                            <div class=\"w-24 sm:w-32 h-0.5 self-center bg-gray-200\"></div>\r\n-                            <div class=\"flex items-center\">\r\n-                                <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm sm:text-base\">2</div>\r\n-                                <div class=\"ml-3\">\r\n-                                    <p class=\"font-semibold text-gray-400 text-sm sm:text-base\">Solar Quote</p>\r\n-                                    <p class=\"text-xs sm:text-sm text-gray-400\">Up next</p>\r\n-                                </div>\r\n-                            </div>\r\n-                        </div>\r\n-                    </div>\r\n-\r\n-                    <!-- Consumption Analysis Card -->\r\n-                    <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"consumption-card\">\r\n-                        <div class=\"flex justify-between items-center mb-3 sm:mb-4\">\r\n-                            <h3 class=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n-                            <div class=\"px-2 py-1 bg-blue-50 text-blue-600 rounded-full text-xs sm:text-sm font-medium\">\r\n-                                ${this.formatChange(\r\n-                                  this.generateTrendData()\r\n-                                )}% vs last month\r\n-                            </div>\r\n-                        </div>\r\n-                        <div class=\"h-[200px] sm:h-[250px]\">\r\n-                            <canvas id=\"consumption-trend-chart\"></canvas>\r\n-                        </div>\r\n-                    </div>\r\n-\r\n-                    <!-- Key Metrics Grid -->\r\n-                    <div class=\"grid grid-cols-2 gap-3 sm:gap-4 lg:gap-6 mb-3 sm:mb-4 lg:mb-6\">\r\n-                        <!-- Current Bill Card -->\r\n-                        <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n-                            <div class=\"flex items-center justify-between mb-2\">\r\n-                                <div class=\"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center\">\r\n-                                    <svg class=\"w-4 h-4 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n-                                    </svg>\r\n-                                </div>\r\n-                                <span class=\"px-2 py-1 bg-green-50 text-green-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n-                            </div>\r\n-                            <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Current Bill</p>\r\n-                            <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${this.formatCurrency(\r\n-                              this.billData.amount\r\n-                            )}</p>\r\n-                            <div class=\"mt-4 h-1 bg-gray-100 rounded\">\r\n-                                <div class=\"h-full bg-green-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n-                            </div>\r\n-                        </div>\r\n-\r\n-                        <!-- Units Consumed Card -->\r\n-                        <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n-                            <div class=\"flex items-center justify-between mb-2\">\r\n-                                <div class=\"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center\">\r\n-                                    <svg class=\"w-4 h-4 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n-                                    </svg>\r\n-                                </div>\r\n-                                <span class=\"px-2 py-1 bg-blue-50 text-blue-600 text-xs sm:text-sm rounded-full\">\r\n-                                    ${this.calculateEfficiency()} efficiency\r\n-                                </span>\r\n-                            </div>\r\n-                            <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n-                            <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${\r\n-                              this.billData.unitsConsumed\r\n-                            } kWh</p>\r\n-                        </div>\r\n-                    </div>\r\n-\r\n-                    <!-- Next Steps Card -->\r\n-                    <div class=\"mt-auto\">\r\n-                        <div class=\"bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n-                            <div class=\"absolute -top-2 -right-2\">\r\n-                                <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n-                                    <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n-                                    </svg>\r\n-                                </div>\r\n-                            </div>\r\n-                            <div class=\"max-w-lg\">\r\n-                                <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n-                                <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n-                                    We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n-                                </p>\r\n-                                <button \r\n-                                    id=\"proceed-to-quote\" \r\n-                                    class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n-                                           transition-all duration-300 shadow-sm hover:shadow-lg\r\n-                                           flex items-center justify-center gap-2 group\"\r\n-                                >\r\n-                                    Generate My Solar Quote\r\n-                                    <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n-                                    </svg>\r\n-                                </button>\r\n-                            </div>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-        </div>\r\n-    </div>\r\n-`;\r\n-\r\n-    this.attachBaseStyles();\r\n-\r\n-    // Use requestAnimationFrame to ensure styles are applied before starting\r\n-    requestAnimationFrame(() => {\r\n-      requestAnimationFrame(() => {\r\n-        // Make container visible\r\n-        const container = document.getElementById(\"quote-result-page\");\r\n-        if (container) {\r\n-          container.classList.remove(\"opacity-0\");\r\n-        }\r\n-\r\n-        // Now render bill preview and start animation\r\n-        this.renderBillPreview();\r\n-        this.startAnimation().catch((error) => {\r\n-          console.error(\"Animation failed:\", error);\r\n-          this.showError();\r\n-        });\r\n-      });\r\n-    });\r\n-  }\r\n-\r\n-  async startAnimation() {\r\n-    if (this.error) {\r\n-      this.showError();\r\n-      return;\r\n-    }\r\n-\r\n-    const billPreviewContainer = document.getElementById(\r\n-      \"bill-preview-container\"\r\n-    );\r\n-    const insightsContainer = document.getElementById(\"insights-container\");\r\n-    const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n-    const quoteResultPage = document.getElementById(\"quote-result-page\");\r\n-\r\n-    // Initial states\r\n-    gsap.set([billPreviewContainer, loadingIndicator], {\r\n-      opacity: 0,\r\n-    });\r\n-    gsap.set(billPreviewContainer, {\r\n-      scale: 0.9,\r\n-      position: \"absolute\",\r\n-      left: \"50%\",\r\n-      top: \"50%\",\r\n-      xPercent: -50,\r\n-      yPercent: -50,\r\n-      width: \"47.5%\",\r\n-    });\r\n-    gsap.set(loadingIndicator, {\r\n-      scale: 0.5,\r\n-    });\r\n-\r\n-    const tl = gsap.timeline({\r\n-      defaults: { duration: 0.8, ease: \"power2.out\" },\r\n-    });\r\n-\r\n-    // Animation sequence\r\n-    await tl\r\n-      .to(billPreviewContainer, {\r\n-        opacity: 1,\r\n-        scale: 1,\r\n-        duration: 1,\r\n-      })\r\n-      .to(loadingIndicator, {\r\n-        opacity: 1,\r\n-        scale: 1,\r\n-        duration: 0.5,\r\n-      })\r\n-      .to(loadingIndicator, {\r\n-        opacity: 0,\r\n-        scale: 0.5,\r\n-        delay: 1,\r\n-      })\r\n-      .to(\r\n-        billPreviewContainer,\r\n-        {\r\n-          left: \"0%\",\r\n-          top: \"0%\",\r\n-          xPercent: 0,\r\n-          yPercent: 0,\r\n-          width: \"50%\",\r\n-          position: \"relative\",\r\n-        },\r\n-        \"-=0.3\"\r\n-      )\r\n-      .call(() => {\r\n-        insightsContainer.style.visibility = \"visible\";\r\n-      })\r\n-      .to(insightsContainer, {\r\n-        opacity: 1,\r\n-        duration: 0.5,\r\n-      })\r\n-      .to(\r\n-        quoteResultPage,\r\n-        {\r\n-          backgroundColor: \"var(--color-bg-secondary)\",\r\n-          duration: 1,\r\n-        },\r\n-        \"-=0.5\"\r\n-      );\r\n-\r\n-    // Render insights after animations\r\n-    this.renderInsights();\r\n-  }\r\n-\r\n-  attachBaseStyles() {\r\n-    const style = document.createElement(\"style\");\r\n-    style.textContent = this.getBaseStyles();\r\n-    document.head.appendChild(style);\r\n-  }\r\n-\r\n-  getBaseStyles() {\r\n-    return `\r\n-      /* Base Theme Colors */\r\n-      :root {\r\n-        --color-primary: #3b82f6;\r\n-        --color-primary-dark: #2563eb;\r\n-        --color-primary-light: #93c5fd;\r\n-        --color-success: #10b981;\r\n-        --color-warning: #f59e0b;\r\n-        --color-error: #ef4444;\r\n-        --color-gray-50: #f8fafc;\r\n-        --color-gray-100: #f1f5f9;\r\n-        --color-gray-200: #e2e8f0;\r\n-        --color-gray-300: #cbd5e1;\r\n-        --color-gray-400: #94a3b8;\r\n-        --color-gray-500: #64748b;\r\n-        --color-gray-600: #475569;\r\n-        --color-gray-700: #334155;\r\n-        --color-gray-800: #1e293b;\r\n-        --color-gray-900: #0f172a;\r\n-      }\r\n-\r\n-      /* Loading Spinner */\r\n-      .loading-spinner {\r\n-        width: 40px;\r\n-        height: 40px;\r\n-        border: 4px solid var(--color-gray-200);\r\n-        border-left-color: var(--color-primary);\r\n-        border-radius: 50%;\r\n-        animation: spin 1s linear infinite;\r\n-      }\r\n-\r\n-      @keyframes spin {\r\n-        to { transform: rotate(360deg); }\r\n-      }\r\n-\r\n-      /* Card Styles */\r\n-      .insight-card {\r\n-        background: white;\r\n-        border-radius: 1rem;\r\n-        box-shadow: 0 1px 3px rgba(0,0,0,0.1);\r\n-        transition: all 0.3s ease;\r\n-        border: 1px solid var(--color-gray-100);\r\n-      }\r\n-\r\n-      .insight-card:hover {\r\n-        transform: translateY(-2px);\r\n-        box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);\r\n-      }\r\n-\r\n-      /* Glass Effect */\r\n-      .glass-effect {\r\n-        background: rgba(255, 255, 255, 0.7);\r\n-        backdrop-filter: blur(10px);\r\n-        border: 1px solid rgba(255, 255, 255, 0.3);\r\n-      }\r\n-\r\n-      /* Custom Scrollbar */\r\n-      .custom-scrollbar {\r\n-        scrollbar-width: thin;\r\n-        scrollbar-color: var(--color-gray-300) transparent;\r\n-      }\r\n-\r\n-      .custom-scrollbar::-webkit-scrollbar {\r\n-        width: 6px;\r\n-      }\r\n-\r\n-      .custom-scrollbar::-webkit-scrollbar-track {\r\n-        background: transparent;\r\n-      }\r\n-\r\n-      .custom-scrollbar::-webkit-scrollbar-thumb {\r\n-        background-color: var(--color-gray-300);\r\n-        border-radius: 3px;\r\n-      }\r\n-\r\n-      /* Progress Bar */\r\n-      .progress-step {\r\n-        position: relative;\r\n-        z-index: 1;\r\n-      }\r\n-\r\n-      .progress-step::after {\r\n-        content: '';\r\n-        position: absolute;\r\n-        top: 50%;\r\n-        left: 100%;\r\n-        width: 100%;\r\n-        height: 2px;\r\n-        background: var(--color-gray-200);\r\n-        transform: translateY(-50%);\r\n-      }\r\n-\r\n-      .progress-step.active::after {\r\n-        background: var(--color-primary);\r\n-      }\r\n-\r\n-      /* Animated Gradients */\r\n-      .animated-gradient {\r\n-        background: linear-gradient(\r\n-          45deg,\r\n-          var(--color-primary),\r\n-          var(--color-primary-dark),\r\n-          var(--color-primary)\r\n-        );\r\n-        background-size: 200% 200%;\r\n-        animation: gradient 15s ease infinite;\r\n-      }\r\n-\r\n-      @keyframes gradient {\r\n-        0% { background-position: 0% 50%; }\r\n-        50% { background-position: 100% 50%; }\r\n-        100% { background-position: 0% 50%; }\r\n-      }\r\n-\r\n-      /* Responsive Design */\r\n-      @media (max-width: 1024px) {\r\n-        .insight-card {\r\n-          padding: 1rem;\r\n-        }\r\n-      }\r\n-\r\n-      @media (max-width: 768px) {\r\n-        #main-content {\r\n-          flex-direction: column;\r\n-        }\r\n-\r\n-        #bill-preview-container,\r\n-        #insights-container {\r\n-          width: 100%;\r\n-          height: 50%;\r\n-        }\r\n-      }\r\n-\r\n-      /* Chart Tooltips */\r\n-      .chart-tooltip {\r\n-        background: rgba(255, 255, 255, 0.95) !important;\r\n-        backdrop-filter: blur(4px);\r\n-        border: 1px solid var(--color-gray-200) !important;\r\n-        border-radius: 0.5rem !important;\r\n-        padding: 0.75rem !important;\r\n-        box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1) !important;\r\n-      }\r\n-    `;\r\n-  }\r\n-\r\n-  renderBillPreview() {\r\n-    if (!this.billData) {\r\n-      console.error(\"Bill data is not available\");\r\n-      this.renderError(document.getElementById(\"app\"));\r\n-      return;\r\n-    }\r\n-\r\n-    const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n-    if (!billPreviewContainer) {\r\n-      console.error(\"Bill preview container not found\");\r\n-      return;\r\n-    }\r\n-\r\n-    const billPreview = new BillPreview(this.billData);\r\n-    billPreview.render(billPreviewContainer);\r\n-  }\r\n-\r\n-  renderError(container) {\r\n-    container.innerHTML = `\r\n-        <div class=\"flex items-center justify-center h-screen\">\r\n-            <div class=\"text-center\">\r\n-                <h2 class=\"text-xl font-semibold text-gray-800 mb-2\">Error</h2>\r\n-                <p class=\"text-gray-600\">Bill data is not available. Please try again.</p>\r\n-                <button onclick=\"window.router.push('/')\" \r\n-                        class=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors\">\r\n-                    Go Back\r\n-                </button>\r\n-            </div>\r\n-        </div>\r\n-    `;\r\n-  }\r\n-\r\n-  renderInsights() {\r\n-    const insightsContainer = document.querySelector(\"#insights-container\");\r\n-    if (!insightsContainer) return;\r\n-\r\n-    // Generate trend data for the last 6 months\r\n-    const trendData = this.generateTrendData();\r\n-\r\n-    insightsContainer.innerHTML = `\r\n-        <div class=\"h-full flex flex-col p-2 sm:p-4 lg:p-6 overflow-auto\">\r\n-            <!-- Header Section -->\r\n-            <div class=\"flex-none mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"insights-header\">\r\n-                <div class=\"flex items-center gap-3 sm:gap-4\">\r\n-                    <div class=\"flex-shrink-0\">\r\n-                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-600 flex items-center justify-center\">\r\n-                            <svg class=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n-                            </svg>\r\n-                        </div>\r\n-                    </div>\r\n-                    <div>\r\n-                        <h2 class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">Bill Analysis</h2>\r\n-                        <p class=\"text-xs sm:text-sm lg:text-base text-gray-500\">Understanding your consumption</p>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-\r\n-            <!-- Progress Tracker -->\r\n-            <div class=\"bg-white/70 backdrop-blur rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"progress-tracker\">\r\n-                <div class=\"flex justify-between items-center\">\r\n-                    <div class=\"flex items-center gap-3\">\r\n-                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-emerald-600 flex items-center justify-center text-white font-semibold text-sm sm:text-base\">1</div>\r\n-                        <div>\r\n-                            <p class=\"font-semibold text-gray-900 text-sm sm:text-base\">Bill Review</p>\r\n-                            <p class=\"text-xs sm:text-sm text-gray-500\">Analyzing patterns</p>\r\n-                        </div>\r\n-                    </div>\r\n-                    <div class=\"h-0.5 w-16 sm:w-24 bg-gray-200\"></div>\r\n-                    <div class=\"flex items-center gap-3\">\r\n-                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm sm:text-base\">2</div>\r\n-                        <div>\r\n-                            <p class=\"font-semibold text-gray-400 text-sm sm:text-base\">Solar Quote</p>\r\n-                            <p class=\"text-xs sm:text-sm text-gray-400\">Up next</p>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-\r\n-            <!-- Content Grid -->\r\n-            <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 lg:gap-6 flex-1\">\r\n-                <!-- Consumption Analysis Card -->\r\n-                <div class=\"sm:col-span-2 bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0\" id=\"consumption-card\">\r\n-                    <div class=\"flex justify-between items-center mb-3 sm:mb-4\">\r\n-                        <h3 class=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n-                        <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs sm:text-sm font-medium\">\r\n-                            ${this.formatChange(trendData)}% vs last month\r\n-                        </div>\r\n-                    </div>\r\n-                    <div class=\"h-[200px] sm:h-[250px]\">\r\n-                        <canvas id=\"consumption-trend-chart\"></canvas>\r\n-                    </div>\r\n-                </div>\r\n-\r\n-                <!-- Current Bill Card -->\r\n-                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n-                    <div class=\"flex items-center justify-between mb-2\">\r\n-                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n-                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n-                            </svg>\r\n-                        </div>\r\n-                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n-                    </div>\r\n-                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Current Bill</p>\r\n-                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${this.formatCurrency(\r\n-                      this.billData.totalAmount\r\n-                    )}</p>\r\n-                    <div class=\"mt-4 h-1 bg-gray-100 rounded\">\r\n-                        <div class=\"h-full bg-emerald-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n-                    </div>\r\n-                </div>\r\n-\r\n-                <!-- Units Consumed Card -->\r\n-                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n-                    <div class=\"flex items-center justify-between mb-2\">\r\n-                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n-                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n-                            </svg>\r\n-                        </div>\r\n-                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">\r\n-                            ${this.calculateEfficiency()} efficiency\r\n-                        </span>\r\n-                    </div>\r\n-                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n-                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${\r\n-                      this.billData.unitsConsumed\r\n-                    } kWh</p>\r\n-                    <p class=\"text-xs sm:text-sm text-gray-500 mt-2\">Rate: ${this.formatCurrency(\r\n-                      this.billData.ratePerUnit\r\n-                    )}/kWh</p>\r\n-                </div>\r\n-\r\n-                <!-- Next Steps Card -->\r\n-                <div class=\"sm:col-span-2 mt-auto\">\r\n-                    <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n-                        <div class=\"absolute -top-2 -right-2\">\r\n-                            <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n-                                <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n-                                </svg>\r\n-                            </div>\r\n-                        </div>\r\n-                        <div class=\"max-w-lg\">\r\n-                            <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n-                            <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n-                                We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n-                            </p>\r\n-                            <button \r\n-                                id=\"proceed-to-quote\" \r\n-                                class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n-                                       transition-all duration-300 shadow-sm hover:shadow-lg\r\n-                                       flex items-center justify-center gap-2 group\"\r\n-                            >\r\n-                                Generate My Solar Quote\r\n-                                <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n-                                </svg>\r\n-                            </button>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-        </div>\r\n-    `;\r\n-\r\n-    // Update the chart colors in initializeCharts\r\n-    this.initializeCharts(trendData);\r\n-    this.startInsightAnimations();\r\n-    this.attachEventListeners();\r\n-  }\r\n-\r\n-  generateTrendData() {\r\n-    const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\"];\r\n-    return months.map((month) => ({\r\n-      month,\r\n-      consumption: Math.floor(\r\n-        this.billData.unitsConsumed * (0.8 + Math.random() * 0.4)\r\n-      ),\r\n-    }));\r\n-  }\r\n-\r\n-  initializeCharts(trendData) {\r\n-    const ctx = document.getElementById(\"consumption-trend-chart\");\r\n-    if (!ctx) return;\r\n-\r\n-    this.charts.consumption = new Chart(ctx, {\r\n-      type: \"line\",\r\n-      data: {\r\n-        labels: trendData.map((d) => d.month),\r\n-        datasets: [\r\n-          {\r\n-            label: \"Consumption (kWh)\",\r\n-            data: trendData.map((d) => d.consumption),\r\n-            borderColor: \"#059669\", // Changed to emerald-600\r\n-            backgroundColor: \"rgba(5, 150, 105, 0.1)\", // Changed to emerald-600 with opacity\r\n-            tension: 0.4,\r\n-            fill: true,\r\n-            pointRadius: 4,\r\n-            pointHoverRadius: 6,\r\n-            pointBackgroundColor: \"#ffffff\",\r\n-            pointBorderColor: \"#059669\",\r\n-            pointBorderWidth: 2,\r\n-          },\r\n-        ],\r\n-      },\r\n-      options: {\r\n-        responsive: true,\r\n-        maintainAspectRatio: false,\r\n-        plugins: {\r\n-          legend: {\r\n-            display: false,\r\n-          },\r\n-          tooltip: {\r\n-            backgroundColor: \"white\",\r\n-            titleColor: \"#1f2937\",\r\n-            bodyColor: \"#4b5563\",\r\n-            borderColor: \"#e5e7eb\",\r\n-            borderWidth: 1,\r\n-            padding: 12,\r\n-            titleFont: {\r\n-              size: 14,\r\n-              weight: \"bold\",\r\n-            },\r\n-            bodyFont: {\r\n-              size: 13,\r\n-            },\r\n-            displayColors: false,\r\n-            callbacks: {\r\n-              label: (context) => `${context.parsed.y.toLocaleString()} kWh`,\r\n-            },\r\n-          },\r\n-        },\r\n-        scales: {\r\n-          x: {\r\n-            grid: {\r\n-              display: false,\r\n-            },\r\n-            ticks: {\r\n-              font: {\r\n-                size: 12,\r\n-              },\r\n-            },\r\n-          },\r\n-          y: {\r\n-            beginAtZero: true,\r\n-            grid: {\r\n-              color: \"rgba(0, 0, 0, 0.05)\",\r\n-            },\r\n-            ticks: {\r\n-              font: {\r\n-                size: 12,\r\n-              },\r\n-              callback: (value) => `${value} kWh`,\r\n-            },\r\n-          },\r\n-        },\r\n-      },\r\n-    });\r\n-  }\r\n-\r\n   startInsightAnimations() {\r\n     gsap.to(\"#insights-header\", {\r\n       opacity: 1,\r\n       y: 0,\r\n"
                },
                {
                    "date": 1731680512450,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n import { gsap } from \"gsap\";\r\n import { getBillData } from \"../store/solarSizingState.js\";\r\n import { BillPreview } from \"./BillPreview.js\";\r\n import Chart from \"chart.js/auto\";\r\n+import { CountUp } from 'countup.js';\r\n \r\n export class BillReviewPage {\r\n   constructor() {\r\n     this.billData = getBillData();\r\n@@ -530,8 +531,40 @@\n       }\r\n     `;\r\n   }\r\n \r\n+  initCountUps() {\r\n+    const countUpOptions = {\r\n+      duration: 2,\r\n+      useEasing: true,\r\n+      useGrouping: true,\r\n+    };\r\n+\r\n+    // Initialize counters for the bill amounts and units\r\n+    this.countUps = {\r\n+      billAmount: new CountUp(\"bill-amount\", this.billData.totalAmount, {\r\n+        ...countUpOptions,\r\n+        prefix: \"PKR \",\r\n+      }),\r\n+      unitsConsumed: new CountUp(\r\n+        \"units-consumed\",\r\n+        this.billData.unitsConsumed,\r\n+        {\r\n+          ...countUpOptions,\r\n+          suffix: \" kWh\",\r\n+        }\r\n+      ),\r\n+    };\r\n+  }\r\n+\r\n+  startCountUps() {\r\n+    Object.values(this.countUps).forEach((counter) => {\r\n+      if (counter && !counter.error) {\r\n+        counter.start();\r\n+      }\r\n+    });\r\n+  }\r\n+\r\n   renderBillPreview() {\r\n     if (!this.billData) {\r\n       console.error(\"Bill data is not available\");\r\n       this.renderError(document.getElementById(\"app\"));\r\n@@ -721,95 +754,100 @@\n     const isMobile = window.innerWidth < 640;\r\n     const isTablet = window.innerWidth < 1024;\r\n \r\n     this.charts.consumption = new Chart(ctx, {\r\n-        type: \"line\",\r\n-        data: {\r\n-            labels: trendData.map(d => d.month),\r\n-            datasets: [{\r\n-                label: \"Consumption (kWh)\",\r\n-                data: trendData.map(d => d.consumption),\r\n-                borderColor: \"#059669\",\r\n-                backgroundColor: \"rgba(5, 150, 105, 0.1)\",\r\n-                tension: 0.4,\r\n-                fill: true,\r\n-                pointRadius: isMobile ? 2 : (isTablet ? 3 : 4),\r\n-                pointHoverRadius: isMobile ? 4 : (isTablet ? 5 : 6),\r\n-                pointBackgroundColor: \"#ffffff\",\r\n-                pointBorderColor: \"#059669\",\r\n-                pointBorderWidth: isMobile ? 1 : 2,\r\n-            }]\r\n+      type: \"line\",\r\n+      data: {\r\n+        labels: trendData.map((d) => d.month),\r\n+        datasets: [\r\n+          {\r\n+            label: \"Consumption (kWh)\",\r\n+            data: trendData.map((d) => d.consumption),\r\n+            borderColor: \"#059669\",\r\n+            backgroundColor: \"rgba(5, 150, 105, 0.1)\",\r\n+            tension: 0.4,\r\n+            fill: true,\r\n+            pointRadius: isMobile ? 2 : isTablet ? 3 : 4,\r\n+            pointHoverRadius: isMobile ? 4 : isTablet ? 5 : 6,\r\n+            pointBackgroundColor: \"#ffffff\",\r\n+            pointBorderColor: \"#059669\",\r\n+            pointBorderWidth: isMobile ? 1 : 2,\r\n+          },\r\n+        ],\r\n+      },\r\n+      options: {\r\n+        responsive: true,\r\n+        maintainAspectRatio: false,\r\n+        interaction: {\r\n+          mode: \"nearest\",\r\n+          intersect: false,\r\n+          axis: \"x\",\r\n         },\r\n-        options: {\r\n-            responsive: true,\r\n-            maintainAspectRatio: false,\r\n-            interaction: {\r\n-                mode: 'nearest',\r\n-                intersect: false,\r\n-                axis: 'x'\r\n+        plugins: {\r\n+          legend: {\r\n+            display: false,\r\n+          },\r\n+          tooltip: {\r\n+            enabled: true,\r\n+            backgroundColor: \"white\",\r\n+            titleColor: \"#1f2937\",\r\n+            bodyColor: \"#4b5563\",\r\n+            borderColor: \"#e5e7eb\",\r\n+            borderWidth: 1,\r\n+            padding: isMobile ? 8 : 12,\r\n+            titleFont: {\r\n+              size: isMobile ? 12 : 14,\r\n+              weight: \"bold\",\r\n             },\r\n-            plugins: {\r\n-                legend: {\r\n-                    display: false\r\n-                },\r\n-                tooltip: {\r\n-                    enabled: true,\r\n-                    backgroundColor: 'white',\r\n-                    titleColor: '#1f2937',\r\n-                    bodyColor: '#4b5563',\r\n-                    borderColor: '#e5e7eb',\r\n-                    borderWidth: 1,\r\n-                    padding: isMobile ? 8 : 12,\r\n-                    titleFont: {\r\n-                        size: isMobile ? 12 : 14,\r\n-                        weight: 'bold'\r\n-                    },\r\n-                    bodyFont: {\r\n-                        size: isMobile ? 11 : 13\r\n-                    },\r\n-                    displayColors: false\r\n-                }\r\n+            bodyFont: {\r\n+              size: isMobile ? 11 : 13,\r\n             },\r\n-            scales: {\r\n-                x: {\r\n-                    grid: {\r\n-                        display: false\r\n-                    },\r\n-                    ticks: {\r\n-                        font: {\r\n-                            size: isMobile ? 10 : (isTablet ? 11 : 12)\r\n-                        }\r\n-                    }\r\n-                },\r\n-                y: {\r\n-                    beginAtZero: true,\r\n-                    grid: {\r\n-                        color: 'rgba(0, 0, 0, 0.05)'\r\n-                    },\r\n-                    ticks: {\r\n-                        font: {\r\n-                            size: isMobile ? 10 : (isTablet ? 11 : 12)\r\n-                        }\r\n-                    }\r\n-                }\r\n-            }\r\n-        }\r\n+            displayColors: false,\r\n+          },\r\n+        },\r\n+        scales: {\r\n+          x: {\r\n+            grid: {\r\n+              display: false,\r\n+            },\r\n+            ticks: {\r\n+              font: {\r\n+                size: isMobile ? 10 : isTablet ? 11 : 12,\r\n+              },\r\n+            },\r\n+          },\r\n+          y: {\r\n+            beginAtZero: true,\r\n+            grid: {\r\n+              color: \"rgba(0, 0, 0, 0.05)\",\r\n+            },\r\n+            ticks: {\r\n+              font: {\r\n+                size: isMobile ? 10 : isTablet ? 11 : 12,\r\n+              },\r\n+            },\r\n+          },\r\n+        },\r\n+      },\r\n     });\r\n \r\n     // Add resize handler\r\n-    window.addEventListener('resize', this.handleResize.bind(this));\r\n-}\r\n+    window.addEventListener(\"resize\", this.handleResize.bind(this));\r\n+  }\r\n \r\n-handleResize() {\r\n+  handleResize() {\r\n     clearTimeout(this.resizeTimeout);\r\n     this.resizeTimeout = setTimeout(() => {\r\n-        if (this.charts.consumption) {\r\n-            this.charts.consumption.resize();\r\n-        }\r\n+      if (this.charts.consumption) {\r\n+        this.charts.consumption.resize();\r\n+      }\r\n     }, 250);\r\n-}\r\n+  }\r\n \r\n   startInsightAnimations() {\r\n+    // First init the counters\r\n+    this.initCountUps();\r\n+\r\n     gsap.to(\"#insights-header\", {\r\n       opacity: 1,\r\n       y: 0,\r\n       duration: 0.6,\r\n@@ -838,8 +876,12 @@\n       duration: 0.6,\r\n       stagger: 0.2,\r\n       delay: 0.6,\r\n       ease: \"power2.out\",\r\n+      onComplete: () => {\r\n+        // Start the counters after the cards animate in\r\n+        this.startCountUps();\r\n+      },\r\n     });\r\n \r\n     gsap.to(\"#next-steps-card\", {\r\n       opacity: 1,\r\n"
                },
                {
                    "date": 1731680567652,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,9 @@\n import { gsap } from \"gsap\";\r\n import { getBillData } from \"../store/solarSizingState.js\";\r\n import { BillPreview } from \"./BillPreview.js\";\r\n import Chart from \"chart.js/auto\";\r\n-import { CountUp } from 'countup.js';\r\n+import { CountUp } from \"countup.js\";\r\n \r\n export class BillReviewPage {\r\n   constructor() {\r\n     this.billData = getBillData();\r\n@@ -109,11 +109,12 @@\n                             <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 opacity-0\" id=\"consumption-card\">\r\n                                 <div class=\"flex justify-between items-center mb-2 sm:mb-3\">\r\n                                     <h3 class=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n                                     <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs sm:text-sm font-medium\">\r\n-                                        ${this.formatChange(\r\n-                                          trendData\r\n-                                        )}% vs last month\r\n+                                                    ${this.formatChange(\r\n+                                                      trendData\r\n+                                                    )}% vs last month\r\n+\r\n                                     </div>\r\n                                 </div>\r\n                                 <div class=\"h-[150px] sm:h-[180px] lg:h-[200px] xl:h-[220px]\">\r\n                                     <canvas id=\"consumption-trend-chart\"></canvas>\r\n"
                },
                {
                    "date": 1731680600313,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -297,8 +297,13 @@\n       });\r\n     });\r\n   }\r\n \r\n+  getTrendChangeText() {\r\n+    const trendData = this.generateTrendData();\r\n+    return `${this.formatChange(trendData)}% vs last month`;\r\n+  }\r\n+\r\n   async startAnimation() {\r\n     if (this.error) {\r\n       this.showError();\r\n       return;\r\n"
                },
                {
                    "date": 1731680679951,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,9 +43,9 @@\n   render() {\r\n     const app = document.getElementById(\"app\");\r\n \r\n     app.innerHTML = `\r\n-    <div class=\"h-screen w-full overflow-hidden bg-white transition-colors duration-1000\" id=\"quote-result-page\">\r\n+      <div class=\"h-screen w-full overflow-hidden bg-white transition-colors duration-1000\" id=\"quote-result-page\">\r\n         <div class=\"h-full w-full flex relative\" id=\"main-content\">\r\n             <!-- Bill Preview Side -->\r\n             <div class=\"w-1/2 h-full overflow-hidden\" id=\"bill-preview-container\">\r\n                 <div id=\"bill-preview\" class=\"h-full\"></div>\r\n"
                },
                {
                    "date": 1731680696957,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,11 +109,9 @@\n                             <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 opacity-0\" id=\"consumption-card\">\r\n                                 <div class=\"flex justify-between items-center mb-2 sm:mb-3\">\r\n                                     <h3 class=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n                                     <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs sm:text-sm font-medium\">\r\n-                                                    ${this.formatChange(\r\n-                                                      trendData\r\n-                                                    )}% vs last month\r\n+                                    ${this.getTrendChangeText()}\r\n \r\n                                     </div>\r\n                                 </div>\r\n                                 <div class=\"h-[150px] sm:h-[180px] lg:h-[200px] xl:h-[220px]\">\r\n"
                },
                {
                    "date": 1731680818513,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,14 +41,15 @@\n \r\n   // Update the main container structure in render method\r\n   render() {\r\n     const app = document.getElementById(\"app\");\r\n+    const trendData = this.generateTrendData();\r\n \r\n     app.innerHTML = `\r\n-      <div class=\"h-screen w-full overflow-hidden bg-white transition-colors duration-1000\" id=\"quote-result-page\">\r\n+    <div class=\"h-screen w-full overflow-hidden bg-white transition-colors duration-1000 opacity-0\" id=\"quote-result-page\">\r\n         <div class=\"h-full w-full flex relative\" id=\"main-content\">\r\n             <!-- Bill Preview Side -->\r\n-            <div class=\"w-1/2 h-full overflow-hidden\" id=\"bill-preview-container\">\r\n+            <div class=\"w-1/2 h-full overflow-hidden opacity-0\" id=\"bill-preview-container\">\r\n                 <div id=\"bill-preview\" class=\"h-full\"></div>\r\n             </div>\r\n \r\n             <!-- Loading Indicator -->\r\n@@ -58,9 +59,9 @@\n                 <p class=\"text-emerald-600 font-medium\">Analyzing your bill...</p>\r\n             </div>\r\n \r\n             <!-- Insights Side -->\r\n-            <div class=\"w-1/2 h-full invisible overflow-hidden\" id=\"insights-container\">\r\n+            <div class=\"w-1/2 h-full invisible\" id=\"insights-container\">\r\n                 <div class=\"h-full flex flex-col p-2 sm:p-4 lg:p-6 xl:p-8\">\r\n                     <!-- Top Section: Fixed Height -->\r\n                     <div class=\"flex-none space-y-3 sm:space-y-4 lg:space-y-5\">\r\n                         <!-- Header Section -->\r\n@@ -109,16 +110,18 @@\n                             <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 opacity-0\" id=\"consumption-card\">\r\n                                 <div class=\"flex justify-between items-center mb-2 sm:mb-3\">\r\n                                     <h3 class=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n                                     <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs sm:text-sm font-medium\">\r\n-                                    ${this.getTrendChangeText()}\r\n-\r\n+                                        ${this.formatChange(\r\n+                                          trendData\r\n+                                        )}% vs last month\r\n                                     </div>\r\n                                 </div>\r\n                                 <div class=\"h-[150px] sm:h-[180px] lg:h-[200px] xl:h-[220px]\">\r\n                                     <canvas id=\"consumption-trend-chart\"></canvas>\r\n                                 </div>\r\n                             </div>\r\n+\r\n                             <!-- Metrics Cards -->\r\n                             <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 lg:gap-5\">\r\n                                 <!-- Current Bill Card -->\r\n                                 <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 opacity-0 consumption-metric h-auto\">\r\n@@ -130,10 +133,10 @@\n                                         </div>\r\n                                         <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n                                     </div>\r\n                                     <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Current Bill</p>\r\n-                                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${this.formatCurrency(\r\n-                                      this.billData.totalAmount\r\n+                                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\" id=\"bill-amount\">${this.formatCurrency(\r\n+                                      this.billData.amount\r\n                                     )}</p>\r\n                                     <div class=\"mt-3 h-1 bg-gray-100 rounded\">\r\n                                         <div class=\"h-full bg-emerald-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n                                     </div>\r\n@@ -151,9 +154,9 @@\n                                             ${this.calculateEfficiency()} efficiency\r\n                                         </span>\r\n                                     </div>\r\n                                     <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n-                                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${\r\n+                                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\" id=\"units-consumed\">${\r\n                                       this.billData.unitsConsumed\r\n                                     } kWh</p>\r\n                                     <p class=\"text-xs sm:text-sm text-gray-500 mt-2\">Rate: ${this.formatCurrency(\r\n                                       this.billData.ratePerUnit\r\n@@ -161,33 +164,35 @@\n                                 </div>\r\n                             </div>\r\n \r\n                             <!-- Next Steps Card -->\r\n-                            <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 relative opacity-0\" id=\"next-steps-card\">\r\n-                                <div class=\"absolute -top-2 -right-2\">\r\n-                                    <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n-                                        <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n-                                        </svg>\r\n+                            <div class=\"sm:col-span-2\">\r\n+                                <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 relative opacity-0\" id=\"next-steps-card\">\r\n+                                    <div class=\"absolute -top-2 -right-2\">\r\n+                                        <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n+                                            <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n+                                            </svg>\r\n+                                        </div>\r\n                                     </div>\r\n+                                    <div class=\"max-w-lg\">\r\n+                                        <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n+                                        <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n+                                            We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n+                                        </p>\r\n+                                        <button \r\n+                                            id=\"proceed-to-quote\" \r\n+                                            class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n+                                                   transition-all duration-300 shadow-sm hover:shadow-lg\r\n+                                                   flex items-center justify-center gap-2 group\"\r\n+                                        >\r\n+                                            Generate My Solar Quote\r\n+                                            <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n+                                            </svg>\r\n+                                        </button>\r\n+                                    </div>\r\n                                 </div>\r\n-                                <div class=\"max-w-lg\">\r\n-                                    <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n-                                    <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n-                                        We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n-                                    </p>\r\n-                                    <button \r\n-                                        id=\"proceed-to-quote\" \r\n-                                        class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n-                                               transition-all duration-300 shadow-sm hover:shadow-lg\r\n-                                               flex items-center justify-center gap-2 group\"\r\n-                                    >\r\n-                                        Generate My Solar Quote\r\n-                                        <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n-                                        </svg>\r\n-                                    </button>\r\n-                                </div>\r\n                             </div>\r\n                         </div>\r\n                     </div>\r\n                 </div>\r\n@@ -195,87 +200,8 @@\n         </div>\r\n     </div>\r\n `;\r\n \r\n-    // Add the responsive styles\r\n-    const style = document.createElement(\"style\");\r\n-    style.textContent = `\r\n-    @media (min-width: 1280px) {\r\n-        #insights-container .h-full {\r\n-            height: 100vh;\r\n-            max-height: 100vh;\r\n-        }\r\n-    }\r\n-\r\n-    @media (max-width: 1279px) {\r\n-        #insights-container .overflow-auto {\r\n-            overflow-y: auto;\r\n-            -webkit-overflow-scrolling: touch;\r\n-        }\r\n-    }\r\n-\r\n-    @media (min-height: 800px) {\r\n-        #insights-container .consumption-metric {\r\n-            min-height: 180px;\r\n-        }\r\n-    }\r\n-\r\n-    @media (max-height: 800px) {\r\n-        #insights-container .consumption-metric {\r\n-            min-height: 150px;\r\n-        }\r\n-    }\r\n-\r\n-    .animated-gradient {\r\n-        background: linear-gradient(\r\n-            45deg,\r\n-            rgba(255,255,255,0.1),\r\n-            rgba(255,255,255,0.2),\r\n-            rgba(255,255,255,0.1)\r\n-        );\r\n-        background-size: 200% 200%;\r\n-        animation: gradient 15s ease infinite;\r\n-    }\r\n-\r\n-    @keyframes gradient {\r\n-        0% { background-position: 0% 50%; }\r\n-        50% { background-position: 100% 50%; }\r\n-        100% { background-position: 0% 50%; }\r\n-    }\r\n-\r\n-    .loading-spinner {\r\n-        width: 40px;\r\n-        height: 40px;\r\n-        border: 3px solid rgba(16, 185, 129, 0.1);\r\n-        border-radius: 50%;\r\n-        border-top-color: #10b981;\r\n-        animation: spin 1s ease-in-out infinite;\r\n-    }\r\n-\r\n-    @keyframes spin {\r\n-        to { transform: rotate(360deg); }\r\n-    }\r\n-\r\n-    #insights-container .overflow-auto {\r\n-        scrollbar-width: thin;\r\n-        scrollbar-color: rgba(156, 163, 175, 0.3) transparent;\r\n-    }\r\n-    \r\n-    #insights-container .overflow-auto::-webkit-scrollbar {\r\n-        width: 4px;\r\n-    }\r\n-    \r\n-    #insights-container .overflow-auto::-webkit-scrollbar-track {\r\n-        background: transparent;\r\n-    }\r\n-    \r\n-    #insights-container .overflow-auto::-webkit-scrollbar-thumb {\r\n-        background-color: rgba(156, 163, 175, 0.3);\r\n-        border-radius: 2px;\r\n-    }\r\n-`;\r\n-    document.head.appendChild(style);\r\n-\r\n     this.attachBaseStyles();\r\n \r\n     // Use requestAnimationFrame to ensure styles are applied before starting\r\n     requestAnimationFrame(() => {\r\n"
                },
                {
                    "date": 1731680931577,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -221,8 +221,12 @@\n       });\r\n     });\r\n   }\r\n \r\n+  isMobileDevice() {\r\n+    return window.innerWidth < 768; // You can adjust this breakpoint\r\n+  }\r\n+\r\n   getTrendChangeText() {\r\n     const trendData = this.generateTrendData();\r\n     return `${this.formatChange(trendData)}% vs last month`;\r\n   }\r\n"
                },
                {
                    "date": 1731680946259,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -236,81 +236,115 @@\n       this.showError();\r\n       return;\r\n     }\r\n \r\n+    const isMobile = this.isMobileDevice();\r\n     const billPreviewContainer = document.getElementById(\r\n       \"bill-preview-container\"\r\n     );\r\n     const insightsContainer = document.getElementById(\"insights-container\");\r\n     const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n     const quoteResultPage = document.getElementById(\"quote-result-page\");\r\n+    const mobileNav = document.getElementById(\"mobile-nav\");\r\n \r\n     // Initial states\r\n     gsap.set([billPreviewContainer, loadingIndicator], {\r\n       opacity: 0,\r\n     });\r\n-    gsap.set(billPreviewContainer, {\r\n-      scale: 0.9,\r\n-      position: \"absolute\",\r\n-      left: \"50%\",\r\n-      top: \"50%\",\r\n-      xPercent: -50,\r\n-      yPercent: -50,\r\n-      width: \"47.5%\",\r\n-    });\r\n-    gsap.set(loadingIndicator, {\r\n-      scale: 0.5,\r\n-    });\r\n \r\n-    const tl = gsap.timeline({\r\n-      defaults: { duration: 0.8, ease: \"power2.out\" },\r\n-    });\r\n+    if (isMobile) {\r\n+      // Mobile animation sequence\r\n+      gsap.set(billPreviewContainer, {\r\n+        opacity: 0,\r\n+        y: -20,\r\n+      });\r\n+      gsap.set(insightsContainer, {\r\n+        y: \"100%\",\r\n+      });\r\n \r\n-    // Animation sequence\r\n-    await tl\r\n-      .to(billPreviewContainer, {\r\n-        opacity: 1,\r\n-        scale: 1,\r\n-        duration: 1,\r\n-      })\r\n-      .to(loadingIndicator, {\r\n-        opacity: 1,\r\n-        scale: 1,\r\n-        duration: 0.5,\r\n-      })\r\n-      .to(loadingIndicator, {\r\n-        opacity: 0,\r\n-        scale: 0.5,\r\n-        delay: 1,\r\n-      })\r\n-      .to(\r\n-        billPreviewContainer,\r\n-        {\r\n-          left: \"0%\",\r\n-          top: \"0%\",\r\n-          xPercent: 0,\r\n-          yPercent: 0,\r\n-          width: \"50%\",\r\n-          position: \"relative\",\r\n-        },\r\n-        \"-=0.3\"\r\n-      )\r\n-      .call(() => {\r\n-        insightsContainer.style.visibility = \"visible\";\r\n-      })\r\n-      .to(insightsContainer, {\r\n-        opacity: 1,\r\n-        duration: 0.5,\r\n-      })\r\n-      .to(\r\n-        quoteResultPage,\r\n-        {\r\n-          backgroundColor: \"var(--color-bg-secondary)\",\r\n+      const tl = gsap.timeline({\r\n+        defaults: { duration: 0.8, ease: \"power2.out\" },\r\n+      });\r\n+\r\n+      await tl\r\n+        .to(billPreviewContainer, {\r\n+          opacity: 1,\r\n+          y: 0,\r\n           duration: 1,\r\n-        },\r\n-        \"-=0.5\"\r\n-      );\r\n+        })\r\n+        .to(loadingIndicator, {\r\n+          opacity: 1,\r\n+          scale: 1,\r\n+          duration: 0.5,\r\n+        })\r\n+        .to(loadingIndicator, {\r\n+          opacity: 0,\r\n+          scale: 0.5,\r\n+          delay: 0.5,\r\n+        })\r\n+        .to(insightsContainer, {\r\n+          visibility: \"visible\",\r\n+          y: \"0%\",\r\n+          duration: 0.8,\r\n+        })\r\n+        .to(mobileNav, {\r\n+          display: \"block\",\r\n+          opacity: 1,\r\n+          duration: 0.3,\r\n+        });\r\n+    } else {\r\n+      // Desktop animation sequence (your existing animation)\r\n+      gsap.set(billPreviewContainer, {\r\n+        scale: 0.9,\r\n+        position: \"absolute\",\r\n+        left: \"50%\",\r\n+        top: \"50%\",\r\n+        xPercent: -50,\r\n+        yPercent: -50,\r\n+        width: \"47.5%\",\r\n+      });\r\n \r\n+      const tl = gsap.timeline({\r\n+        defaults: { duration: 0.8, ease: \"power2.out\" },\r\n+      });\r\n+\r\n+      await tl\r\n+        .to(billPreviewContainer, {\r\n+          opacity: 1,\r\n+          scale: 1,\r\n+          duration: 1,\r\n+        })\r\n+        .to(loadingIndicator, {\r\n+          opacity: 1,\r\n+          scale: 1,\r\n+          duration: 0.5,\r\n+        })\r\n+        .to(loadingIndicator, {\r\n+          opacity: 0,\r\n+          scale: 0.5,\r\n+          delay: 1,\r\n+        })\r\n+        .to(\r\n+          billPreviewContainer,\r\n+          {\r\n+            left: \"0%\",\r\n+            top: \"0%\",\r\n+            xPercent: 0,\r\n+            yPercent: 0,\r\n+            width: \"50%\",\r\n+            position: \"relative\",\r\n+          },\r\n+          \"-=0.3\"\r\n+        )\r\n+        .call(() => {\r\n+          insightsContainer.style.visibility = \"visible\";\r\n+        })\r\n+        .to(insightsContainer, {\r\n+          opacity: 1,\r\n+          duration: 0.5,\r\n+        });\r\n+    }\r\n+\r\n     // Render insights after animations\r\n     this.renderInsights();\r\n   }\r\n \r\n"
                },
                {
                    "date": 1731680973908,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,854 @@\n+// BillReviewPage.js\r\n+import { gsap } from \"gsap\";\r\n+import { getBillData } from \"../store/solarSizingState.js\";\r\n+import { BillPreview } from \"./BillPreview.js\";\r\n+import Chart from \"chart.js/auto\";\r\n+import { CountUp } from \"countup.js\";\r\n+\r\n+export class BillReviewPage {\r\n+  constructor() {\r\n+    this.billData = getBillData();\r\n+    this.charts = {};\r\n+  }\r\n+\r\n+  addScrollStyles() {\r\n+    const style = document.createElement(\"style\");\r\n+    style.textContent = `\r\n+        .custom-scrollbar {\r\n+            scrollbar-width: thin;\r\n+            scrollbar-color: rgba(0, 0, 0, 0.2) transparent;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar {\r\n+            width: 6px;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar-track {\r\n+            background: transparent;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar-thumb {\r\n+            background-color: rgba(0, 0, 0, 0.2);\r\n+            border-radius: 3px;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar-thumb:hover {\r\n+            background-color: rgba(0, 0, 0, 0.3);\r\n+        }\r\n+    `;\r\n+    document.head.appendChild(style);\r\n+  }\r\n+\r\n+  // Update the main container structure in render method\r\n+  render() {\r\n+    const app = document.getElementById(\"app\");\r\n+    const trendData = this.generateTrendData();\r\n+\r\n+    app.innerHTML = `\r\n+    <div class=\"h-screen w-full overflow-hidden bg-white transition-colors duration-1000 opacity-0\" id=\"quote-result-page\">\r\n+        <div class=\"h-full w-full flex relative\" id=\"main-content\">\r\n+            <!-- Bill Preview Side -->\r\n+            <div class=\"w-1/2 h-full overflow-hidden opacity-0\" id=\"bill-preview-container\">\r\n+                <div id=\"bill-preview\" class=\"h-full\"></div>\r\n+            </div>\r\n+\r\n+            <!-- Loading Indicator -->\r\n+            <div class=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center z-10\" \r\n+                 id=\"loading-indicator\">\r\n+                <div class=\"loading-spinner\"></div>\r\n+                <p class=\"text-emerald-600 font-medium\">Analyzing your bill...</p>\r\n+            </div>\r\n+\r\n+            <!-- Insights Side -->\r\n+            <div class=\"w-1/2 h-full invisible\" id=\"insights-container\">\r\n+                <div class=\"h-full flex flex-col p-2 sm:p-4 lg:p-6 xl:p-8\">\r\n+                    <!-- Top Section: Fixed Height -->\r\n+                    <div class=\"flex-none space-y-3 sm:space-y-4 lg:space-y-5\">\r\n+                        <!-- Header Section -->\r\n+                        <div class=\"opacity-0\" id=\"insights-header\">\r\n+                            <div class=\"flex items-center gap-3 sm:gap-4\">\r\n+                                <div class=\"flex-shrink-0\">\r\n+                                    <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-600 flex items-center justify-center\">\r\n+                                        <svg class=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n+                                        </svg>\r\n+                                    </div>\r\n+                                </div>\r\n+                                <div>\r\n+                                    <h2 class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">Bill Analysis</h2>\r\n+                                    <p class=\"text-xs sm:text-sm lg:text-base text-gray-500\">Understanding your consumption</p>\r\n+                                </div>\r\n+                            </div>\r\n+                        </div>\r\n+\r\n+                        <!-- Progress Tracker -->\r\n+                        <div class=\"bg-white/70 backdrop-blur rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 opacity-0\" id=\"progress-tracker\">\r\n+                            <div class=\"flex justify-between items-center\">\r\n+                                <div class=\"flex items-center gap-3\">\r\n+                                    <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-emerald-600 flex items-center justify-center text-white font-semibold text-sm sm:text-base\">1</div>\r\n+                                    <div>\r\n+                                        <p class=\"font-semibold text-gray-900 text-sm sm:text-base\">Bill Review</p>\r\n+                                        <p class=\"text-xs sm:text-sm text-gray-500\">Analyzing patterns</p>\r\n+                                    </div>\r\n+                                </div>\r\n+                                <div class=\"h-0.5 w-16 sm:w-24 bg-gray-200\"></div>\r\n+                                <div class=\"flex items-center gap-3\">\r\n+                                    <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm sm:text-base\">2</div>\r\n+                                    <div>\r\n+                                        <p class=\"font-semibold text-gray-400 text-sm sm:text-base\">Solar Quote</p>\r\n+                                        <p class=\"text-xs sm:text-sm text-gray-400\">Up next</p>\r\n+                                    </div>\r\n+                                </div>\r\n+                            </div>\r\n+                        </div>\r\n+                    </div>\r\n+\r\n+                    <!-- Main Content Area: Flexible Height -->\r\n+                    <div class=\"flex-1 min-h-0 mt-3 sm:mt-4 lg:mt-5\">\r\n+                        <div class=\"h-full grid grid-rows-[auto_1fr_auto] gap-3 sm:gap-4 lg:gap-5\">\r\n+                            <!-- Consumption Analysis Card -->\r\n+                            <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 opacity-0\" id=\"consumption-card\">\r\n+                                <div class=\"flex justify-between items-center mb-2 sm:mb-3\">\r\n+                                    <h3 class=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n+                                    <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs sm:text-sm font-medium\">\r\n+                                        ${this.formatChange(\r\n+                                          trendData\r\n+                                        )}% vs last month\r\n+                                    </div>\r\n+                                </div>\r\n+                                <div class=\"h-[150px] sm:h-[180px] lg:h-[200px] xl:h-[220px]\">\r\n+                                    <canvas id=\"consumption-trend-chart\"></canvas>\r\n+                                </div>\r\n+                            </div>\r\n+\r\n+                            <!-- Metrics Cards -->\r\n+                            <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 lg:gap-5\">\r\n+                                <!-- Current Bill Card -->\r\n+                                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 opacity-0 consumption-metric h-auto\">\r\n+                                    <div class=\"flex items-center justify-between mb-2\">\r\n+                                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n+                                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n+                                            </svg>\r\n+                                        </div>\r\n+                                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n+                                    </div>\r\n+                                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Current Bill</p>\r\n+                                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\" id=\"bill-amount\">${this.formatCurrency(\r\n+                                      this.billData.amount\r\n+                                    )}</p>\r\n+                                    <div class=\"mt-3 h-1 bg-gray-100 rounded\">\r\n+                                        <div class=\"h-full bg-emerald-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n+                                    </div>\r\n+                                </div>\r\n+\r\n+                                <!-- Units Consumed Card -->\r\n+                                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 opacity-0 consumption-metric h-auto\">\r\n+                                    <div class=\"flex items-center justify-between mb-2\">\r\n+                                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n+                                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n+                                            </svg>\r\n+                                        </div>\r\n+                                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">\r\n+                                            ${this.calculateEfficiency()} efficiency\r\n+                                        </span>\r\n+                                    </div>\r\n+                                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n+                                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\" id=\"units-consumed\">${\r\n+                                      this.billData.unitsConsumed\r\n+                                    } kWh</p>\r\n+                                    <p class=\"text-xs sm:text-sm text-gray-500 mt-2\">Rate: ${this.formatCurrency(\r\n+                                      this.billData.ratePerUnit\r\n+                                    )}/kWh</p>\r\n+                                </div>\r\n+                            </div>\r\n+\r\n+                            <!-- Next Steps Card -->\r\n+                            <div class=\"sm:col-span-2\">\r\n+                                <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 relative opacity-0\" id=\"next-steps-card\">\r\n+                                    <div class=\"absolute -top-2 -right-2\">\r\n+                                        <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n+                                            <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n+                                            </svg>\r\n+                                        </div>\r\n+                                    </div>\r\n+                                    <div class=\"max-w-lg\">\r\n+                                        <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n+                                        <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n+                                            We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n+                                        </p>\r\n+                                        <button \r\n+                                            id=\"proceed-to-quote\" \r\n+                                            class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n+                                                   transition-all duration-300 shadow-sm hover:shadow-lg\r\n+                                                   flex items-center justify-center gap-2 group\"\r\n+                                        >\r\n+                                            Generate My Solar Quote\r\n+                                            <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n+                                            </svg>\r\n+                                        </button>\r\n+                                    </div>\r\n+                                </div>\r\n+                            </div>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+        </div>\r\n+    </div>\r\n+`;\r\n+\r\n+    this.attachBaseStyles();\r\n+\r\n+    // Use requestAnimationFrame to ensure styles are applied before starting\r\n+    requestAnimationFrame(() => {\r\n+      requestAnimationFrame(() => {\r\n+        // Make container visible\r\n+        const container = document.getElementById(\"quote-result-page\");\r\n+        if (container) {\r\n+          container.classList.remove(\"opacity-0\");\r\n+        }\r\n+\r\n+        // Now render bill preview and start animation\r\n+        this.renderBillPreview();\r\n+        this.startAnimation().catch((error) => {\r\n+          console.error(\"Animation failed:\", error);\r\n+          this.showError();\r\n+        });\r\n+      });\r\n+    });\r\n+  }\r\n+\r\n+  isMobileDevice() {\r\n+    return window.innerWidth < 768; // You can adjust this breakpoint\r\n+  }\r\n+\r\n+  getTrendChangeText() {\r\n+    const trendData = this.generateTrendData();\r\n+    return `${this.formatChange(trendData)}% vs last month`;\r\n+  }\r\n+\r\n+  async startAnimation() {\r\n+    if (this.error) {\r\n+      this.showError();\r\n+      return;\r\n+    }\r\n+\r\n+    const isMobile = this.isMobileDevice();\r\n+    const billPreviewContainer = document.getElementById(\r\n+      \"bill-preview-container\"\r\n+    );\r\n+    const insightsContainer = document.getElementById(\"insights-container\");\r\n+    const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n+    const quoteResultPage = document.getElementById(\"quote-result-page\");\r\n+    const mobileNav = document.getElementById(\"mobile-nav\");\r\n+\r\n+    // Initial states\r\n+    gsap.set([billPreviewContainer, loadingIndicator], {\r\n+      opacity: 0,\r\n+    });\r\n+\r\n+    if (isMobile) {\r\n+      // Mobile animation sequence\r\n+      gsap.set(billPreviewContainer, {\r\n+        opacity: 0,\r\n+        y: -20,\r\n+      });\r\n+      gsap.set(insightsContainer, {\r\n+        y: \"100%\",\r\n+      });\r\n+\r\n+      const tl = gsap.timeline({\r\n+        defaults: { duration: 0.8, ease: \"power2.out\" },\r\n+      });\r\n+\r\n+      await tl\r\n+        .to(billPreviewContainer, {\r\n+          opacity: 1,\r\n+          y: 0,\r\n+          duration: 1,\r\n+        })\r\n+        .to(loadingIndicator, {\r\n+          opacity: 1,\r\n+          scale: 1,\r\n+          duration: 0.5,\r\n+        })\r\n+        .to(loadingIndicator, {\r\n+          opacity: 0,\r\n+          scale: 0.5,\r\n+          delay: 0.5,\r\n+        })\r\n+        .to(insightsContainer, {\r\n+          visibility: \"visible\",\r\n+          y: \"0%\",\r\n+          duration: 0.8,\r\n+        })\r\n+        .to(mobileNav, {\r\n+          display: \"block\",\r\n+          opacity: 1,\r\n+          duration: 0.3,\r\n+        });\r\n+    } else {\r\n+      // Desktop animation sequence (your existing animation)\r\n+      gsap.set(billPreviewContainer, {\r\n+        scale: 0.9,\r\n+        position: \"absolute\",\r\n+        left: \"50%\",\r\n+        top: \"50%\",\r\n+        xPercent: -50,\r\n+        yPercent: -50,\r\n+        width: \"47.5%\",\r\n+      });\r\n+\r\n+      const tl = gsap.timeline({\r\n+        defaults: { duration: 0.8, ease: \"power2.out\" },\r\n+      });\r\n+\r\n+      await tl\r\n+        .to(billPreviewContainer, {\r\n+          opacity: 1,\r\n+          scale: 1,\r\n+          duration: 1,\r\n+        })\r\n+        .to(loadingIndicator, {\r\n+          opacity: 1,\r\n+          scale: 1,\r\n+          duration: 0.5,\r\n+        })\r\n+        .to(loadingIndicator, {\r\n+          opacity: 0,\r\n+          scale: 0.5,\r\n+          delay: 1,\r\n+        })\r\n+        .to(\r\n+          billPreviewContainer,\r\n+          {\r\n+            left: \"0%\",\r\n+            top: \"0%\",\r\n+            xPercent: 0,\r\n+            yPercent: 0,\r\n+            width: \"50%\",\r\n+            position: \"relative\",\r\n+          },\r\n+          \"-=0.3\"\r\n+        )\r\n+        .call(() => {\r\n+          insightsContainer.style.visibility = \"visible\";\r\n+        })\r\n+        .to(insightsContainer, {\r\n+          opacity: 1,\r\n+          duration: 0.5,\r\n+        });\r\n+    }\r\n+\r\n+    // Render insights after animations\r\n+    this.renderInsights();\r\n+  }\r\n+\r\n+  attachBaseStyles() {\r\n+    const style = document.createElement(\"style\");\r\n+    style.textContent = this.getBaseStyles();\r\n+    document.head.appendChild(style);\r\n+  }\r\n+\r\n+  getBaseStyles() {\r\n+    return `\r\n+        ${this.existingBaseStyles}\r\n+\r\n+        /* Mobile Specific Styles */\r\n+        @media (max-width: 768px) {\r\n+            #bill-preview-container {\r\n+                border-bottom: 1px solid var(--color-gray-200);\r\n+            }\r\n+\r\n+            #insights-container {\r\n+                height: calc(60vh - 70px); /* Account for mobile nav */\r\n+            }\r\n+\r\n+            .mobile-nav {\r\n+                height: 70px;\r\n+                box-shadow: 0 -1px 3px rgba(0,0,0,0.1);\r\n+            }\r\n+\r\n+            .card-grid {\r\n+                grid-template-columns: 1fr;\r\n+            }\r\n+        }\r\n+\r\n+        /* Smooth scrolling for mobile */\r\n+        .mobile-scroll {\r\n+            -webkit-overflow-scrolling: touch;\r\n+            scroll-behavior: smooth;\r\n+        }\r\n+\r\n+        /* Hide scrollbar on mobile */\r\n+        @media (max-width: 768px) {\r\n+            .hide-scrollbar::-webkit-scrollbar {\r\n+                display: none;\r\n+            }\r\n+            .hide-scrollbar {\r\n+                -ms-overflow-style: none;\r\n+                scrollbar-width: none;\r\n+            }\r\n+        }\r\n+    `;\r\n+  }\r\n+\r\n+  initCountUps() {\r\n+    const countUpOptions = {\r\n+      duration: 2,\r\n+      useEasing: true,\r\n+      useGrouping: true,\r\n+    };\r\n+\r\n+    // Initialize counters for the bill amounts and units\r\n+    this.countUps = {\r\n+      billAmount: new CountUp(\"bill-amount\", this.billData.totalAmount, {\r\n+        ...countUpOptions,\r\n+        prefix: \"PKR \",\r\n+      }),\r\n+      unitsConsumed: new CountUp(\r\n+        \"units-consumed\",\r\n+        this.billData.unitsConsumed,\r\n+        {\r\n+          ...countUpOptions,\r\n+          suffix: \" kWh\",\r\n+        }\r\n+      ),\r\n+    };\r\n+  }\r\n+\r\n+  startCountUps() {\r\n+    Object.values(this.countUps).forEach((counter) => {\r\n+      if (counter && !counter.error) {\r\n+        counter.start();\r\n+      }\r\n+    });\r\n+  }\r\n+\r\n+  renderBillPreview() {\r\n+    if (!this.billData) {\r\n+      console.error(\"Bill data is not available\");\r\n+      this.renderError(document.getElementById(\"app\"));\r\n+      return;\r\n+    }\r\n+\r\n+    const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n+    if (!billPreviewContainer) {\r\n+      console.error(\"Bill preview container not found\");\r\n+      return;\r\n+    }\r\n+\r\n+    const billPreview = new BillPreview(this.billData);\r\n+    billPreview.render(billPreviewContainer);\r\n+  }\r\n+\r\n+  renderError(container) {\r\n+    container.innerHTML = `\r\n+        <div class=\"flex items-center justify-center h-screen\">\r\n+            <div class=\"text-center\">\r\n+                <h2 class=\"text-xl font-semibold text-gray-800 mb-2\">Error</h2>\r\n+                <p class=\"text-gray-600\">Bill data is not available. Please try again.</p>\r\n+                <button onclick=\"window.router.push('/')\" \r\n+                        class=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors\">\r\n+                    Go Back\r\n+                </button>\r\n+            </div>\r\n+        </div>\r\n+    `;\r\n+  }\r\n+\r\n+  renderInsights() {\r\n+    const insightsContainer = document.querySelector(\"#insights-container\");\r\n+    if (!insightsContainer) return;\r\n+\r\n+    // Generate trend data for the last 6 months\r\n+    const trendData = this.generateTrendData();\r\n+\r\n+    insightsContainer.innerHTML = `\r\n+        <div class=\"h-full flex flex-col p-2 sm:p-4 lg:p-6 overflow-auto\">\r\n+            <!-- Header Section -->\r\n+            <div class=\"flex-none mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"insights-header\">\r\n+                <div class=\"flex items-center gap-3 sm:gap-4\">\r\n+                    <div class=\"flex-shrink-0\">\r\n+                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-600 flex items-center justify-center\">\r\n+                            <svg class=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n+                            </svg>\r\n+                        </div>\r\n+                    </div>\r\n+                    <div>\r\n+                        <h2 class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">Bill Analysis</h2>\r\n+                        <p class=\"text-xs sm:text-sm lg:text-base text-gray-500\">Understanding your consumption</p>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+\r\n+            <!-- Progress Tracker -->\r\n+            <div class=\"bg-white/70 backdrop-blur rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"progress-tracker\">\r\n+                <div class=\"flex justify-between items-center\">\r\n+                    <div class=\"flex items-center gap-3\">\r\n+                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-emerald-600 flex items-center justify-center text-white font-semibold text-sm sm:text-base\">1</div>\r\n+                        <div>\r\n+                            <p class=\"font-semibold text-gray-900 text-sm sm:text-base\">Bill Review</p>\r\n+                            <p class=\"text-xs sm:text-sm text-gray-500\">Analyzing patterns</p>\r\n+                        </div>\r\n+                    </div>\r\n+                    <div class=\"h-0.5 w-16 sm:w-24 bg-gray-200\"></div>\r\n+                    <div class=\"flex items-center gap-3\">\r\n+                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm sm:text-base\">2</div>\r\n+                        <div>\r\n+                            <p class=\"font-semibold text-gray-400 text-sm sm:text-base\">Solar Quote</p>\r\n+                            <p class=\"text-xs sm:text-sm text-gray-400\">Up next</p>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+\r\n+            <!-- Content Grid -->\r\n+            <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 lg:gap-6 flex-1\">\r\n+                <!-- Consumption Analysis Card -->\r\n+                <div class=\"sm:col-span-2 bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0\" id=\"consumption-card\">\r\n+                    <div class=\"flex justify-between items-center mb-3 sm:mb-4\">\r\n+                        <h3 class=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n+                        <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs sm:text-sm font-medium\">\r\n+                            ${this.formatChange(trendData)}% vs last month\r\n+                        </div>\r\n+                    </div>\r\n+                    <div class=\"h-[200px] sm:h-[250px]\">\r\n+                        <canvas id=\"consumption-trend-chart\"></canvas>\r\n+                    </div>\r\n+                </div>\r\n+\r\n+                <!-- Current Bill Card -->\r\n+                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n+                    <div class=\"flex items-center justify-between mb-2\">\r\n+                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n+                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n+                            </svg>\r\n+                        </div>\r\n+                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n+                    </div>\r\n+                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Current Bill</p>\r\n+                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${this.formatCurrency(\r\n+                      this.billData.totalAmount\r\n+                    )}</p>\r\n+                    <div class=\"mt-4 h-1 bg-gray-100 rounded\">\r\n+                        <div class=\"h-full bg-emerald-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n+                    </div>\r\n+                </div>\r\n+\r\n+                <!-- Units Consumed Card -->\r\n+                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n+                    <div class=\"flex items-center justify-between mb-2\">\r\n+                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n+                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n+                            </svg>\r\n+                        </div>\r\n+                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">\r\n+                            ${this.calculateEfficiency()} efficiency\r\n+                        </span>\r\n+                    </div>\r\n+                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n+                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${\r\n+                      this.billData.unitsConsumed\r\n+                    } kWh</p>\r\n+                    <p class=\"text-xs sm:text-sm text-gray-500 mt-2\">Rate: ${this.formatCurrency(\r\n+                      this.billData.ratePerUnit\r\n+                    )}/kWh</p>\r\n+                </div>\r\n+\r\n+                <!-- Next Steps Card -->\r\n+                <div class=\"sm:col-span-2 mt-auto\">\r\n+                    <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n+                        <div class=\"absolute -top-2 -right-2\">\r\n+                            <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n+                                <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n+                                </svg>\r\n+                            </div>\r\n+                        </div>\r\n+                        <div class=\"max-w-lg\">\r\n+                            <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n+                            <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n+                                We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n+                            </p>\r\n+                            <button \r\n+                                id=\"proceed-to-quote\" \r\n+                                class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n+                                       transition-all duration-300 shadow-sm hover:shadow-lg\r\n+                                       flex items-center justify-center gap-2 group\"\r\n+                            >\r\n+                                Generate My Solar Quote\r\n+                                <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n+                                </svg>\r\n+                            </button>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+        </div>\r\n+    `;\r\n+\r\n+    // Update the chart colors in initializeCharts\r\n+    this.initializeCharts(trendData);\r\n+    this.startInsightAnimations();\r\n+    this.attachEventListeners();\r\n+  }\r\n+\r\n+  generateTrendData() {\r\n+    const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\"];\r\n+    return months.map((month) => ({\r\n+      month,\r\n+      consumption: Math.floor(\r\n+        this.billData.unitsConsumed * (0.8 + Math.random() * 0.4)\r\n+      ),\r\n+    }));\r\n+  }\r\n+\r\n+  initializeCharts(trendData) {\r\n+    const ctx = document.getElementById(\"consumption-trend-chart\");\r\n+    if (!ctx) return;\r\n+\r\n+    const isMobile = window.innerWidth < 640;\r\n+    const isTablet = window.innerWidth < 1024;\r\n+\r\n+    this.charts.consumption = new Chart(ctx, {\r\n+      type: \"line\",\r\n+      data: {\r\n+        labels: trendData.map((d) => d.month),\r\n+        datasets: [\r\n+          {\r\n+            label: \"Consumption (kWh)\",\r\n+            data: trendData.map((d) => d.consumption),\r\n+            borderColor: \"#059669\",\r\n+            backgroundColor: \"rgba(5, 150, 105, 0.1)\",\r\n+            tension: 0.4,\r\n+            fill: true,\r\n+            pointRadius: isMobile ? 2 : isTablet ? 3 : 4,\r\n+            pointHoverRadius: isMobile ? 4 : isTablet ? 5 : 6,\r\n+            pointBackgroundColor: \"#ffffff\",\r\n+            pointBorderColor: \"#059669\",\r\n+            pointBorderWidth: isMobile ? 1 : 2,\r\n+          },\r\n+        ],\r\n+      },\r\n+      options: {\r\n+        responsive: true,\r\n+        maintainAspectRatio: false,\r\n+        interaction: {\r\n+          mode: \"nearest\",\r\n+          intersect: false,\r\n+          axis: \"x\",\r\n+        },\r\n+        plugins: {\r\n+          legend: {\r\n+            display: false,\r\n+          },\r\n+          tooltip: {\r\n+            enabled: true,\r\n+            backgroundColor: \"white\",\r\n+            titleColor: \"#1f2937\",\r\n+            bodyColor: \"#4b5563\",\r\n+            borderColor: \"#e5e7eb\",\r\n+            borderWidth: 1,\r\n+            padding: isMobile ? 8 : 12,\r\n+            titleFont: {\r\n+              size: isMobile ? 12 : 14,\r\n+              weight: \"bold\",\r\n+            },\r\n+            bodyFont: {\r\n+              size: isMobile ? 11 : 13,\r\n+            },\r\n+            displayColors: false,\r\n+          },\r\n+        },\r\n+        scales: {\r\n+          x: {\r\n+            grid: {\r\n+              display: false,\r\n+            },\r\n+            ticks: {\r\n+              font: {\r\n+                size: isMobile ? 10 : isTablet ? 11 : 12,\r\n+              },\r\n+            },\r\n+          },\r\n+          y: {\r\n+            beginAtZero: true,\r\n+            grid: {\r\n+              color: \"rgba(0, 0, 0, 0.05)\",\r\n+            },\r\n+            ticks: {\r\n+              font: {\r\n+                size: isMobile ? 10 : isTablet ? 11 : 12,\r\n+              },\r\n+            },\r\n+          },\r\n+        },\r\n+      },\r\n+    });\r\n+\r\n+    // Add resize handler\r\n+    window.addEventListener(\"resize\", this.handleResize.bind(this));\r\n+  }\r\n+\r\n+  handleResize() {\r\n+    clearTimeout(this.resizeTimeout);\r\n+    this.resizeTimeout = setTimeout(() => {\r\n+      if (this.charts.consumption) {\r\n+        this.charts.consumption.resize();\r\n+      }\r\n+    }, 250);\r\n+  }\r\n+\r\n+  startInsightAnimations() {\r\n+    // First init the counters\r\n+    this.initCountUps();\r\n+\r\n+    gsap.to(\"#insights-header\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      ease: \"power2.out\",\r\n+    });\r\n+\r\n+    gsap.to(\"#progress-tracker\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      delay: 0.2,\r\n+      ease: \"power2.out\",\r\n+    });\r\n+\r\n+    gsap.to(\"#consumption-card\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      delay: 0.4,\r\n+      ease: \"power2.out\",\r\n+    });\r\n+\r\n+    gsap.to(\".consumption-metric\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      stagger: 0.2,\r\n+      delay: 0.6,\r\n+      ease: \"power2.out\",\r\n+      onComplete: () => {\r\n+        // Start the counters after the cards animate in\r\n+        this.startCountUps();\r\n+      },\r\n+    });\r\n+\r\n+    gsap.to(\"#next-steps-card\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      delay: 1,\r\n+      ease: \"power2.out\",\r\n+    });\r\n+  }\r\n+\r\n+  // Utility methods\r\n+  formatCurrency(value) {\r\n+    return new Intl.NumberFormat(\"en-PK\", {\r\n+      style: \"currency\",\r\n+      currency: \"PKR\",\r\n+      minimumFractionDigits: 0,\r\n+      maximumFractionDigits: 0,\r\n+    }).format(value);\r\n+  }\r\n+\r\n+  calculateDueDays() {\r\n+    const dueDate = new Date(this.billData.dueDate);\r\n+    const today = new Date();\r\n+    const diffTime = Math.abs(dueDate - today);\r\n+    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n+  }\r\n+\r\n+  calculateBillProgress() {\r\n+    const daysInMonth = 30;\r\n+    const today = new Date();\r\n+    const billDate = new Date(this.billData.issueDate);\r\n+    const daysPassed = Math.ceil((today - billDate) / (1000 * 60 * 60 * 24));\r\n+    return Math.min((daysPassed / daysInMonth) * 100, 100);\r\n+  }\r\n+\r\n+  calculateEfficiency() {\r\n+    const avgConsumption = 500; // Example average consumption\r\n+    const efficiency = (this.billData.unitsConsumed / avgConsumption) * 100;\r\n+    return efficiency <= 100 ? \"High\" : \"Low\";\r\n+  }\r\n+\r\n+  formatChange(data) {\r\n+    const lastTwo = data.slice(-2);\r\n+    const change =\r\n+      ((lastTwo[1].consumption - lastTwo[0].consumption) /\r\n+        lastTwo[0].consumption) *\r\n+      100;\r\n+    return change.toFixed(1);\r\n+  }\r\n+\r\n+  attachEventListeners() {\r\n+    const quoteButton = document.getElementById(\"proceed-to-quote\");\r\n+    const mobileQuoteButton = document.getElementById(\r\n+      \"proceed-to-quote-mobile\"\r\n+    );\r\n+\r\n+    if (quoteButton) {\r\n+      quoteButton.addEventListener(\"click\", () => {\r\n+        window.router.push(\"/quote\");\r\n+      });\r\n+    }\r\n+\r\n+    if (mobileQuoteButton) {\r\n+      mobileQuoteButton.addEventListener(\"click\", () => {\r\n+        window.router.push(\"/quote\");\r\n+      });\r\n+    }\r\n+\r\n+    // Add touch event handlers for mobile\r\n+    if (this.isMobileDevice()) {\r\n+      const insightsContainer = document.getElementById(\"insights-container\");\r\n+      let startY = 0;\r\n+      let scrolling = false;\r\n+\r\n+      insightsContainer.addEventListener(\r\n+        \"touchstart\",\r\n+        (e) => {\r\n+          startY = e.touches[0].pageY;\r\n+        },\r\n+        { passive: true }\r\n+      );\r\n+\r\n+      insightsContainer.addEventListener(\r\n+        \"touchmove\",\r\n+        (e) => {\r\n+          if (!scrolling) {\r\n+            const currentY = e.touches[0].pageY;\r\n+            const diff = startY - currentY;\r\n+\r\n+            if (diff > 0) {\r\n+              // Scrolling up\r\n+              scrolling = true;\r\n+              gsap.to(insightsContainer, {\r\n+                height: \"85vh\",\r\n+                duration: 0.3,\r\n+                ease: \"power2.out\",\r\n+              });\r\n+            }\r\n+          }\r\n+        },\r\n+        { passive: true }\r\n+      );\r\n+    }\r\n+  }\r\n+}\r\n"
                },
                {
                    "date": 1731681168767,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -232,66 +232,58 @@\n   }\r\n \r\n   async startAnimation() {\r\n     if (this.error) {\r\n-      this.showError();\r\n-      return;\r\n+        this.showError();\r\n+        return;\r\n     }\r\n \r\n     const isMobile = this.isMobileDevice();\r\n-    const billPreviewContainer = document.getElementById(\r\n-      \"bill-preview-container\"\r\n-    );\r\n+    const billPreviewContainer = document.getElementById(\"bill-preview-container\");\r\n     const insightsContainer = document.getElementById(\"insights-container\");\r\n     const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n     const quoteResultPage = document.getElementById(\"quote-result-page\");\r\n-    const mobileNav = document.getElementById(\"mobile-nav\");\r\n \r\n     // Initial states\r\n     gsap.set([billPreviewContainer, loadingIndicator], {\r\n-      opacity: 0,\r\n+        opacity: 0,\r\n     });\r\n \r\n     if (isMobile) {\r\n-      // Mobile animation sequence\r\n-      gsap.set(billPreviewContainer, {\r\n-        opacity: 0,\r\n-        y: -20,\r\n-      });\r\n-      gsap.set(insightsContainer, {\r\n-        y: \"100%\",\r\n-      });\r\n+        // Mobile animation sequence\r\n+        gsap.set(billPreviewContainer, {\r\n+            y: -20,\r\n+        });\r\n \r\n-      const tl = gsap.timeline({\r\n-        defaults: { duration: 0.8, ease: \"power2.out\" },\r\n-      });\r\n+        const tl = gsap.timeline({\r\n+            defaults: { duration: 0.8, ease: \"power2.out\" },\r\n+        });\r\n \r\n-      await tl\r\n-        .to(billPreviewContainer, {\r\n-          opacity: 1,\r\n-          y: 0,\r\n-          duration: 1,\r\n-        })\r\n-        .to(loadingIndicator, {\r\n-          opacity: 1,\r\n-          scale: 1,\r\n-          duration: 0.5,\r\n-        })\r\n-        .to(loadingIndicator, {\r\n-          opacity: 0,\r\n-          scale: 0.5,\r\n-          delay: 0.5,\r\n-        })\r\n-        .to(insightsContainer, {\r\n-          visibility: \"visible\",\r\n-          y: \"0%\",\r\n-          duration: 0.8,\r\n-        })\r\n-        .to(mobileNav, {\r\n-          display: \"block\",\r\n-          opacity: 1,\r\n-          duration: 0.3,\r\n-        });\r\n+        await tl\r\n+            .to(billPreviewContainer, {\r\n+                opacity: 1,\r\n+                y: 0,\r\n+                duration: 1,\r\n+            })\r\n+            .to(loadingIndicator, {\r\n+                opacity: 1,\r\n+                scale: 1,\r\n+                duration: 0.5,\r\n+            })\r\n+            .to(loadingIndicator, {\r\n+                opacity: 0,\r\n+                scale: 0.5,\r\n+                delay: 0.5,\r\n+            })\r\n+            .call(() => {\r\n+                insightsContainer.style.visibility = \"visible\";\r\n+            })\r\n+            .to(insightsContainer, {\r\n+                y: \"0%\",\r\n+                duration: 0.8,\r\n+                ease: \"power4.out\"\r\n+            });\r\n+\r\n     } else {\r\n       // Desktop animation sequence (your existing animation)\r\n       gsap.set(billPreviewContainer, {\r\n         scale: 0.9,\r\n@@ -851,915 +843,4 @@\n       );\r\n     }\r\n   }\r\n }\r\n-// BillReviewPage.js\r\n-import { gsap } from \"gsap\";\r\n-import { getBillData } from \"../store/solarSizingState.js\";\r\n-import { BillPreview } from \"./BillPreview.js\";\r\n-import Chart from \"chart.js/auto\";\r\n-import { CountUp } from \"countup.js\";\r\n-\r\n-export class BillReviewPage {\r\n-  constructor() {\r\n-    this.billData = getBillData();\r\n-    this.charts = {};\r\n-  }\r\n-\r\n-  addScrollStyles() {\r\n-    const style = document.createElement(\"style\");\r\n-    style.textContent = `\r\n-        .custom-scrollbar {\r\n-            scrollbar-width: thin;\r\n-            scrollbar-color: rgba(0, 0, 0, 0.2) transparent;\r\n-        }\r\n-\r\n-        .custom-scrollbar::-webkit-scrollbar {\r\n-            width: 6px;\r\n-        }\r\n-\r\n-        .custom-scrollbar::-webkit-scrollbar-track {\r\n-            background: transparent;\r\n-        }\r\n-\r\n-        .custom-scrollbar::-webkit-scrollbar-thumb {\r\n-            background-color: rgba(0, 0, 0, 0.2);\r\n-            border-radius: 3px;\r\n-        }\r\n-\r\n-        .custom-scrollbar::-webkit-scrollbar-thumb:hover {\r\n-            background-color: rgba(0, 0, 0, 0.3);\r\n-        }\r\n-    `;\r\n-    document.head.appendChild(style);\r\n-  }\r\n-\r\n-  // Update the main container structure in render method\r\n-  render() {\r\n-    const app = document.getElementById(\"app\");\r\n-    const trendData = this.generateTrendData();\r\n-\r\n-    app.innerHTML = `\r\n-    <div class=\"h-screen w-full overflow-hidden bg-white transition-colors duration-1000 opacity-0\" id=\"quote-result-page\">\r\n-        <div class=\"h-full w-full flex relative\" id=\"main-content\">\r\n-            <!-- Bill Preview Side -->\r\n-            <div class=\"w-1/2 h-full overflow-hidden opacity-0\" id=\"bill-preview-container\">\r\n-                <div id=\"bill-preview\" class=\"h-full\"></div>\r\n-            </div>\r\n-\r\n-            <!-- Loading Indicator -->\r\n-            <div class=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center z-10\" \r\n-                 id=\"loading-indicator\">\r\n-                <div class=\"loading-spinner\"></div>\r\n-                <p class=\"text-emerald-600 font-medium\">Analyzing your bill...</p>\r\n-            </div>\r\n-\r\n-            <!-- Insights Side -->\r\n-            <div class=\"w-1/2 h-full invisible\" id=\"insights-container\">\r\n-                <div class=\"h-full flex flex-col p-2 sm:p-4 lg:p-6 xl:p-8\">\r\n-                    <!-- Top Section: Fixed Height -->\r\n-                    <div class=\"flex-none space-y-3 sm:space-y-4 lg:space-y-5\">\r\n-                        <!-- Header Section -->\r\n-                        <div class=\"opacity-0\" id=\"insights-header\">\r\n-                            <div class=\"flex items-center gap-3 sm:gap-4\">\r\n-                                <div class=\"flex-shrink-0\">\r\n-                                    <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-600 flex items-center justify-center\">\r\n-                                        <svg class=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n-                                        </svg>\r\n-                                    </div>\r\n-                                </div>\r\n-                                <div>\r\n-                                    <h2 class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">Bill Analysis</h2>\r\n-                                    <p class=\"text-xs sm:text-sm lg:text-base text-gray-500\">Understanding your consumption</p>\r\n-                                </div>\r\n-                            </div>\r\n-                        </div>\r\n-\r\n-                        <!-- Progress Tracker -->\r\n-                        <div class=\"bg-white/70 backdrop-blur rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 opacity-0\" id=\"progress-tracker\">\r\n-                            <div class=\"flex justify-between items-center\">\r\n-                                <div class=\"flex items-center gap-3\">\r\n-                                    <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-emerald-600 flex items-center justify-center text-white font-semibold text-sm sm:text-base\">1</div>\r\n-                                    <div>\r\n-                                        <p class=\"font-semibold text-gray-900 text-sm sm:text-base\">Bill Review</p>\r\n-                                        <p class=\"text-xs sm:text-sm text-gray-500\">Analyzing patterns</p>\r\n-                                    </div>\r\n-                                </div>\r\n-                                <div class=\"h-0.5 w-16 sm:w-24 bg-gray-200\"></div>\r\n-                                <div class=\"flex items-center gap-3\">\r\n-                                    <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm sm:text-base\">2</div>\r\n-                                    <div>\r\n-                                        <p class=\"font-semibold text-gray-400 text-sm sm:text-base\">Solar Quote</p>\r\n-                                        <p class=\"text-xs sm:text-sm text-gray-400\">Up next</p>\r\n-                                    </div>\r\n-                                </div>\r\n-                            </div>\r\n-                        </div>\r\n-                    </div>\r\n-\r\n-                    <!-- Main Content Area: Flexible Height -->\r\n-                    <div class=\"flex-1 min-h-0 mt-3 sm:mt-4 lg:mt-5\">\r\n-                        <div class=\"h-full grid grid-rows-[auto_1fr_auto] gap-3 sm:gap-4 lg:gap-5\">\r\n-                            <!-- Consumption Analysis Card -->\r\n-                            <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 opacity-0\" id=\"consumption-card\">\r\n-                                <div class=\"flex justify-between items-center mb-2 sm:mb-3\">\r\n-                                    <h3 class=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n-                                    <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs sm:text-sm font-medium\">\r\n-                                        ${this.formatChange(\r\n-                                          trendData\r\n-                                        )}% vs last month\r\n-                                    </div>\r\n-                                </div>\r\n-                                <div class=\"h-[150px] sm:h-[180px] lg:h-[200px] xl:h-[220px]\">\r\n-                                    <canvas id=\"consumption-trend-chart\"></canvas>\r\n-                                </div>\r\n-                            </div>\r\n-\r\n-                            <!-- Metrics Cards -->\r\n-                            <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 lg:gap-5\">\r\n-                                <!-- Current Bill Card -->\r\n-                                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 opacity-0 consumption-metric h-auto\">\r\n-                                    <div class=\"flex items-center justify-between mb-2\">\r\n-                                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n-                                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n-                                            </svg>\r\n-                                        </div>\r\n-                                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n-                                    </div>\r\n-                                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Current Bill</p>\r\n-                                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\" id=\"bill-amount\">${this.formatCurrency(\r\n-                                      this.billData.amount\r\n-                                    )}</p>\r\n-                                    <div class=\"mt-3 h-1 bg-gray-100 rounded\">\r\n-                                        <div class=\"h-full bg-emerald-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n-                                    </div>\r\n-                                </div>\r\n-\r\n-                                <!-- Units Consumed Card -->\r\n-                                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 opacity-0 consumption-metric h-auto\">\r\n-                                    <div class=\"flex items-center justify-between mb-2\">\r\n-                                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n-                                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n-                                            </svg>\r\n-                                        </div>\r\n-                                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">\r\n-                                            ${this.calculateEfficiency()} efficiency\r\n-                                        </span>\r\n-                                    </div>\r\n-                                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n-                                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\" id=\"units-consumed\">${\r\n-                                      this.billData.unitsConsumed\r\n-                                    } kWh</p>\r\n-                                    <p class=\"text-xs sm:text-sm text-gray-500 mt-2\">Rate: ${this.formatCurrency(\r\n-                                      this.billData.ratePerUnit\r\n-                                    )}/kWh</p>\r\n-                                </div>\r\n-                            </div>\r\n-\r\n-                            <!-- Next Steps Card -->\r\n-                            <div class=\"sm:col-span-2\">\r\n-                                <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 relative opacity-0\" id=\"next-steps-card\">\r\n-                                    <div class=\"absolute -top-2 -right-2\">\r\n-                                        <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n-                                            <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n-                                            </svg>\r\n-                                        </div>\r\n-                                    </div>\r\n-                                    <div class=\"max-w-lg\">\r\n-                                        <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n-                                        <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n-                                            We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n-                                        </p>\r\n-                                        <button \r\n-                                            id=\"proceed-to-quote\" \r\n-                                            class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n-                                                   transition-all duration-300 shadow-sm hover:shadow-lg\r\n-                                                   flex items-center justify-center gap-2 group\"\r\n-                                        >\r\n-                                            Generate My Solar Quote\r\n-                                            <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n-                                            </svg>\r\n-                                        </button>\r\n-                                    </div>\r\n-                                </div>\r\n-                            </div>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-        </div>\r\n-    </div>\r\n-`;\r\n-\r\n-    this.attachBaseStyles();\r\n-\r\n-    // Use requestAnimationFrame to ensure styles are applied before starting\r\n-    requestAnimationFrame(() => {\r\n-      requestAnimationFrame(() => {\r\n-        // Make container visible\r\n-        const container = document.getElementById(\"quote-result-page\");\r\n-        if (container) {\r\n-          container.classList.remove(\"opacity-0\");\r\n-        }\r\n-\r\n-        // Now render bill preview and start animation\r\n-        this.renderBillPreview();\r\n-        this.startAnimation().catch((error) => {\r\n-          console.error(\"Animation failed:\", error);\r\n-          this.showError();\r\n-        });\r\n-      });\r\n-    });\r\n-  }\r\n-\r\n-  isMobileDevice() {\r\n-    return window.innerWidth < 768; // You can adjust this breakpoint\r\n-  }\r\n-\r\n-  getTrendChangeText() {\r\n-    const trendData = this.generateTrendData();\r\n-    return `${this.formatChange(trendData)}% vs last month`;\r\n-  }\r\n-\r\n-  async startAnimation() {\r\n-    if (this.error) {\r\n-      this.showError();\r\n-      return;\r\n-    }\r\n-\r\n-    const isMobile = this.isMobileDevice();\r\n-    const billPreviewContainer = document.getElementById(\r\n-      \"bill-preview-container\"\r\n-    );\r\n-    const insightsContainer = document.getElementById(\"insights-container\");\r\n-    const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n-    const quoteResultPage = document.getElementById(\"quote-result-page\");\r\n-    const mobileNav = document.getElementById(\"mobile-nav\");\r\n-\r\n-    // Initial states\r\n-    gsap.set([billPreviewContainer, loadingIndicator], {\r\n-      opacity: 0,\r\n-    });\r\n-\r\n-    if (isMobile) {\r\n-      // Mobile animation sequence\r\n-      gsap.set(billPreviewContainer, {\r\n-        opacity: 0,\r\n-        y: -20,\r\n-      });\r\n-      gsap.set(insightsContainer, {\r\n-        y: \"100%\",\r\n-      });\r\n-\r\n-      const tl = gsap.timeline({\r\n-        defaults: { duration: 0.8, ease: \"power2.out\" },\r\n-      });\r\n-\r\n-      await tl\r\n-        .to(billPreviewContainer, {\r\n-          opacity: 1,\r\n-          y: 0,\r\n-          duration: 1,\r\n-        })\r\n-        .to(loadingIndicator, {\r\n-          opacity: 1,\r\n-          scale: 1,\r\n-          duration: 0.5,\r\n-        })\r\n-        .to(loadingIndicator, {\r\n-          opacity: 0,\r\n-          scale: 0.5,\r\n-          delay: 0.5,\r\n-        })\r\n-        .to(insightsContainer, {\r\n-          visibility: \"visible\",\r\n-          y: \"0%\",\r\n-          duration: 0.8,\r\n-        })\r\n-        .to(mobileNav, {\r\n-          display: \"block\",\r\n-          opacity: 1,\r\n-          duration: 0.3,\r\n-        });\r\n-    } else {\r\n-      // Desktop animation sequence (your existing animation)\r\n-      gsap.set(billPreviewContainer, {\r\n-        scale: 0.9,\r\n-        position: \"absolute\",\r\n-        left: \"50%\",\r\n-        top: \"50%\",\r\n-        xPercent: -50,\r\n-        yPercent: -50,\r\n-        width: \"47.5%\",\r\n-      });\r\n-\r\n-      const tl = gsap.timeline({\r\n-        defaults: { duration: 0.8, ease: \"power2.out\" },\r\n-      });\r\n-\r\n-      await tl\r\n-        .to(billPreviewContainer, {\r\n-          opacity: 1,\r\n-          scale: 1,\r\n-          duration: 1,\r\n-        })\r\n-        .to(loadingIndicator, {\r\n-          opacity: 1,\r\n-          scale: 1,\r\n-          duration: 0.5,\r\n-        })\r\n-        .to(loadingIndicator, {\r\n-          opacity: 0,\r\n-          scale: 0.5,\r\n-          delay: 1,\r\n-        })\r\n-        .to(\r\n-          billPreviewContainer,\r\n-          {\r\n-            left: \"0%\",\r\n-            top: \"0%\",\r\n-            xPercent: 0,\r\n-            yPercent: 0,\r\n-            width: \"50%\",\r\n-            position: \"relative\",\r\n-          },\r\n-          \"-=0.3\"\r\n-        )\r\n-        .call(() => {\r\n-          insightsContainer.style.visibility = \"visible\";\r\n-        })\r\n-        .to(insightsContainer, {\r\n-          opacity: 1,\r\n-          duration: 0.5,\r\n-        });\r\n-    }\r\n-\r\n-    // Render insights after animations\r\n-    this.renderInsights();\r\n-  }\r\n-\r\n-  attachBaseStyles() {\r\n-    const style = document.createElement(\"style\");\r\n-    style.textContent = this.getBaseStyles();\r\n-    document.head.appendChild(style);\r\n-  }\r\n-\r\n-  getBaseStyles() {\r\n-    return `\r\n-      /* Base Theme Colors */\r\n-      :root {\r\n-        --color-primary: #3b82f6;\r\n-        --color-primary-dark: #2563eb;\r\n-        --color-primary-light: #93c5fd;\r\n-        --color-success: #10b981;\r\n-        --color-warning: #f59e0b;\r\n-        --color-error: #ef4444;\r\n-        --color-gray-50: #f8fafc;\r\n-        --color-gray-100: #f1f5f9;\r\n-        --color-gray-200: #e2e8f0;\r\n-        --color-gray-300: #cbd5e1;\r\n-        --color-gray-400: #94a3b8;\r\n-        --color-gray-500: #64748b;\r\n-        --color-gray-600: #475569;\r\n-        --color-gray-700: #334155;\r\n-        --color-gray-800: #1e293b;\r\n-        --color-gray-900: #0f172a;\r\n-      }\r\n-\r\n-      /* Loading Spinner */\r\n-      .loading-spinner {\r\n-        width: 40px;\r\n-        height: 40px;\r\n-        border: 4px solid var(--color-gray-200);\r\n-        border-left-color: var(--color-primary);\r\n-        border-radius: 50%;\r\n-        animation: spin 1s linear infinite;\r\n-      }\r\n-\r\n-      @keyframes spin {\r\n-        to { transform: rotate(360deg); }\r\n-      }\r\n-\r\n-      /* Card Styles */\r\n-      .insight-card {\r\n-        background: white;\r\n-        border-radius: 1rem;\r\n-        box-shadow: 0 1px 3px rgba(0,0,0,0.1);\r\n-        transition: all 0.3s ease;\r\n-        border: 1px solid var(--color-gray-100);\r\n-      }\r\n-\r\n-      .insight-card:hover {\r\n-        transform: translateY(-2px);\r\n-        box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);\r\n-      }\r\n-\r\n-      /* Glass Effect */\r\n-      .glass-effect {\r\n-        background: rgba(255, 255, 255, 0.7);\r\n-        backdrop-filter: blur(10px);\r\n-        border: 1px solid rgba(255, 255, 255, 0.3);\r\n-      }\r\n-\r\n-      /* Custom Scrollbar */\r\n-      .custom-scrollbar {\r\n-        scrollbar-width: thin;\r\n-        scrollbar-color: var(--color-gray-300) transparent;\r\n-      }\r\n-\r\n-      .custom-scrollbar::-webkit-scrollbar {\r\n-        width: 6px;\r\n-      }\r\n-\r\n-      .custom-scrollbar::-webkit-scrollbar-track {\r\n-        background: transparent;\r\n-      }\r\n-\r\n-      .custom-scrollbar::-webkit-scrollbar-thumb {\r\n-        background-color: var(--color-gray-300);\r\n-        border-radius: 3px;\r\n-      }\r\n-\r\n-      /* Progress Bar */\r\n-      .progress-step {\r\n-        position: relative;\r\n-        z-index: 1;\r\n-      }\r\n-\r\n-      .progress-step::after {\r\n-        content: '';\r\n-        position: absolute;\r\n-        top: 50%;\r\n-        left: 100%;\r\n-        width: 100%;\r\n-        height: 2px;\r\n-        background: var(--color-gray-200);\r\n-        transform: translateY(-50%);\r\n-      }\r\n-\r\n-      .progress-step.active::after {\r\n-        background: var(--color-primary);\r\n-      }\r\n-\r\n-      /* Animated Gradients */\r\n-      .animated-gradient {\r\n-        background: linear-gradient(\r\n-          45deg,\r\n-          var(--color-primary),\r\n-          var(--color-primary-dark),\r\n-          var(--color-primary)\r\n-        );\r\n-        background-size: 200% 200%;\r\n-        animation: gradient 15s ease infinite;\r\n-      }\r\n-\r\n-      @keyframes gradient {\r\n-        0% { background-position: 0% 50%; }\r\n-        50% { background-position: 100% 50%; }\r\n-        100% { background-position: 0% 50%; }\r\n-      }\r\n-\r\n-      /* Responsive Design */\r\n-      @media (max-width: 1024px) {\r\n-        .insight-card {\r\n-          padding: 1rem;\r\n-        }\r\n-      }\r\n-\r\n-      @media (max-width: 768px) {\r\n-        #main-content {\r\n-          flex-direction: column;\r\n-        }\r\n-\r\n-        #bill-preview-container,\r\n-        #insights-container {\r\n-          width: 100%;\r\n-          height: 50%;\r\n-        }\r\n-      }\r\n-\r\n-      /* Chart Tooltips */\r\n-      .chart-tooltip {\r\n-        background: rgba(255, 255, 255, 0.95) !important;\r\n-        backdrop-filter: blur(4px);\r\n-        border: 1px solid var(--color-gray-200) !important;\r\n-        border-radius: 0.5rem !important;\r\n-        padding: 0.75rem !important;\r\n-        box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1) !important;\r\n-      }\r\n-    `;\r\n-  }\r\n-\r\n-  initCountUps() {\r\n-    const countUpOptions = {\r\n-      duration: 2,\r\n-      useEasing: true,\r\n-      useGrouping: true,\r\n-    };\r\n-\r\n-    // Initialize counters for the bill amounts and units\r\n-    this.countUps = {\r\n-      billAmount: new CountUp(\"bill-amount\", this.billData.totalAmount, {\r\n-        ...countUpOptions,\r\n-        prefix: \"PKR \",\r\n-      }),\r\n-      unitsConsumed: new CountUp(\r\n-        \"units-consumed\",\r\n-        this.billData.unitsConsumed,\r\n-        {\r\n-          ...countUpOptions,\r\n-          suffix: \" kWh\",\r\n-        }\r\n-      ),\r\n-    };\r\n-  }\r\n-\r\n-  startCountUps() {\r\n-    Object.values(this.countUps).forEach((counter) => {\r\n-      if (counter && !counter.error) {\r\n-        counter.start();\r\n-      }\r\n-    });\r\n-  }\r\n-\r\n-  renderBillPreview() {\r\n-    if (!this.billData) {\r\n-      console.error(\"Bill data is not available\");\r\n-      this.renderError(document.getElementById(\"app\"));\r\n-      return;\r\n-    }\r\n-\r\n-    const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n-    if (!billPreviewContainer) {\r\n-      console.error(\"Bill preview container not found\");\r\n-      return;\r\n-    }\r\n-\r\n-    const billPreview = new BillPreview(this.billData);\r\n-    billPreview.render(billPreviewContainer);\r\n-  }\r\n-\r\n-  renderError(container) {\r\n-    container.innerHTML = `\r\n-        <div class=\"flex items-center justify-center h-screen\">\r\n-            <div class=\"text-center\">\r\n-                <h2 class=\"text-xl font-semibold text-gray-800 mb-2\">Error</h2>\r\n-                <p class=\"text-gray-600\">Bill data is not available. Please try again.</p>\r\n-                <button onclick=\"window.router.push('/')\" \r\n-                        class=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors\">\r\n-                    Go Back\r\n-                </button>\r\n-            </div>\r\n-        </div>\r\n-    `;\r\n-  }\r\n-\r\n-  renderInsights() {\r\n-    const insightsContainer = document.querySelector(\"#insights-container\");\r\n-    if (!insightsContainer) return;\r\n-\r\n-    // Generate trend data for the last 6 months\r\n-    const trendData = this.generateTrendData();\r\n-\r\n-    insightsContainer.innerHTML = `\r\n-        <div class=\"h-full flex flex-col p-2 sm:p-4 lg:p-6 overflow-auto\">\r\n-            <!-- Header Section -->\r\n-            <div class=\"flex-none mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"insights-header\">\r\n-                <div class=\"flex items-center gap-3 sm:gap-4\">\r\n-                    <div class=\"flex-shrink-0\">\r\n-                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-600 flex items-center justify-center\">\r\n-                            <svg class=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n-                            </svg>\r\n-                        </div>\r\n-                    </div>\r\n-                    <div>\r\n-                        <h2 class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">Bill Analysis</h2>\r\n-                        <p class=\"text-xs sm:text-sm lg:text-base text-gray-500\">Understanding your consumption</p>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-\r\n-            <!-- Progress Tracker -->\r\n-            <div class=\"bg-white/70 backdrop-blur rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"progress-tracker\">\r\n-                <div class=\"flex justify-between items-center\">\r\n-                    <div class=\"flex items-center gap-3\">\r\n-                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-emerald-600 flex items-center justify-center text-white font-semibold text-sm sm:text-base\">1</div>\r\n-                        <div>\r\n-                            <p class=\"font-semibold text-gray-900 text-sm sm:text-base\">Bill Review</p>\r\n-                            <p class=\"text-xs sm:text-sm text-gray-500\">Analyzing patterns</p>\r\n-                        </div>\r\n-                    </div>\r\n-                    <div class=\"h-0.5 w-16 sm:w-24 bg-gray-200\"></div>\r\n-                    <div class=\"flex items-center gap-3\">\r\n-                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm sm:text-base\">2</div>\r\n-                        <div>\r\n-                            <p class=\"font-semibold text-gray-400 text-sm sm:text-base\">Solar Quote</p>\r\n-                            <p class=\"text-xs sm:text-sm text-gray-400\">Up next</p>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-\r\n-            <!-- Content Grid -->\r\n-            <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 lg:gap-6 flex-1\">\r\n-                <!-- Consumption Analysis Card -->\r\n-                <div class=\"sm:col-span-2 bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0\" id=\"consumption-card\">\r\n-                    <div class=\"flex justify-between items-center mb-3 sm:mb-4\">\r\n-                        <h3 class=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n-                        <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs sm:text-sm font-medium\">\r\n-                            ${this.formatChange(trendData)}% vs last month\r\n-                        </div>\r\n-                    </div>\r\n-                    <div class=\"h-[200px] sm:h-[250px]\">\r\n-                        <canvas id=\"consumption-trend-chart\"></canvas>\r\n-                    </div>\r\n-                </div>\r\n-\r\n-                <!-- Current Bill Card -->\r\n-                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n-                    <div class=\"flex items-center justify-between mb-2\">\r\n-                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n-                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n-                            </svg>\r\n-                        </div>\r\n-                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n-                    </div>\r\n-                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Current Bill</p>\r\n-                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${this.formatCurrency(\r\n-                      this.billData.totalAmount\r\n-                    )}</p>\r\n-                    <div class=\"mt-4 h-1 bg-gray-100 rounded\">\r\n-                        <div class=\"h-full bg-emerald-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n-                    </div>\r\n-                </div>\r\n-\r\n-                <!-- Units Consumed Card -->\r\n-                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n-                    <div class=\"flex items-center justify-between mb-2\">\r\n-                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n-                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n-                            </svg>\r\n-                        </div>\r\n-                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">\r\n-                            ${this.calculateEfficiency()} efficiency\r\n-                        </span>\r\n-                    </div>\r\n-                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n-                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${\r\n-                      this.billData.unitsConsumed\r\n-                    } kWh</p>\r\n-                    <p class=\"text-xs sm:text-sm text-gray-500 mt-2\">Rate: ${this.formatCurrency(\r\n-                      this.billData.ratePerUnit\r\n-                    )}/kWh</p>\r\n-                </div>\r\n-\r\n-                <!-- Next Steps Card -->\r\n-                <div class=\"sm:col-span-2 mt-auto\">\r\n-                    <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n-                        <div class=\"absolute -top-2 -right-2\">\r\n-                            <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n-                                <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n-                                </svg>\r\n-                            </div>\r\n-                        </div>\r\n-                        <div class=\"max-w-lg\">\r\n-                            <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n-                            <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n-                                We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n-                            </p>\r\n-                            <button \r\n-                                id=\"proceed-to-quote\" \r\n-                                class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n-                                       transition-all duration-300 shadow-sm hover:shadow-lg\r\n-                                       flex items-center justify-center gap-2 group\"\r\n-                            >\r\n-                                Generate My Solar Quote\r\n-                                <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n-                                </svg>\r\n-                            </button>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-        </div>\r\n-    `;\r\n-\r\n-    // Update the chart colors in initializeCharts\r\n-    this.initializeCharts(trendData);\r\n-    this.startInsightAnimations();\r\n-    this.attachEventListeners();\r\n-  }\r\n-\r\n-  generateTrendData() {\r\n-    const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\"];\r\n-    return months.map((month) => ({\r\n-      month,\r\n-      consumption: Math.floor(\r\n-        this.billData.unitsConsumed * (0.8 + Math.random() * 0.4)\r\n-      ),\r\n-    }));\r\n-  }\r\n-\r\n-  initializeCharts(trendData) {\r\n-    const ctx = document.getElementById(\"consumption-trend-chart\");\r\n-    if (!ctx) return;\r\n-\r\n-    const isMobile = window.innerWidth < 640;\r\n-    const isTablet = window.innerWidth < 1024;\r\n-\r\n-    this.charts.consumption = new Chart(ctx, {\r\n-      type: \"line\",\r\n-      data: {\r\n-        labels: trendData.map((d) => d.month),\r\n-        datasets: [\r\n-          {\r\n-            label: \"Consumption (kWh)\",\r\n-            data: trendData.map((d) => d.consumption),\r\n-            borderColor: \"#059669\",\r\n-            backgroundColor: \"rgba(5, 150, 105, 0.1)\",\r\n-            tension: 0.4,\r\n-            fill: true,\r\n-            pointRadius: isMobile ? 2 : isTablet ? 3 : 4,\r\n-            pointHoverRadius: isMobile ? 4 : isTablet ? 5 : 6,\r\n-            pointBackgroundColor: \"#ffffff\",\r\n-            pointBorderColor: \"#059669\",\r\n-            pointBorderWidth: isMobile ? 1 : 2,\r\n-          },\r\n-        ],\r\n-      },\r\n-      options: {\r\n-        responsive: true,\r\n-        maintainAspectRatio: false,\r\n-        interaction: {\r\n-          mode: \"nearest\",\r\n-          intersect: false,\r\n-          axis: \"x\",\r\n-        },\r\n-        plugins: {\r\n-          legend: {\r\n-            display: false,\r\n-          },\r\n-          tooltip: {\r\n-            enabled: true,\r\n-            backgroundColor: \"white\",\r\n-            titleColor: \"#1f2937\",\r\n-            bodyColor: \"#4b5563\",\r\n-            borderColor: \"#e5e7eb\",\r\n-            borderWidth: 1,\r\n-            padding: isMobile ? 8 : 12,\r\n-            titleFont: {\r\n-              size: isMobile ? 12 : 14,\r\n-              weight: \"bold\",\r\n-            },\r\n-            bodyFont: {\r\n-              size: isMobile ? 11 : 13,\r\n-            },\r\n-            displayColors: false,\r\n-          },\r\n-        },\r\n-        scales: {\r\n-          x: {\r\n-            grid: {\r\n-              display: false,\r\n-            },\r\n-            ticks: {\r\n-              font: {\r\n-                size: isMobile ? 10 : isTablet ? 11 : 12,\r\n-              },\r\n-            },\r\n-          },\r\n-          y: {\r\n-            beginAtZero: true,\r\n-            grid: {\r\n-              color: \"rgba(0, 0, 0, 0.05)\",\r\n-            },\r\n-            ticks: {\r\n-              font: {\r\n-                size: isMobile ? 10 : isTablet ? 11 : 12,\r\n-              },\r\n-            },\r\n-          },\r\n-        },\r\n-      },\r\n-    });\r\n-\r\n-    // Add resize handler\r\n-    window.addEventListener(\"resize\", this.handleResize.bind(this));\r\n-  }\r\n-\r\n-  handleResize() {\r\n-    clearTimeout(this.resizeTimeout);\r\n-    this.resizeTimeout = setTimeout(() => {\r\n-      if (this.charts.consumption) {\r\n-        this.charts.consumption.resize();\r\n-      }\r\n-    }, 250);\r\n-  }\r\n-\r\n-  startInsightAnimations() {\r\n-    // First init the counters\r\n-    this.initCountUps();\r\n-\r\n-    gsap.to(\"#insights-header\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-\r\n-    gsap.to(\"#progress-tracker\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      delay: 0.2,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-\r\n-    gsap.to(\"#consumption-card\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      delay: 0.4,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-\r\n-    gsap.to(\".consumption-metric\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      stagger: 0.2,\r\n-      delay: 0.6,\r\n-      ease: \"power2.out\",\r\n-      onComplete: () => {\r\n-        // Start the counters after the cards animate in\r\n-        this.startCountUps();\r\n-      },\r\n-    });\r\n-\r\n-    gsap.to(\"#next-steps-card\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      delay: 1,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-  }\r\n-\r\n-  // Utility methods\r\n-  formatCurrency(value) {\r\n-    return new Intl.NumberFormat(\"en-PK\", {\r\n-      style: \"currency\",\r\n-      currency: \"PKR\",\r\n-      minimumFractionDigits: 0,\r\n-      maximumFractionDigits: 0,\r\n-    }).format(value);\r\n-  }\r\n-\r\n-  calculateDueDays() {\r\n-    const dueDate = new Date(this.billData.dueDate);\r\n-    const today = new Date();\r\n-    const diffTime = Math.abs(dueDate - today);\r\n-    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n-  }\r\n-\r\n-  calculateBillProgress() {\r\n-    const daysInMonth = 30;\r\n-    const today = new Date();\r\n-    const billDate = new Date(this.billData.issueDate);\r\n-    const daysPassed = Math.ceil((today - billDate) / (1000 * 60 * 60 * 24));\r\n-    return Math.min((daysPassed / daysInMonth) * 100, 100);\r\n-  }\r\n-\r\n-  calculateEfficiency() {\r\n-    const avgConsumption = 500; // Example average consumption\r\n-    const efficiency = (this.billData.unitsConsumed / avgConsumption) * 100;\r\n-    return efficiency <= 100 ? \"High\" : \"Low\";\r\n-  }\r\n-\r\n-  formatChange(data) {\r\n-    const lastTwo = data.slice(-2);\r\n-    const change =\r\n-      ((lastTwo[1].consumption - lastTwo[0].consumption) /\r\n-        lastTwo[0].consumption) *\r\n-      100;\r\n-    return change.toFixed(1);\r\n-  }\r\n-\r\n-  attachEventListeners() {\r\n-    const quoteButton = document.getElementById(\"proceed-to-quote\");\r\n-    if (quoteButton) {\r\n-      quoteButton.addEventListener(\"click\", () => {\r\n-        window.router.push(\"/quote\");\r\n-      });\r\n-    }\r\n-  }\r\n-}\r\n"
                },
                {
                    "date": 1731681190091,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -230,60 +230,106 @@\n     const trendData = this.generateTrendData();\r\n     return `${this.formatChange(trendData)}% vs last month`;\r\n   }\r\n \r\n+  initializeMobileInteractions() {\r\n+    const insightsContainer = document.getElementById(\"insights-container\");\r\n+    let startY = 0;\r\n+    let currentY = 0;\r\n+    let initialHeight = \"60vh\";\r\n+    let expandedHeight = \"92vh\";\r\n+\r\n+    // Handle drag to expand/collapse\r\n+    const handleTouchStart = (e) => {\r\n+      startY = e.touches[0].clientY;\r\n+      currentY = insightsContainer.getBoundingClientRect().height;\r\n+    };\r\n+\r\n+    const handleTouchMove = (e) => {\r\n+      const deltaY = startY - e.touches[0].clientY;\r\n+      const newHeight = Math.max(\r\n+        Math.min(currentY + deltaY, window.innerHeight * 0.92),\r\n+        window.innerHeight * 0.3\r\n+      );\r\n+\r\n+      gsap.to(insightsContainer, {\r\n+        height: newHeight,\r\n+        duration: 0.1,\r\n+        ease: \"none\",\r\n+      });\r\n+    };\r\n+\r\n+    const handleTouchEnd = (e) => {\r\n+      const finalHeight = insightsContainer.getBoundingClientRect().height;\r\n+      const threshold = window.innerHeight * 0.6;\r\n+\r\n+      gsap.to(insightsContainer, {\r\n+        height: finalHeight > threshold ? expandedHeight : initialHeight,\r\n+        duration: 0.3,\r\n+        ease: \"power2.out\",\r\n+      });\r\n+    };\r\n+\r\n+    // Add touch event listeners\r\n+    const dragHandle = insightsContainer.querySelector(\"div:first-child\");\r\n+    dragHandle.addEventListener(\"touchstart\", handleTouchStart);\r\n+    dragHandle.addEventListener(\"touchmove\", handleTouchMove);\r\n+    dragHandle.addEventListener(\"touchend\", handleTouchEnd);\r\n+  }\r\n+\r\n   async startAnimation() {\r\n     if (this.error) {\r\n-        this.showError();\r\n-        return;\r\n+      this.showError();\r\n+      return;\r\n     }\r\n \r\n     const isMobile = this.isMobileDevice();\r\n-    const billPreviewContainer = document.getElementById(\"bill-preview-container\");\r\n+    const billPreviewContainer = document.getElementById(\r\n+      \"bill-preview-container\"\r\n+    );\r\n     const insightsContainer = document.getElementById(\"insights-container\");\r\n     const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n     const quoteResultPage = document.getElementById(\"quote-result-page\");\r\n \r\n     // Initial states\r\n     gsap.set([billPreviewContainer, loadingIndicator], {\r\n-        opacity: 0,\r\n+      opacity: 0,\r\n     });\r\n \r\n     if (isMobile) {\r\n-        // Mobile animation sequence\r\n-        gsap.set(billPreviewContainer, {\r\n-            y: -20,\r\n-        });\r\n+      // Mobile animation sequence\r\n+      gsap.set(billPreviewContainer, {\r\n+        y: -20,\r\n+      });\r\n \r\n-        const tl = gsap.timeline({\r\n-            defaults: { duration: 0.8, ease: \"power2.out\" },\r\n+      const tl = gsap.timeline({\r\n+        defaults: { duration: 0.8, ease: \"power2.out\" },\r\n+      });\r\n+\r\n+      await tl\r\n+        .to(billPreviewContainer, {\r\n+          opacity: 1,\r\n+          y: 0,\r\n+          duration: 1,\r\n+        })\r\n+        .to(loadingIndicator, {\r\n+          opacity: 1,\r\n+          scale: 1,\r\n+          duration: 0.5,\r\n+        })\r\n+        .to(loadingIndicator, {\r\n+          opacity: 0,\r\n+          scale: 0.5,\r\n+          delay: 0.5,\r\n+        })\r\n+        .call(() => {\r\n+          insightsContainer.style.visibility = \"visible\";\r\n+        })\r\n+        .to(insightsContainer, {\r\n+          y: \"0%\",\r\n+          duration: 0.8,\r\n+          ease: \"power4.out\",\r\n         });\r\n-\r\n-        await tl\r\n-            .to(billPreviewContainer, {\r\n-                opacity: 1,\r\n-                y: 0,\r\n-                duration: 1,\r\n-            })\r\n-            .to(loadingIndicator, {\r\n-                opacity: 1,\r\n-                scale: 1,\r\n-                duration: 0.5,\r\n-            })\r\n-            .to(loadingIndicator, {\r\n-                opacity: 0,\r\n-                scale: 0.5,\r\n-                delay: 0.5,\r\n-            })\r\n-            .call(() => {\r\n-                insightsContainer.style.visibility = \"visible\";\r\n-            })\r\n-            .to(insightsContainer, {\r\n-                y: \"0%\",\r\n-                duration: 0.8,\r\n-                ease: \"power4.out\"\r\n-            });\r\n-\r\n     } else {\r\n       // Desktop animation sequence (your existing animation)\r\n       gsap.set(billPreviewContainer, {\r\n         scale: 0.9,\r\n"
                },
                {
                    "date": 1731681219763,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -200,8 +200,12 @@\n         </div>\r\n     </div>\r\n `;\r\n \r\n+    if (isMobile) {\r\n+      this.initializeMobileInteractions();\r\n+    }\r\n+\r\n     this.attachBaseStyles();\r\n \r\n     // Use requestAnimationFrame to ensure styles are applied before starting\r\n     requestAnimationFrame(() => {\r\n@@ -395,47 +399,29 @@\n   getBaseStyles() {\r\n     return `\r\n         ${this.existingBaseStyles}\r\n \r\n-        /* Mobile Specific Styles */\r\n+        /* Mobile Styles */\r\n         @media (max-width: 768px) {\r\n-            #bill-preview-container {\r\n-                border-bottom: 1px solid var(--color-gray-200);\r\n-            }\r\n-\r\n             #insights-container {\r\n-                height: calc(60vh - 70px); /* Account for mobile nav */\r\n+                transition: transform 0.3s ease;\r\n+                will-change: transform;\r\n+                touch-action: none;\r\n             }\r\n \r\n-            .mobile-nav {\r\n-                height: 70px;\r\n-                box-shadow: 0 -1px 3px rgba(0,0,0,0.1);\r\n+            .drag-handle {\r\n+                cursor: grab;\r\n+                touch-action: none;\r\n             }\r\n \r\n-            .card-grid {\r\n-                grid-template-columns: 1fr;\r\n+            .drag-handle:active {\r\n+                cursor: grabbing;\r\n             }\r\n         }\r\n+    `;\r\n+}\r\n \r\n-        /* Smooth scrolling for mobile */\r\n-        .mobile-scroll {\r\n-            -webkit-overflow-scrolling: touch;\r\n-            scroll-behavior: smooth;\r\n-        }\r\n \r\n-        /* Hide scrollbar on mobile */\r\n-        @media (max-width: 768px) {\r\n-            .hide-scrollbar::-webkit-scrollbar {\r\n-                display: none;\r\n-            }\r\n-            .hide-scrollbar {\r\n-                -ms-overflow-style: none;\r\n-                scrollbar-width: none;\r\n-            }\r\n-        }\r\n-    `;\r\n-  }\r\n-\r\n   initCountUps() {\r\n     const countUpOptions = {\r\n       duration: 2,\r\n       useEasing: true,\r\n"
                },
                {
                    "date": 1731681437822,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,11 +45,11 @@\n     const trendData = this.generateTrendData();\r\n \r\n     app.innerHTML = `\r\n     <div class=\"h-screen w-full overflow-hidden bg-white transition-colors duration-1000 opacity-0\" id=\"quote-result-page\">\r\n-        <div class=\"h-full w-full flex relative\" id=\"main-content\">\r\n-            <!-- Bill Preview Side -->\r\n-            <div class=\"w-1/2 h-full overflow-hidden opacity-0\" id=\"bill-preview-container\">\r\n+        <div class=\"h-full w-full flex flex-col md:flex-row relative\" id=\"main-content\">\r\n+            <!-- Bill Preview Side - Full width on mobile -->\r\n+            <div class=\"w-full md:w-1/2 h-[45vh] md:h-full overflow-hidden opacity-0\" id=\"bill-preview-container\">\r\n                 <div id=\"bill-preview\" class=\"h-full\"></div>\r\n             </div>\r\n \r\n             <!-- Loading Indicator -->\r\n@@ -58,126 +58,124 @@\n                 <div class=\"loading-spinner\"></div>\r\n                 <p class=\"text-emerald-600 font-medium\">Analyzing your bill...</p>\r\n             </div>\r\n \r\n-            <!-- Insights Side -->\r\n-            <div class=\"w-1/2 h-full invisible\" id=\"insights-container\">\r\n-                <div class=\"h-full flex flex-col p-2 sm:p-4 lg:p-6 xl:p-8\">\r\n+            <!-- Insights Side - Slides up from bottom on mobile -->\r\n+            <div class=\"fixed md:relative w-full md:w-1/2 h-[60vh] md:h-full invisible bg-gray-50 rounded-t-3xl md:rounded-none shadow-2xl md:shadow-none\" \r\n+                 id=\"insights-container\"\r\n+                 style=\"bottom: 0; transform: translateY(100%);\">\r\n+                <!-- Drag Handle for mobile -->\r\n+                <div class=\"md:hidden w-full flex justify-center py-2\">\r\n+                    <div class=\"w-12 h-1.5 rounded-full bg-gray-300\"></div>\r\n+                </div>\r\n+\r\n+                <div class=\"h-full flex flex-col p-4 sm:p-6 overflow-auto hide-scrollbar\">\r\n                     <!-- Top Section: Fixed Height -->\r\n-                    <div class=\"flex-none space-y-3 sm:space-y-4 lg:space-y-5\">\r\n+                    <div class=\"flex-none space-y-3 sm:space-y-4\">\r\n                         <!-- Header Section -->\r\n                         <div class=\"opacity-0\" id=\"insights-header\">\r\n-                            <div class=\"flex items-center gap-3 sm:gap-4\">\r\n+                            <div class=\"flex items-center gap-3\">\r\n                                 <div class=\"flex-shrink-0\">\r\n-                                    <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-600 flex items-center justify-center\">\r\n-                                        <svg class=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                    <div class=\"w-8 h-8 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-600 flex items-center justify-center\">\r\n+                                        <svg class=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n                                         </svg>\r\n                                     </div>\r\n                                 </div>\r\n                                 <div>\r\n-                                    <h2 class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">Bill Analysis</h2>\r\n-                                    <p class=\"text-xs sm:text-sm lg:text-base text-gray-500\">Understanding your consumption</p>\r\n+                                    <h2 class=\"text-base sm:text-lg font-bold text-gray-900\">Bill Analysis</h2>\r\n+                                    <p class=\"text-xs sm:text-sm text-gray-500\">Understanding your consumption</p>\r\n                                 </div>\r\n                             </div>\r\n                         </div>\r\n \r\n                         <!-- Progress Tracker -->\r\n-                        <div class=\"bg-white/70 backdrop-blur rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 opacity-0\" id=\"progress-tracker\">\r\n+                        <div class=\"bg-white/70 backdrop-blur rounded-lg shadow-sm p-3 opacity-0\" id=\"progress-tracker\">\r\n                             <div class=\"flex justify-between items-center\">\r\n                                 <div class=\"flex items-center gap-3\">\r\n-                                    <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-emerald-600 flex items-center justify-center text-white font-semibold text-sm sm:text-base\">1</div>\r\n+                                    <div class=\"w-8 h-8 rounded-full bg-emerald-600 flex items-center justify-center text-white font-semibold text-sm\">1</div>\r\n                                     <div>\r\n-                                        <p class=\"font-semibold text-gray-900 text-sm sm:text-base\">Bill Review</p>\r\n-                                        <p class=\"text-xs sm:text-sm text-gray-500\">Analyzing patterns</p>\r\n+                                        <p class=\"font-semibold text-gray-900 text-sm\">Bill Review</p>\r\n+                                        <p class=\"text-xs text-gray-500\">Analyzing patterns</p>\r\n                                     </div>\r\n                                 </div>\r\n-                                <div class=\"h-0.5 w-16 sm:w-24 bg-gray-200\"></div>\r\n+                                <div class=\"h-0.5 w-12 bg-gray-200\"></div>\r\n                                 <div class=\"flex items-center gap-3\">\r\n-                                    <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm sm:text-base\">2</div>\r\n+                                    <div class=\"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm\">2</div>\r\n                                     <div>\r\n-                                        <p class=\"font-semibold text-gray-400 text-sm sm:text-base\">Solar Quote</p>\r\n-                                        <p class=\"text-xs sm:text-sm text-gray-400\">Up next</p>\r\n+                                        <p class=\"font-semibold text-gray-400 text-sm\">Solar Quote</p>\r\n+                                        <p class=\"text-xs text-gray-400\">Up next</p>\r\n                                     </div>\r\n                                 </div>\r\n                             </div>\r\n                         </div>\r\n                     </div>\r\n-\r\n                     <!-- Main Content Area: Flexible Height -->\r\n-                    <div class=\"flex-1 min-h-0 mt-3 sm:mt-4 lg:mt-5\">\r\n-                        <div class=\"h-full grid grid-rows-[auto_1fr_auto] gap-3 sm:gap-4 lg:gap-5\">\r\n+                    <div class=\"flex-1 min-h-0 mt-3\">\r\n+                        <div class=\"h-full grid grid-rows-[auto_1fr_auto] gap-3\">\r\n                             <!-- Consumption Analysis Card -->\r\n-                            <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 opacity-0\" id=\"consumption-card\">\r\n-                                <div class=\"flex justify-between items-center mb-2 sm:mb-3\">\r\n-                                    <h3 class=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n-                                    <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs sm:text-sm font-medium\">\r\n-                                        ${this.formatChange(\r\n-                                          trendData\r\n-                                        )}% vs last month\r\n+                            <div class=\"bg-white rounded-lg shadow-sm p-3 opacity-0\" id=\"consumption-card\">\r\n+                                <div class=\"flex justify-between items-center mb-2\">\r\n+                                    <h3 class=\"text-sm font-semibold text-gray-900\">Consumption Analysis</h3>\r\n+                                    <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs font-medium\">\r\n+                                        ${this.formatChange(trendData)}% vs last month\r\n                                     </div>\r\n                                 </div>\r\n-                                <div class=\"h-[150px] sm:h-[180px] lg:h-[200px] xl:h-[220px]\">\r\n+                                <div class=\"h-[140px] sm:h-[180px]\">\r\n                                     <canvas id=\"consumption-trend-chart\"></canvas>\r\n                                 </div>\r\n                             </div>\r\n \r\n                             <!-- Metrics Cards -->\r\n-                            <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 lg:gap-5\">\r\n+                            <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\r\n                                 <!-- Current Bill Card -->\r\n-                                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 opacity-0 consumption-metric h-auto\">\r\n+                                <div class=\"bg-white rounded-lg shadow-sm p-3 opacity-0 consumption-metric\">\r\n                                     <div class=\"flex items-center justify-between mb-2\">\r\n                                         <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n                                             <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                                 <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                                             </svg>\r\n                                         </div>\r\n-                                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n+                                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n                                     </div>\r\n-                                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Current Bill</p>\r\n-                                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\" id=\"bill-amount\">${this.formatCurrency(\r\n-                                      this.billData.amount\r\n-                                    )}</p>\r\n-                                    <div class=\"mt-3 h-1 bg-gray-100 rounded\">\r\n+                                    <p class=\"text-xs text-gray-500 mb-1\">Current Bill</p>\r\n+                                    <p class=\"text-lg font-bold text-gray-900\" id=\"bill-amount\">${this.formatCurrency(this.billData.amount)}</p>\r\n+                                    <div class=\"mt-2 h-1 bg-gray-100 rounded\">\r\n                                         <div class=\"h-full bg-emerald-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n                                     </div>\r\n                                 </div>\r\n \r\n                                 <!-- Units Consumed Card -->\r\n-                                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 opacity-0 consumption-metric h-auto\">\r\n+                                <div class=\"bg-white rounded-lg shadow-sm p-3 opacity-0 consumption-metric\">\r\n                                     <div class=\"flex items-center justify-between mb-2\">\r\n                                         <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n                                             <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                                 <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n                                             </svg>\r\n                                         </div>\r\n-                                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">\r\n+                                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs rounded-full\">\r\n                                             ${this.calculateEfficiency()} efficiency\r\n                                         </span>\r\n                                     </div>\r\n-                                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n-                                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\" id=\"units-consumed\">${\r\n-                                      this.billData.unitsConsumed\r\n-                                    } kWh</p>\r\n-                                    <p class=\"text-xs sm:text-sm text-gray-500 mt-2\">Rate: ${this.formatCurrency(\r\n-                                      this.billData.ratePerUnit\r\n-                                    )}/kWh</p>\r\n+                                    <p class=\"text-xs text-gray-500 mb-1\">Units Consumed</p>\r\n+                                    <p class=\"text-lg font-bold text-gray-900\" id=\"units-consumed\">${this.billData.unitsConsumed} kWh</p>\r\n+                                    <p class=\"text-xs text-gray-500 mt-2\">Rate: ${this.formatCurrency(this.billData.ratePerUnit)}/kWh</p>\r\n                                 </div>\r\n                             </div>\r\n \r\n                             <!-- Next Steps Card -->\r\n-                            <div class=\"sm:col-span-2\">\r\n-                                <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-5 relative opacity-0\" id=\"next-steps-card\">\r\n+                            <div class=\"mt-auto\">\r\n+                                <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg shadow-sm p-3 relative opacity-0\" id=\"next-steps-card\">\r\n                                     <div class=\"absolute -top-2 -right-2\">\r\n-                                        <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n-                                            <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                        <div class=\"w-10 h-10 animated-gradient rounded-full flex items-center justify-center\">\r\n+                                            <svg class=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                                 <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n                                             </svg>\r\n                                         </div>\r\n                                     </div>\r\n                                     <div class=\"max-w-lg\">\r\n-                                        <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n-                                        <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n+                                        <h3 class=\"text-base font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n+                                        <p class=\"text-sm text-white/90 mb-4\">\r\n                                             We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n                                         </p>\r\n                                         <button \r\n                                             id=\"proceed-to-quote\" \r\n@@ -200,8 +198,9 @@\n         </div>\r\n     </div>\r\n `;\r\n \r\n+\r\n     if (isMobile) {\r\n       this.initializeMobileInteractions();\r\n     }\r\n \r\n@@ -417,11 +416,10 @@\n                 cursor: grabbing;\r\n             }\r\n         }\r\n     `;\r\n-}\r\n+  }\r\n \r\n-\r\n   initCountUps() {\r\n     const countUpOptions = {\r\n       duration: 2,\r\n       useEasing: true,\r\n"
                },
                {
                    "date": 1731681489849,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -198,8 +198,9 @@\n         </div>\r\n     </div>\r\n `;\r\n \r\n+  const isMobile = this.isMobileDevice();\r\n \r\n     if (isMobile) {\r\n       this.initializeMobileInteractions();\r\n     }\r\n"
                },
                {
                    "date": 1731681609059,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,9 +116,11 @@\n                             <div class=\"bg-white rounded-lg shadow-sm p-3 opacity-0\" id=\"consumption-card\">\r\n                                 <div class=\"flex justify-between items-center mb-2\">\r\n                                     <h3 class=\"text-sm font-semibold text-gray-900\">Consumption Analysis</h3>\r\n                                     <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs font-medium\">\r\n-                                        ${this.formatChange(trendData)}% vs last month\r\n+                                        ${this.formatChange(\r\n+                                          trendData\r\n+                                        )}% vs last month\r\n                                     </div>\r\n                                 </div>\r\n                                 <div class=\"h-[140px] sm:h-[180px]\">\r\n                                     <canvas id=\"consumption-trend-chart\"></canvas>\r\n@@ -137,9 +139,11 @@\n                                         </div>\r\n                                         <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n                                     </div>\r\n                                     <p class=\"text-xs text-gray-500 mb-1\">Current Bill</p>\r\n-                                    <p class=\"text-lg font-bold text-gray-900\" id=\"bill-amount\">${this.formatCurrency(this.billData.amount)}</p>\r\n+                                    <p class=\"text-lg font-bold text-gray-900\" id=\"bill-amount\">${this.formatCurrency(\r\n+                                      this.billData.amount\r\n+                                    )}</p>\r\n                                     <div class=\"mt-2 h-1 bg-gray-100 rounded\">\r\n                                         <div class=\"h-full bg-emerald-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n                                     </div>\r\n                                 </div>\r\n@@ -156,10 +160,14 @@\n                                             ${this.calculateEfficiency()} efficiency\r\n                                         </span>\r\n                                     </div>\r\n                                     <p class=\"text-xs text-gray-500 mb-1\">Units Consumed</p>\r\n-                                    <p class=\"text-lg font-bold text-gray-900\" id=\"units-consumed\">${this.billData.unitsConsumed} kWh</p>\r\n-                                    <p class=\"text-xs text-gray-500 mt-2\">Rate: ${this.formatCurrency(this.billData.ratePerUnit)}/kWh</p>\r\n+                                    <p class=\"text-lg font-bold text-gray-900\" id=\"units-consumed\">${\r\n+                                      this.billData.unitsConsumed\r\n+                                    } kWh</p>\r\n+                                    <p class=\"text-xs text-gray-500 mt-2\">Rate: ${this.formatCurrency(\r\n+                                      this.billData.ratePerUnit\r\n+                                    )}/kWh</p>\r\n                                 </div>\r\n                             </div>\r\n \r\n                             <!-- Next Steps Card -->\r\n@@ -198,9 +206,9 @@\n         </div>\r\n     </div>\r\n `;\r\n \r\n-  const isMobile = this.isMobileDevice();\r\n+    const isMobile = this.isMobileDevice();\r\n \r\n     if (isMobile) {\r\n       this.initializeMobileInteractions();\r\n     }\r\n@@ -385,12 +393,13 @@\n           duration: 0.5,\r\n         });\r\n     }\r\n \r\n-    // Render insights after animations\r\n-    this.renderInsights();\r\n+    const trendData = this.generateTrendData();\r\n+    this.initializeCharts(trendData);\r\n+    this.startInsightAnimations();\r\n   }\r\n-\r\n+  \r\n   attachBaseStyles() {\r\n     const style = document.createElement(\"style\");\r\n     style.textContent = this.getBaseStyles();\r\n     document.head.appendChild(style);\r\n"
                },
                {
                    "date": 1731681619032,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,932 @@\n+// BillReviewPage.js\r\n+import { gsap } from \"gsap\";\r\n+import { getBillData } from \"../store/solarSizingState.js\";\r\n+import { BillPreview } from \"./BillPreview.js\";\r\n+import Chart from \"chart.js/auto\";\r\n+import { CountUp } from \"countup.js\";\r\n+\r\n+export class BillReviewPage {\r\n+  constructor() {\r\n+    this.billData = getBillData();\r\n+    this.charts = {};\r\n+  }\r\n+\r\n+  addScrollStyles() {\r\n+    const style = document.createElement(\"style\");\r\n+    style.textContent = `\r\n+        .custom-scrollbar {\r\n+            scrollbar-width: thin;\r\n+            scrollbar-color: rgba(0, 0, 0, 0.2) transparent;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar {\r\n+            width: 6px;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar-track {\r\n+            background: transparent;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar-thumb {\r\n+            background-color: rgba(0, 0, 0, 0.2);\r\n+            border-radius: 3px;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar-thumb:hover {\r\n+            background-color: rgba(0, 0, 0, 0.3);\r\n+        }\r\n+    `;\r\n+    document.head.appendChild(style);\r\n+  }\r\n+\r\n+  // Update the main container structure in render method\r\n+  render() {\r\n+    const app = document.getElementById(\"app\");\r\n+    const trendData = this.generateTrendData();\r\n+\r\n+    app.innerHTML = `\r\n+    <div class=\"h-screen w-full overflow-hidden bg-white transition-colors duration-1000 opacity-0\" id=\"quote-result-page\">\r\n+        <div class=\"h-full w-full flex flex-col md:flex-row relative\" id=\"main-content\">\r\n+            <!-- Bill Preview Side - Full width on mobile -->\r\n+            <div class=\"w-full md:w-1/2 h-[45vh] md:h-full overflow-hidden opacity-0\" id=\"bill-preview-container\">\r\n+                <div id=\"bill-preview\" class=\"h-full\"></div>\r\n+            </div>\r\n+\r\n+            <!-- Loading Indicator -->\r\n+            <div class=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center z-10\" \r\n+                 id=\"loading-indicator\">\r\n+                <div class=\"loading-spinner\"></div>\r\n+                <p class=\"text-emerald-600 font-medium\">Analyzing your bill...</p>\r\n+            </div>\r\n+\r\n+            <!-- Insights Side - Slides up from bottom on mobile -->\r\n+            <div class=\"fixed md:relative w-full md:w-1/2 h-[60vh] md:h-full invisible bg-gray-50 rounded-t-3xl md:rounded-none shadow-2xl md:shadow-none\" \r\n+                 id=\"insights-container\"\r\n+                 style=\"bottom: 0; transform: translateY(100%);\">\r\n+                <!-- Drag Handle for mobile -->\r\n+                <div class=\"md:hidden w-full flex justify-center py-2\">\r\n+                    <div class=\"w-12 h-1.5 rounded-full bg-gray-300\"></div>\r\n+                </div>\r\n+\r\n+                <div class=\"h-full flex flex-col p-4 sm:p-6 overflow-auto hide-scrollbar\">\r\n+                    <!-- Top Section: Fixed Height -->\r\n+                    <div class=\"flex-none space-y-3 sm:space-y-4\">\r\n+                        <!-- Header Section -->\r\n+                        <div class=\"opacity-0\" id=\"insights-header\">\r\n+                            <div class=\"flex items-center gap-3\">\r\n+                                <div class=\"flex-shrink-0\">\r\n+                                    <div class=\"w-8 h-8 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-600 flex items-center justify-center\">\r\n+                                        <svg class=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n+                                        </svg>\r\n+                                    </div>\r\n+                                </div>\r\n+                                <div>\r\n+                                    <h2 class=\"text-base sm:text-lg font-bold text-gray-900\">Bill Analysis</h2>\r\n+                                    <p class=\"text-xs sm:text-sm text-gray-500\">Understanding your consumption</p>\r\n+                                </div>\r\n+                            </div>\r\n+                        </div>\r\n+\r\n+                        <!-- Progress Tracker -->\r\n+                        <div class=\"bg-white/70 backdrop-blur rounded-lg shadow-sm p-3 opacity-0\" id=\"progress-tracker\">\r\n+                            <div class=\"flex justify-between items-center\">\r\n+                                <div class=\"flex items-center gap-3\">\r\n+                                    <div class=\"w-8 h-8 rounded-full bg-emerald-600 flex items-center justify-center text-white font-semibold text-sm\">1</div>\r\n+                                    <div>\r\n+                                        <p class=\"font-semibold text-gray-900 text-sm\">Bill Review</p>\r\n+                                        <p class=\"text-xs text-gray-500\">Analyzing patterns</p>\r\n+                                    </div>\r\n+                                </div>\r\n+                                <div class=\"h-0.5 w-12 bg-gray-200\"></div>\r\n+                                <div class=\"flex items-center gap-3\">\r\n+                                    <div class=\"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm\">2</div>\r\n+                                    <div>\r\n+                                        <p class=\"font-semibold text-gray-400 text-sm\">Solar Quote</p>\r\n+                                        <p class=\"text-xs text-gray-400\">Up next</p>\r\n+                                    </div>\r\n+                                </div>\r\n+                            </div>\r\n+                        </div>\r\n+                    </div>\r\n+                    <!-- Main Content Area: Flexible Height -->\r\n+                    <div class=\"flex-1 min-h-0 mt-3\">\r\n+                        <div class=\"h-full grid grid-rows-[auto_1fr_auto] gap-3\">\r\n+                            <!-- Consumption Analysis Card -->\r\n+                            <div class=\"bg-white rounded-lg shadow-sm p-3 opacity-0\" id=\"consumption-card\">\r\n+                                <div class=\"flex justify-between items-center mb-2\">\r\n+                                    <h3 class=\"text-sm font-semibold text-gray-900\">Consumption Analysis</h3>\r\n+                                    <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs font-medium\">\r\n+                                        ${this.formatChange(\r\n+                                          trendData\r\n+                                        )}% vs last month\r\n+                                    </div>\r\n+                                </div>\r\n+                                <div class=\"h-[140px] sm:h-[180px]\">\r\n+                                    <canvas id=\"consumption-trend-chart\"></canvas>\r\n+                                </div>\r\n+                            </div>\r\n+\r\n+                            <!-- Metrics Cards -->\r\n+                            <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\r\n+                                <!-- Current Bill Card -->\r\n+                                <div class=\"bg-white rounded-lg shadow-sm p-3 opacity-0 consumption-metric\">\r\n+                                    <div class=\"flex items-center justify-between mb-2\">\r\n+                                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n+                                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n+                                            </svg>\r\n+                                        </div>\r\n+                                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n+                                    </div>\r\n+                                    <p class=\"text-xs text-gray-500 mb-1\">Current Bill</p>\r\n+                                    <p class=\"text-lg font-bold text-gray-900\" id=\"bill-amount\">${this.formatCurrency(\r\n+                                      this.billData.amount\r\n+                                    )}</p>\r\n+                                    <div class=\"mt-2 h-1 bg-gray-100 rounded\">\r\n+                                        <div class=\"h-full bg-emerald-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n+                                    </div>\r\n+                                </div>\r\n+\r\n+                                <!-- Units Consumed Card -->\r\n+                                <div class=\"bg-white rounded-lg shadow-sm p-3 opacity-0 consumption-metric\">\r\n+                                    <div class=\"flex items-center justify-between mb-2\">\r\n+                                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n+                                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n+                                            </svg>\r\n+                                        </div>\r\n+                                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs rounded-full\">\r\n+                                            ${this.calculateEfficiency()} efficiency\r\n+                                        </span>\r\n+                                    </div>\r\n+                                    <p class=\"text-xs text-gray-500 mb-1\">Units Consumed</p>\r\n+                                    <p class=\"text-lg font-bold text-gray-900\" id=\"units-consumed\">${\r\n+                                      this.billData.unitsConsumed\r\n+                                    } kWh</p>\r\n+                                    <p class=\"text-xs text-gray-500 mt-2\">Rate: ${this.formatCurrency(\r\n+                                      this.billData.ratePerUnit\r\n+                                    )}/kWh</p>\r\n+                                </div>\r\n+                            </div>\r\n+\r\n+                            <!-- Next Steps Card -->\r\n+                            <div class=\"mt-auto\">\r\n+                                <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg shadow-sm p-3 relative opacity-0\" id=\"next-steps-card\">\r\n+                                    <div class=\"absolute -top-2 -right-2\">\r\n+                                        <div class=\"w-10 h-10 animated-gradient rounded-full flex items-center justify-center\">\r\n+                                            <svg class=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n+                                            </svg>\r\n+                                        </div>\r\n+                                    </div>\r\n+                                    <div class=\"max-w-lg\">\r\n+                                        <h3 class=\"text-base font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n+                                        <p class=\"text-sm text-white/90 mb-4\">\r\n+                                            We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n+                                        </p>\r\n+                                        <button \r\n+                                            id=\"proceed-to-quote\" \r\n+                                            class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n+                                                   transition-all duration-300 shadow-sm hover:shadow-lg\r\n+                                                   flex items-center justify-center gap-2 group\"\r\n+                                        >\r\n+                                            Generate My Solar Quote\r\n+                                            <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n+                                            </svg>\r\n+                                        </button>\r\n+                                    </div>\r\n+                                </div>\r\n+                            </div>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+        </div>\r\n+    </div>\r\n+`;\r\n+\r\n+    const isMobile = this.isMobileDevice();\r\n+\r\n+    if (isMobile) {\r\n+      this.initializeMobileInteractions();\r\n+    }\r\n+\r\n+    this.attachBaseStyles();\r\n+\r\n+    // Use requestAnimationFrame to ensure styles are applied before starting\r\n+    requestAnimationFrame(() => {\r\n+      requestAnimationFrame(() => {\r\n+        // Make container visible\r\n+        const container = document.getElementById(\"quote-result-page\");\r\n+        if (container) {\r\n+          container.classList.remove(\"opacity-0\");\r\n+        }\r\n+\r\n+        // Now render bill preview and start animation\r\n+        this.renderBillPreview();\r\n+        this.startAnimation().catch((error) => {\r\n+          console.error(\"Animation failed:\", error);\r\n+          this.showError();\r\n+        });\r\n+      });\r\n+    });\r\n+  }\r\n+\r\n+  isMobileDevice() {\r\n+    return window.innerWidth < 768; // You can adjust this breakpoint\r\n+  }\r\n+\r\n+  getTrendChangeText() {\r\n+    const trendData = this.generateTrendData();\r\n+    return `${this.formatChange(trendData)}% vs last month`;\r\n+  }\r\n+\r\n+  initializeMobileInteractions() {\r\n+    const insightsContainer = document.getElementById(\"insights-container\");\r\n+    let startY = 0;\r\n+    let currentY = 0;\r\n+    let initialHeight = \"60vh\";\r\n+    let expandedHeight = \"92vh\";\r\n+\r\n+    // Handle drag to expand/collapse\r\n+    const handleTouchStart = (e) => {\r\n+      startY = e.touches[0].clientY;\r\n+      currentY = insightsContainer.getBoundingClientRect().height;\r\n+    };\r\n+\r\n+    const handleTouchMove = (e) => {\r\n+      const deltaY = startY - e.touches[0].clientY;\r\n+      const newHeight = Math.max(\r\n+        Math.min(currentY + deltaY, window.innerHeight * 0.92),\r\n+        window.innerHeight * 0.3\r\n+      );\r\n+\r\n+      gsap.to(insightsContainer, {\r\n+        height: newHeight,\r\n+        duration: 0.1,\r\n+        ease: \"none\",\r\n+      });\r\n+    };\r\n+\r\n+    const handleTouchEnd = (e) => {\r\n+      const finalHeight = insightsContainer.getBoundingClientRect().height;\r\n+      const threshold = window.innerHeight * 0.6;\r\n+\r\n+      gsap.to(insightsContainer, {\r\n+        height: finalHeight > threshold ? expandedHeight : initialHeight,\r\n+        duration: 0.3,\r\n+        ease: \"power2.out\",\r\n+      });\r\n+    };\r\n+\r\n+    // Add touch event listeners\r\n+    const dragHandle = insightsContainer.querySelector(\"div:first-child\");\r\n+    dragHandle.addEventListener(\"touchstart\", handleTouchStart);\r\n+    dragHandle.addEventListener(\"touchmove\", handleTouchMove);\r\n+    dragHandle.addEventListener(\"touchend\", handleTouchEnd);\r\n+  }\r\n+\r\n+  async startAnimation() {\r\n+    if (this.error) {\r\n+      this.showError();\r\n+      return;\r\n+    }\r\n+\r\n+    const isMobile = this.isMobileDevice();\r\n+    const billPreviewContainer = document.getElementById(\r\n+      \"bill-preview-container\"\r\n+    );\r\n+    const insightsContainer = document.getElementById(\"insights-container\");\r\n+    const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n+    const quoteResultPage = document.getElementById(\"quote-result-page\");\r\n+\r\n+    // Initial states\r\n+    gsap.set([billPreviewContainer, loadingIndicator], {\r\n+      opacity: 0,\r\n+    });\r\n+\r\n+    if (isMobile) {\r\n+      // Mobile animation sequence\r\n+      gsap.set(billPreviewContainer, {\r\n+        y: -20,\r\n+      });\r\n+\r\n+      const tl = gsap.timeline({\r\n+        defaults: { duration: 0.8, ease: \"power2.out\" },\r\n+      });\r\n+\r\n+      await tl\r\n+        .to(billPreviewContainer, {\r\n+          opacity: 1,\r\n+          y: 0,\r\n+          duration: 1,\r\n+        })\r\n+        .to(loadingIndicator, {\r\n+          opacity: 1,\r\n+          scale: 1,\r\n+          duration: 0.5,\r\n+        })\r\n+        .to(loadingIndicator, {\r\n+          opacity: 0,\r\n+          scale: 0.5,\r\n+          delay: 0.5,\r\n+        })\r\n+        .call(() => {\r\n+          insightsContainer.style.visibility = \"visible\";\r\n+        })\r\n+        .to(insightsContainer, {\r\n+          y: \"0%\",\r\n+          duration: 0.8,\r\n+          ease: \"power4.out\",\r\n+        });\r\n+    } else {\r\n+      // Desktop animation sequence (your existing animation)\r\n+      gsap.set(billPreviewContainer, {\r\n+        scale: 0.9,\r\n+        position: \"absolute\",\r\n+        left: \"50%\",\r\n+        top: \"50%\",\r\n+        xPercent: -50,\r\n+        yPercent: -50,\r\n+        width: \"47.5%\",\r\n+      });\r\n+\r\n+      const tl = gsap.timeline({\r\n+        defaults: { duration: 0.8, ease: \"power2.out\" },\r\n+      });\r\n+\r\n+      await tl\r\n+        .to(billPreviewContainer, {\r\n+          opacity: 1,\r\n+          scale: 1,\r\n+          duration: 1,\r\n+        })\r\n+        .to(loadingIndicator, {\r\n+          opacity: 1,\r\n+          scale: 1,\r\n+          duration: 0.5,\r\n+        })\r\n+        .to(loadingIndicator, {\r\n+          opacity: 0,\r\n+          scale: 0.5,\r\n+          delay: 1,\r\n+        })\r\n+        .to(\r\n+          billPreviewContainer,\r\n+          {\r\n+            left: \"0%\",\r\n+            top: \"0%\",\r\n+            xPercent: 0,\r\n+            yPercent: 0,\r\n+            width: \"50%\",\r\n+            position: \"relative\",\r\n+          },\r\n+          \"-=0.3\"\r\n+        )\r\n+        .call(() => {\r\n+          insightsContainer.style.visibility = \"visible\";\r\n+        })\r\n+        .to(insightsContainer, {\r\n+          opacity: 1,\r\n+          duration: 0.5,\r\n+        });\r\n+    }\r\n+\r\n+    const trendData = this.generateTrendData();\r\n+    this.initializeCharts(trendData);\r\n+    this.startInsightAnimations();\r\n+  }\r\n+\r\n+  attachBaseStyles() {\r\n+    const style = document.createElement(\"style\");\r\n+    style.textContent = this.getBaseStyles();\r\n+    document.head.appendChild(style);\r\n+  }\r\n+\r\n+  getBaseStyles() {\r\n+    return `\r\n+        /* Base Theme Colors */\r\n+        :root {\r\n+            --color-primary: #10b981;\r\n+            --color-primary-dark: #059669;\r\n+            --color-bg-secondary: #f3f4f6;\r\n+        }\r\n+\r\n+        /* Mobile Styles */\r\n+        @media (max-width: 768px) {\r\n+            #insights-container {\r\n+                transition: transform 0.3s ease;\r\n+                will-change: transform;\r\n+                touch-action: none;\r\n+            }\r\n+\r\n+            .drag-handle {\r\n+                cursor: grab;\r\n+                touch-action: none;\r\n+            }\r\n+\r\n+            .drag-handle:active {\r\n+                cursor: grabbing;\r\n+            }\r\n+        }\r\n+\r\n+        /* Hide scrollbar on mobile */\r\n+        .hide-scrollbar::-webkit-scrollbar {\r\n+            display: none;\r\n+        }\r\n+        .hide-scrollbar {\r\n+            -ms-overflow-style: none;\r\n+            scrollbar-width: none;\r\n+        }\r\n+\r\n+        /* Loading Spinner */\r\n+        .loading-spinner {\r\n+            width: 40px;\r\n+            height: 40px;\r\n+            border: 3px solid rgba(16, 185, 129, 0.1);\r\n+            border-radius: 50%;\r\n+            border-top-color: #10b981;\r\n+            animation: spin 1s ease-in-out infinite;\r\n+        }\r\n+\r\n+        @keyframes spin {\r\n+            to { transform: rotate(360deg); }\r\n+        }\r\n+\r\n+        /* Animated Gradient */\r\n+        .animated-gradient {\r\n+            background: linear-gradient(\r\n+                45deg,\r\n+                rgba(255,255,255,0.1),\r\n+                rgba(255,255,255,0.2),\r\n+                rgba(255,255,255,0.1)\r\n+            );\r\n+            background-size: 200% 200%;\r\n+            animation: gradient 15s ease infinite;\r\n+        }\r\n+\r\n+        @keyframes gradient {\r\n+            0% { background-position: 0% 50%; }\r\n+            50% { background-position: 100% 50%; }\r\n+            100% { background-position: 0% 50%; }\r\n+        }\r\n+    `;\r\n+}\r\n+\r\n+  initCountUps() {\r\n+    const countUpOptions = {\r\n+      duration: 2,\r\n+      useEasing: true,\r\n+      useGrouping: true,\r\n+    };\r\n+\r\n+    // Initialize counters for the bill amounts and units\r\n+    this.countUps = {\r\n+      billAmount: new CountUp(\"bill-amount\", this.billData.totalAmount, {\r\n+        ...countUpOptions,\r\n+        prefix: \"PKR \",\r\n+      }),\r\n+      unitsConsumed: new CountUp(\r\n+        \"units-consumed\",\r\n+        this.billData.unitsConsumed,\r\n+        {\r\n+          ...countUpOptions,\r\n+          suffix: \" kWh\",\r\n+        }\r\n+      ),\r\n+    };\r\n+  }\r\n+\r\n+  startCountUps() {\r\n+    Object.values(this.countUps).forEach((counter) => {\r\n+      if (counter && !counter.error) {\r\n+        counter.start();\r\n+      }\r\n+    });\r\n+  }\r\n+\r\n+  renderBillPreview() {\r\n+    if (!this.billData) {\r\n+      console.error(\"Bill data is not available\");\r\n+      this.renderError(document.getElementById(\"app\"));\r\n+      return;\r\n+    }\r\n+\r\n+    const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n+    if (!billPreviewContainer) {\r\n+      console.error(\"Bill preview container not found\");\r\n+      return;\r\n+    }\r\n+\r\n+    const billPreview = new BillPreview(this.billData);\r\n+    billPreview.render(billPreviewContainer);\r\n+  }\r\n+\r\n+  renderError(container) {\r\n+    container.innerHTML = `\r\n+        <div class=\"flex items-center justify-center h-screen\">\r\n+            <div class=\"text-center\">\r\n+                <h2 class=\"text-xl font-semibold text-gray-800 mb-2\">Error</h2>\r\n+                <p class=\"text-gray-600\">Bill data is not available. Please try again.</p>\r\n+                <button onclick=\"window.router.push('/')\" \r\n+                        class=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors\">\r\n+                    Go Back\r\n+                </button>\r\n+            </div>\r\n+        </div>\r\n+    `;\r\n+  }\r\n+\r\n+  renderInsights() {\r\n+    const insightsContainer = document.querySelector(\"#insights-container\");\r\n+    if (!insightsContainer) return;\r\n+\r\n+    // Generate trend data for the last 6 months\r\n+    const trendData = this.generateTrendData();\r\n+\r\n+    insightsContainer.innerHTML = `\r\n+        <div class=\"h-full flex flex-col p-2 sm:p-4 lg:p-6 overflow-auto\">\r\n+            <!-- Header Section -->\r\n+            <div class=\"flex-none mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"insights-header\">\r\n+                <div class=\"flex items-center gap-3 sm:gap-4\">\r\n+                    <div class=\"flex-shrink-0\">\r\n+                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-600 flex items-center justify-center\">\r\n+                            <svg class=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n+                            </svg>\r\n+                        </div>\r\n+                    </div>\r\n+                    <div>\r\n+                        <h2 class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">Bill Analysis</h2>\r\n+                        <p class=\"text-xs sm:text-sm lg:text-base text-gray-500\">Understanding your consumption</p>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+\r\n+            <!-- Progress Tracker -->\r\n+            <div class=\"bg-white/70 backdrop-blur rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"progress-tracker\">\r\n+                <div class=\"flex justify-between items-center\">\r\n+                    <div class=\"flex items-center gap-3\">\r\n+                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-emerald-600 flex items-center justify-center text-white font-semibold text-sm sm:text-base\">1</div>\r\n+                        <div>\r\n+                            <p class=\"font-semibold text-gray-900 text-sm sm:text-base\">Bill Review</p>\r\n+                            <p class=\"text-xs sm:text-sm text-gray-500\">Analyzing patterns</p>\r\n+                        </div>\r\n+                    </div>\r\n+                    <div class=\"h-0.5 w-16 sm:w-24 bg-gray-200\"></div>\r\n+                    <div class=\"flex items-center gap-3\">\r\n+                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm sm:text-base\">2</div>\r\n+                        <div>\r\n+                            <p class=\"font-semibold text-gray-400 text-sm sm:text-base\">Solar Quote</p>\r\n+                            <p class=\"text-xs sm:text-sm text-gray-400\">Up next</p>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+\r\n+            <!-- Content Grid -->\r\n+            <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 lg:gap-6 flex-1\">\r\n+                <!-- Consumption Analysis Card -->\r\n+                <div class=\"sm:col-span-2 bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0\" id=\"consumption-card\">\r\n+                    <div class=\"flex justify-between items-center mb-3 sm:mb-4\">\r\n+                        <h3 class=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n+                        <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs sm:text-sm font-medium\">\r\n+                            ${this.formatChange(trendData)}% vs last month\r\n+                        </div>\r\n+                    </div>\r\n+                    <div class=\"h-[200px] sm:h-[250px]\">\r\n+                        <canvas id=\"consumption-trend-chart\"></canvas>\r\n+                    </div>\r\n+                </div>\r\n+\r\n+                <!-- Current Bill Card -->\r\n+                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n+                    <div class=\"flex items-center justify-between mb-2\">\r\n+                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n+                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n+                            </svg>\r\n+                        </div>\r\n+                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n+                    </div>\r\n+                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Current Bill</p>\r\n+                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${this.formatCurrency(\r\n+                      this.billData.totalAmount\r\n+                    )}</p>\r\n+                    <div class=\"mt-4 h-1 bg-gray-100 rounded\">\r\n+                        <div class=\"h-full bg-emerald-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n+                    </div>\r\n+                </div>\r\n+\r\n+                <!-- Units Consumed Card -->\r\n+                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n+                    <div class=\"flex items-center justify-between mb-2\">\r\n+                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n+                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n+                            </svg>\r\n+                        </div>\r\n+                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">\r\n+                            ${this.calculateEfficiency()} efficiency\r\n+                        </span>\r\n+                    </div>\r\n+                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n+                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${\r\n+                      this.billData.unitsConsumed\r\n+                    } kWh</p>\r\n+                    <p class=\"text-xs sm:text-sm text-gray-500 mt-2\">Rate: ${this.formatCurrency(\r\n+                      this.billData.ratePerUnit\r\n+                    )}/kWh</p>\r\n+                </div>\r\n+\r\n+                <!-- Next Steps Card -->\r\n+                <div class=\"sm:col-span-2 mt-auto\">\r\n+                    <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n+                        <div class=\"absolute -top-2 -right-2\">\r\n+                            <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n+                                <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n+                                </svg>\r\n+                            </div>\r\n+                        </div>\r\n+                        <div class=\"max-w-lg\">\r\n+                            <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n+                            <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n+                                We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n+                            </p>\r\n+                            <button \r\n+                                id=\"proceed-to-quote\" \r\n+                                class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n+                                       transition-all duration-300 shadow-sm hover:shadow-lg\r\n+                                       flex items-center justify-center gap-2 group\"\r\n+                            >\r\n+                                Generate My Solar Quote\r\n+                                <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n+                                </svg>\r\n+                            </button>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+        </div>\r\n+    `;\r\n+\r\n+    // Update the chart colors in initializeCharts\r\n+    this.initializeCharts(trendData);\r\n+    this.startInsightAnimations();\r\n+    this.attachEventListeners();\r\n+  }\r\n+\r\n+  generateTrendData() {\r\n+    const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\"];\r\n+    return months.map((month) => ({\r\n+      month,\r\n+      consumption: Math.floor(\r\n+        this.billData.unitsConsumed * (0.8 + Math.random() * 0.4)\r\n+      ),\r\n+    }));\r\n+  }\r\n+\r\n+  initializeCharts(trendData) {\r\n+    const ctx = document.getElementById(\"consumption-trend-chart\");\r\n+    if (!ctx) return;\r\n+\r\n+    const isMobile = window.innerWidth < 640;\r\n+    const isTablet = window.innerWidth < 1024;\r\n+\r\n+    this.charts.consumption = new Chart(ctx, {\r\n+      type: \"line\",\r\n+      data: {\r\n+        labels: trendData.map((d) => d.month),\r\n+        datasets: [\r\n+          {\r\n+            label: \"Consumption (kWh)\",\r\n+            data: trendData.map((d) => d.consumption),\r\n+            borderColor: \"#059669\",\r\n+            backgroundColor: \"rgba(5, 150, 105, 0.1)\",\r\n+            tension: 0.4,\r\n+            fill: true,\r\n+            pointRadius: isMobile ? 2 : isTablet ? 3 : 4,\r\n+            pointHoverRadius: isMobile ? 4 : isTablet ? 5 : 6,\r\n+            pointBackgroundColor: \"#ffffff\",\r\n+            pointBorderColor: \"#059669\",\r\n+            pointBorderWidth: isMobile ? 1 : 2,\r\n+          },\r\n+        ],\r\n+      },\r\n+      options: {\r\n+        responsive: true,\r\n+        maintainAspectRatio: false,\r\n+        interaction: {\r\n+          mode: \"nearest\",\r\n+          intersect: false,\r\n+          axis: \"x\",\r\n+        },\r\n+        plugins: {\r\n+          legend: {\r\n+            display: false,\r\n+          },\r\n+          tooltip: {\r\n+            enabled: true,\r\n+            backgroundColor: \"white\",\r\n+            titleColor: \"#1f2937\",\r\n+            bodyColor: \"#4b5563\",\r\n+            borderColor: \"#e5e7eb\",\r\n+            borderWidth: 1,\r\n+            padding: isMobile ? 8 : 12,\r\n+            titleFont: {\r\n+              size: isMobile ? 12 : 14,\r\n+              weight: \"bold\",\r\n+            },\r\n+            bodyFont: {\r\n+              size: isMobile ? 11 : 13,\r\n+            },\r\n+            displayColors: false,\r\n+          },\r\n+        },\r\n+        scales: {\r\n+          x: {\r\n+            grid: {\r\n+              display: false,\r\n+            },\r\n+            ticks: {\r\n+              font: {\r\n+                size: isMobile ? 10 : isTablet ? 11 : 12,\r\n+              },\r\n+            },\r\n+          },\r\n+          y: {\r\n+            beginAtZero: true,\r\n+            grid: {\r\n+              color: \"rgba(0, 0, 0, 0.05)\",\r\n+            },\r\n+            ticks: {\r\n+              font: {\r\n+                size: isMobile ? 10 : isTablet ? 11 : 12,\r\n+              },\r\n+            },\r\n+          },\r\n+        },\r\n+      },\r\n+    });\r\n+\r\n+    // Add resize handler\r\n+    window.addEventListener(\"resize\", this.handleResize.bind(this));\r\n+  }\r\n+\r\n+  handleResize() {\r\n+    clearTimeout(this.resizeTimeout);\r\n+    this.resizeTimeout = setTimeout(() => {\r\n+      if (this.charts.consumption) {\r\n+        this.charts.consumption.resize();\r\n+      }\r\n+    }, 250);\r\n+  }\r\n+\r\n+  startInsightAnimations() {\r\n+    // First init the counters\r\n+    this.initCountUps();\r\n+\r\n+    gsap.to(\"#insights-header\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      ease: \"power2.out\",\r\n+    });\r\n+\r\n+    gsap.to(\"#progress-tracker\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      delay: 0.2,\r\n+      ease: \"power2.out\",\r\n+    });\r\n+\r\n+    gsap.to(\"#consumption-card\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      delay: 0.4,\r\n+      ease: \"power2.out\",\r\n+    });\r\n+\r\n+    gsap.to(\".consumption-metric\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      stagger: 0.2,\r\n+      delay: 0.6,\r\n+      ease: \"power2.out\",\r\n+      onComplete: () => {\r\n+        // Start the counters after the cards animate in\r\n+        this.startCountUps();\r\n+      },\r\n+    });\r\n+\r\n+    gsap.to(\"#next-steps-card\", {\r\n+      opacity: 1,\r\n+      y: 0,\r\n+      duration: 0.6,\r\n+      delay: 1,\r\n+      ease: \"power2.out\",\r\n+    });\r\n+  }\r\n+\r\n+  // Utility methods\r\n+  formatCurrency(value) {\r\n+    return new Intl.NumberFormat(\"en-PK\", {\r\n+      style: \"currency\",\r\n+      currency: \"PKR\",\r\n+      minimumFractionDigits: 0,\r\n+      maximumFractionDigits: 0,\r\n+    }).format(value);\r\n+  }\r\n+\r\n+  calculateDueDays() {\r\n+    const dueDate = new Date(this.billData.dueDate);\r\n+    const today = new Date();\r\n+    const diffTime = Math.abs(dueDate - today);\r\n+    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n+  }\r\n+\r\n+  calculateBillProgress() {\r\n+    const daysInMonth = 30;\r\n+    const today = new Date();\r\n+    const billDate = new Date(this.billData.issueDate);\r\n+    const daysPassed = Math.ceil((today - billDate) / (1000 * 60 * 60 * 24));\r\n+    return Math.min((daysPassed / daysInMonth) * 100, 100);\r\n+  }\r\n+\r\n+  calculateEfficiency() {\r\n+    const avgConsumption = 500; // Example average consumption\r\n+    const efficiency = (this.billData.unitsConsumed / avgConsumption) * 100;\r\n+    return efficiency <= 100 ? \"High\" : \"Low\";\r\n+  }\r\n+\r\n+  formatChange(data) {\r\n+    const lastTwo = data.slice(-2);\r\n+    const change =\r\n+      ((lastTwo[1].consumption - lastTwo[0].consumption) /\r\n+        lastTwo[0].consumption) *\r\n+      100;\r\n+    return change.toFixed(1);\r\n+  }\r\n+\r\n+  attachEventListeners() {\r\n+    const quoteButton = document.getElementById(\"proceed-to-quote\");\r\n+    const mobileQuoteButton = document.getElementById(\r\n+      \"proceed-to-quote-mobile\"\r\n+    );\r\n+\r\n+    if (quoteButton) {\r\n+      quoteButton.addEventListener(\"click\", () => {\r\n+        window.router.push(\"/quote\");\r\n+      });\r\n+    }\r\n+\r\n+    if (mobileQuoteButton) {\r\n+      mobileQuoteButton.addEventListener(\"click\", () => {\r\n+        window.router.push(\"/quote\");\r\n+      });\r\n+    }\r\n+\r\n+    // Add touch event handlers for mobile\r\n+    if (this.isMobileDevice()) {\r\n+      const insightsContainer = document.getElementById(\"insights-container\");\r\n+      let startY = 0;\r\n+      let scrolling = false;\r\n+\r\n+      insightsContainer.addEventListener(\r\n+        \"touchstart\",\r\n+        (e) => {\r\n+          startY = e.touches[0].pageY;\r\n+        },\r\n+        { passive: true }\r\n+      );\r\n+\r\n+      insightsContainer.addEventListener(\r\n+        \"touchmove\",\r\n+        (e) => {\r\n+          if (!scrolling) {\r\n+            const currentY = e.touches[0].pageY;\r\n+            const diff = startY - currentY;\r\n+\r\n+            if (diff > 0) {\r\n+              // Scrolling up\r\n+              scrolling = true;\r\n+              gsap.to(insightsContainer, {\r\n+                height: \"85vh\",\r\n+                duration: 0.3,\r\n+                ease: \"power2.out\",\r\n+              });\r\n+            }\r\n+          }\r\n+        },\r\n+        { passive: true }\r\n+      );\r\n+    }\r\n+  }\r\n+}\r\n"
                },
                {
                    "date": 1731681648409,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -281,9 +281,9 @@\n       });\r\n     };\r\n \r\n     // Add touch event listeners\r\n-    const dragHandle = insightsContainer.querySelector(\"div:first-child\");\r\n+    const dragHandle = insightsContainer.querySelector(\".drag-handle\"); // Add this class to the handle div\r\n     dragHandle.addEventListener(\"touchstart\", handleTouchStart);\r\n     dragHandle.addEventListener(\"touchmove\", handleTouchMove);\r\n     dragHandle.addEventListener(\"touchend\", handleTouchEnd);\r\n   }\r\n@@ -472,896 +472,10 @@\n             50% { background-position: 100% 50%; }\r\n             100% { background-position: 0% 50%; }\r\n         }\r\n     `;\r\n-}\r\n-\r\n-  initCountUps() {\r\n-    const countUpOptions = {\r\n-      duration: 2,\r\n-      useEasing: true,\r\n-      useGrouping: true,\r\n-    };\r\n-\r\n-    // Initialize counters for the bill amounts and units\r\n-    this.countUps = {\r\n-      billAmount: new CountUp(\"bill-amount\", this.billData.totalAmount, {\r\n-        ...countUpOptions,\r\n-        prefix: \"PKR \",\r\n-      }),\r\n-      unitsConsumed: new CountUp(\r\n-        \"units-consumed\",\r\n-        this.billData.unitsConsumed,\r\n-        {\r\n-          ...countUpOptions,\r\n-          suffix: \" kWh\",\r\n-        }\r\n-      ),\r\n-    };\r\n   }\r\n \r\n-  startCountUps() {\r\n-    Object.values(this.countUps).forEach((counter) => {\r\n-      if (counter && !counter.error) {\r\n-        counter.start();\r\n-      }\r\n-    });\r\n-  }\r\n-\r\n-  renderBillPreview() {\r\n-    if (!this.billData) {\r\n-      console.error(\"Bill data is not available\");\r\n-      this.renderError(document.getElementById(\"app\"));\r\n-      return;\r\n-    }\r\n-\r\n-    const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n-    if (!billPreviewContainer) {\r\n-      console.error(\"Bill preview container not found\");\r\n-      return;\r\n-    }\r\n-\r\n-    const billPreview = new BillPreview(this.billData);\r\n-    billPreview.render(billPreviewContainer);\r\n-  }\r\n-\r\n-  renderError(container) {\r\n-    container.innerHTML = `\r\n-        <div class=\"flex items-center justify-center h-screen\">\r\n-            <div class=\"text-center\">\r\n-                <h2 class=\"text-xl font-semibold text-gray-800 mb-2\">Error</h2>\r\n-                <p class=\"text-gray-600\">Bill data is not available. Please try again.</p>\r\n-                <button onclick=\"window.router.push('/')\" \r\n-                        class=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors\">\r\n-                    Go Back\r\n-                </button>\r\n-            </div>\r\n-        </div>\r\n-    `;\r\n-  }\r\n-\r\n-  renderInsights() {\r\n-    const insightsContainer = document.querySelector(\"#insights-container\");\r\n-    if (!insightsContainer) return;\r\n-\r\n-    // Generate trend data for the last 6 months\r\n-    const trendData = this.generateTrendData();\r\n-\r\n-    insightsContainer.innerHTML = `\r\n-        <div class=\"h-full flex flex-col p-2 sm:p-4 lg:p-6 overflow-auto\">\r\n-            <!-- Header Section -->\r\n-            <div class=\"flex-none mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"insights-header\">\r\n-                <div class=\"flex items-center gap-3 sm:gap-4\">\r\n-                    <div class=\"flex-shrink-0\">\r\n-                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-600 flex items-center justify-center\">\r\n-                            <svg class=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n-                            </svg>\r\n-                        </div>\r\n-                    </div>\r\n-                    <div>\r\n-                        <h2 class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">Bill Analysis</h2>\r\n-                        <p class=\"text-xs sm:text-sm lg:text-base text-gray-500\">Understanding your consumption</p>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-\r\n-            <!-- Progress Tracker -->\r\n-            <div class=\"bg-white/70 backdrop-blur rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"progress-tracker\">\r\n-                <div class=\"flex justify-between items-center\">\r\n-                    <div class=\"flex items-center gap-3\">\r\n-                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-emerald-600 flex items-center justify-center text-white font-semibold text-sm sm:text-base\">1</div>\r\n-                        <div>\r\n-                            <p class=\"font-semibold text-gray-900 text-sm sm:text-base\">Bill Review</p>\r\n-                            <p class=\"text-xs sm:text-sm text-gray-500\">Analyzing patterns</p>\r\n-                        </div>\r\n-                    </div>\r\n-                    <div class=\"h-0.5 w-16 sm:w-24 bg-gray-200\"></div>\r\n-                    <div class=\"flex items-center gap-3\">\r\n-                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm sm:text-base\">2</div>\r\n-                        <div>\r\n-                            <p class=\"font-semibold text-gray-400 text-sm sm:text-base\">Solar Quote</p>\r\n-                            <p class=\"text-xs sm:text-sm text-gray-400\">Up next</p>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-\r\n-            <!-- Content Grid -->\r\n-            <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 lg:gap-6 flex-1\">\r\n-                <!-- Consumption Analysis Card -->\r\n-                <div class=\"sm:col-span-2 bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0\" id=\"consumption-card\">\r\n-                    <div class=\"flex justify-between items-center mb-3 sm:mb-4\">\r\n-                        <h3 class=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n-                        <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs sm:text-sm font-medium\">\r\n-                            ${this.formatChange(trendData)}% vs last month\r\n-                        </div>\r\n-                    </div>\r\n-                    <div class=\"h-[200px] sm:h-[250px]\">\r\n-                        <canvas id=\"consumption-trend-chart\"></canvas>\r\n-                    </div>\r\n-                </div>\r\n-\r\n-                <!-- Current Bill Card -->\r\n-                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n-                    <div class=\"flex items-center justify-between mb-2\">\r\n-                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n-                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n-                            </svg>\r\n-                        </div>\r\n-                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n-                    </div>\r\n-                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Current Bill</p>\r\n-                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${this.formatCurrency(\r\n-                      this.billData.totalAmount\r\n-                    )}</p>\r\n-                    <div class=\"mt-4 h-1 bg-gray-100 rounded\">\r\n-                        <div class=\"h-full bg-emerald-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n-                    </div>\r\n-                </div>\r\n-\r\n-                <!-- Units Consumed Card -->\r\n-                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n-                    <div class=\"flex items-center justify-between mb-2\">\r\n-                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n-                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n-                            </svg>\r\n-                        </div>\r\n-                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">\r\n-                            ${this.calculateEfficiency()} efficiency\r\n-                        </span>\r\n-                    </div>\r\n-                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n-                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${\r\n-                      this.billData.unitsConsumed\r\n-                    } kWh</p>\r\n-                    <p class=\"text-xs sm:text-sm text-gray-500 mt-2\">Rate: ${this.formatCurrency(\r\n-                      this.billData.ratePerUnit\r\n-                    )}/kWh</p>\r\n-                </div>\r\n-\r\n-                <!-- Next Steps Card -->\r\n-                <div class=\"sm:col-span-2 mt-auto\">\r\n-                    <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n-                        <div class=\"absolute -top-2 -right-2\">\r\n-                            <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n-                                <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n-                                </svg>\r\n-                            </div>\r\n-                        </div>\r\n-                        <div class=\"max-w-lg\">\r\n-                            <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n-                            <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n-                                We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n-                            </p>\r\n-                            <button \r\n-                                id=\"proceed-to-quote\" \r\n-                                class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n-                                       transition-all duration-300 shadow-sm hover:shadow-lg\r\n-                                       flex items-center justify-center gap-2 group\"\r\n-                            >\r\n-                                Generate My Solar Quote\r\n-                                <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n-                                </svg>\r\n-                            </button>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-        </div>\r\n-    `;\r\n-\r\n-    // Update the chart colors in initializeCharts\r\n-    this.initializeCharts(trendData);\r\n-    this.startInsightAnimations();\r\n-    this.attachEventListeners();\r\n-  }\r\n-\r\n-  generateTrendData() {\r\n-    const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\"];\r\n-    return months.map((month) => ({\r\n-      month,\r\n-      consumption: Math.floor(\r\n-        this.billData.unitsConsumed * (0.8 + Math.random() * 0.4)\r\n-      ),\r\n-    }));\r\n-  }\r\n-\r\n-  initializeCharts(trendData) {\r\n-    const ctx = document.getElementById(\"consumption-trend-chart\");\r\n-    if (!ctx) return;\r\n-\r\n-    const isMobile = window.innerWidth < 640;\r\n-    const isTablet = window.innerWidth < 1024;\r\n-\r\n-    this.charts.consumption = new Chart(ctx, {\r\n-      type: \"line\",\r\n-      data: {\r\n-        labels: trendData.map((d) => d.month),\r\n-        datasets: [\r\n-          {\r\n-            label: \"Consumption (kWh)\",\r\n-            data: trendData.map((d) => d.consumption),\r\n-            borderColor: \"#059669\",\r\n-            backgroundColor: \"rgba(5, 150, 105, 0.1)\",\r\n-            tension: 0.4,\r\n-            fill: true,\r\n-            pointRadius: isMobile ? 2 : isTablet ? 3 : 4,\r\n-            pointHoverRadius: isMobile ? 4 : isTablet ? 5 : 6,\r\n-            pointBackgroundColor: \"#ffffff\",\r\n-            pointBorderColor: \"#059669\",\r\n-            pointBorderWidth: isMobile ? 1 : 2,\r\n-          },\r\n-        ],\r\n-      },\r\n-      options: {\r\n-        responsive: true,\r\n-        maintainAspectRatio: false,\r\n-        interaction: {\r\n-          mode: \"nearest\",\r\n-          intersect: false,\r\n-          axis: \"x\",\r\n-        },\r\n-        plugins: {\r\n-          legend: {\r\n-            display: false,\r\n-          },\r\n-          tooltip: {\r\n-            enabled: true,\r\n-            backgroundColor: \"white\",\r\n-            titleColor: \"#1f2937\",\r\n-            bodyColor: \"#4b5563\",\r\n-            borderColor: \"#e5e7eb\",\r\n-            borderWidth: 1,\r\n-            padding: isMobile ? 8 : 12,\r\n-            titleFont: {\r\n-              size: isMobile ? 12 : 14,\r\n-              weight: \"bold\",\r\n-            },\r\n-            bodyFont: {\r\n-              size: isMobile ? 11 : 13,\r\n-            },\r\n-            displayColors: false,\r\n-          },\r\n-        },\r\n-        scales: {\r\n-          x: {\r\n-            grid: {\r\n-              display: false,\r\n-            },\r\n-            ticks: {\r\n-              font: {\r\n-                size: isMobile ? 10 : isTablet ? 11 : 12,\r\n-              },\r\n-            },\r\n-          },\r\n-          y: {\r\n-            beginAtZero: true,\r\n-            grid: {\r\n-              color: \"rgba(0, 0, 0, 0.05)\",\r\n-            },\r\n-            ticks: {\r\n-              font: {\r\n-                size: isMobile ? 10 : isTablet ? 11 : 12,\r\n-              },\r\n-            },\r\n-          },\r\n-        },\r\n-      },\r\n-    });\r\n-\r\n-    // Add resize handler\r\n-    window.addEventListener(\"resize\", this.handleResize.bind(this));\r\n-  }\r\n-\r\n-  handleResize() {\r\n-    clearTimeout(this.resizeTimeout);\r\n-    this.resizeTimeout = setTimeout(() => {\r\n-      if (this.charts.consumption) {\r\n-        this.charts.consumption.resize();\r\n-      }\r\n-    }, 250);\r\n-  }\r\n-\r\n-  startInsightAnimations() {\r\n-    // First init the counters\r\n-    this.initCountUps();\r\n-\r\n-    gsap.to(\"#insights-header\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-\r\n-    gsap.to(\"#progress-tracker\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      delay: 0.2,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-\r\n-    gsap.to(\"#consumption-card\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      delay: 0.4,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-\r\n-    gsap.to(\".consumption-metric\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      stagger: 0.2,\r\n-      delay: 0.6,\r\n-      ease: \"power2.out\",\r\n-      onComplete: () => {\r\n-        // Start the counters after the cards animate in\r\n-        this.startCountUps();\r\n-      },\r\n-    });\r\n-\r\n-    gsap.to(\"#next-steps-card\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      delay: 1,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-  }\r\n-\r\n-  // Utility methods\r\n-  formatCurrency(value) {\r\n-    return new Intl.NumberFormat(\"en-PK\", {\r\n-      style: \"currency\",\r\n-      currency: \"PKR\",\r\n-      minimumFractionDigits: 0,\r\n-      maximumFractionDigits: 0,\r\n-    }).format(value);\r\n-  }\r\n-\r\n-  calculateDueDays() {\r\n-    const dueDate = new Date(this.billData.dueDate);\r\n-    const today = new Date();\r\n-    const diffTime = Math.abs(dueDate - today);\r\n-    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n-  }\r\n-\r\n-  calculateBillProgress() {\r\n-    const daysInMonth = 30;\r\n-    const today = new Date();\r\n-    const billDate = new Date(this.billData.issueDate);\r\n-    const daysPassed = Math.ceil((today - billDate) / (1000 * 60 * 60 * 24));\r\n-    return Math.min((daysPassed / daysInMonth) * 100, 100);\r\n-  }\r\n-\r\n-  calculateEfficiency() {\r\n-    const avgConsumption = 500; // Example average consumption\r\n-    const efficiency = (this.billData.unitsConsumed / avgConsumption) * 100;\r\n-    return efficiency <= 100 ? \"High\" : \"Low\";\r\n-  }\r\n-\r\n-  formatChange(data) {\r\n-    const lastTwo = data.slice(-2);\r\n-    const change =\r\n-      ((lastTwo[1].consumption - lastTwo[0].consumption) /\r\n-        lastTwo[0].consumption) *\r\n-      100;\r\n-    return change.toFixed(1);\r\n-  }\r\n-\r\n-  attachEventListeners() {\r\n-    const quoteButton = document.getElementById(\"proceed-to-quote\");\r\n-    const mobileQuoteButton = document.getElementById(\r\n-      \"proceed-to-quote-mobile\"\r\n-    );\r\n-\r\n-    if (quoteButton) {\r\n-      quoteButton.addEventListener(\"click\", () => {\r\n-        window.router.push(\"/quote\");\r\n-      });\r\n-    }\r\n-\r\n-    if (mobileQuoteButton) {\r\n-      mobileQuoteButton.addEventListener(\"click\", () => {\r\n-        window.router.push(\"/quote\");\r\n-      });\r\n-    }\r\n-\r\n-    // Add touch event handlers for mobile\r\n-    if (this.isMobileDevice()) {\r\n-      const insightsContainer = document.getElementById(\"insights-container\");\r\n-      let startY = 0;\r\n-      let scrolling = false;\r\n-\r\n-      insightsContainer.addEventListener(\r\n-        \"touchstart\",\r\n-        (e) => {\r\n-          startY = e.touches[0].pageY;\r\n-        },\r\n-        { passive: true }\r\n-      );\r\n-\r\n-      insightsContainer.addEventListener(\r\n-        \"touchmove\",\r\n-        (e) => {\r\n-          if (!scrolling) {\r\n-            const currentY = e.touches[0].pageY;\r\n-            const diff = startY - currentY;\r\n-\r\n-            if (diff > 0) {\r\n-              // Scrolling up\r\n-              scrolling = true;\r\n-              gsap.to(insightsContainer, {\r\n-                height: \"85vh\",\r\n-                duration: 0.3,\r\n-                ease: \"power2.out\",\r\n-              });\r\n-            }\r\n-          }\r\n-        },\r\n-        { passive: true }\r\n-      );\r\n-    }\r\n-  }\r\n-}\r\n-// BillReviewPage.js\r\n-import { gsap } from \"gsap\";\r\n-import { getBillData } from \"../store/solarSizingState.js\";\r\n-import { BillPreview } from \"./BillPreview.js\";\r\n-import Chart from \"chart.js/auto\";\r\n-import { CountUp } from \"countup.js\";\r\n-\r\n-export class BillReviewPage {\r\n-  constructor() {\r\n-    this.billData = getBillData();\r\n-    this.charts = {};\r\n-  }\r\n-\r\n-  addScrollStyles() {\r\n-    const style = document.createElement(\"style\");\r\n-    style.textContent = `\r\n-        .custom-scrollbar {\r\n-            scrollbar-width: thin;\r\n-            scrollbar-color: rgba(0, 0, 0, 0.2) transparent;\r\n-        }\r\n-\r\n-        .custom-scrollbar::-webkit-scrollbar {\r\n-            width: 6px;\r\n-        }\r\n-\r\n-        .custom-scrollbar::-webkit-scrollbar-track {\r\n-            background: transparent;\r\n-        }\r\n-\r\n-        .custom-scrollbar::-webkit-scrollbar-thumb {\r\n-            background-color: rgba(0, 0, 0, 0.2);\r\n-            border-radius: 3px;\r\n-        }\r\n-\r\n-        .custom-scrollbar::-webkit-scrollbar-thumb:hover {\r\n-            background-color: rgba(0, 0, 0, 0.3);\r\n-        }\r\n-    `;\r\n-    document.head.appendChild(style);\r\n-  }\r\n-\r\n-  // Update the main container structure in render method\r\n-  render() {\r\n-    const app = document.getElementById(\"app\");\r\n-    const trendData = this.generateTrendData();\r\n-\r\n-    app.innerHTML = `\r\n-    <div class=\"h-screen w-full overflow-hidden bg-white transition-colors duration-1000 opacity-0\" id=\"quote-result-page\">\r\n-        <div class=\"h-full w-full flex flex-col md:flex-row relative\" id=\"main-content\">\r\n-            <!-- Bill Preview Side - Full width on mobile -->\r\n-            <div class=\"w-full md:w-1/2 h-[45vh] md:h-full overflow-hidden opacity-0\" id=\"bill-preview-container\">\r\n-                <div id=\"bill-preview\" class=\"h-full\"></div>\r\n-            </div>\r\n-\r\n-            <!-- Loading Indicator -->\r\n-            <div class=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center z-10\" \r\n-                 id=\"loading-indicator\">\r\n-                <div class=\"loading-spinner\"></div>\r\n-                <p class=\"text-emerald-600 font-medium\">Analyzing your bill...</p>\r\n-            </div>\r\n-\r\n-            <!-- Insights Side - Slides up from bottom on mobile -->\r\n-            <div class=\"fixed md:relative w-full md:w-1/2 h-[60vh] md:h-full invisible bg-gray-50 rounded-t-3xl md:rounded-none shadow-2xl md:shadow-none\" \r\n-                 id=\"insights-container\"\r\n-                 style=\"bottom: 0; transform: translateY(100%);\">\r\n-                <!-- Drag Handle for mobile -->\r\n-                <div class=\"md:hidden w-full flex justify-center py-2\">\r\n-                    <div class=\"w-12 h-1.5 rounded-full bg-gray-300\"></div>\r\n-                </div>\r\n-\r\n-                <div class=\"h-full flex flex-col p-4 sm:p-6 overflow-auto hide-scrollbar\">\r\n-                    <!-- Top Section: Fixed Height -->\r\n-                    <div class=\"flex-none space-y-3 sm:space-y-4\">\r\n-                        <!-- Header Section -->\r\n-                        <div class=\"opacity-0\" id=\"insights-header\">\r\n-                            <div class=\"flex items-center gap-3\">\r\n-                                <div class=\"flex-shrink-0\">\r\n-                                    <div class=\"w-8 h-8 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-600 flex items-center justify-center\">\r\n-                                        <svg class=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n-                                        </svg>\r\n-                                    </div>\r\n-                                </div>\r\n-                                <div>\r\n-                                    <h2 class=\"text-base sm:text-lg font-bold text-gray-900\">Bill Analysis</h2>\r\n-                                    <p class=\"text-xs sm:text-sm text-gray-500\">Understanding your consumption</p>\r\n-                                </div>\r\n-                            </div>\r\n-                        </div>\r\n-\r\n-                        <!-- Progress Tracker -->\r\n-                        <div class=\"bg-white/70 backdrop-blur rounded-lg shadow-sm p-3 opacity-0\" id=\"progress-tracker\">\r\n-                            <div class=\"flex justify-between items-center\">\r\n-                                <div class=\"flex items-center gap-3\">\r\n-                                    <div class=\"w-8 h-8 rounded-full bg-emerald-600 flex items-center justify-center text-white font-semibold text-sm\">1</div>\r\n-                                    <div>\r\n-                                        <p class=\"font-semibold text-gray-900 text-sm\">Bill Review</p>\r\n-                                        <p class=\"text-xs text-gray-500\">Analyzing patterns</p>\r\n-                                    </div>\r\n-                                </div>\r\n-                                <div class=\"h-0.5 w-12 bg-gray-200\"></div>\r\n-                                <div class=\"flex items-center gap-3\">\r\n-                                    <div class=\"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm\">2</div>\r\n-                                    <div>\r\n-                                        <p class=\"font-semibold text-gray-400 text-sm\">Solar Quote</p>\r\n-                                        <p class=\"text-xs text-gray-400\">Up next</p>\r\n-                                    </div>\r\n-                                </div>\r\n-                            </div>\r\n-                        </div>\r\n-                    </div>\r\n-                    <!-- Main Content Area: Flexible Height -->\r\n-                    <div class=\"flex-1 min-h-0 mt-3\">\r\n-                        <div class=\"h-full grid grid-rows-[auto_1fr_auto] gap-3\">\r\n-                            <!-- Consumption Analysis Card -->\r\n-                            <div class=\"bg-white rounded-lg shadow-sm p-3 opacity-0\" id=\"consumption-card\">\r\n-                                <div class=\"flex justify-between items-center mb-2\">\r\n-                                    <h3 class=\"text-sm font-semibold text-gray-900\">Consumption Analysis</h3>\r\n-                                    <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs font-medium\">\r\n-                                        ${this.formatChange(\r\n-                                          trendData\r\n-                                        )}% vs last month\r\n-                                    </div>\r\n-                                </div>\r\n-                                <div class=\"h-[140px] sm:h-[180px]\">\r\n-                                    <canvas id=\"consumption-trend-chart\"></canvas>\r\n-                                </div>\r\n-                            </div>\r\n-\r\n-                            <!-- Metrics Cards -->\r\n-                            <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\r\n-                                <!-- Current Bill Card -->\r\n-                                <div class=\"bg-white rounded-lg shadow-sm p-3 opacity-0 consumption-metric\">\r\n-                                    <div class=\"flex items-center justify-between mb-2\">\r\n-                                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n-                                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n-                                            </svg>\r\n-                                        </div>\r\n-                                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n-                                    </div>\r\n-                                    <p class=\"text-xs text-gray-500 mb-1\">Current Bill</p>\r\n-                                    <p class=\"text-lg font-bold text-gray-900\" id=\"bill-amount\">${this.formatCurrency(\r\n-                                      this.billData.amount\r\n-                                    )}</p>\r\n-                                    <div class=\"mt-2 h-1 bg-gray-100 rounded\">\r\n-                                        <div class=\"h-full bg-emerald-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n-                                    </div>\r\n-                                </div>\r\n-\r\n-                                <!-- Units Consumed Card -->\r\n-                                <div class=\"bg-white rounded-lg shadow-sm p-3 opacity-0 consumption-metric\">\r\n-                                    <div class=\"flex items-center justify-between mb-2\">\r\n-                                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n-                                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n-                                            </svg>\r\n-                                        </div>\r\n-                                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs rounded-full\">\r\n-                                            ${this.calculateEfficiency()} efficiency\r\n-                                        </span>\r\n-                                    </div>\r\n-                                    <p class=\"text-xs text-gray-500 mb-1\">Units Consumed</p>\r\n-                                    <p class=\"text-lg font-bold text-gray-900\" id=\"units-consumed\">${\r\n-                                      this.billData.unitsConsumed\r\n-                                    } kWh</p>\r\n-                                    <p class=\"text-xs text-gray-500 mt-2\">Rate: ${this.formatCurrency(\r\n-                                      this.billData.ratePerUnit\r\n-                                    )}/kWh</p>\r\n-                                </div>\r\n-                            </div>\r\n-\r\n-                            <!-- Next Steps Card -->\r\n-                            <div class=\"mt-auto\">\r\n-                                <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg shadow-sm p-3 relative opacity-0\" id=\"next-steps-card\">\r\n-                                    <div class=\"absolute -top-2 -right-2\">\r\n-                                        <div class=\"w-10 h-10 animated-gradient rounded-full flex items-center justify-center\">\r\n-                                            <svg class=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n-                                            </svg>\r\n-                                        </div>\r\n-                                    </div>\r\n-                                    <div class=\"max-w-lg\">\r\n-                                        <h3 class=\"text-base font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n-                                        <p class=\"text-sm text-white/90 mb-4\">\r\n-                                            We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n-                                        </p>\r\n-                                        <button \r\n-                                            id=\"proceed-to-quote\" \r\n-                                            class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n-                                                   transition-all duration-300 shadow-sm hover:shadow-lg\r\n-                                                   flex items-center justify-center gap-2 group\"\r\n-                                        >\r\n-                                            Generate My Solar Quote\r\n-                                            <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n-                                            </svg>\r\n-                                        </button>\r\n-                                    </div>\r\n-                                </div>\r\n-                            </div>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-        </div>\r\n-    </div>\r\n-`;\r\n-\r\n-    const isMobile = this.isMobileDevice();\r\n-\r\n-    if (isMobile) {\r\n-      this.initializeMobileInteractions();\r\n-    }\r\n-\r\n-    this.attachBaseStyles();\r\n-\r\n-    // Use requestAnimationFrame to ensure styles are applied before starting\r\n-    requestAnimationFrame(() => {\r\n-      requestAnimationFrame(() => {\r\n-        // Make container visible\r\n-        const container = document.getElementById(\"quote-result-page\");\r\n-        if (container) {\r\n-          container.classList.remove(\"opacity-0\");\r\n-        }\r\n-\r\n-        // Now render bill preview and start animation\r\n-        this.renderBillPreview();\r\n-        this.startAnimation().catch((error) => {\r\n-          console.error(\"Animation failed:\", error);\r\n-          this.showError();\r\n-        });\r\n-      });\r\n-    });\r\n-  }\r\n-\r\n-  isMobileDevice() {\r\n-    return window.innerWidth < 768; // You can adjust this breakpoint\r\n-  }\r\n-\r\n-  getTrendChangeText() {\r\n-    const trendData = this.generateTrendData();\r\n-    return `${this.formatChange(trendData)}% vs last month`;\r\n-  }\r\n-\r\n-  initializeMobileInteractions() {\r\n-    const insightsContainer = document.getElementById(\"insights-container\");\r\n-    let startY = 0;\r\n-    let currentY = 0;\r\n-    let initialHeight = \"60vh\";\r\n-    let expandedHeight = \"92vh\";\r\n-\r\n-    // Handle drag to expand/collapse\r\n-    const handleTouchStart = (e) => {\r\n-      startY = e.touches[0].clientY;\r\n-      currentY = insightsContainer.getBoundingClientRect().height;\r\n-    };\r\n-\r\n-    const handleTouchMove = (e) => {\r\n-      const deltaY = startY - e.touches[0].clientY;\r\n-      const newHeight = Math.max(\r\n-        Math.min(currentY + deltaY, window.innerHeight * 0.92),\r\n-        window.innerHeight * 0.3\r\n-      );\r\n-\r\n-      gsap.to(insightsContainer, {\r\n-        height: newHeight,\r\n-        duration: 0.1,\r\n-        ease: \"none\",\r\n-      });\r\n-    };\r\n-\r\n-    const handleTouchEnd = (e) => {\r\n-      const finalHeight = insightsContainer.getBoundingClientRect().height;\r\n-      const threshold = window.innerHeight * 0.6;\r\n-\r\n-      gsap.to(insightsContainer, {\r\n-        height: finalHeight > threshold ? expandedHeight : initialHeight,\r\n-        duration: 0.3,\r\n-        ease: \"power2.out\",\r\n-      });\r\n-    };\r\n-\r\n-    // Add touch event listeners\r\n-    const dragHandle = insightsContainer.querySelector(\"div:first-child\");\r\n-    dragHandle.addEventListener(\"touchstart\", handleTouchStart);\r\n-    dragHandle.addEventListener(\"touchmove\", handleTouchMove);\r\n-    dragHandle.addEventListener(\"touchend\", handleTouchEnd);\r\n-  }\r\n-\r\n-  async startAnimation() {\r\n-    if (this.error) {\r\n-      this.showError();\r\n-      return;\r\n-    }\r\n-\r\n-    const isMobile = this.isMobileDevice();\r\n-    const billPreviewContainer = document.getElementById(\r\n-      \"bill-preview-container\"\r\n-    );\r\n-    const insightsContainer = document.getElementById(\"insights-container\");\r\n-    const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n-    const quoteResultPage = document.getElementById(\"quote-result-page\");\r\n-\r\n-    // Initial states\r\n-    gsap.set([billPreviewContainer, loadingIndicator], {\r\n-      opacity: 0,\r\n-    });\r\n-\r\n-    if (isMobile) {\r\n-      // Mobile animation sequence\r\n-      gsap.set(billPreviewContainer, {\r\n-        y: -20,\r\n-      });\r\n-\r\n-      const tl = gsap.timeline({\r\n-        defaults: { duration: 0.8, ease: \"power2.out\" },\r\n-      });\r\n-\r\n-      await tl\r\n-        .to(billPreviewContainer, {\r\n-          opacity: 1,\r\n-          y: 0,\r\n-          duration: 1,\r\n-        })\r\n-        .to(loadingIndicator, {\r\n-          opacity: 1,\r\n-          scale: 1,\r\n-          duration: 0.5,\r\n-        })\r\n-        .to(loadingIndicator, {\r\n-          opacity: 0,\r\n-          scale: 0.5,\r\n-          delay: 0.5,\r\n-        })\r\n-        .call(() => {\r\n-          insightsContainer.style.visibility = \"visible\";\r\n-        })\r\n-        .to(insightsContainer, {\r\n-          y: \"0%\",\r\n-          duration: 0.8,\r\n-          ease: \"power4.out\",\r\n-        });\r\n-    } else {\r\n-      // Desktop animation sequence (your existing animation)\r\n-      gsap.set(billPreviewContainer, {\r\n-        scale: 0.9,\r\n-        position: \"absolute\",\r\n-        left: \"50%\",\r\n-        top: \"50%\",\r\n-        xPercent: -50,\r\n-        yPercent: -50,\r\n-        width: \"47.5%\",\r\n-      });\r\n-\r\n-      const tl = gsap.timeline({\r\n-        defaults: { duration: 0.8, ease: \"power2.out\" },\r\n-      });\r\n-\r\n-      await tl\r\n-        .to(billPreviewContainer, {\r\n-          opacity: 1,\r\n-          scale: 1,\r\n-          duration: 1,\r\n-        })\r\n-        .to(loadingIndicator, {\r\n-          opacity: 1,\r\n-          scale: 1,\r\n-          duration: 0.5,\r\n-        })\r\n-        .to(loadingIndicator, {\r\n-          opacity: 0,\r\n-          scale: 0.5,\r\n-          delay: 1,\r\n-        })\r\n-        .to(\r\n-          billPreviewContainer,\r\n-          {\r\n-            left: \"0%\",\r\n-            top: \"0%\",\r\n-            xPercent: 0,\r\n-            yPercent: 0,\r\n-            width: \"50%\",\r\n-            position: \"relative\",\r\n-          },\r\n-          \"-=0.3\"\r\n-        )\r\n-        .call(() => {\r\n-          insightsContainer.style.visibility = \"visible\";\r\n-        })\r\n-        .to(insightsContainer, {\r\n-          opacity: 1,\r\n-          duration: 0.5,\r\n-        });\r\n-    }\r\n-\r\n-    const trendData = this.generateTrendData();\r\n-    this.initializeCharts(trendData);\r\n-    this.startInsightAnimations();\r\n-  }\r\n-  \r\n-  attachBaseStyles() {\r\n-    const style = document.createElement(\"style\");\r\n-    style.textContent = this.getBaseStyles();\r\n-    document.head.appendChild(style);\r\n-  }\r\n-\r\n-  getBaseStyles() {\r\n-    return `\r\n-        ${this.existingBaseStyles}\r\n-\r\n-        /* Mobile Styles */\r\n-        @media (max-width: 768px) {\r\n-            #insights-container {\r\n-                transition: transform 0.3s ease;\r\n-                will-change: transform;\r\n-                touch-action: none;\r\n-            }\r\n-\r\n-            .drag-handle {\r\n-                cursor: grab;\r\n-                touch-action: none;\r\n-            }\r\n-\r\n-            .drag-handle:active {\r\n-                cursor: grabbing;\r\n-            }\r\n-        }\r\n-    `;\r\n-  }\r\n-\r\n   initCountUps() {\r\n     const countUpOptions = {\r\n       duration: 2,\r\n       useEasing: true,\r\n"
                },
                {
                    "date": 1731681658980,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -281,9 +281,9 @@\n       });\r\n     };\r\n \r\n     // Add touch event listeners\r\n-    const dragHandle = insightsContainer.querySelector(\".drag-handle\"); // Add this class to the handle div\r\n+    const dragHandle = insightsContainer.querySelector('.drag-handle');  \r\n     dragHandle.addEventListener(\"touchstart\", handleTouchStart);\r\n     dragHandle.addEventListener(\"touchmove\", handleTouchMove);\r\n     dragHandle.addEventListener(\"touchend\", handleTouchEnd);\r\n   }\r\n"
                },
                {
                    "date": 1731681677749,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,9 +63,9 @@\n             <div class=\"fixed md:relative w-full md:w-1/2 h-[60vh] md:h-full invisible bg-gray-50 rounded-t-3xl md:rounded-none shadow-2xl md:shadow-none\" \r\n                  id=\"insights-container\"\r\n                  style=\"bottom: 0; transform: translateY(100%);\">\r\n                 <!-- Drag Handle for mobile -->\r\n-                <div class=\"md:hidden w-full flex justify-center py-2\">\r\n+                <div class=\"md:hidden w-full flex justify-center py-2 drag-handle\">\r\n                     <div class=\"w-12 h-1.5 rounded-full bg-gray-300\"></div>\r\n                 </div>\r\n \r\n                 <div class=\"h-full flex flex-col p-4 sm:p-6 overflow-auto hide-scrollbar\">\r\n"
                },
                {
                    "date": 1731681799764,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -281,9 +281,9 @@\n       });\r\n     };\r\n \r\n     // Add touch event listeners\r\n-    const dragHandle = insightsContainer.querySelector('.drag-handle');  \r\n+    const dragHandle = insightsContainer.querySelector(\".drag-handle\");\r\n     dragHandle.addEventListener(\"touchstart\", handleTouchStart);\r\n     dragHandle.addEventListener(\"touchmove\", handleTouchMove);\r\n     dragHandle.addEventListener(\"touchend\", handleTouchEnd);\r\n   }\r\n@@ -334,16 +334,20 @@\n           delay: 0.5,\r\n         })\r\n         .call(() => {\r\n           insightsContainer.style.visibility = \"visible\";\r\n+          // Start insight animations after insights container is visible\r\n+          requestAnimationFrame(() => {\r\n+            this.startInsightAnimations();\r\n+          });\r\n         })\r\n         .to(insightsContainer, {\r\n           y: \"0%\",\r\n           duration: 0.8,\r\n           ease: \"power4.out\",\r\n         });\r\n     } else {\r\n-      // Desktop animation sequence (your existing animation)\r\n+      // Desktop animation sequence\r\n       gsap.set(billPreviewContainer, {\r\n         scale: 0.9,\r\n         position: \"absolute\",\r\n         left: \"50%\",\r\n@@ -386,18 +390,86 @@\n           \"-=0.3\"\r\n         )\r\n         .call(() => {\r\n           insightsContainer.style.visibility = \"visible\";\r\n+          // Start insight animations after insights container is visible\r\n+          requestAnimationFrame(() => {\r\n+            this.startInsightAnimations();\r\n+          });\r\n         })\r\n         .to(insightsContainer, {\r\n           opacity: 1,\r\n           duration: 0.5,\r\n         });\r\n     }\r\n+  }\r\n \r\n-    const trendData = this.generateTrendData();\r\n-    this.initializeCharts(trendData);\r\n-    this.startInsightAnimations();\r\n+  startInsightAnimations() {\r\n+    // First init the counters\r\n+    this.initCountUps();\r\n+\r\n+    // Make sure elements exist before animating\r\n+    const elements = {\r\n+      header: document.getElementById(\"insights-header\"),\r\n+      progress: document.getElementById(\"progress-tracker\"),\r\n+      consumption: document.getElementById(\"consumption-card\"),\r\n+      metrics: document.querySelectorAll(\".consumption-metric\"),\r\n+      nextSteps: document.getElementById(\"next-steps-card\"),\r\n+    };\r\n+\r\n+    // Check if elements exist before animating\r\n+    if (elements.header) {\r\n+      gsap.to(elements.header, {\r\n+        opacity: 1,\r\n+        y: 0,\r\n+        duration: 0.6,\r\n+        ease: \"power2.out\",\r\n+      });\r\n+    }\r\n+\r\n+    if (elements.progress) {\r\n+      gsap.to(elements.progress, {\r\n+        opacity: 1,\r\n+        y: 0,\r\n+        duration: 0.6,\r\n+        delay: 0.2,\r\n+        ease: \"power2.out\",\r\n+      });\r\n+    }\r\n+\r\n+    if (elements.consumption) {\r\n+      gsap.to(elements.consumption, {\r\n+        opacity: 1,\r\n+        y: 0,\r\n+        duration: 0.6,\r\n+        delay: 0.4,\r\n+        ease: \"power2.out\",\r\n+      });\r\n+    }\r\n+\r\n+    if (elements.metrics.length > 0) {\r\n+      gsap.to(elements.metrics, {\r\n+        opacity: 1,\r\n+        y: 0,\r\n+        duration: 0.6,\r\n+        stagger: 0.2,\r\n+        delay: 0.6,\r\n+        ease: \"power2.out\",\r\n+        onComplete: () => {\r\n+          this.startCountUps();\r\n+        },\r\n+      });\r\n+    }\r\n+\r\n+    if (elements.nextSteps) {\r\n+      gsap.to(elements.nextSteps, {\r\n+        opacity: 1,\r\n+        y: 0,\r\n+        duration: 0.6,\r\n+        delay: 1,\r\n+        ease: \"power2.out\",\r\n+      });\r\n+    }\r\n   }\r\n \r\n   attachBaseStyles() {\r\n     const style = document.createElement(\"style\");\r\n"
                },
                {
                    "date": 1731681822723,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -857,57 +857,9 @@\n       }\r\n     }, 250);\r\n   }\r\n \r\n-  startInsightAnimations() {\r\n-    // First init the counters\r\n-    this.initCountUps();\r\n \r\n-    gsap.to(\"#insights-header\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-\r\n-    gsap.to(\"#progress-tracker\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      delay: 0.2,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-\r\n-    gsap.to(\"#consumption-card\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      delay: 0.4,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-\r\n-    gsap.to(\".consumption-metric\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      stagger: 0.2,\r\n-      delay: 0.6,\r\n-      ease: \"power2.out\",\r\n-      onComplete: () => {\r\n-        // Start the counters after the cards animate in\r\n-        this.startCountUps();\r\n-      },\r\n-    });\r\n-\r\n-    gsap.to(\"#next-steps-card\", {\r\n-      opacity: 1,\r\n-      y: 0,\r\n-      duration: 0.6,\r\n-      delay: 1,\r\n-      ease: \"power2.out\",\r\n-    });\r\n-  }\r\n-\r\n   // Utility methods\r\n   formatCurrency(value) {\r\n     return new Intl.NumberFormat(\"en-PK\", {\r\n       style: \"currency\",\r\n"
                },
                {
                    "date": 1731681966775,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,13 +58,11 @@\n                 <div class=\"loading-spinner\"></div>\r\n                 <p class=\"text-emerald-600 font-medium\">Analyzing your bill...</p>\r\n             </div>\r\n \r\n-            <!-- Insights Side - Slides up from bottom on mobile -->\r\n-            <div class=\"fixed md:relative w-full md:w-1/2 h-[60vh] md:h-full invisible bg-gray-50 rounded-t-3xl md:rounded-none shadow-2xl md:shadow-none\" \r\n-                 id=\"insights-container\"\r\n-                 style=\"bottom: 0; transform: translateY(100%);\">\r\n-                <!-- Drag Handle for mobile -->\r\n+            <div class=\"fixed md:relative w-full md:w-1/2 h-[60vh] md:h-full bg-gray-50 rounded-t-3xl md:rounded-none shadow-2xl md:shadow-none\" \r\n+                id=\"insights-container\"\r\n+                style=\"bottom: 0;\">  <!-- Removed initial transform -->                <!-- Drag Handle for mobile -->\r\n                 <div class=\"md:hidden w-full flex justify-center py-2 drag-handle\">\r\n                     <div class=\"w-12 h-1.5 rounded-full bg-gray-300\"></div>\r\n                 </div>\r\n \r\n@@ -312,8 +310,15 @@\n       gsap.set(billPreviewContainer, {\r\n         y: -20,\r\n       });\r\n \r\n+      // Set initial state for mobile insights\r\n+      gsap.set(insightsContainer, {\r\n+        y: \"100%\",\r\n+        visibility: \"visible\",\r\n+        opacity: 1,\r\n+      });\r\n+\r\n       const tl = gsap.timeline({\r\n         defaults: { duration: 0.8, ease: \"power2.out\" },\r\n       });\r\n \r\n@@ -332,19 +337,17 @@\n           opacity: 0,\r\n           scale: 0.5,\r\n           delay: 0.5,\r\n         })\r\n-        .call(() => {\r\n-          insightsContainer.style.visibility = \"visible\";\r\n-          // Start insight animations after insights container is visible\r\n-          requestAnimationFrame(() => {\r\n-            this.startInsightAnimations();\r\n-          });\r\n-        })\r\n         .to(insightsContainer, {\r\n           y: \"0%\",\r\n           duration: 0.8,\r\n           ease: \"power4.out\",\r\n+          onComplete: () => {\r\n+            requestAnimationFrame(() => {\r\n+              this.startInsightAnimations();\r\n+            });\r\n+          },\r\n         });\r\n     } else {\r\n       // Desktop animation sequence\r\n       gsap.set(billPreviewContainer, {\r\n@@ -356,8 +359,14 @@\n         yPercent: -50,\r\n         width: \"47.5%\",\r\n       });\r\n \r\n+      // Set initial state for desktop insights\r\n+      gsap.set(insightsContainer, {\r\n+        opacity: 0,\r\n+        visibility: \"hidden\",\r\n+      });\r\n+\r\n       const tl = gsap.timeline({\r\n         defaults: { duration: 0.8, ease: \"power2.out\" },\r\n       });\r\n \r\n@@ -388,18 +397,19 @@\n             position: \"relative\",\r\n           },\r\n           \"-=0.3\"\r\n         )\r\n-        .call(() => {\r\n+        .add(() => {\r\n           insightsContainer.style.visibility = \"visible\";\r\n-          // Start insight animations after insights container is visible\r\n-          requestAnimationFrame(() => {\r\n-            this.startInsightAnimations();\r\n-          });\r\n         })\r\n         .to(insightsContainer, {\r\n           opacity: 1,\r\n           duration: 0.5,\r\n+          onComplete: () => {\r\n+            requestAnimationFrame(() => {\r\n+              this.startInsightAnimations();\r\n+            });\r\n+          },\r\n         });\r\n     }\r\n   }\r\n \r\n@@ -857,9 +867,8 @@\n       }\r\n     }, 250);\r\n   }\r\n \r\n-\r\n   // Utility methods\r\n   formatCurrency(value) {\r\n     return new Intl.NumberFormat(\"en-PK\", {\r\n       style: \"currency\",\r\n"
                },
                {
                    "date": 1731682163866,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -595,18 +595,24 @@\n       this.renderError(document.getElementById(\"app\"));\r\n       return;\r\n     }\r\n \r\n+    console.log(\"Rendering with bill data:\", this.billData); // Add debug log\r\n+\r\n     const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n     if (!billPreviewContainer) {\r\n       console.error(\"Bill preview container not found\");\r\n       return;\r\n     }\r\n \r\n-    const billPreview = new BillPreview(this.billData);\r\n+    const billPreview = new BillPreview({\r\n+      ...this.billData,\r\n+      totalAmount: this.billData.amount, // Ensure totalAmount is set\r\n+      unitsConsumed: this.billData.unitsConsumed,\r\n+      ratePerUnit: this.billData.ratePerUnit,\r\n+    });\r\n     billPreview.render(billPreviewContainer);\r\n   }\r\n-\r\n   renderError(container) {\r\n     container.innerHTML = `\r\n         <div class=\"flex items-center justify-center h-screen\">\r\n             <div class=\"text-center\">\r\n"
                },
                {
                    "date": 1731682213054,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -611,8 +611,10 @@\n       ratePerUnit: this.billData.ratePerUnit,\r\n     });\r\n     billPreview.render(billPreviewContainer);\r\n   }\r\n+\r\n+\r\n   renderError(container) {\r\n     container.innerHTML = `\r\n         <div class=\"flex items-center justify-center h-screen\">\r\n             <div class=\"text-center\">\r\n@@ -779,93 +781,106 @@\n   }\r\n \r\n   initializeCharts(trendData) {\r\n     const ctx = document.getElementById(\"consumption-trend-chart\");\r\n-    if (!ctx) return;\r\n+    if (!ctx) {\r\n+        console.error(\"Chart canvas not found\");\r\n+        return;\r\n+    }\r\n \r\n+    console.log(\"Initializing chart with data:\", trendData); // Add debug log\r\n+\r\n     const isMobile = window.innerWidth < 640;\r\n     const isTablet = window.innerWidth < 1024;\r\n \r\n+    if (this.charts.consumption) {\r\n+        this.charts.consumption.destroy();\r\n+    }\r\n+\r\n     this.charts.consumption = new Chart(ctx, {\r\n-      type: \"line\",\r\n-      data: {\r\n-        labels: trendData.map((d) => d.month),\r\n-        datasets: [\r\n-          {\r\n-            label: \"Consumption (kWh)\",\r\n-            data: trendData.map((d) => d.consumption),\r\n-            borderColor: \"#059669\",\r\n-            backgroundColor: \"rgba(5, 150, 105, 0.1)\",\r\n-            tension: 0.4,\r\n-            fill: true,\r\n-            pointRadius: isMobile ? 2 : isTablet ? 3 : 4,\r\n-            pointHoverRadius: isMobile ? 4 : isTablet ? 5 : 6,\r\n-            pointBackgroundColor: \"#ffffff\",\r\n-            pointBorderColor: \"#059669\",\r\n-            pointBorderWidth: isMobile ? 1 : 2,\r\n-          },\r\n-        ],\r\n-      },\r\n-      options: {\r\n-        responsive: true,\r\n-        maintainAspectRatio: false,\r\n-        interaction: {\r\n-          mode: \"nearest\",\r\n-          intersect: false,\r\n-          axis: \"x\",\r\n+        type: \"line\",\r\n+        data: {\r\n+            labels: trendData.map(d => d.month),\r\n+            datasets: [{\r\n+                label: \"Consumption (kWh)\",\r\n+                data: trendData.map(d => d.consumption),\r\n+                borderColor: \"#059669\",\r\n+                backgroundColor: \"rgba(5, 150, 105, 0.1)\",\r\n+                tension: 0.4,\r\n+                fill: true,\r\n+                pointRadius: isMobile ? 2 : isTablet ? 3 : 4,\r\n+                pointHoverRadius: isMobile ? 4 : isTablet ? 5 : 6,\r\n+                pointBackgroundColor: \"#ffffff\",\r\n+                pointBorderColor: \"#059669\",\r\n+                pointBorderWidth: isMobile ? 1 : 2,\r\n+            }]\r\n         },\r\n-        plugins: {\r\n-          legend: {\r\n-            display: false,\r\n-          },\r\n-          tooltip: {\r\n-            enabled: true,\r\n-            backgroundColor: \"white\",\r\n-            titleColor: \"#1f2937\",\r\n-            bodyColor: \"#4b5563\",\r\n-            borderColor: \"#e5e7eb\",\r\n-            borderWidth: 1,\r\n-            padding: isMobile ? 8 : 12,\r\n-            titleFont: {\r\n-              size: isMobile ? 12 : 14,\r\n-              weight: \"bold\",\r\n+        options: {\r\n+            responsive: true,\r\n+            maintainAspectRatio: false,\r\n+            interaction: {\r\n+                mode: \"nearest\",\r\n+                intersect: false,\r\n+                axis: \"x\"\r\n             },\r\n-            bodyFont: {\r\n-              size: isMobile ? 11 : 13,\r\n+            plugins: {\r\n+                legend: {\r\n+                    display: false\r\n+                },\r\n+                tooltip: {\r\n+                    enabled: true,\r\n+                    backgroundColor: \"white\",\r\n+                    titleColor: \"#1f2937\",\r\n+                    bodyColor: \"#4b5563\",\r\n+                    borderColor: \"#e5e7eb\",\r\n+                    borderWidth: 1,\r\n+                    padding: isMobile ? 8 : 12,\r\n+                    titleFont: {\r\n+                        size: isMobile ? 12 : 14,\r\n+                        weight: \"bold\"\r\n+                    },\r\n+                    bodyFont: {\r\n+                        size: isMobile ? 11 : 13\r\n+                    },\r\n+                    displayColors: false,\r\n+                    callbacks: {\r\n+                        label: function(context) {\r\n+                            let value = context.parsed.y;\r\n+                            return `${value.toFixed(0)} kWh`;\r\n+                        }\r\n+                    }\r\n+                }\r\n             },\r\n-            displayColors: false,\r\n-          },\r\n-        },\r\n-        scales: {\r\n-          x: {\r\n-            grid: {\r\n-              display: false,\r\n-            },\r\n-            ticks: {\r\n-              font: {\r\n-                size: isMobile ? 10 : isTablet ? 11 : 12,\r\n-              },\r\n-            },\r\n-          },\r\n-          y: {\r\n-            beginAtZero: true,\r\n-            grid: {\r\n-              color: \"rgba(0, 0, 0, 0.05)\",\r\n-            },\r\n-            ticks: {\r\n-              font: {\r\n-                size: isMobile ? 10 : isTablet ? 11 : 12,\r\n-              },\r\n-            },\r\n-          },\r\n-        },\r\n-      },\r\n+            scales: {\r\n+                x: {\r\n+                    grid: {\r\n+                        display: false\r\n+                    },\r\n+                    ticks: {\r\n+                        font: {\r\n+                            size: isMobile ? 10 : isTablet ? 11 : 12\r\n+                        }\r\n+                    }\r\n+                },\r\n+                y: {\r\n+                    beginAtZero: true,\r\n+                    grid: {\r\n+                        color: \"rgba(0, 0, 0, 0.05)\"\r\n+                    },\r\n+                    ticks: {\r\n+                        font: {\r\n+                            size: isMobile ? 10 : isTablet ? 11 : 12\r\n+                        },\r\n+                        callback: function(value) {\r\n+                            return `${value} kWh`;\r\n+                        }\r\n+                    }\r\n+                }\r\n+            }\r\n+        }\r\n     });\r\n+}\r\n \r\n-    // Add resize handler\r\n-    window.addEventListener(\"resize\", this.handleResize.bind(this));\r\n-  }\r\n-\r\n   handleResize() {\r\n     clearTimeout(this.resizeTimeout);\r\n     this.resizeTimeout = setTimeout(() => {\r\n       if (this.charts.consumption) {\r\n"
                },
                {
                    "date": 1731682228621,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -557,39 +557,42 @@\n     `;\r\n   }\r\n \r\n   initCountUps() {\r\n+    console.log(\"Initializing CountUps with data:\", this.billData); // Add debug log\r\n+\r\n     const countUpOptions = {\r\n-      duration: 2,\r\n-      useEasing: true,\r\n-      useGrouping: true,\r\n+        duration: 2,\r\n+        useEasing: true,\r\n+        useGrouping: true,\r\n     };\r\n \r\n     // Initialize counters for the bill amounts and units\r\n     this.countUps = {\r\n-      billAmount: new CountUp(\"bill-amount\", this.billData.totalAmount, {\r\n-        ...countUpOptions,\r\n-        prefix: \"PKR \",\r\n-      }),\r\n-      unitsConsumed: new CountUp(\r\n-        \"units-consumed\",\r\n-        this.billData.unitsConsumed,\r\n-        {\r\n-          ...countUpOptions,\r\n-          suffix: \" kWh\",\r\n-        }\r\n-      ),\r\n+        billAmount: new CountUp(\"bill-amount\", this.billData.amount || 0, {\r\n+            ...countUpOptions,\r\n+            prefix: \"PKR \",\r\n+            decimalPlaces: 0,\r\n+        }),\r\n+        unitsConsumed: new CountUp(\"units-consumed\", this.billData.unitsConsumed || 0, {\r\n+            ...countUpOptions,\r\n+            suffix: \" kWh\",\r\n+            decimalPlaces: 0,\r\n+        }),\r\n     };\r\n-  }\r\n+}\r\n \r\n-  startCountUps() {\r\n-    Object.values(this.countUps).forEach((counter) => {\r\n-      if (counter && !counter.error) {\r\n-        counter.start();\r\n-      }\r\n+startCountUps() {\r\n+    console.log(\"Starting CountUps\"); // Add debug log\r\n+    Object.entries(this.countUps).forEach(([key, counter]) => {\r\n+        if (counter && !counter.error) {\r\n+            console.log(`Starting counter: ${key}`);\r\n+            counter.start();\r\n+        } else {\r\n+            console.error(`Error with counter ${key}:`, counter?.error);\r\n+        }\r\n     });\r\n-  }\r\n-\r\n+}\r\n   renderBillPreview() {\r\n     if (!this.billData) {\r\n       console.error(\"Bill data is not available\");\r\n       this.renderError(document.getElementById(\"app\"));\r\n"
                },
                {
                    "date": 1731682256934,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -560,39 +560,43 @@\n   initCountUps() {\r\n     console.log(\"Initializing CountUps with data:\", this.billData); // Add debug log\r\n \r\n     const countUpOptions = {\r\n-        duration: 2,\r\n-        useEasing: true,\r\n-        useGrouping: true,\r\n+      duration: 2,\r\n+      useEasing: true,\r\n+      useGrouping: true,\r\n     };\r\n \r\n     // Initialize counters for the bill amounts and units\r\n     this.countUps = {\r\n-        billAmount: new CountUp(\"bill-amount\", this.billData.amount || 0, {\r\n-            ...countUpOptions,\r\n-            prefix: \"PKR \",\r\n-            decimalPlaces: 0,\r\n-        }),\r\n-        unitsConsumed: new CountUp(\"units-consumed\", this.billData.unitsConsumed || 0, {\r\n-            ...countUpOptions,\r\n-            suffix: \" kWh\",\r\n-            decimalPlaces: 0,\r\n-        }),\r\n+      billAmount: new CountUp(\"bill-amount\", this.billData.amount || 0, {\r\n+        ...countUpOptions,\r\n+        prefix: \"PKR \",\r\n+        decimalPlaces: 0,\r\n+      }),\r\n+      unitsConsumed: new CountUp(\r\n+        \"units-consumed\",\r\n+        this.billData.unitsConsumed || 0,\r\n+        {\r\n+          ...countUpOptions,\r\n+          suffix: \" kWh\",\r\n+          decimalPlaces: 0,\r\n+        }\r\n+      ),\r\n     };\r\n-}\r\n+  }\r\n \r\n-startCountUps() {\r\n+  startCountUps() {\r\n     console.log(\"Starting CountUps\"); // Add debug log\r\n     Object.entries(this.countUps).forEach(([key, counter]) => {\r\n-        if (counter && !counter.error) {\r\n-            console.log(`Starting counter: ${key}`);\r\n-            counter.start();\r\n-        } else {\r\n-            console.error(`Error with counter ${key}:`, counter?.error);\r\n-        }\r\n+      if (counter && !counter.error) {\r\n+        console.log(`Starting counter: ${key}`);\r\n+        counter.start();\r\n+      } else {\r\n+        console.error(`Error with counter ${key}:`, counter?.error);\r\n+      }\r\n     });\r\n-}\r\n+  }\r\n   renderBillPreview() {\r\n     if (!this.billData) {\r\n       console.error(\"Bill data is not available\");\r\n       this.renderError(document.getElementById(\"app\"));\r\n@@ -615,9 +619,8 @@\n     });\r\n     billPreview.render(billPreviewContainer);\r\n   }\r\n \r\n-\r\n   renderError(container) {\r\n     container.innerHTML = `\r\n         <div class=\"flex items-center justify-center h-screen\">\r\n             <div class=\"text-center\">\r\n@@ -704,11 +707,9 @@\n                         </div>\r\n                         <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n                     </div>\r\n                     <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Current Bill</p>\r\n-                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${this.formatCurrency(\r\n-                      this.billData.totalAmount\r\n-                    )}</p>\r\n+                    <p class=\"text-lg font-bold text-gray-900\" id=\"bill-amount\">${this.formatCurrency(this.billData.amount)}</p>\r\n                     <div class=\"mt-4 h-1 bg-gray-100 rounded\">\r\n                         <div class=\"h-full bg-emerald-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n                     </div>\r\n                 </div>\r\n@@ -785,104 +786,106 @@\n \r\n   initializeCharts(trendData) {\r\n     const ctx = document.getElementById(\"consumption-trend-chart\");\r\n     if (!ctx) {\r\n-        console.error(\"Chart canvas not found\");\r\n-        return;\r\n+      console.error(\"Chart canvas not found\");\r\n+      return;\r\n     }\r\n \r\n     console.log(\"Initializing chart with data:\", trendData); // Add debug log\r\n \r\n     const isMobile = window.innerWidth < 640;\r\n     const isTablet = window.innerWidth < 1024;\r\n \r\n     if (this.charts.consumption) {\r\n-        this.charts.consumption.destroy();\r\n+      this.charts.consumption.destroy();\r\n     }\r\n \r\n     this.charts.consumption = new Chart(ctx, {\r\n-        type: \"line\",\r\n-        data: {\r\n-            labels: trendData.map(d => d.month),\r\n-            datasets: [{\r\n-                label: \"Consumption (kWh)\",\r\n-                data: trendData.map(d => d.consumption),\r\n-                borderColor: \"#059669\",\r\n-                backgroundColor: \"rgba(5, 150, 105, 0.1)\",\r\n-                tension: 0.4,\r\n-                fill: true,\r\n-                pointRadius: isMobile ? 2 : isTablet ? 3 : 4,\r\n-                pointHoverRadius: isMobile ? 4 : isTablet ? 5 : 6,\r\n-                pointBackgroundColor: \"#ffffff\",\r\n-                pointBorderColor: \"#059669\",\r\n-                pointBorderWidth: isMobile ? 1 : 2,\r\n-            }]\r\n+      type: \"line\",\r\n+      data: {\r\n+        labels: trendData.map((d) => d.month),\r\n+        datasets: [\r\n+          {\r\n+            label: \"Consumption (kWh)\",\r\n+            data: trendData.map((d) => d.consumption),\r\n+            borderColor: \"#059669\",\r\n+            backgroundColor: \"rgba(5, 150, 105, 0.1)\",\r\n+            tension: 0.4,\r\n+            fill: true,\r\n+            pointRadius: isMobile ? 2 : isTablet ? 3 : 4,\r\n+            pointHoverRadius: isMobile ? 4 : isTablet ? 5 : 6,\r\n+            pointBackgroundColor: \"#ffffff\",\r\n+            pointBorderColor: \"#059669\",\r\n+            pointBorderWidth: isMobile ? 1 : 2,\r\n+          },\r\n+        ],\r\n+      },\r\n+      options: {\r\n+        responsive: true,\r\n+        maintainAspectRatio: false,\r\n+        interaction: {\r\n+          mode: \"nearest\",\r\n+          intersect: false,\r\n+          axis: \"x\",\r\n         },\r\n-        options: {\r\n-            responsive: true,\r\n-            maintainAspectRatio: false,\r\n-            interaction: {\r\n-                mode: \"nearest\",\r\n-                intersect: false,\r\n-                axis: \"x\"\r\n+        plugins: {\r\n+          legend: {\r\n+            display: false,\r\n+          },\r\n+          tooltip: {\r\n+            enabled: true,\r\n+            backgroundColor: \"white\",\r\n+            titleColor: \"#1f2937\",\r\n+            bodyColor: \"#4b5563\",\r\n+            borderColor: \"#e5e7eb\",\r\n+            borderWidth: 1,\r\n+            padding: isMobile ? 8 : 12,\r\n+            titleFont: {\r\n+              size: isMobile ? 12 : 14,\r\n+              weight: \"bold\",\r\n             },\r\n-            plugins: {\r\n-                legend: {\r\n-                    display: false\r\n-                },\r\n-                tooltip: {\r\n-                    enabled: true,\r\n-                    backgroundColor: \"white\",\r\n-                    titleColor: \"#1f2937\",\r\n-                    bodyColor: \"#4b5563\",\r\n-                    borderColor: \"#e5e7eb\",\r\n-                    borderWidth: 1,\r\n-                    padding: isMobile ? 8 : 12,\r\n-                    titleFont: {\r\n-                        size: isMobile ? 12 : 14,\r\n-                        weight: \"bold\"\r\n-                    },\r\n-                    bodyFont: {\r\n-                        size: isMobile ? 11 : 13\r\n-                    },\r\n-                    displayColors: false,\r\n-                    callbacks: {\r\n-                        label: function(context) {\r\n-                            let value = context.parsed.y;\r\n-                            return `${value.toFixed(0)} kWh`;\r\n-                        }\r\n-                    }\r\n-                }\r\n+            bodyFont: {\r\n+              size: isMobile ? 11 : 13,\r\n             },\r\n-            scales: {\r\n-                x: {\r\n-                    grid: {\r\n-                        display: false\r\n-                    },\r\n-                    ticks: {\r\n-                        font: {\r\n-                            size: isMobile ? 10 : isTablet ? 11 : 12\r\n-                        }\r\n-                    }\r\n-                },\r\n-                y: {\r\n-                    beginAtZero: true,\r\n-                    grid: {\r\n-                        color: \"rgba(0, 0, 0, 0.05)\"\r\n-                    },\r\n-                    ticks: {\r\n-                        font: {\r\n-                            size: isMobile ? 10 : isTablet ? 11 : 12\r\n-                        },\r\n-                        callback: function(value) {\r\n-                            return `${value} kWh`;\r\n-                        }\r\n-                    }\r\n-                }\r\n-            }\r\n-        }\r\n+            displayColors: false,\r\n+            callbacks: {\r\n+              label: function (context) {\r\n+                let value = context.parsed.y;\r\n+                return `${value.toFixed(0)} kWh`;\r\n+              },\r\n+            },\r\n+          },\r\n+        },\r\n+        scales: {\r\n+          x: {\r\n+            grid: {\r\n+              display: false,\r\n+            },\r\n+            ticks: {\r\n+              font: {\r\n+                size: isMobile ? 10 : isTablet ? 11 : 12,\r\n+              },\r\n+            },\r\n+          },\r\n+          y: {\r\n+            beginAtZero: true,\r\n+            grid: {\r\n+              color: \"rgba(0, 0, 0, 0.05)\",\r\n+            },\r\n+            ticks: {\r\n+              font: {\r\n+                size: isMobile ? 10 : isTablet ? 11 : 12,\r\n+              },\r\n+              callback: function (value) {\r\n+                return `${value} kWh`;\r\n+              },\r\n+            },\r\n+          },\r\n+        },\r\n+      },\r\n     });\r\n-}\r\n+  }\r\n \r\n   handleResize() {\r\n     clearTimeout(this.resizeTimeout);\r\n     this.resizeTimeout = setTimeout(() => {\r\n"
                },
                {
                    "date": 1731683022115,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -707,9 +707,11 @@\n                         </div>\r\n                         <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n                     </div>\r\n                     <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Current Bill</p>\r\n-                    <p class=\"text-lg font-bold text-gray-900\" id=\"bill-amount\">${this.formatCurrency(this.billData.amount)}</p>\r\n+                    <p class=\"text-lg font-bold text-gray-900\" id=\"bill-amount\">${this.formatCurrency(\r\n+                      this.billData.amount\r\n+                    )}</p>\r\n                     <div class=\"mt-4 h-1 bg-gray-100 rounded\">\r\n                         <div class=\"h-full bg-emerald-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n                     </div>\r\n                 </div>\r\n"
                },
                {
                    "date": 1731685904687,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -110,18 +110,16 @@\n                     <!-- Main Content Area: Flexible Height -->\r\n                     <div class=\"flex-1 min-h-0 mt-3\">\r\n                         <div class=\"h-full grid grid-rows-[auto_1fr_auto] gap-3\">\r\n                             <!-- Consumption Analysis Card -->\r\n-                            <div class=\"bg-white rounded-lg shadow-sm p-3 opacity-0\" id=\"consumption-card\">\r\n-                                <div class=\"flex justify-between items-center mb-2\">\r\n+                            <div class=\"bg-white rounded-lg shadow-sm p-4 opacity-0\" id=\"consumption-card\">\r\n+                                <div class=\"flex justify-between items-center mb-4\">\r\n                                     <h3 class=\"text-sm font-semibold text-gray-900\">Consumption Analysis</h3>\r\n                                     <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs font-medium\">\r\n-                                        ${this.formatChange(\r\n-                                          trendData\r\n-                                        )}% vs last month\r\n+                                        ${this.formatChange(trendData)}% vs last month\r\n                                     </div>\r\n                                 </div>\r\n-                                <div class=\"h-[140px] sm:h-[180px]\">\r\n+                                <div class=\"relative h-[200px] sm:h-[250px] w-full\">  <!-- Added relative and w-full -->\r\n                                     <canvas id=\"consumption-trend-chart\"></canvas>\r\n                                 </div>\r\n                             </div>\r\n \r\n"
                },
                {
                    "date": 1731685984575,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -114,9 +114,11 @@\n                             <div class=\"bg-white rounded-lg shadow-sm p-4 opacity-0\" id=\"consumption-card\">\r\n                                 <div class=\"flex justify-between items-center mb-4\">\r\n                                     <h3 class=\"text-sm font-semibold text-gray-900\">Consumption Analysis</h3>\r\n                                     <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs font-medium\">\r\n-                                        ${this.formatChange(trendData)}% vs last month\r\n+                                        ${this.formatChange(\r\n+                                          trendData\r\n+                                        )}% vs last month\r\n                                     </div>\r\n                                 </div>\r\n                                 <div class=\"relative h-[200px] sm:h-[250px] w-full\">  <!-- Added relative and w-full -->\r\n                                     <canvas id=\"consumption-trend-chart\"></canvas>\r\n@@ -784,109 +786,155 @@\n     }));\r\n   }\r\n \r\n   initializeCharts(trendData) {\r\n-    const ctx = document.getElementById(\"consumption-trend-chart\");\r\n-    if (!ctx) {\r\n-      console.error(\"Chart canvas not found\");\r\n-      return;\r\n-    }\r\n+    // Wait for DOM to be ready\r\n+    requestAnimationFrame(() => {\r\n+      const ctx = document.getElementById(\"consumption-trend-chart\");\r\n+      if (!ctx) {\r\n+        console.error(\"Chart canvas not found\");\r\n+        return;\r\n+      }\r\n \r\n-    console.log(\"Initializing chart with data:\", trendData); // Add debug log\r\n+      // Ensure the canvas is visible\r\n+      ctx.style.display = \"block\";\r\n \r\n-    const isMobile = window.innerWidth < 640;\r\n-    const isTablet = window.innerWidth < 1024;\r\n+      const isMobile = window.innerWidth < 640;\r\n+      const isTablet = window.innerWidth < 1024;\r\n \r\n-    if (this.charts.consumption) {\r\n-      this.charts.consumption.destroy();\r\n-    }\r\n+      // Destroy existing chart if it exists\r\n+      if (this.charts.consumption) {\r\n+        this.charts.consumption.destroy();\r\n+      }\r\n \r\n-    this.charts.consumption = new Chart(ctx, {\r\n-      type: \"line\",\r\n-      data: {\r\n-        labels: trendData.map((d) => d.month),\r\n-        datasets: [\r\n-          {\r\n-            label: \"Consumption (kWh)\",\r\n-            data: trendData.map((d) => d.consumption),\r\n-            borderColor: \"#059669\",\r\n-            backgroundColor: \"rgba(5, 150, 105, 0.1)\",\r\n-            tension: 0.4,\r\n-            fill: true,\r\n-            pointRadius: isMobile ? 2 : isTablet ? 3 : 4,\r\n-            pointHoverRadius: isMobile ? 4 : isTablet ? 5 : 6,\r\n-            pointBackgroundColor: \"#ffffff\",\r\n-            pointBorderColor: \"#059669\",\r\n-            pointBorderWidth: isMobile ? 1 : 2,\r\n-          },\r\n-        ],\r\n-      },\r\n-      options: {\r\n-        responsive: true,\r\n-        maintainAspectRatio: false,\r\n-        interaction: {\r\n-          mode: \"nearest\",\r\n-          intersect: false,\r\n-          axis: \"x\",\r\n+      // Generate proper monthly data\r\n+      const monthlyData = this.generateMonthlyData();\r\n+\r\n+      // Create new chart\r\n+      this.charts.consumption = new Chart(ctx, {\r\n+        type: \"line\",\r\n+        data: {\r\n+          labels: monthlyData.months,\r\n+          datasets: [\r\n+            {\r\n+              label: \"Consumption (kWh)\",\r\n+              data: monthlyData.values,\r\n+              borderColor: \"#059669\",\r\n+              backgroundColor: \"rgba(5, 150, 105, 0.1)\",\r\n+              tension: 0.4,\r\n+              fill: true,\r\n+              pointRadius: isMobile ? 2 : isTablet ? 3 : 4,\r\n+              pointHoverRadius: isMobile ? 4 : isTablet ? 5 : 6,\r\n+              pointBackgroundColor: \"#ffffff\",\r\n+              pointBorderColor: \"#059669\",\r\n+              pointBorderWidth: isMobile ? 1 : 2,\r\n+            },\r\n+          ],\r\n         },\r\n-        plugins: {\r\n-          legend: {\r\n-            display: false,\r\n+        options: {\r\n+          responsive: true,\r\n+          maintainAspectRatio: false,\r\n+          interaction: {\r\n+            mode: \"nearest\",\r\n+            intersect: false,\r\n+            axis: \"x\",\r\n           },\r\n-          tooltip: {\r\n-            enabled: true,\r\n-            backgroundColor: \"white\",\r\n-            titleColor: \"#1f2937\",\r\n-            bodyColor: \"#4b5563\",\r\n-            borderColor: \"#e5e7eb\",\r\n-            borderWidth: 1,\r\n-            padding: isMobile ? 8 : 12,\r\n-            titleFont: {\r\n-              size: isMobile ? 12 : 14,\r\n-              weight: \"bold\",\r\n+          plugins: {\r\n+            legend: {\r\n+              display: false,\r\n             },\r\n-            bodyFont: {\r\n-              size: isMobile ? 11 : 13,\r\n-            },\r\n-            displayColors: false,\r\n-            callbacks: {\r\n-              label: function (context) {\r\n-                let value = context.parsed.y;\r\n-                return `${value.toFixed(0)} kWh`;\r\n+            tooltip: {\r\n+              enabled: true,\r\n+              backgroundColor: \"white\",\r\n+              titleColor: \"#1f2937\",\r\n+              bodyColor: \"#4b5563\",\r\n+              borderColor: \"#e5e7eb\",\r\n+              borderWidth: 1,\r\n+              padding: isMobile ? 8 : 12,\r\n+              titleFont: {\r\n+                size: isMobile ? 12 : 14,\r\n+                weight: \"bold\",\r\n               },\r\n+              bodyFont: {\r\n+                size: isMobile ? 11 : 13,\r\n+              },\r\n+              displayColors: false,\r\n+              callbacks: {\r\n+                label: function (context) {\r\n+                  return `${context.parsed.y.toLocaleString()} kWh`;\r\n+                },\r\n+              },\r\n             },\r\n           },\r\n-        },\r\n-        scales: {\r\n-          x: {\r\n-            grid: {\r\n-              display: false,\r\n-            },\r\n-            ticks: {\r\n-              font: {\r\n-                size: isMobile ? 10 : isTablet ? 11 : 12,\r\n+          scales: {\r\n+            x: {\r\n+              grid: {\r\n+                display: false,\r\n               },\r\n+              ticks: {\r\n+                font: {\r\n+                  size: isMobile ? 10 : isTablet ? 11 : 12,\r\n+                },\r\n+              },\r\n             },\r\n-          },\r\n-          y: {\r\n-            beginAtZero: true,\r\n-            grid: {\r\n-              color: \"rgba(0, 0, 0, 0.05)\",\r\n-            },\r\n-            ticks: {\r\n-              font: {\r\n-                size: isMobile ? 10 : isTablet ? 11 : 12,\r\n+            y: {\r\n+              beginAtZero: true,\r\n+              grid: {\r\n+                color: \"rgba(0, 0, 0, 0.05)\",\r\n               },\r\n-              callback: function (value) {\r\n-                return `${value} kWh`;\r\n+              ticks: {\r\n+                font: {\r\n+                  size: isMobile ? 10 : isTablet ? 11 : 12,\r\n+                },\r\n+                callback: function (value) {\r\n+                  return `${value} kWh`;\r\n+                },\r\n               },\r\n             },\r\n           },\r\n         },\r\n-      },\r\n+      });\r\n     });\r\n   }\r\n \r\n+  // Add this helper method to generate better monthly data\r\n+  generateMonthlyData() {\r\n+    const currentMonth = new Date().getMonth();\r\n+    const months = [\r\n+      \"Jan\",\r\n+      \"Feb\",\r\n+      \"Mar\",\r\n+      \"Apr\",\r\n+      \"May\",\r\n+      \"Jun\",\r\n+      \"Jul\",\r\n+      \"Aug\",\r\n+      \"Sep\",\r\n+      \"Oct\",\r\n+      \"Nov\",\r\n+      \"Dec\",\r\n+    ];\r\n+    const baseConsumption = this.billData.unitsConsumed;\r\n+\r\n+    // Get last 6 months including current month\r\n+    const monthLabels = [];\r\n+    const consumptionValues = [];\r\n+\r\n+    for (let i = 5; i >= 0; i--) {\r\n+      let monthIndex = (currentMonth - i + 12) % 12;\r\n+      monthLabels.push(months[monthIndex]);\r\n+\r\n+      // Generate realistic variations (Â±20% of base consumption)\r\n+      let variation = baseConsumption * (0.8 + Math.random() * 0.4);\r\n+      consumptionValues.push(Math.round(variation));\r\n+    }\r\n+\r\n+    return {\r\n+      months: monthLabels,\r\n+      values: consumptionValues,\r\n+    };\r\n+  }\r\n+\r\n   handleResize() {\r\n     clearTimeout(this.resizeTimeout);\r\n     this.resizeTimeout = setTimeout(() => {\r\n       if (this.charts.consumption) {\r\n"
                },
                {
                    "date": 1731686080571,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -291,8 +291,12 @@\n       this.showError();\r\n       return;\r\n     }\r\n \r\n+    // Initialize charts before animations\r\n+    const trendData = this.generateTrendData();\r\n+    await this.initializeCharts(trendData);\r\n+\r\n     const isMobile = this.isMobileDevice();\r\n     const billPreviewContainer = document.getElementById(\r\n       \"bill-preview-container\"\r\n     );\r\n@@ -786,114 +790,123 @@\n     }));\r\n   }\r\n \r\n   initializeCharts(trendData) {\r\n-    // Wait for DOM to be ready\r\n-    requestAnimationFrame(() => {\r\n-      const ctx = document.getElementById(\"consumption-trend-chart\");\r\n-      if (!ctx) {\r\n-        console.error(\"Chart canvas not found\");\r\n-        return;\r\n-      }\r\n+    return new Promise((resolve) => {\r\n+        requestAnimationFrame(() => {\r\n+            const ctx = document.getElementById(\"consumption-trend-chart\");\r\n+            if (!ctx) {\r\n+                console.error(\"Chart canvas not found\");\r\n+                resolve();\r\n+                return;\r\n+            }\r\n \r\n-      // Ensure the canvas is visible\r\n-      ctx.style.display = \"block\";\r\n+            // Ensure the canvas is visible\r\n+            ctx.style.display = \"block\";\r\n \r\n-      const isMobile = window.innerWidth < 640;\r\n-      const isTablet = window.innerWidth < 1024;\r\n+            const isMobile = window.innerWidth < 640;\r\n+            const isTablet = window.innerWidth < 1024;\r\n \r\n-      // Destroy existing chart if it exists\r\n-      if (this.charts.consumption) {\r\n-        this.charts.consumption.destroy();\r\n-      }\r\n+            // Destroy existing chart if it exists\r\n+            if (this.charts.consumption) {\r\n+                this.charts.consumption.destroy();\r\n+            }\r\n \r\n-      // Generate proper monthly data\r\n-      const monthlyData = this.generateMonthlyData();\r\n+            // Generate proper monthly data\r\n+            const monthlyData = this.generateMonthlyData();\r\n \r\n-      // Create new chart\r\n-      this.charts.consumption = new Chart(ctx, {\r\n-        type: \"line\",\r\n-        data: {\r\n-          labels: monthlyData.months,\r\n-          datasets: [\r\n-            {\r\n-              label: \"Consumption (kWh)\",\r\n-              data: monthlyData.values,\r\n-              borderColor: \"#059669\",\r\n-              backgroundColor: \"rgba(5, 150, 105, 0.1)\",\r\n-              tension: 0.4,\r\n-              fill: true,\r\n-              pointRadius: isMobile ? 2 : isTablet ? 3 : 4,\r\n-              pointHoverRadius: isMobile ? 4 : isTablet ? 5 : 6,\r\n-              pointBackgroundColor: \"#ffffff\",\r\n-              pointBorderColor: \"#059669\",\r\n-              pointBorderWidth: isMobile ? 1 : 2,\r\n-            },\r\n-          ],\r\n-        },\r\n-        options: {\r\n-          responsive: true,\r\n-          maintainAspectRatio: false,\r\n-          interaction: {\r\n-            mode: \"nearest\",\r\n-            intersect: false,\r\n-            axis: \"x\",\r\n-          },\r\n-          plugins: {\r\n-            legend: {\r\n-              display: false,\r\n-            },\r\n-            tooltip: {\r\n-              enabled: true,\r\n-              backgroundColor: \"white\",\r\n-              titleColor: \"#1f2937\",\r\n-              bodyColor: \"#4b5563\",\r\n-              borderColor: \"#e5e7eb\",\r\n-              borderWidth: 1,\r\n-              padding: isMobile ? 8 : 12,\r\n-              titleFont: {\r\n-                size: isMobile ? 12 : 14,\r\n-                weight: \"bold\",\r\n-              },\r\n-              bodyFont: {\r\n-                size: isMobile ? 11 : 13,\r\n-              },\r\n-              displayColors: false,\r\n-              callbacks: {\r\n-                label: function (context) {\r\n-                  return `${context.parsed.y.toLocaleString()} kWh`;\r\n+            // Create new chart\r\n+            this.charts.consumption = new Chart(ctx, {\r\n+                type: \"line\",\r\n+                data: {\r\n+                    labels: monthlyData.months,\r\n+                    datasets: [\r\n+                        {\r\n+                            label: \"Consumption (kWh)\",\r\n+                            data: monthlyData.values,\r\n+                            borderColor: \"#059669\",\r\n+                            backgroundColor: \"rgba(5, 150, 105, 0.1)\",\r\n+                            tension: 0.4,\r\n+                            fill: true,\r\n+                            pointRadius: isMobile ? 2 : isTablet ? 3 : 4,\r\n+                            pointHoverRadius: isMobile ? 4 : isTablet ? 5 : 6,\r\n+                            pointBackgroundColor: \"#ffffff\",\r\n+                            pointBorderColor: \"#059669\",\r\n+                            pointBorderWidth: isMobile ? 1 : 2,\r\n+                        },\r\n+                    ],\r\n                 },\r\n-              },\r\n-            },\r\n-          },\r\n-          scales: {\r\n-            x: {\r\n-              grid: {\r\n-                display: false,\r\n-              },\r\n-              ticks: {\r\n-                font: {\r\n-                  size: isMobile ? 10 : isTablet ? 11 : 12,\r\n+                options: {\r\n+                    responsive: true,\r\n+                    maintainAspectRatio: false,\r\n+                    interaction: {\r\n+                        mode: \"nearest\",\r\n+                        intersect: false,\r\n+                        axis: \"x\",\r\n+                    },\r\n+                    plugins: {\r\n+                        legend: {\r\n+                            display: false,\r\n+                        },\r\n+                        tooltip: {\r\n+                            enabled: true,\r\n+                            backgroundColor: \"white\",\r\n+                            titleColor: \"#1f2937\",\r\n+                            bodyColor: \"#4b5563\",\r\n+                            borderColor: \"#e5e7eb\",\r\n+                            borderWidth: 1,\r\n+                            padding: isMobile ? 8 : 12,\r\n+                            titleFont: {\r\n+                                size: isMobile ? 12 : 14,\r\n+                                weight: \"bold\",\r\n+                            },\r\n+                            bodyFont: {\r\n+                                size: isMobile ? 11 : 13,\r\n+                            },\r\n+                            displayColors: false,\r\n+                            callbacks: {\r\n+                                label: function (context) {\r\n+                                    return `${context.parsed.y.toLocaleString()} kWh`;\r\n+                                },\r\n+                            },\r\n+                        },\r\n+                    },\r\n+                    scales: {\r\n+                        x: {\r\n+                            grid: {\r\n+                                display: false,\r\n+                            },\r\n+                            ticks: {\r\n+                                font: {\r\n+                                    size: isMobile ? 10 : isTablet ? 11 : 12,\r\n+                                },\r\n+                            },\r\n+                        },\r\n+                        y: {\r\n+                            beginAtZero: true,\r\n+                            grid: {\r\n+                                color: \"rgba(0, 0, 0, 0.05)\",\r\n+                            },\r\n+                            ticks: {\r\n+                                font: {\r\n+                                    size: isMobile ? 10 : isTablet ? 11 : 12,\r\n+                                },\r\n+                                callback: function (value) {\r\n+                                    return `${value} kWh`;\r\n+                                },\r\n+                            },\r\n+                        },\r\n+                    },\r\n                 },\r\n-              },\r\n-            },\r\n-            y: {\r\n-              beginAtZero: true,\r\n-              grid: {\r\n-                color: \"rgba(0, 0, 0, 0.05)\",\r\n-              },\r\n-              ticks: {\r\n-                font: {\r\n-                  size: isMobile ? 10 : isTablet ? 11 : 12,\r\n-                },\r\n-                callback: function (value) {\r\n-                  return `${value} kWh`;\r\n-                },\r\n-              },\r\n-            },\r\n-          },\r\n-        },\r\n-      });\r\n+            });\r\n+\r\n+            // Resolve promise after chart is initialized\r\n+            this.charts.consumption.options.animation = {\r\n+                onComplete: () => {\r\n+                    resolve();\r\n+                }\r\n+            };\r\n+        });\r\n     });\r\n   }\r\n \r\n   // Add this helper method to generate better monthly data\r\n"
                },
                {
                    "date": 1731686282767,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -646,133 +646,133 @@\n     // Generate trend data for the last 6 months\r\n     const trendData = this.generateTrendData();\r\n \r\n     insightsContainer.innerHTML = `\r\n-        <div class=\"h-full flex flex-col p-2 sm:p-4 lg:p-6 overflow-auto\">\r\n-            <!-- Header Section -->\r\n-            <div class=\"flex-none mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"insights-header\">\r\n-                <div class=\"flex items-center gap-3 sm:gap-4\">\r\n-                    <div class=\"flex-shrink-0\">\r\n-                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-600 flex items-center justify-center\">\r\n-                            <svg class=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n-                            </svg>\r\n-                        </div>\r\n-                    </div>\r\n-                    <div>\r\n-                        <h2 class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">Bill Analysis</h2>\r\n-                        <p class=\"text-xs sm:text-sm lg:text-base text-gray-500\">Understanding your consumption</p>\r\n-                    </div>\r\n-                </div>\r\n+      <div class=\"h-full flex flex-col p-2 sm:p-4 lg:p-6 overflow-auto\">\r\n+        <!-- Header Section -->\r\n+        <div class=\"flex-none mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"insights-header\">\r\n+          <div class=\"flex items-center gap-3 sm:gap-4\">\r\n+            <div class=\"flex-shrink-0\">\r\n+              <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-600 flex items-center justify-center\">\r\n+                <svg class=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n+                </svg>\r\n+              </div>\r\n             </div>\r\n+            <div>\r\n+              <h2 class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">Bill Analysis</h2>\r\n+              <p class=\"text-xs sm:text-sm lg:text-base text-gray-500\">Understanding your consumption</p>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n \r\n-            <!-- Progress Tracker -->\r\n-            <div class=\"bg-white/70 backdrop-blur rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"progress-tracker\">\r\n-                <div class=\"flex justify-between items-center\">\r\n-                    <div class=\"flex items-center gap-3\">\r\n-                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-emerald-600 flex items-center justify-center text-white font-semibold text-sm sm:text-base\">1</div>\r\n-                        <div>\r\n-                            <p class=\"font-semibold text-gray-900 text-sm sm:text-base\">Bill Review</p>\r\n-                            <p class=\"text-xs sm:text-sm text-gray-500\">Analyzing patterns</p>\r\n-                        </div>\r\n-                    </div>\r\n-                    <div class=\"h-0.5 w-16 sm:w-24 bg-gray-200\"></div>\r\n-                    <div class=\"flex items-center gap-3\">\r\n-                        <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm sm:text-base\">2</div>\r\n-                        <div>\r\n-                            <p class=\"font-semibold text-gray-400 text-sm sm:text-base\">Solar Quote</p>\r\n-                            <p class=\"text-xs sm:text-sm text-gray-400\">Up next</p>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n+        <!-- Progress Tracker -->\r\n+        <div class=\"bg-white/70 backdrop-blur rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"progress-tracker\">\r\n+          <div class=\"flex justify-between items-center\">\r\n+            <div class=\"flex items-center gap-3\">\r\n+              <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-emerald-600 flex items-center justify-center text-white font-semibold text-sm sm:text-base\">1</div>\r\n+              <div>\r\n+                <p class=\"font-semibold text-gray-900 text-sm sm:text-base\">Bill Review</p>\r\n+                <p class=\"text-xs sm:text-sm text-gray-500\">Analyzing patterns</p>\r\n+              </div>\r\n             </div>\r\n+            <div class=\"h-0.5 w-16 sm:w-24 bg-gray-200\"></div>\r\n+            <div class=\"flex items-center gap-3\">\r\n+              <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm sm:text-base\">2</div>\r\n+              <div>\r\n+                <p class=\"font-semibold text-gray-400 text-sm sm:text-base\">Solar Quote</p>\r\n+                <p class=\"text-xs sm:text-sm text-gray-400\">Up next</p>\r\n+              </div>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n \r\n-            <!-- Content Grid -->\r\n-            <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 lg:gap-6 flex-1\">\r\n-                <!-- Consumption Analysis Card -->\r\n-                <div class=\"sm:col-span-2 bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0\" id=\"consumption-card\">\r\n-                    <div class=\"flex justify-between items-center mb-3 sm:mb-4\">\r\n-                        <h3 class=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n-                        <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs sm:text-sm font-medium\">\r\n-                            ${this.formatChange(trendData)}% vs last month\r\n-                        </div>\r\n-                    </div>\r\n-                    <div class=\"h-[200px] sm:h-[250px]\">\r\n-                        <canvas id=\"consumption-trend-chart\"></canvas>\r\n-                    </div>\r\n-                </div>\r\n+        <!-- Content Grid -->\r\n+        <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 lg:gap-6 flex-1\">\r\n+          <!-- Consumption Analysis Card -->\r\n+          <div class=\"sm:col-span-2 bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0\" id=\"consumption-card\">\r\n+            <div class=\"flex justify-between items-center mb-3 sm:mb-4\">\r\n+              <h3 class=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n+              <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs sm:text-sm font-medium\">\r\n+                ${this.formatChange(trendData)}% vs last month\r\n+              </div>\r\n+            </div>\r\n+            <div class=\"h-[200px] sm:h-[250px]\">\r\n+              <canvas id=\"consumption-trend-chart\"></canvas>\r\n+            </div>\r\n+          </div>\r\n \r\n-                <!-- Current Bill Card -->\r\n-                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n-                    <div class=\"flex items-center justify-between mb-2\">\r\n-                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n-                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n-                            </svg>\r\n-                        </div>\r\n-                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n-                    </div>\r\n-                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Current Bill</p>\r\n-                    <p class=\"text-lg font-bold text-gray-900\" id=\"bill-amount\">${this.formatCurrency(\r\n-                      this.billData.amount\r\n-                    )}</p>\r\n-                    <div class=\"mt-4 h-1 bg-gray-100 rounded\">\r\n-                        <div class=\"h-full bg-emerald-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n-                    </div>\r\n-                </div>\r\n+          <!-- Current Bill Card -->\r\n+          <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n+            <div class=\"flex items-center justify-between mb-2\">\r\n+              <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n+                <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n+                </svg>\r\n+              </div>\r\n+              <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n+            </div>\r\n+            <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Current Bill</p>\r\n+            <p class=\"text-lg font-bold text-gray-900\" id=\"bill-amount\">${this.formatCurrency(\r\n+              this.billData.amount\r\n+            )}</p>\r\n+            <div class=\"mt-4 h-1 bg-gray-100 rounded\">\r\n+              <div class=\"h-full bg-emerald-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n+            </div>\r\n+          </div>\r\n \r\n-                <!-- Units Consumed Card -->\r\n-                <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n-                    <div class=\"flex items-center justify-between mb-2\">\r\n-                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n-                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n-                            </svg>\r\n-                        </div>\r\n-                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">\r\n-                            ${this.calculateEfficiency()} efficiency\r\n-                        </span>\r\n-                    </div>\r\n-                    <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n-                    <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${\r\n-                      this.billData.unitsConsumed\r\n-                    } kWh</p>\r\n-                    <p class=\"text-xs sm:text-sm text-gray-500 mt-2\">Rate: ${this.formatCurrency(\r\n-                      this.billData.ratePerUnit\r\n-                    )}/kWh</p>\r\n-                </div>\r\n+          <!-- Units Consumed Card -->\r\n+          <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n+            <div class=\"flex items-center justify-between mb-2\">\r\n+              <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n+                <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n+                </svg>\r\n+              </div>\r\n+              <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">\r\n+                ${this.calculateEfficiency()} efficiency\r\n+              </span>\r\n+            </div>\r\n+            <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n+            <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${\r\n+              this.billData.unitsConsumed\r\n+            } kWh</p>\r\n+            <p class=\"text-xs sm:text-sm text-gray-500 mt-2\">Rate: ${this.formatCurrency(\r\n+              this.billData.ratePerUnit\r\n+            )}/kWh</p>\r\n+          </div>\r\n \r\n-                <!-- Next Steps Card -->\r\n-                <div class=\"sm:col-span-2 mt-auto\">\r\n-                    <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n-                        <div class=\"absolute -top-2 -right-2\">\r\n-                            <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n-                                <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n-                                </svg>\r\n-                            </div>\r\n-                        </div>\r\n-                        <div class=\"max-w-lg\">\r\n-                            <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n-                            <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n-                                We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n-                            </p>\r\n-                            <button \r\n-                                id=\"proceed-to-quote\" \r\n-                                class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n-                                       transition-all duration-300 shadow-sm hover:shadow-lg\r\n-                                       flex items-center justify-center gap-2 group\"\r\n-                            >\r\n-                                Generate My Solar Quote\r\n-                                <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n-                                </svg>\r\n-                            </button>\r\n-                        </div>\r\n-                    </div>\r\n+          <!-- Next Steps Card -->\r\n+          <div class=\"sm:col-span-2 mt-auto\">\r\n+            <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n+              <div class=\"absolute -top-2 -right-2\">\r\n+                <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n+                  <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n+                  </svg>\r\n                 </div>\r\n+              </div>\r\n+              <div class=\"max-w-lg\">\r\n+                <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n+                <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n+                  We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n+                </p>\r\n+                <button \r\n+                  id=\"proceed-to-quote\" \r\n+                  class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n+                       transition-all duration-300 shadow-sm hover:shadow-lg\r\n+                       flex items-center justify-center gap-2 group\"\r\n+                >\r\n+                  Generate My Solar Quote\r\n+                  <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n+                  </svg>\r\n+                </button>\r\n+              </div>\r\n             </div>\r\n+          </div>\r\n         </div>\r\n+      </div>\r\n     `;\r\n \r\n     // Update the chart colors in initializeCharts\r\n     this.initializeCharts(trendData);\r\n"
                },
                {
                    "date": 1731686836978,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -743,15 +743,9 @@\n \r\n           <!-- Next Steps Card -->\r\n           <div class=\"sm:col-span-2 mt-auto\">\r\n             <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n-              <div class=\"absolute -top-2 -right-2\">\r\n-                <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n-                  <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n-                  </svg>\r\n-                </div>\r\n-              </div>\r\n+              \r\n               <div class=\"max-w-lg\">\r\n                 <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n                 <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n                   We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n"
                },
                {
                    "date": 1731686877947,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -743,9 +743,15 @@\n \r\n           <!-- Next Steps Card -->\r\n           <div class=\"sm:col-span-2 mt-auto\">\r\n             <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n-              \r\n+              <div class=\"absolute -top-2 -right-2\">\r\n+                <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n+                  <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n+                  </svg>\r\n+                </div>\r\n+              </div>\r\n               <div class=\"max-w-lg\">\r\n                 <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n                 <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n                   We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n@@ -756,11 +762,9 @@\n                        transition-all duration-300 shadow-sm hover:shadow-lg\r\n                        flex items-center justify-center gap-2 group\"\r\n                 >\r\n                   Generate My Solar Quote\r\n-                  <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n-                  </svg>\r\n+                  \r\n                 </button>\r\n               </div>\r\n             </div>\r\n           </div>\r\n"
                },
                {
                    "date": 1731686887761,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -745,11 +745,9 @@\n           <div class=\"sm:col-span-2 mt-auto\">\r\n             <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n               <div class=\"absolute -top-2 -right-2\">\r\n                 <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n-                  <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n-                  </svg>\r\n+                  \r\n                 </div>\r\n               </div>\r\n               <div class=\"max-w-lg\">\r\n                 <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n@@ -762,9 +760,11 @@\n                        transition-all duration-300 shadow-sm hover:shadow-lg\r\n                        flex items-center justify-center gap-2 group\"\r\n                 >\r\n                   Generate My Solar Quote\r\n-                  \r\n+                  <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n+                  </svg>\r\n                 </button>\r\n               </div>\r\n             </div>\r\n           </div>\r\n"
                },
                {
                    "date": 1731686900822,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -745,9 +745,11 @@\n           <div class=\"sm:col-span-2 mt-auto\">\r\n             <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n               <div class=\"absolute -top-2 -right-2\">\r\n                 <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n-                  \r\n+                  <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n+                  </svg>\r\n                 </div>\r\n               </div>\r\n               <div class=\"max-w-lg\">\r\n                 <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n"
                },
                {
                    "date": 1731686967010,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -743,15 +743,9 @@\n \r\n           <!-- Next Steps Card -->\r\n           <div class=\"sm:col-span-2 mt-auto\">\r\n             <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n-              <div class=\"absolute -top-2 -right-2\">\r\n-                <div class=\"w-10 h-10 sm:w-12 sm:h-12 animated-gradient rounded-full flex items-center justify-center\">\r\n-                  <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n-                  </svg>\r\n-                </div>\r\n-              </div>\r\n+              \r\n               <div class=\"max-w-lg\">\r\n                 <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n                 <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n                   We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n"
                },
                {
                    "date": 1731687045671,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -744,9 +744,9 @@\n           <!-- Next Steps Card -->\r\n           <div class=\"sm:col-span-2 mt-auto\">\r\n             <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n               \r\n-              <div class=\"max-w-lg\">\r\n+              <div class=\" w-full max-w-none\">\r\n                 <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n                 <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n                   We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n                 </p>\r\n@@ -785,122 +785,122 @@\n   }\r\n \r\n   initializeCharts(trendData) {\r\n     return new Promise((resolve) => {\r\n-        requestAnimationFrame(() => {\r\n-            const ctx = document.getElementById(\"consumption-trend-chart\");\r\n-            if (!ctx) {\r\n-                console.error(\"Chart canvas not found\");\r\n-                resolve();\r\n-                return;\r\n-            }\r\n+      requestAnimationFrame(() => {\r\n+        const ctx = document.getElementById(\"consumption-trend-chart\");\r\n+        if (!ctx) {\r\n+          console.error(\"Chart canvas not found\");\r\n+          resolve();\r\n+          return;\r\n+        }\r\n \r\n-            // Ensure the canvas is visible\r\n-            ctx.style.display = \"block\";\r\n+        // Ensure the canvas is visible\r\n+        ctx.style.display = \"block\";\r\n \r\n-            const isMobile = window.innerWidth < 640;\r\n-            const isTablet = window.innerWidth < 1024;\r\n+        const isMobile = window.innerWidth < 640;\r\n+        const isTablet = window.innerWidth < 1024;\r\n \r\n-            // Destroy existing chart if it exists\r\n-            if (this.charts.consumption) {\r\n-                this.charts.consumption.destroy();\r\n-            }\r\n+        // Destroy existing chart if it exists\r\n+        if (this.charts.consumption) {\r\n+          this.charts.consumption.destroy();\r\n+        }\r\n \r\n-            // Generate proper monthly data\r\n-            const monthlyData = this.generateMonthlyData();\r\n+        // Generate proper monthly data\r\n+        const monthlyData = this.generateMonthlyData();\r\n \r\n-            // Create new chart\r\n-            this.charts.consumption = new Chart(ctx, {\r\n-                type: \"line\",\r\n-                data: {\r\n-                    labels: monthlyData.months,\r\n-                    datasets: [\r\n-                        {\r\n-                            label: \"Consumption (kWh)\",\r\n-                            data: monthlyData.values,\r\n-                            borderColor: \"#059669\",\r\n-                            backgroundColor: \"rgba(5, 150, 105, 0.1)\",\r\n-                            tension: 0.4,\r\n-                            fill: true,\r\n-                            pointRadius: isMobile ? 2 : isTablet ? 3 : 4,\r\n-                            pointHoverRadius: isMobile ? 4 : isTablet ? 5 : 6,\r\n-                            pointBackgroundColor: \"#ffffff\",\r\n-                            pointBorderColor: \"#059669\",\r\n-                            pointBorderWidth: isMobile ? 1 : 2,\r\n-                        },\r\n-                    ],\r\n+        // Create new chart\r\n+        this.charts.consumption = new Chart(ctx, {\r\n+          type: \"line\",\r\n+          data: {\r\n+            labels: monthlyData.months,\r\n+            datasets: [\r\n+              {\r\n+                label: \"Consumption (kWh)\",\r\n+                data: monthlyData.values,\r\n+                borderColor: \"#059669\",\r\n+                backgroundColor: \"rgba(5, 150, 105, 0.1)\",\r\n+                tension: 0.4,\r\n+                fill: true,\r\n+                pointRadius: isMobile ? 2 : isTablet ? 3 : 4,\r\n+                pointHoverRadius: isMobile ? 4 : isTablet ? 5 : 6,\r\n+                pointBackgroundColor: \"#ffffff\",\r\n+                pointBorderColor: \"#059669\",\r\n+                pointBorderWidth: isMobile ? 1 : 2,\r\n+              },\r\n+            ],\r\n+          },\r\n+          options: {\r\n+            responsive: true,\r\n+            maintainAspectRatio: false,\r\n+            interaction: {\r\n+              mode: \"nearest\",\r\n+              intersect: false,\r\n+              axis: \"x\",\r\n+            },\r\n+            plugins: {\r\n+              legend: {\r\n+                display: false,\r\n+              },\r\n+              tooltip: {\r\n+                enabled: true,\r\n+                backgroundColor: \"white\",\r\n+                titleColor: \"#1f2937\",\r\n+                bodyColor: \"#4b5563\",\r\n+                borderColor: \"#e5e7eb\",\r\n+                borderWidth: 1,\r\n+                padding: isMobile ? 8 : 12,\r\n+                titleFont: {\r\n+                  size: isMobile ? 12 : 14,\r\n+                  weight: \"bold\",\r\n                 },\r\n-                options: {\r\n-                    responsive: true,\r\n-                    maintainAspectRatio: false,\r\n-                    interaction: {\r\n-                        mode: \"nearest\",\r\n-                        intersect: false,\r\n-                        axis: \"x\",\r\n-                    },\r\n-                    plugins: {\r\n-                        legend: {\r\n-                            display: false,\r\n-                        },\r\n-                        tooltip: {\r\n-                            enabled: true,\r\n-                            backgroundColor: \"white\",\r\n-                            titleColor: \"#1f2937\",\r\n-                            bodyColor: \"#4b5563\",\r\n-                            borderColor: \"#e5e7eb\",\r\n-                            borderWidth: 1,\r\n-                            padding: isMobile ? 8 : 12,\r\n-                            titleFont: {\r\n-                                size: isMobile ? 12 : 14,\r\n-                                weight: \"bold\",\r\n-                            },\r\n-                            bodyFont: {\r\n-                                size: isMobile ? 11 : 13,\r\n-                            },\r\n-                            displayColors: false,\r\n-                            callbacks: {\r\n-                                label: function (context) {\r\n-                                    return `${context.parsed.y.toLocaleString()} kWh`;\r\n-                                },\r\n-                            },\r\n-                        },\r\n-                    },\r\n-                    scales: {\r\n-                        x: {\r\n-                            grid: {\r\n-                                display: false,\r\n-                            },\r\n-                            ticks: {\r\n-                                font: {\r\n-                                    size: isMobile ? 10 : isTablet ? 11 : 12,\r\n-                                },\r\n-                            },\r\n-                        },\r\n-                        y: {\r\n-                            beginAtZero: true,\r\n-                            grid: {\r\n-                                color: \"rgba(0, 0, 0, 0.05)\",\r\n-                            },\r\n-                            ticks: {\r\n-                                font: {\r\n-                                    size: isMobile ? 10 : isTablet ? 11 : 12,\r\n-                                },\r\n-                                callback: function (value) {\r\n-                                    return `${value} kWh`;\r\n-                                },\r\n-                            },\r\n-                        },\r\n-                    },\r\n+                bodyFont: {\r\n+                  size: isMobile ? 11 : 13,\r\n                 },\r\n-            });\r\n+                displayColors: false,\r\n+                callbacks: {\r\n+                  label: function (context) {\r\n+                    return `${context.parsed.y.toLocaleString()} kWh`;\r\n+                  },\r\n+                },\r\n+              },\r\n+            },\r\n+            scales: {\r\n+              x: {\r\n+                grid: {\r\n+                  display: false,\r\n+                },\r\n+                ticks: {\r\n+                  font: {\r\n+                    size: isMobile ? 10 : isTablet ? 11 : 12,\r\n+                  },\r\n+                },\r\n+              },\r\n+              y: {\r\n+                beginAtZero: true,\r\n+                grid: {\r\n+                  color: \"rgba(0, 0, 0, 0.05)\",\r\n+                },\r\n+                ticks: {\r\n+                  font: {\r\n+                    size: isMobile ? 10 : isTablet ? 11 : 12,\r\n+                  },\r\n+                  callback: function (value) {\r\n+                    return `${value} kWh`;\r\n+                  },\r\n+                },\r\n+              },\r\n+            },\r\n+          },\r\n+        });\r\n \r\n-            // Resolve promise after chart is initialized\r\n-            this.charts.consumption.options.animation = {\r\n-                onComplete: () => {\r\n-                    resolve();\r\n-                }\r\n-            };\r\n-        });\r\n+        // Resolve promise after chart is initialized\r\n+        this.charts.consumption.options.animation = {\r\n+          onComplete: () => {\r\n+            resolve();\r\n+          },\r\n+        };\r\n+      });\r\n     });\r\n   }\r\n \r\n   // Add this helper method to generate better monthly data\r\n"
                },
                {
                    "date": 1731687174985,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -743,9 +743,8 @@\n \r\n           <!-- Next Steps Card -->\r\n           <div class=\"sm:col-span-2 mt-auto\">\r\n             <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n-              \r\n               <div class=\" w-full max-w-none\">\r\n                 <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n                 <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n                   We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n"
                },
                {
                    "date": 1731687443508,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1046 @@\n+// BillReviewPage.js\r\n+import { gsap } from \"gsap\";\r\n+import { getBillData } from \"../store/solarSizingState.js\";\r\n+import { BillPreview } from \"./BillPreview.js\";\r\n+import Chart from \"chart.js/auto\";\r\n+import { CountUp } from \"countup.js\";\r\n+\r\n+export class BillReviewPage {\r\n+  constructor() {\r\n+    this.billData = getBillData();\r\n+    this.charts = {};\r\n+  }\r\n+\r\n+  addScrollStyles() {\r\n+    const style = document.createElement(\"style\");\r\n+    style.textContent = `\r\n+        .custom-scrollbar {\r\n+            scrollbar-width: thin;\r\n+            scrollbar-color: rgba(0, 0, 0, 0.2) transparent;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar {\r\n+            width: 6px;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar-track {\r\n+            background: transparent;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar-thumb {\r\n+            background-color: rgba(0, 0, 0, 0.2);\r\n+            border-radius: 3px;\r\n+        }\r\n+\r\n+        .custom-scrollbar::-webkit-scrollbar-thumb:hover {\r\n+            background-color: rgba(0, 0, 0, 0.3);\r\n+        }\r\n+    `;\r\n+    document.head.appendChild(style);\r\n+  }\r\n+\r\n+  // Update the main container structure in render method\r\n+  render() {\r\n+    const app = document.getElementById(\"app\");\r\n+    const trendData = this.generateTrendData();\r\n+\r\n+    app.innerHTML = `\r\n+    <div class=\"h-screen w-full overflow-hidden bg-white transition-colors duration-1000 opacity-0\" id=\"quote-result-page\">\r\n+        <div class=\"h-full w-full flex flex-col md:flex-row relative\" id=\"main-content\">\r\n+            <!-- Bill Preview Side - Full width on mobile -->\r\n+            <div class=\"w-full md:w-1/2 h-[45vh] md:h-full overflow-hidden opacity-0\" id=\"bill-preview-container\">\r\n+                <div id=\"bill-preview\" class=\"h-full\"></div>\r\n+            </div>\r\n+\r\n+            <!-- Loading Indicator -->\r\n+            <div class=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center z-10\" \r\n+                 id=\"loading-indicator\">\r\n+                <div class=\"loading-spinner\"></div>\r\n+                <p class=\"text-emerald-600 font-medium\">Analyzing your bill...</p>\r\n+            </div>\r\n+\r\n+            <div class=\"fixed md:relative w-full md:w-1/2 h-[60vh] md:h-full bg-gray-50 rounded-t-3xl md:rounded-none shadow-2xl md:shadow-none\" \r\n+                id=\"insights-container\"\r\n+                style=\"bottom: 0;\">  <!-- Removed initial transform -->                <!-- Drag Handle for mobile -->\r\n+                <div class=\"md:hidden w-full flex justify-center py-2 drag-handle\">\r\n+                    <div class=\"w-12 h-1.5 rounded-full bg-gray-300\"></div>\r\n+                </div>\r\n+\r\n+                <div class=\"h-full flex flex-col p-4 sm:p-6 overflow-auto hide-scrollbar\">\r\n+                    <!-- Top Section: Fixed Height -->\r\n+                    <div class=\"flex-none space-y-3 sm:space-y-4\">\r\n+                        <!-- Header Section -->\r\n+                        <div class=\"opacity-0\" id=\"insights-header\">\r\n+                            <div class=\"flex items-center gap-3\">\r\n+                                <div class=\"flex-shrink-0\">\r\n+                                    <div class=\"w-8 h-8 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-600 flex items-center justify-center\">\r\n+                                        <svg class=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n+                                        </svg>\r\n+                                    </div>\r\n+                                </div>\r\n+                                <div>\r\n+                                    <h2 class=\"text-base sm:text-lg font-bold text-gray-900\">Bill Analysis</h2>\r\n+                                    <p class=\"text-xs sm:text-sm text-gray-500\">Understanding your consumption</p>\r\n+                                </div>\r\n+                            </div>\r\n+                        </div>\r\n+\r\n+                        <!-- Progress Tracker -->\r\n+                        <div class=\"bg-white/70 backdrop-blur rounded-lg shadow-sm p-3 opacity-0\" id=\"progress-tracker\">\r\n+                            <div class=\"flex justify-between items-center\">\r\n+                                <div class=\"flex items-center gap-3\">\r\n+                                    <div class=\"w-8 h-8 rounded-full bg-emerald-600 flex items-center justify-center text-white font-semibold text-sm\">1</div>\r\n+                                    <div>\r\n+                                        <p class=\"font-semibold text-gray-900 text-sm\">Bill Review</p>\r\n+                                        <p class=\"text-xs text-gray-500\">Analyzing patterns</p>\r\n+                                    </div>\r\n+                                </div>\r\n+                                <div class=\"h-0.5 w-12 bg-gray-200\"></div>\r\n+                                <div class=\"flex items-center gap-3\">\r\n+                                    <div class=\"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm\">2</div>\r\n+                                    <div>\r\n+                                        <p class=\"font-semibold text-gray-400 text-sm\">Solar Quote</p>\r\n+                                        <p class=\"text-xs text-gray-400\">Up next</p>\r\n+                                    </div>\r\n+                                </div>\r\n+                            </div>\r\n+                        </div>\r\n+                    </div>\r\n+                    <!-- Main Content Area: Flexible Height -->\r\n+                    <div class=\"flex-1 min-h-0 mt-3\">\r\n+                        <div class=\"h-full grid grid-rows-[auto_1fr_auto] gap-3\">\r\n+                            <!-- Consumption Analysis Card -->\r\n+                            <div class=\"bg-white rounded-lg shadow-sm p-4 opacity-0\" id=\"consumption-card\">\r\n+                                <div class=\"flex justify-between items-center mb-4\">\r\n+                                    <h3 class=\"text-sm font-semibold text-gray-900\">Consumption Analysis</h3>\r\n+                                    <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs font-medium\">\r\n+                                        ${this.formatChange(\r\n+                                          trendData\r\n+                                        )}% vs last month\r\n+                                    </div>\r\n+                                </div>\r\n+                                <div class=\"relative h-[200px] sm:h-[250px] w-full\">  <!-- Added relative and w-full -->\r\n+                                    <canvas id=\"consumption-trend-chart\"></canvas>\r\n+                                </div>\r\n+                            </div>\r\n+\r\n+                            <!-- Metrics Cards -->\r\n+                            <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\r\n+                                <!-- Current Bill Card -->\r\n+                                <div class=\"bg-white rounded-lg shadow-sm p-3 opacity-0 consumption-metric\">\r\n+                                    <div class=\"flex items-center justify-between mb-2\">\r\n+                                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n+                                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n+                                            </svg>\r\n+                                        </div>\r\n+                                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n+                                    </div>\r\n+                                    <p class=\"text-xs text-gray-500 mb-1\">Current Bill</p>\r\n+                                    <p class=\"text-lg font-bold text-gray-900\" id=\"bill-amount\">${this.formatCurrency(\r\n+                                      this.billData.amount\r\n+                                    )}</p>\r\n+                                    <div class=\"mt-2 h-1 bg-gray-100 rounded\">\r\n+                                        <div class=\"h-full bg-emerald-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n+                                    </div>\r\n+                                </div>\r\n+\r\n+                                <!-- Units Consumed Card -->\r\n+                                <div class=\"bg-white rounded-lg shadow-sm p-3 opacity-0 consumption-metric\">\r\n+                                    <div class=\"flex items-center justify-between mb-2\">\r\n+                                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n+                                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n+                                            </svg>\r\n+                                        </div>\r\n+                                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs rounded-full\">\r\n+                                            ${this.calculateEfficiency()} efficiency\r\n+                                        </span>\r\n+                                    </div>\r\n+                                    <p class=\"text-xs text-gray-500 mb-1\">Units Consumed</p>\r\n+                                    <p class=\"text-lg font-bold text-gray-900\" id=\"units-consumed\">${\r\n+                                      this.billData.unitsConsumed\r\n+                                    } kWh</p>\r\n+                                    <p class=\"text-xs text-gray-500 mt-2\">Rate: ${this.formatCurrency(\r\n+                                      this.billData.ratePerUnit\r\n+                                    )}/kWh</p>\r\n+                                </div>\r\n+                            </div>\r\n+\r\n+                            <!-- Next Steps Card -->\r\n+                            <div class=\"mt-auto\">\r\n+                                <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg shadow-sm p-3 relative opacity-0\" id=\"next-steps-card\">\r\n+                                    <div class=\"absolute -top-2 -right-2\">\r\n+                                        <div class=\"w-10 h-10 animated-gradient rounded-full flex items-center justify-center\">\r\n+                                            <svg class=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n+                                            </svg>\r\n+                                        </div>\r\n+                                    </div>\r\n+                                    <div class=\"max-w-lg\">\r\n+                                        <h3 class=\"text-base font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n+                                        <p class=\"text-sm text-white/90 mb-4\">\r\n+                                            We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n+                                        </p>\r\n+                                        <button \r\n+                                            id=\"proceed-to-quote\" \r\n+                                            class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n+                                                   transition-all duration-300 shadow-sm hover:shadow-lg\r\n+                                                   flex items-center justify-center gap-2 group\"\r\n+                                        >\r\n+                                            Generate My Solar Quote\r\n+                                            <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n+                                            </svg>\r\n+                                        </button>\r\n+                                    </div>\r\n+                                </div>\r\n+                            </div>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+        </div>\r\n+    </div>\r\n+`;\r\n+\r\n+    const isMobile = this.isMobileDevice();\r\n+\r\n+    if (isMobile) {\r\n+      this.initializeMobileInteractions();\r\n+    }\r\n+\r\n+    this.attachBaseStyles();\r\n+\r\n+    // Use requestAnimationFrame to ensure styles are applied before starting\r\n+    requestAnimationFrame(() => {\r\n+      requestAnimationFrame(() => {\r\n+        // Make container visible\r\n+        const container = document.getElementById(\"quote-result-page\");\r\n+        if (container) {\r\n+          container.classList.remove(\"opacity-0\");\r\n+        }\r\n+\r\n+        // Now render bill preview and start animation\r\n+        this.renderBillPreview();\r\n+        this.startAnimation().catch((error) => {\r\n+          console.error(\"Animation failed:\", error);\r\n+          this.showError();\r\n+        });\r\n+      });\r\n+    });\r\n+  }\r\n+\r\n+  isMobileDevice() {\r\n+    return window.innerWidth < 768; // You can adjust this breakpoint\r\n+  }\r\n+\r\n+  getTrendChangeText() {\r\n+    const trendData = this.generateTrendData();\r\n+    return `${this.formatChange(trendData)}% vs last month`;\r\n+  }\r\n+\r\n+  initializeMobileInteractions() {\r\n+    const insightsContainer = document.getElementById(\"insights-container\");\r\n+    let startY = 0;\r\n+    let currentY = 0;\r\n+    let initialHeight = \"60vh\";\r\n+    let expandedHeight = \"92vh\";\r\n+\r\n+    // Handle drag to expand/collapse\r\n+    const handleTouchStart = (e) => {\r\n+      startY = e.touches[0].clientY;\r\n+      currentY = insightsContainer.getBoundingClientRect().height;\r\n+    };\r\n+\r\n+    const handleTouchMove = (e) => {\r\n+      const deltaY = startY - e.touches[0].clientY;\r\n+      const newHeight = Math.max(\r\n+        Math.min(currentY + deltaY, window.innerHeight * 0.92),\r\n+        window.innerHeight * 0.3\r\n+      );\r\n+\r\n+      gsap.to(insightsContainer, {\r\n+        height: newHeight,\r\n+        duration: 0.1,\r\n+        ease: \"none\",\r\n+      });\r\n+    };\r\n+\r\n+    const handleTouchEnd = (e) => {\r\n+      const finalHeight = insightsContainer.getBoundingClientRect().height;\r\n+      const threshold = window.innerHeight * 0.6;\r\n+\r\n+      gsap.to(insightsContainer, {\r\n+        height: finalHeight > threshold ? expandedHeight : initialHeight,\r\n+        duration: 0.3,\r\n+        ease: \"power2.out\",\r\n+      });\r\n+    };\r\n+\r\n+    // Add touch event listeners\r\n+    const dragHandle = insightsContainer.querySelector(\".drag-handle\");\r\n+    dragHandle.addEventListener(\"touchstart\", handleTouchStart);\r\n+    dragHandle.addEventListener(\"touchmove\", handleTouchMove);\r\n+    dragHandle.addEventListener(\"touchend\", handleTouchEnd);\r\n+  }\r\n+\r\n+  async startAnimation() {\r\n+    if (this.error) {\r\n+      this.showError();\r\n+      return;\r\n+    }\r\n+\r\n+    // Initialize charts before animations\r\n+    const trendData = this.generateTrendData();\r\n+    await this.initializeCharts(trendData);\r\n+\r\n+    const isMobile = this.isMobileDevice();\r\n+    const billPreviewContainer = document.getElementById(\r\n+      \"bill-preview-container\"\r\n+    );\r\n+    const insightsContainer = document.getElementById(\"insights-container\");\r\n+    const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n+    const quoteResultPage = document.getElementById(\"quote-result-page\");\r\n+\r\n+    // Initial states\r\n+    gsap.set([billPreviewContainer, loadingIndicator], {\r\n+      opacity: 0,\r\n+    });\r\n+\r\n+    if (isMobile) {\r\n+      // Mobile animation sequence\r\n+      gsap.set(billPreviewContainer, {\r\n+        y: -20,\r\n+      });\r\n+\r\n+      // Set initial state for mobile insights\r\n+      gsap.set(insightsContainer, {\r\n+        y: \"100%\",\r\n+        visibility: \"visible\",\r\n+        opacity: 1,\r\n+      });\r\n+\r\n+      const tl = gsap.timeline({\r\n+        defaults: { duration: 0.8, ease: \"power2.out\" },\r\n+      });\r\n+\r\n+      await tl\r\n+        .to(billPreviewContainer, {\r\n+          opacity: 1,\r\n+          y: 0,\r\n+          duration: 1,\r\n+        })\r\n+        .to(loadingIndicator, {\r\n+          opacity: 1,\r\n+          scale: 1,\r\n+          duration: 0.5,\r\n+        })\r\n+        .to(loadingIndicator, {\r\n+          opacity: 0,\r\n+          scale: 0.5,\r\n+          delay: 0.5,\r\n+        })\r\n+        .to(insightsContainer, {\r\n+          y: \"0%\",\r\n+          duration: 0.8,\r\n+          ease: \"power4.out\",\r\n+          onComplete: () => {\r\n+            requestAnimationFrame(() => {\r\n+              this.startInsightAnimations();\r\n+            });\r\n+          },\r\n+        });\r\n+    } else {\r\n+      // Desktop animation sequence\r\n+      gsap.set(billPreviewContainer, {\r\n+        scale: 0.9,\r\n+        position: \"absolute\",\r\n+        left: \"50%\",\r\n+        top: \"50%\",\r\n+        xPercent: -50,\r\n+        yPercent: -50,\r\n+        width: \"47.5%\",\r\n+      });\r\n+\r\n+      // Set initial state for desktop insights\r\n+      gsap.set(insightsContainer, {\r\n+        opacity: 0,\r\n+        visibility: \"hidden\",\r\n+      });\r\n+\r\n+      const tl = gsap.timeline({\r\n+        defaults: { duration: 0.8, ease: \"power2.out\" },\r\n+      });\r\n+\r\n+      await tl\r\n+        .to(billPreviewContainer, {\r\n+          opacity: 1,\r\n+          scale: 1,\r\n+          duration: 1,\r\n+        })\r\n+        .to(loadingIndicator, {\r\n+          opacity: 1,\r\n+          scale: 1,\r\n+          duration: 0.5,\r\n+        })\r\n+        .to(loadingIndicator, {\r\n+          opacity: 0,\r\n+          scale: 0.5,\r\n+          delay: 1,\r\n+        })\r\n+        .to(\r\n+          billPreviewContainer,\r\n+          {\r\n+            left: \"0%\",\r\n+            top: \"0%\",\r\n+            xPercent: 0,\r\n+            yPercent: 0,\r\n+            width: \"50%\",\r\n+            position: \"relative\",\r\n+          },\r\n+          \"-=0.3\"\r\n+        )\r\n+        .add(() => {\r\n+          insightsContainer.style.visibility = \"visible\";\r\n+        })\r\n+        .to(insightsContainer, {\r\n+          opacity: 1,\r\n+          duration: 0.5,\r\n+          onComplete: () => {\r\n+            requestAnimationFrame(() => {\r\n+              this.startInsightAnimations();\r\n+            });\r\n+          },\r\n+        });\r\n+    }\r\n+  }\r\n+\r\n+  startInsightAnimations() {\r\n+    // First init the counters\r\n+    this.initCountUps();\r\n+\r\n+    // Make sure elements exist before animating\r\n+    const elements = {\r\n+      header: document.getElementById(\"insights-header\"),\r\n+      progress: document.getElementById(\"progress-tracker\"),\r\n+      consumption: document.getElementById(\"consumption-card\"),\r\n+      metrics: document.querySelectorAll(\".consumption-metric\"),\r\n+      nextSteps: document.getElementById(\"next-steps-card\"),\r\n+    };\r\n+\r\n+    // Check if elements exist before animating\r\n+    if (elements.header) {\r\n+      gsap.to(elements.header, {\r\n+        opacity: 1,\r\n+        y: 0,\r\n+        duration: 0.6,\r\n+        ease: \"power2.out\",\r\n+      });\r\n+    }\r\n+\r\n+    if (elements.progress) {\r\n+      gsap.to(elements.progress, {\r\n+        opacity: 1,\r\n+        y: 0,\r\n+        duration: 0.6,\r\n+        delay: 0.2,\r\n+        ease: \"power2.out\",\r\n+      });\r\n+    }\r\n+\r\n+    if (elements.consumption) {\r\n+      gsap.to(elements.consumption, {\r\n+        opacity: 1,\r\n+        y: 0,\r\n+        duration: 0.6,\r\n+        delay: 0.4,\r\n+        ease: \"power2.out\",\r\n+      });\r\n+    }\r\n+\r\n+    if (elements.metrics.length > 0) {\r\n+      gsap.to(elements.metrics, {\r\n+        opacity: 1,\r\n+        y: 0,\r\n+        duration: 0.6,\r\n+        stagger: 0.2,\r\n+        delay: 0.6,\r\n+        ease: \"power2.out\",\r\n+        onComplete: () => {\r\n+          this.startCountUps();\r\n+        },\r\n+      });\r\n+    }\r\n+\r\n+    if (elements.nextSteps) {\r\n+      gsap.to(elements.nextSteps, {\r\n+        opacity: 1,\r\n+        y: 0,\r\n+        duration: 0.6,\r\n+        delay: 1,\r\n+        ease: \"power2.out\",\r\n+      });\r\n+    }\r\n+  }\r\n+\r\n+  attachBaseStyles() {\r\n+    const style = document.createElement(\"style\");\r\n+    style.textContent = this.getBaseStyles();\r\n+    document.head.appendChild(style);\r\n+  }\r\n+\r\n+  getBaseStyles() {\r\n+    return `\r\n+        /* Base Theme Colors */\r\n+        :root {\r\n+            --color-primary: #10b981;\r\n+            --color-primary-dark: #059669;\r\n+            --color-bg-secondary: #f3f4f6;\r\n+        }\r\n+\r\n+        /* Mobile Styles */\r\n+        @media (max-width: 768px) {\r\n+            #insights-container {\r\n+                transition: transform 0.3s ease;\r\n+                will-change: transform;\r\n+                touch-action: none;\r\n+            }\r\n+\r\n+            .drag-handle {\r\n+                cursor: grab;\r\n+                touch-action: none;\r\n+            }\r\n+\r\n+            .drag-handle:active {\r\n+                cursor: grabbing;\r\n+            }\r\n+        }\r\n+\r\n+        /* Hide scrollbar on mobile */\r\n+        .hide-scrollbar::-webkit-scrollbar {\r\n+            display: none;\r\n+        }\r\n+        .hide-scrollbar {\r\n+            -ms-overflow-style: none;\r\n+            scrollbar-width: none;\r\n+        }\r\n+\r\n+        /* Loading Spinner */\r\n+        .loading-spinner {\r\n+            width: 40px;\r\n+            height: 40px;\r\n+            border: 3px solid rgba(16, 185, 129, 0.1);\r\n+            border-radius: 50%;\r\n+            border-top-color: #10b981;\r\n+            animation: spin 1s ease-in-out infinite;\r\n+        }\r\n+\r\n+        @keyframes spin {\r\n+            to { transform: rotate(360deg); }\r\n+        }\r\n+\r\n+        /* Animated Gradient */\r\n+        .animated-gradient {\r\n+            background: linear-gradient(\r\n+                45deg,\r\n+                rgba(255,255,255,0.1),\r\n+                rgba(255,255,255,0.2),\r\n+                rgba(255,255,255,0.1)\r\n+            );\r\n+            background-size: 200% 200%;\r\n+            animation: gradient 15s ease infinite;\r\n+        }\r\n+\r\n+        @keyframes gradient {\r\n+            0% { background-position: 0% 50%; }\r\n+            50% { background-position: 100% 50%; }\r\n+            100% { background-position: 0% 50%; }\r\n+        }\r\n+    `;\r\n+  }\r\n+\r\n+  initCountUps() {\r\n+    console.log(\"Initializing CountUps with data:\", this.billData); // Add debug log\r\n+\r\n+    const countUpOptions = {\r\n+      duration: 2,\r\n+      useEasing: true,\r\n+      useGrouping: true,\r\n+    };\r\n+\r\n+    // Initialize counters for the bill amounts and units\r\n+    this.countUps = {\r\n+      billAmount: new CountUp(\"bill-amount\", this.billData.amount || 0, {\r\n+        ...countUpOptions,\r\n+        prefix: \"PKR \",\r\n+        decimalPlaces: 0,\r\n+      }),\r\n+      unitsConsumed: new CountUp(\r\n+        \"units-consumed\",\r\n+        this.billData.unitsConsumed || 0,\r\n+        {\r\n+          ...countUpOptions,\r\n+          suffix: \" kWh\",\r\n+          decimalPlaces: 0,\r\n+        }\r\n+      ),\r\n+    };\r\n+  }\r\n+\r\n+  startCountUps() {\r\n+    console.log(\"Starting CountUps\"); // Add debug log\r\n+    Object.entries(this.countUps).forEach(([key, counter]) => {\r\n+      if (counter && !counter.error) {\r\n+        console.log(`Starting counter: ${key}`);\r\n+        counter.start();\r\n+      } else {\r\n+        console.error(`Error with counter ${key}:`, counter?.error);\r\n+      }\r\n+    });\r\n+  }\r\n+  renderBillPreview() {\r\n+    if (!this.billData) {\r\n+      console.error(\"Bill data is not available\");\r\n+      this.renderError(document.getElementById(\"app\"));\r\n+      return;\r\n+    }\r\n+\r\n+    console.log(\"Rendering with bill data:\", this.billData); // Add debug log\r\n+\r\n+    const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n+    if (!billPreviewContainer) {\r\n+      console.error(\"Bill preview container not found\");\r\n+      return;\r\n+    }\r\n+\r\n+    const billPreview = new BillPreview({\r\n+      ...this.billData,\r\n+      totalAmount: this.billData.amount, // Ensure totalAmount is set\r\n+      unitsConsumed: this.billData.unitsConsumed,\r\n+      ratePerUnit: this.billData.ratePerUnit,\r\n+    });\r\n+    billPreview.render(billPreviewContainer);\r\n+  }\r\n+\r\n+  renderError(container) {\r\n+    container.innerHTML = `\r\n+        <div class=\"flex items-center justify-center h-screen\">\r\n+            <div class=\"text-center\">\r\n+                <h2 class=\"text-xl font-semibold text-gray-800 mb-2\">Error</h2>\r\n+                <p class=\"text-gray-600\">Bill data is not available. Please try again.</p>\r\n+                <button onclick=\"window.router.push('/')\" \r\n+                        class=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors\">\r\n+                    Go Back\r\n+                </button>\r\n+            </div>\r\n+        </div>\r\n+    `;\r\n+  }\r\n+\r\n+  renderInsights() {\r\n+    const insightsContainer = document.querySelector(\"#insights-container\");\r\n+    if (!insightsContainer) return;\r\n+\r\n+    // Generate trend data for the last 6 months\r\n+    const trendData = this.generateTrendData();\r\n+\r\n+    insightsContainer.innerHTML = `\r\n+      <div class=\"h-full flex flex-col p-2 sm:p-4 lg:p-6 overflow-auto\">\r\n+        <!-- Header Section -->\r\n+        <div class=\"flex-none mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"insights-header\">\r\n+          <div class=\"flex items-center gap-3 sm:gap-4\">\r\n+            <div class=\"flex-shrink-0\">\r\n+              <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-600 flex items-center justify-center\">\r\n+                <svg class=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n+                </svg>\r\n+              </div>\r\n+            </div>\r\n+            <div>\r\n+              <h2 class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">Bill Analysis</h2>\r\n+              <p class=\"text-xs sm:text-sm lg:text-base text-gray-500\">Understanding your consumption</p>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+\r\n+        <!-- Progress Tracker -->\r\n+        <div class=\"bg-white/70 backdrop-blur rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"progress-tracker\">\r\n+          <div class=\"flex justify-between items-center\">\r\n+            <div class=\"flex items-center gap-3\">\r\n+              <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-emerald-600 flex items-center justify-center text-white font-semibold text-sm sm:text-base\">1</div>\r\n+              <div>\r\n+                <p class=\"font-semibold text-gray-900 text-sm sm:text-base\">Bill Review</p>\r\n+                <p class=\"text-xs sm:text-sm text-gray-500\">Analyzing patterns</p>\r\n+              </div>\r\n+            </div>\r\n+            <div class=\"h-0.5 w-16 sm:w-24 bg-gray-200\"></div>\r\n+            <div class=\"flex items-center gap-3\">\r\n+              <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm sm:text-base\">2</div>\r\n+              <div>\r\n+                <p class=\"font-semibold text-gray-400 text-sm sm:text-base\">Solar Quote</p>\r\n+                <p class=\"text-xs sm:text-sm text-gray-400\">Up next</p>\r\n+              </div>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+\r\n+        <!-- Content Grid -->\r\n+        <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 lg:gap-6 flex-1\">\r\n+          <!-- Consumption Analysis Card -->\r\n+          <div class=\"sm:col-span-2 bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0\" id=\"consumption-card\">\r\n+            <div class=\"flex justify-between items-center mb-3 sm:mb-4\">\r\n+              <h3 class=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n+              <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs sm:text-sm font-medium\">\r\n+                ${this.formatChange(trendData)}% vs last month\r\n+              </div>\r\n+            </div>\r\n+            <div class=\"h-[200px] sm:h-[250px]\">\r\n+              <canvas id=\"consumption-trend-chart\"></canvas>\r\n+            </div>\r\n+          </div>\r\n+\r\n+          <!-- Current Bill Card -->\r\n+          <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n+            <div class=\"flex items-center justify-between mb-2\">\r\n+              <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n+                <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n+                </svg>\r\n+              </div>\r\n+              <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n+            </div>\r\n+            <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Current Bill</p>\r\n+            <p class=\"text-lg font-bold text-gray-900\" id=\"bill-amount\">${this.formatCurrency(\r\n+              this.billData.amount\r\n+            )}</p>\r\n+            <div class=\"mt-4 h-1 bg-gray-100 rounded\">\r\n+              <div class=\"h-full bg-emerald-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n+            </div>\r\n+          </div>\r\n+\r\n+          <!-- Units Consumed Card -->\r\n+          <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n+            <div class=\"flex items-center justify-between mb-2\">\r\n+              <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n+                <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n+                </svg>\r\n+              </div>\r\n+              <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">\r\n+                ${this.calculateEfficiency()} efficiency\r\n+              </span>\r\n+            </div>\r\n+            <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n+            <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${\r\n+              this.billData.unitsConsumed\r\n+            } kWh</p>\r\n+            <p class=\"text-xs sm:text-sm text-gray-500 mt-2\">Rate: ${this.formatCurrency(\r\n+              this.billData.ratePerUnit\r\n+            )}/kWh</p>\r\n+          </div>\r\n+\r\n+          <!-- Next Steps Card -->\r\n+          <div class=\"sm:col-span-2 mt-auto\">\r\n+            <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n+              <div class=\" w-full max-w-none\">\r\n+                <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n+                <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n+                  We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n+                </p>\r\n+                <button \r\n+                  id=\"proceed-to-quote\" \r\n+                  class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n+                       transition-all duration-300 shadow-sm hover:shadow-lg\r\n+                       flex items-center justify-center gap-2 group\"\r\n+                >\r\n+                  Generate My Solar Quote\r\n+                  <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n+                  </svg>\r\n+                </button>\r\n+              </div>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n+    `;\r\n+\r\n+    // Update the chart colors in initializeCharts\r\n+    this.initializeCharts(trendData);\r\n+    this.startInsightAnimations();\r\n+    this.attachEventListeners();\r\n+  }\r\n+\r\n+  generateTrendData() {\r\n+    const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\"];\r\n+    return months.map((month) => ({\r\n+      month,\r\n+      consumption: Math.floor(\r\n+        this.billData.unitsConsumed * (0.8 + Math.random() * 0.4)\r\n+      ),\r\n+    }));\r\n+  }\r\n+\r\n+  initializeCharts(trendData) {\r\n+    return new Promise((resolve) => {\r\n+      requestAnimationFrame(() => {\r\n+        const ctx = document.getElementById(\"consumption-trend-chart\");\r\n+        if (!ctx) {\r\n+          console.error(\"Chart canvas not found\");\r\n+          resolve();\r\n+          return;\r\n+        }\r\n+\r\n+        // Ensure the canvas is visible\r\n+        ctx.style.display = \"block\";\r\n+\r\n+        const isMobile = window.innerWidth < 640;\r\n+        const isTablet = window.innerWidth < 1024;\r\n+\r\n+        // Destroy existing chart if it exists\r\n+        if (this.charts.consumption) {\r\n+          this.charts.consumption.destroy();\r\n+        }\r\n+\r\n+        // Generate proper monthly data\r\n+        const monthlyData = this.generateMonthlyData();\r\n+\r\n+        // Create new chart\r\n+        this.charts.consumption = new Chart(ctx, {\r\n+          type: \"line\",\r\n+          data: {\r\n+            labels: monthlyData.months,\r\n+            datasets: [\r\n+              {\r\n+                label: \"Consumption (kWh)\",\r\n+                data: monthlyData.values,\r\n+                borderColor: \"#059669\",\r\n+                backgroundColor: \"rgba(5, 150, 105, 0.1)\",\r\n+                tension: 0.4,\r\n+                fill: true,\r\n+                pointRadius: isMobile ? 2 : isTablet ? 3 : 4,\r\n+                pointHoverRadius: isMobile ? 4 : isTablet ? 5 : 6,\r\n+                pointBackgroundColor: \"#ffffff\",\r\n+                pointBorderColor: \"#059669\",\r\n+                pointBorderWidth: isMobile ? 1 : 2,\r\n+              },\r\n+            ],\r\n+          },\r\n+          options: {\r\n+            responsive: true,\r\n+            maintainAspectRatio: false,\r\n+            interaction: {\r\n+              mode: \"nearest\",\r\n+              intersect: false,\r\n+              axis: \"x\",\r\n+            },\r\n+            plugins: {\r\n+              legend: {\r\n+                display: false,\r\n+              },\r\n+              tooltip: {\r\n+                enabled: true,\r\n+                backgroundColor: \"white\",\r\n+                titleColor: \"#1f2937\",\r\n+                bodyColor: \"#4b5563\",\r\n+                borderColor: \"#e5e7eb\",\r\n+                borderWidth: 1,\r\n+                padding: isMobile ? 8 : 12,\r\n+                titleFont: {\r\n+                  size: isMobile ? 12 : 14,\r\n+                  weight: \"bold\",\r\n+                },\r\n+                bodyFont: {\r\n+                  size: isMobile ? 11 : 13,\r\n+                },\r\n+                displayColors: false,\r\n+                callbacks: {\r\n+                  label: function (context) {\r\n+                    return `${context.parsed.y.toLocaleString()} kWh`;\r\n+                  },\r\n+                },\r\n+              },\r\n+            },\r\n+            scales: {\r\n+              x: {\r\n+                grid: {\r\n+                  display: false,\r\n+                },\r\n+                ticks: {\r\n+                  font: {\r\n+                    size: isMobile ? 10 : isTablet ? 11 : 12,\r\n+                  },\r\n+                },\r\n+              },\r\n+              y: {\r\n+                beginAtZero: true,\r\n+                grid: {\r\n+                  color: \"rgba(0, 0, 0, 0.05)\",\r\n+                },\r\n+                ticks: {\r\n+                  font: {\r\n+                    size: isMobile ? 10 : isTablet ? 11 : 12,\r\n+                  },\r\n+                  callback: function (value) {\r\n+                    return `${value} kWh`;\r\n+                  },\r\n+                },\r\n+              },\r\n+            },\r\n+          },\r\n+        });\r\n+\r\n+        // Resolve promise after chart is initialized\r\n+        this.charts.consumption.options.animation = {\r\n+          onComplete: () => {\r\n+            resolve();\r\n+          },\r\n+        };\r\n+      });\r\n+    });\r\n+  }\r\n+\r\n+  // Add this helper method to generate better monthly data\r\n+  generateMonthlyData() {\r\n+    const currentMonth = new Date().getMonth();\r\n+    const months = [\r\n+      \"Jan\",\r\n+      \"Feb\",\r\n+      \"Mar\",\r\n+      \"Apr\",\r\n+      \"May\",\r\n+      \"Jun\",\r\n+      \"Jul\",\r\n+      \"Aug\",\r\n+      \"Sep\",\r\n+      \"Oct\",\r\n+      \"Nov\",\r\n+      \"Dec\",\r\n+    ];\r\n+    const baseConsumption = this.billData.unitsConsumed;\r\n+\r\n+    // Get last 6 months including current month\r\n+    const monthLabels = [];\r\n+    const consumptionValues = [];\r\n+\r\n+    for (let i = 5; i >= 0; i--) {\r\n+      let monthIndex = (currentMonth - i + 12) % 12;\r\n+      monthLabels.push(months[monthIndex]);\r\n+\r\n+      // Generate realistic variations (Â±20% of base consumption)\r\n+      let variation = baseConsumption * (0.8 + Math.random() * 0.4);\r\n+      consumptionValues.push(Math.round(variation));\r\n+    }\r\n+\r\n+    return {\r\n+      months: monthLabels,\r\n+      values: consumptionValues,\r\n+    };\r\n+  }\r\n+\r\n+  handleResize() {\r\n+    clearTimeout(this.resizeTimeout);\r\n+    this.resizeTimeout = setTimeout(() => {\r\n+      if (this.charts.consumption) {\r\n+        this.charts.consumption.resize();\r\n+      }\r\n+    }, 250);\r\n+  }\r\n+\r\n+  // Utility methods\r\n+  formatCurrency(value) {\r\n+    return new Intl.NumberFormat(\"en-PK\", {\r\n+      style: \"currency\",\r\n+      currency: \"PKR\",\r\n+      minimumFractionDigits: 0,\r\n+      maximumFractionDigits: 0,\r\n+    }).format(value);\r\n+  }\r\n+\r\n+  calculateDueDays() {\r\n+    const dueDate = new Date(this.billData.dueDate);\r\n+    const today = new Date();\r\n+    const diffTime = Math.abs(dueDate - today);\r\n+    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n+  }\r\n+\r\n+  calculateBillProgress() {\r\n+    const daysInMonth = 30;\r\n+    const today = new Date();\r\n+    const billDate = new Date(this.billData.issueDate);\r\n+    const daysPassed = Math.ceil((today - billDate) / (1000 * 60 * 60 * 24));\r\n+    return Math.min((daysPassed / daysInMonth) * 100, 100);\r\n+  }\r\n+\r\n+  calculateEfficiency() {\r\n+    const avgConsumption = 500; // Example average consumption\r\n+    const efficiency = (this.billData.unitsConsumed / avgConsumption) * 100;\r\n+    return efficiency <= 100 ? \"High\" : \"Low\";\r\n+  }\r\n+\r\n+  formatChange(data) {\r\n+    const lastTwo = data.slice(-2);\r\n+    const change =\r\n+      ((lastTwo[1].consumption - lastTwo[0].consumption) /\r\n+        lastTwo[0].consumption) *\r\n+      100;\r\n+    return change.toFixed(1);\r\n+  }\r\n+\r\n+  attachEventListeners() {\r\n+    const quoteButton = document.getElementById(\"proceed-to-quote\");\r\n+    const mobileQuoteButton = document.getElementById(\r\n+      \"proceed-to-quote-mobile\"\r\n+    );\r\n+\r\n+    if (quoteButton) {\r\n+      quoteButton.addEventListener(\"click\", () => {\r\n+        window.router.push(\"/quote\");\r\n+      });\r\n+    }\r\n+\r\n+    if (mobileQuoteButton) {\r\n+      mobileQuoteButton.addEventListener(\"click\", () => {\r\n+        window.router.push(\"/quote\");\r\n+      });\r\n+    }\r\n+\r\n+    // Add touch event handlers for mobile\r\n+    if (this.isMobileDevice()) {\r\n+      const insightsContainer = document.getElementById(\"insights-container\");\r\n+      let startY = 0;\r\n+      let scrolling = false;\r\n+\r\n+      insightsContainer.addEventListener(\r\n+        \"touchstart\",\r\n+        (e) => {\r\n+          startY = e.touches[0].pageY;\r\n+        },\r\n+        { passive: true }\r\n+      );\r\n+\r\n+      insightsContainer.addEventListener(\r\n+        \"touchmove\",\r\n+        (e) => {\r\n+          if (!scrolling) {\r\n+            const currentY = e.touches[0].pageY;\r\n+            const diff = startY - currentY;\r\n+\r\n+            if (diff > 0) {\r\n+              // Scrolling up\r\n+              scrolling = true;\r\n+              gsap.to(insightsContainer, {\r\n+                height: \"85vh\",\r\n+                duration: 0.3,\r\n+                ease: \"power2.out\",\r\n+              });\r\n+            }\r\n+          }\r\n+        },\r\n+        { passive: true }\r\n+      );\r\n+    }\r\n+  }\r\n+}\r\n"
                },
                {
                    "date": 1731687562505,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -743,9 +743,9 @@\n \r\n           <!-- Next Steps Card -->\r\n           <div class=\"sm:col-span-2 mt-auto\">\r\n             <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n-              <div class=\" w-full max-w-none\">\r\n+                <div class=\"w-full max-w-none !important border-2 border-red-500\">\r\n                 <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n                 <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n                   We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n                 </p>\r\n@@ -1043,1050 +1043,4 @@\n       );\r\n     }\r\n   }\r\n }\r\n-// BillReviewPage.js\r\n-import { gsap } from \"gsap\";\r\n-import { getBillData } from \"../store/solarSizingState.js\";\r\n-import { BillPreview } from \"./BillPreview.js\";\r\n-import Chart from \"chart.js/auto\";\r\n-import { CountUp } from \"countup.js\";\r\n-\r\n-export class BillReviewPage {\r\n-  constructor() {\r\n-    this.billData = getBillData();\r\n-    this.charts = {};\r\n-  }\r\n-\r\n-  addScrollStyles() {\r\n-    const style = document.createElement(\"style\");\r\n-    style.textContent = `\r\n-        .custom-scrollbar {\r\n-            scrollbar-width: thin;\r\n-            scrollbar-color: rgba(0, 0, 0, 0.2) transparent;\r\n-        }\r\n-\r\n-        .custom-scrollbar::-webkit-scrollbar {\r\n-            width: 6px;\r\n-        }\r\n-\r\n-        .custom-scrollbar::-webkit-scrollbar-track {\r\n-            background: transparent;\r\n-        }\r\n-\r\n-        .custom-scrollbar::-webkit-scrollbar-thumb {\r\n-            background-color: rgba(0, 0, 0, 0.2);\r\n-            border-radius: 3px;\r\n-        }\r\n-\r\n-        .custom-scrollbar::-webkit-scrollbar-thumb:hover {\r\n-            background-color: rgba(0, 0, 0, 0.3);\r\n-        }\r\n-    `;\r\n-    document.head.appendChild(style);\r\n-  }\r\n-\r\n-  // Update the main container structure in render method\r\n-  render() {\r\n-    const app = document.getElementById(\"app\");\r\n-    const trendData = this.generateTrendData();\r\n-\r\n-    app.innerHTML = `\r\n-    <div class=\"h-screen w-full overflow-hidden bg-white transition-colors duration-1000 opacity-0\" id=\"quote-result-page\">\r\n-        <div class=\"h-full w-full flex flex-col md:flex-row relative\" id=\"main-content\">\r\n-            <!-- Bill Preview Side - Full width on mobile -->\r\n-            <div class=\"w-full md:w-1/2 h-[45vh] md:h-full overflow-hidden opacity-0\" id=\"bill-preview-container\">\r\n-                <div id=\"bill-preview\" class=\"h-full\"></div>\r\n-            </div>\r\n-\r\n-            <!-- Loading Indicator -->\r\n-            <div class=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center z-10\" \r\n-                 id=\"loading-indicator\">\r\n-                <div class=\"loading-spinner\"></div>\r\n-                <p class=\"text-emerald-600 font-medium\">Analyzing your bill...</p>\r\n-            </div>\r\n-\r\n-            <div class=\"fixed md:relative w-full md:w-1/2 h-[60vh] md:h-full bg-gray-50 rounded-t-3xl md:rounded-none shadow-2xl md:shadow-none\" \r\n-                id=\"insights-container\"\r\n-                style=\"bottom: 0;\">  <!-- Removed initial transform -->                <!-- Drag Handle for mobile -->\r\n-                <div class=\"md:hidden w-full flex justify-center py-2 drag-handle\">\r\n-                    <div class=\"w-12 h-1.5 rounded-full bg-gray-300\"></div>\r\n-                </div>\r\n-\r\n-                <div class=\"h-full flex flex-col p-4 sm:p-6 overflow-auto hide-scrollbar\">\r\n-                    <!-- Top Section: Fixed Height -->\r\n-                    <div class=\"flex-none space-y-3 sm:space-y-4\">\r\n-                        <!-- Header Section -->\r\n-                        <div class=\"opacity-0\" id=\"insights-header\">\r\n-                            <div class=\"flex items-center gap-3\">\r\n-                                <div class=\"flex-shrink-0\">\r\n-                                    <div class=\"w-8 h-8 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-600 flex items-center justify-center\">\r\n-                                        <svg class=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n-                                        </svg>\r\n-                                    </div>\r\n-                                </div>\r\n-                                <div>\r\n-                                    <h2 class=\"text-base sm:text-lg font-bold text-gray-900\">Bill Analysis</h2>\r\n-                                    <p class=\"text-xs sm:text-sm text-gray-500\">Understanding your consumption</p>\r\n-                                </div>\r\n-                            </div>\r\n-                        </div>\r\n-\r\n-                        <!-- Progress Tracker -->\r\n-                        <div class=\"bg-white/70 backdrop-blur rounded-lg shadow-sm p-3 opacity-0\" id=\"progress-tracker\">\r\n-                            <div class=\"flex justify-between items-center\">\r\n-                                <div class=\"flex items-center gap-3\">\r\n-                                    <div class=\"w-8 h-8 rounded-full bg-emerald-600 flex items-center justify-center text-white font-semibold text-sm\">1</div>\r\n-                                    <div>\r\n-                                        <p class=\"font-semibold text-gray-900 text-sm\">Bill Review</p>\r\n-                                        <p class=\"text-xs text-gray-500\">Analyzing patterns</p>\r\n-                                    </div>\r\n-                                </div>\r\n-                                <div class=\"h-0.5 w-12 bg-gray-200\"></div>\r\n-                                <div class=\"flex items-center gap-3\">\r\n-                                    <div class=\"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm\">2</div>\r\n-                                    <div>\r\n-                                        <p class=\"font-semibold text-gray-400 text-sm\">Solar Quote</p>\r\n-                                        <p class=\"text-xs text-gray-400\">Up next</p>\r\n-                                    </div>\r\n-                                </div>\r\n-                            </div>\r\n-                        </div>\r\n-                    </div>\r\n-                    <!-- Main Content Area: Flexible Height -->\r\n-                    <div class=\"flex-1 min-h-0 mt-3\">\r\n-                        <div class=\"h-full grid grid-rows-[auto_1fr_auto] gap-3\">\r\n-                            <!-- Consumption Analysis Card -->\r\n-                            <div class=\"bg-white rounded-lg shadow-sm p-4 opacity-0\" id=\"consumption-card\">\r\n-                                <div class=\"flex justify-between items-center mb-4\">\r\n-                                    <h3 class=\"text-sm font-semibold text-gray-900\">Consumption Analysis</h3>\r\n-                                    <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs font-medium\">\r\n-                                        ${this.formatChange(\r\n-                                          trendData\r\n-                                        )}% vs last month\r\n-                                    </div>\r\n-                                </div>\r\n-                                <div class=\"relative h-[200px] sm:h-[250px] w-full\">  <!-- Added relative and w-full -->\r\n-                                    <canvas id=\"consumption-trend-chart\"></canvas>\r\n-                                </div>\r\n-                            </div>\r\n-\r\n-                            <!-- Metrics Cards -->\r\n-                            <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\r\n-                                <!-- Current Bill Card -->\r\n-                                <div class=\"bg-white rounded-lg shadow-sm p-3 opacity-0 consumption-metric\">\r\n-                                    <div class=\"flex items-center justify-between mb-2\">\r\n-                                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n-                                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n-                                            </svg>\r\n-                                        </div>\r\n-                                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n-                                    </div>\r\n-                                    <p class=\"text-xs text-gray-500 mb-1\">Current Bill</p>\r\n-                                    <p class=\"text-lg font-bold text-gray-900\" id=\"bill-amount\">${this.formatCurrency(\r\n-                                      this.billData.amount\r\n-                                    )}</p>\r\n-                                    <div class=\"mt-2 h-1 bg-gray-100 rounded\">\r\n-                                        <div class=\"h-full bg-emerald-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n-                                    </div>\r\n-                                </div>\r\n-\r\n-                                <!-- Units Consumed Card -->\r\n-                                <div class=\"bg-white rounded-lg shadow-sm p-3 opacity-0 consumption-metric\">\r\n-                                    <div class=\"flex items-center justify-between mb-2\">\r\n-                                        <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n-                                            <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n-                                            </svg>\r\n-                                        </div>\r\n-                                        <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs rounded-full\">\r\n-                                            ${this.calculateEfficiency()} efficiency\r\n-                                        </span>\r\n-                                    </div>\r\n-                                    <p class=\"text-xs text-gray-500 mb-1\">Units Consumed</p>\r\n-                                    <p class=\"text-lg font-bold text-gray-900\" id=\"units-consumed\">${\r\n-                                      this.billData.unitsConsumed\r\n-                                    } kWh</p>\r\n-                                    <p class=\"text-xs text-gray-500 mt-2\">Rate: ${this.formatCurrency(\r\n-                                      this.billData.ratePerUnit\r\n-                                    )}/kWh</p>\r\n-                                </div>\r\n-                            </div>\r\n-\r\n-                            <!-- Next Steps Card -->\r\n-                            <div class=\"mt-auto\">\r\n-                                <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg shadow-sm p-3 relative opacity-0\" id=\"next-steps-card\">\r\n-                                    <div class=\"absolute -top-2 -right-2\">\r\n-                                        <div class=\"w-10 h-10 animated-gradient rounded-full flex items-center justify-center\">\r\n-                                            <svg class=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n-                                            </svg>\r\n-                                        </div>\r\n-                                    </div>\r\n-                                    <div class=\"max-w-lg\">\r\n-                                        <h3 class=\"text-base font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n-                                        <p class=\"text-sm text-white/90 mb-4\">\r\n-                                            We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n-                                        </p>\r\n-                                        <button \r\n-                                            id=\"proceed-to-quote\" \r\n-                                            class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n-                                                   transition-all duration-300 shadow-sm hover:shadow-lg\r\n-                                                   flex items-center justify-center gap-2 group\"\r\n-                                        >\r\n-                                            Generate My Solar Quote\r\n-                                            <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n-                                            </svg>\r\n-                                        </button>\r\n-                                    </div>\r\n-                                </div>\r\n-                            </div>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-        </div>\r\n-    </div>\r\n-`;\r\n-\r\n-    const isMobile = this.isMobileDevice();\r\n-\r\n-    if (isMobile) {\r\n-      this.initializeMobileInteractions();\r\n-    }\r\n-\r\n-    this.attachBaseStyles();\r\n-\r\n-    // Use requestAnimationFrame to ensure styles are applied before starting\r\n-    requestAnimationFrame(() => {\r\n-      requestAnimationFrame(() => {\r\n-        // Make container visible\r\n-        const container = document.getElementById(\"quote-result-page\");\r\n-        if (container) {\r\n-          container.classList.remove(\"opacity-0\");\r\n-        }\r\n-\r\n-        // Now render bill preview and start animation\r\n-        this.renderBillPreview();\r\n-        this.startAnimation().catch((error) => {\r\n-          console.error(\"Animation failed:\", error);\r\n-          this.showError();\r\n-        });\r\n-      });\r\n-    });\r\n-  }\r\n-\r\n-  isMobileDevice() {\r\n-    return window.innerWidth < 768; // You can adjust this breakpoint\r\n-  }\r\n-\r\n-  getTrendChangeText() {\r\n-    const trendData = this.generateTrendData();\r\n-    return `${this.formatChange(trendData)}% vs last month`;\r\n-  }\r\n-\r\n-  initializeMobileInteractions() {\r\n-    const insightsContainer = document.getElementById(\"insights-container\");\r\n-    let startY = 0;\r\n-    let currentY = 0;\r\n-    let initialHeight = \"60vh\";\r\n-    let expandedHeight = \"92vh\";\r\n-\r\n-    // Handle drag to expand/collapse\r\n-    const handleTouchStart = (e) => {\r\n-      startY = e.touches[0].clientY;\r\n-      currentY = insightsContainer.getBoundingClientRect().height;\r\n-    };\r\n-\r\n-    const handleTouchMove = (e) => {\r\n-      const deltaY = startY - e.touches[0].clientY;\r\n-      const newHeight = Math.max(\r\n-        Math.min(currentY + deltaY, window.innerHeight * 0.92),\r\n-        window.innerHeight * 0.3\r\n-      );\r\n-\r\n-      gsap.to(insightsContainer, {\r\n-        height: newHeight,\r\n-        duration: 0.1,\r\n-        ease: \"none\",\r\n-      });\r\n-    };\r\n-\r\n-    const handleTouchEnd = (e) => {\r\n-      const finalHeight = insightsContainer.getBoundingClientRect().height;\r\n-      const threshold = window.innerHeight * 0.6;\r\n-\r\n-      gsap.to(insightsContainer, {\r\n-        height: finalHeight > threshold ? expandedHeight : initialHeight,\r\n-        duration: 0.3,\r\n-        ease: \"power2.out\",\r\n-      });\r\n-    };\r\n-\r\n-    // Add touch event listeners\r\n-    const dragHandle = insightsContainer.querySelector(\".drag-handle\");\r\n-    dragHandle.addEventListener(\"touchstart\", handleTouchStart);\r\n-    dragHandle.addEventListener(\"touchmove\", handleTouchMove);\r\n-    dragHandle.addEventListener(\"touchend\", handleTouchEnd);\r\n-  }\r\n-\r\n-  async startAnimation() {\r\n-    if (this.error) {\r\n-      this.showError();\r\n-      return;\r\n-    }\r\n-\r\n-    // Initialize charts before animations\r\n-    const trendData = this.generateTrendData();\r\n-    await this.initializeCharts(trendData);\r\n-\r\n-    const isMobile = this.isMobileDevice();\r\n-    const billPreviewContainer = document.getElementById(\r\n-      \"bill-preview-container\"\r\n-    );\r\n-    const insightsContainer = document.getElementById(\"insights-container\");\r\n-    const loadingIndicator = document.getElementById(\"loading-indicator\");\r\n-    const quoteResultPage = document.getElementById(\"quote-result-page\");\r\n-\r\n-    // Initial states\r\n-    gsap.set([billPreviewContainer, loadingIndicator], {\r\n-      opacity: 0,\r\n-    });\r\n-\r\n-    if (isMobile) {\r\n-      // Mobile animation sequence\r\n-      gsap.set(billPreviewContainer, {\r\n-        y: -20,\r\n-      });\r\n-\r\n-      // Set initial state for mobile insights\r\n-      gsap.set(insightsContainer, {\r\n-        y: \"100%\",\r\n-        visibility: \"visible\",\r\n-        opacity: 1,\r\n-      });\r\n-\r\n-      const tl = gsap.timeline({\r\n-        defaults: { duration: 0.8, ease: \"power2.out\" },\r\n-      });\r\n-\r\n-      await tl\r\n-        .to(billPreviewContainer, {\r\n-          opacity: 1,\r\n-          y: 0,\r\n-          duration: 1,\r\n-        })\r\n-        .to(loadingIndicator, {\r\n-          opacity: 1,\r\n-          scale: 1,\r\n-          duration: 0.5,\r\n-        })\r\n-        .to(loadingIndicator, {\r\n-          opacity: 0,\r\n-          scale: 0.5,\r\n-          delay: 0.5,\r\n-        })\r\n-        .to(insightsContainer, {\r\n-          y: \"0%\",\r\n-          duration: 0.8,\r\n-          ease: \"power4.out\",\r\n-          onComplete: () => {\r\n-            requestAnimationFrame(() => {\r\n-              this.startInsightAnimations();\r\n-            });\r\n-          },\r\n-        });\r\n-    } else {\r\n-      // Desktop animation sequence\r\n-      gsap.set(billPreviewContainer, {\r\n-        scale: 0.9,\r\n-        position: \"absolute\",\r\n-        left: \"50%\",\r\n-        top: \"50%\",\r\n-        xPercent: -50,\r\n-        yPercent: -50,\r\n-        width: \"47.5%\",\r\n-      });\r\n-\r\n-      // Set initial state for desktop insights\r\n-      gsap.set(insightsContainer, {\r\n-        opacity: 0,\r\n-        visibility: \"hidden\",\r\n-      });\r\n-\r\n-      const tl = gsap.timeline({\r\n-        defaults: { duration: 0.8, ease: \"power2.out\" },\r\n-      });\r\n-\r\n-      await tl\r\n-        .to(billPreviewContainer, {\r\n-          opacity: 1,\r\n-          scale: 1,\r\n-          duration: 1,\r\n-        })\r\n-        .to(loadingIndicator, {\r\n-          opacity: 1,\r\n-          scale: 1,\r\n-          duration: 0.5,\r\n-        })\r\n-        .to(loadingIndicator, {\r\n-          opacity: 0,\r\n-          scale: 0.5,\r\n-          delay: 1,\r\n-        })\r\n-        .to(\r\n-          billPreviewContainer,\r\n-          {\r\n-            left: \"0%\",\r\n-            top: \"0%\",\r\n-            xPercent: 0,\r\n-            yPercent: 0,\r\n-            width: \"50%\",\r\n-            position: \"relative\",\r\n-          },\r\n-          \"-=0.3\"\r\n-        )\r\n-        .add(() => {\r\n-          insightsContainer.style.visibility = \"visible\";\r\n-        })\r\n-        .to(insightsContainer, {\r\n-          opacity: 1,\r\n-          duration: 0.5,\r\n-          onComplete: () => {\r\n-            requestAnimationFrame(() => {\r\n-              this.startInsightAnimations();\r\n-            });\r\n-          },\r\n-        });\r\n-    }\r\n-  }\r\n-\r\n-  startInsightAnimations() {\r\n-    // First init the counters\r\n-    this.initCountUps();\r\n-\r\n-    // Make sure elements exist before animating\r\n-    const elements = {\r\n-      header: document.getElementById(\"insights-header\"),\r\n-      progress: document.getElementById(\"progress-tracker\"),\r\n-      consumption: document.getElementById(\"consumption-card\"),\r\n-      metrics: document.querySelectorAll(\".consumption-metric\"),\r\n-      nextSteps: document.getElementById(\"next-steps-card\"),\r\n-    };\r\n-\r\n-    // Check if elements exist before animating\r\n-    if (elements.header) {\r\n-      gsap.to(elements.header, {\r\n-        opacity: 1,\r\n-        y: 0,\r\n-        duration: 0.6,\r\n-        ease: \"power2.out\",\r\n-      });\r\n-    }\r\n-\r\n-    if (elements.progress) {\r\n-      gsap.to(elements.progress, {\r\n-        opacity: 1,\r\n-        y: 0,\r\n-        duration: 0.6,\r\n-        delay: 0.2,\r\n-        ease: \"power2.out\",\r\n-      });\r\n-    }\r\n-\r\n-    if (elements.consumption) {\r\n-      gsap.to(elements.consumption, {\r\n-        opacity: 1,\r\n-        y: 0,\r\n-        duration: 0.6,\r\n-        delay: 0.4,\r\n-        ease: \"power2.out\",\r\n-      });\r\n-    }\r\n-\r\n-    if (elements.metrics.length > 0) {\r\n-      gsap.to(elements.metrics, {\r\n-        opacity: 1,\r\n-        y: 0,\r\n-        duration: 0.6,\r\n-        stagger: 0.2,\r\n-        delay: 0.6,\r\n-        ease: \"power2.out\",\r\n-        onComplete: () => {\r\n-          this.startCountUps();\r\n-        },\r\n-      });\r\n-    }\r\n-\r\n-    if (elements.nextSteps) {\r\n-      gsap.to(elements.nextSteps, {\r\n-        opacity: 1,\r\n-        y: 0,\r\n-        duration: 0.6,\r\n-        delay: 1,\r\n-        ease: \"power2.out\",\r\n-      });\r\n-    }\r\n-  }\r\n-\r\n-  attachBaseStyles() {\r\n-    const style = document.createElement(\"style\");\r\n-    style.textContent = this.getBaseStyles();\r\n-    document.head.appendChild(style);\r\n-  }\r\n-\r\n-  getBaseStyles() {\r\n-    return `\r\n-        /* Base Theme Colors */\r\n-        :root {\r\n-            --color-primary: #10b981;\r\n-            --color-primary-dark: #059669;\r\n-            --color-bg-secondary: #f3f4f6;\r\n-        }\r\n-\r\n-        /* Mobile Styles */\r\n-        @media (max-width: 768px) {\r\n-            #insights-container {\r\n-                transition: transform 0.3s ease;\r\n-                will-change: transform;\r\n-                touch-action: none;\r\n-            }\r\n-\r\n-            .drag-handle {\r\n-                cursor: grab;\r\n-                touch-action: none;\r\n-            }\r\n-\r\n-            .drag-handle:active {\r\n-                cursor: grabbing;\r\n-            }\r\n-        }\r\n-\r\n-        /* Hide scrollbar on mobile */\r\n-        .hide-scrollbar::-webkit-scrollbar {\r\n-            display: none;\r\n-        }\r\n-        .hide-scrollbar {\r\n-            -ms-overflow-style: none;\r\n-            scrollbar-width: none;\r\n-        }\r\n-\r\n-        /* Loading Spinner */\r\n-        .loading-spinner {\r\n-            width: 40px;\r\n-            height: 40px;\r\n-            border: 3px solid rgba(16, 185, 129, 0.1);\r\n-            border-radius: 50%;\r\n-            border-top-color: #10b981;\r\n-            animation: spin 1s ease-in-out infinite;\r\n-        }\r\n-\r\n-        @keyframes spin {\r\n-            to { transform: rotate(360deg); }\r\n-        }\r\n-\r\n-        /* Animated Gradient */\r\n-        .animated-gradient {\r\n-            background: linear-gradient(\r\n-                45deg,\r\n-                rgba(255,255,255,0.1),\r\n-                rgba(255,255,255,0.2),\r\n-                rgba(255,255,255,0.1)\r\n-            );\r\n-            background-size: 200% 200%;\r\n-            animation: gradient 15s ease infinite;\r\n-        }\r\n-\r\n-        @keyframes gradient {\r\n-            0% { background-position: 0% 50%; }\r\n-            50% { background-position: 100% 50%; }\r\n-            100% { background-position: 0% 50%; }\r\n-        }\r\n-    `;\r\n-  }\r\n-\r\n-  initCountUps() {\r\n-    console.log(\"Initializing CountUps with data:\", this.billData); // Add debug log\r\n-\r\n-    const countUpOptions = {\r\n-      duration: 2,\r\n-      useEasing: true,\r\n-      useGrouping: true,\r\n-    };\r\n-\r\n-    // Initialize counters for the bill amounts and units\r\n-    this.countUps = {\r\n-      billAmount: new CountUp(\"bill-amount\", this.billData.amount || 0, {\r\n-        ...countUpOptions,\r\n-        prefix: \"PKR \",\r\n-        decimalPlaces: 0,\r\n-      }),\r\n-      unitsConsumed: new CountUp(\r\n-        \"units-consumed\",\r\n-        this.billData.unitsConsumed || 0,\r\n-        {\r\n-          ...countUpOptions,\r\n-          suffix: \" kWh\",\r\n-          decimalPlaces: 0,\r\n-        }\r\n-      ),\r\n-    };\r\n-  }\r\n-\r\n-  startCountUps() {\r\n-    console.log(\"Starting CountUps\"); // Add debug log\r\n-    Object.entries(this.countUps).forEach(([key, counter]) => {\r\n-      if (counter && !counter.error) {\r\n-        console.log(`Starting counter: ${key}`);\r\n-        counter.start();\r\n-      } else {\r\n-        console.error(`Error with counter ${key}:`, counter?.error);\r\n-      }\r\n-    });\r\n-  }\r\n-  renderBillPreview() {\r\n-    if (!this.billData) {\r\n-      console.error(\"Bill data is not available\");\r\n-      this.renderError(document.getElementById(\"app\"));\r\n-      return;\r\n-    }\r\n-\r\n-    console.log(\"Rendering with bill data:\", this.billData); // Add debug log\r\n-\r\n-    const billPreviewContainer = document.querySelector(\"#bill-preview\");\r\n-    if (!billPreviewContainer) {\r\n-      console.error(\"Bill preview container not found\");\r\n-      return;\r\n-    }\r\n-\r\n-    const billPreview = new BillPreview({\r\n-      ...this.billData,\r\n-      totalAmount: this.billData.amount, // Ensure totalAmount is set\r\n-      unitsConsumed: this.billData.unitsConsumed,\r\n-      ratePerUnit: this.billData.ratePerUnit,\r\n-    });\r\n-    billPreview.render(billPreviewContainer);\r\n-  }\r\n-\r\n-  renderError(container) {\r\n-    container.innerHTML = `\r\n-        <div class=\"flex items-center justify-center h-screen\">\r\n-            <div class=\"text-center\">\r\n-                <h2 class=\"text-xl font-semibold text-gray-800 mb-2\">Error</h2>\r\n-                <p class=\"text-gray-600\">Bill data is not available. Please try again.</p>\r\n-                <button onclick=\"window.router.push('/')\" \r\n-                        class=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors\">\r\n-                    Go Back\r\n-                </button>\r\n-            </div>\r\n-        </div>\r\n-    `;\r\n-  }\r\n-\r\n-  renderInsights() {\r\n-    const insightsContainer = document.querySelector(\"#insights-container\");\r\n-    if (!insightsContainer) return;\r\n-\r\n-    // Generate trend data for the last 6 months\r\n-    const trendData = this.generateTrendData();\r\n-\r\n-    insightsContainer.innerHTML = `\r\n-      <div class=\"h-full flex flex-col p-2 sm:p-4 lg:p-6 overflow-auto\">\r\n-        <!-- Header Section -->\r\n-        <div class=\"flex-none mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"insights-header\">\r\n-          <div class=\"flex items-center gap-3 sm:gap-4\">\r\n-            <div class=\"flex-shrink-0\">\r\n-              <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-600 flex items-center justify-center\">\r\n-                <svg class=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n-                </svg>\r\n-              </div>\r\n-            </div>\r\n-            <div>\r\n-              <h2 class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">Bill Analysis</h2>\r\n-              <p class=\"text-xs sm:text-sm lg:text-base text-gray-500\">Understanding your consumption</p>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-\r\n-        <!-- Progress Tracker -->\r\n-        <div class=\"bg-white/70 backdrop-blur rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 mb-3 sm:mb-4 lg:mb-6 opacity-0\" id=\"progress-tracker\">\r\n-          <div class=\"flex justify-between items-center\">\r\n-            <div class=\"flex items-center gap-3\">\r\n-              <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-emerald-600 flex items-center justify-center text-white font-semibold text-sm sm:text-base\">1</div>\r\n-              <div>\r\n-                <p class=\"font-semibold text-gray-900 text-sm sm:text-base\">Bill Review</p>\r\n-                <p class=\"text-xs sm:text-sm text-gray-500\">Analyzing patterns</p>\r\n-              </div>\r\n-            </div>\r\n-            <div class=\"h-0.5 w-16 sm:w-24 bg-gray-200\"></div>\r\n-            <div class=\"flex items-center gap-3\">\r\n-              <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 font-semibold text-sm sm:text-base\">2</div>\r\n-              <div>\r\n-                <p class=\"font-semibold text-gray-400 text-sm sm:text-base\">Solar Quote</p>\r\n-                <p class=\"text-xs sm:text-sm text-gray-400\">Up next</p>\r\n-              </div>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-\r\n-        <!-- Content Grid -->\r\n-        <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 lg:gap-6 flex-1\">\r\n-          <!-- Consumption Analysis Card -->\r\n-          <div class=\"sm:col-span-2 bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0\" id=\"consumption-card\">\r\n-            <div class=\"flex justify-between items-center mb-3 sm:mb-4\">\r\n-              <h3 class=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900\">Consumption Analysis</h3>\r\n-              <div class=\"px-2 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs sm:text-sm font-medium\">\r\n-                ${this.formatChange(trendData)}% vs last month\r\n-              </div>\r\n-            </div>\r\n-            <div class=\"h-[200px] sm:h-[250px]\">\r\n-              <canvas id=\"consumption-trend-chart\"></canvas>\r\n-            </div>\r\n-          </div>\r\n-\r\n-          <!-- Current Bill Card -->\r\n-          <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n-            <div class=\"flex items-center justify-between mb-2\">\r\n-              <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n-                <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n-                </svg>\r\n-              </div>\r\n-              <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">Due in ${this.calculateDueDays()} days</span>\r\n-            </div>\r\n-            <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Current Bill</p>\r\n-            <p class=\"text-lg font-bold text-gray-900\" id=\"bill-amount\">${this.formatCurrency(\r\n-              this.billData.amount\r\n-            )}</p>\r\n-            <div class=\"mt-4 h-1 bg-gray-100 rounded\">\r\n-              <div class=\"h-full bg-emerald-500 rounded\" style=\"width: ${this.calculateBillProgress()}%\"></div>\r\n-            </div>\r\n-          </div>\r\n-\r\n-          <!-- Units Consumed Card -->\r\n-          <div class=\"bg-white rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 opacity-0 consumption-metric\">\r\n-            <div class=\"flex items-center justify-between mb-2\">\r\n-              <div class=\"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n-                <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n-                </svg>\r\n-              </div>\r\n-              <span class=\"px-2 py-1 bg-emerald-50 text-emerald-600 text-xs sm:text-sm rounded-full\">\r\n-                ${this.calculateEfficiency()} efficiency\r\n-              </span>\r\n-            </div>\r\n-            <p class=\"text-xs sm:text-sm text-gray-500 mb-1\">Units Consumed</p>\r\n-            <p class=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">${\r\n-              this.billData.unitsConsumed\r\n-            } kWh</p>\r\n-            <p class=\"text-xs sm:text-sm text-gray-500 mt-2\">Rate: ${this.formatCurrency(\r\n-              this.billData.ratePerUnit\r\n-            )}/kWh</p>\r\n-          </div>\r\n-\r\n-          <!-- Next Steps Card -->\r\n-          <div class=\"sm:col-span-2 mt-auto\">\r\n-            <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n-              <div class=\" w-full max-w-none\">\r\n-                <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n-                <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n-                  We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n-                </p>\r\n-                <button \r\n-                  id=\"proceed-to-quote\" \r\n-                  class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n-                       transition-all duration-300 shadow-sm hover:shadow-lg\r\n-                       flex items-center justify-center gap-2 group\"\r\n-                >\r\n-                  Generate My Solar Quote\r\n-                  <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n-                  </svg>\r\n-                </button>\r\n-              </div>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-      </div>\r\n-    `;\r\n-\r\n-    // Update the chart colors in initializeCharts\r\n-    this.initializeCharts(trendData);\r\n-    this.startInsightAnimations();\r\n-    this.attachEventListeners();\r\n-  }\r\n-\r\n-  generateTrendData() {\r\n-    const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\"];\r\n-    return months.map((month) => ({\r\n-      month,\r\n-      consumption: Math.floor(\r\n-        this.billData.unitsConsumed * (0.8 + Math.random() * 0.4)\r\n-      ),\r\n-    }));\r\n-  }\r\n-\r\n-  initializeCharts(trendData) {\r\n-    return new Promise((resolve) => {\r\n-      requestAnimationFrame(() => {\r\n-        const ctx = document.getElementById(\"consumption-trend-chart\");\r\n-        if (!ctx) {\r\n-          console.error(\"Chart canvas not found\");\r\n-          resolve();\r\n-          return;\r\n-        }\r\n-\r\n-        // Ensure the canvas is visible\r\n-        ctx.style.display = \"block\";\r\n-\r\n-        const isMobile = window.innerWidth < 640;\r\n-        const isTablet = window.innerWidth < 1024;\r\n-\r\n-        // Destroy existing chart if it exists\r\n-        if (this.charts.consumption) {\r\n-          this.charts.consumption.destroy();\r\n-        }\r\n-\r\n-        // Generate proper monthly data\r\n-        const monthlyData = this.generateMonthlyData();\r\n-\r\n-        // Create new chart\r\n-        this.charts.consumption = new Chart(ctx, {\r\n-          type: \"line\",\r\n-          data: {\r\n-            labels: monthlyData.months,\r\n-            datasets: [\r\n-              {\r\n-                label: \"Consumption (kWh)\",\r\n-                data: monthlyData.values,\r\n-                borderColor: \"#059669\",\r\n-                backgroundColor: \"rgba(5, 150, 105, 0.1)\",\r\n-                tension: 0.4,\r\n-                fill: true,\r\n-                pointRadius: isMobile ? 2 : isTablet ? 3 : 4,\r\n-                pointHoverRadius: isMobile ? 4 : isTablet ? 5 : 6,\r\n-                pointBackgroundColor: \"#ffffff\",\r\n-                pointBorderColor: \"#059669\",\r\n-                pointBorderWidth: isMobile ? 1 : 2,\r\n-              },\r\n-            ],\r\n-          },\r\n-          options: {\r\n-            responsive: true,\r\n-            maintainAspectRatio: false,\r\n-            interaction: {\r\n-              mode: \"nearest\",\r\n-              intersect: false,\r\n-              axis: \"x\",\r\n-            },\r\n-            plugins: {\r\n-              legend: {\r\n-                display: false,\r\n-              },\r\n-              tooltip: {\r\n-                enabled: true,\r\n-                backgroundColor: \"white\",\r\n-                titleColor: \"#1f2937\",\r\n-                bodyColor: \"#4b5563\",\r\n-                borderColor: \"#e5e7eb\",\r\n-                borderWidth: 1,\r\n-                padding: isMobile ? 8 : 12,\r\n-                titleFont: {\r\n-                  size: isMobile ? 12 : 14,\r\n-                  weight: \"bold\",\r\n-                },\r\n-                bodyFont: {\r\n-                  size: isMobile ? 11 : 13,\r\n-                },\r\n-                displayColors: false,\r\n-                callbacks: {\r\n-                  label: function (context) {\r\n-                    return `${context.parsed.y.toLocaleString()} kWh`;\r\n-                  },\r\n-                },\r\n-              },\r\n-            },\r\n-            scales: {\r\n-              x: {\r\n-                grid: {\r\n-                  display: false,\r\n-                },\r\n-                ticks: {\r\n-                  font: {\r\n-                    size: isMobile ? 10 : isTablet ? 11 : 12,\r\n-                  },\r\n-                },\r\n-              },\r\n-              y: {\r\n-                beginAtZero: true,\r\n-                grid: {\r\n-                  color: \"rgba(0, 0, 0, 0.05)\",\r\n-                },\r\n-                ticks: {\r\n-                  font: {\r\n-                    size: isMobile ? 10 : isTablet ? 11 : 12,\r\n-                  },\r\n-                  callback: function (value) {\r\n-                    return `${value} kWh`;\r\n-                  },\r\n-                },\r\n-              },\r\n-            },\r\n-          },\r\n-        });\r\n-\r\n-        // Resolve promise after chart is initialized\r\n-        this.charts.consumption.options.animation = {\r\n-          onComplete: () => {\r\n-            resolve();\r\n-          },\r\n-        };\r\n-      });\r\n-    });\r\n-  }\r\n-\r\n-  // Add this helper method to generate better monthly data\r\n-  generateMonthlyData() {\r\n-    const currentMonth = new Date().getMonth();\r\n-    const months = [\r\n-      \"Jan\",\r\n-      \"Feb\",\r\n-      \"Mar\",\r\n-      \"Apr\",\r\n-      \"May\",\r\n-      \"Jun\",\r\n-      \"Jul\",\r\n-      \"Aug\",\r\n-      \"Sep\",\r\n-      \"Oct\",\r\n-      \"Nov\",\r\n-      \"Dec\",\r\n-    ];\r\n-    const baseConsumption = this.billData.unitsConsumed;\r\n-\r\n-    // Get last 6 months including current month\r\n-    const monthLabels = [];\r\n-    const consumptionValues = [];\r\n-\r\n-    for (let i = 5; i >= 0; i--) {\r\n-      let monthIndex = (currentMonth - i + 12) % 12;\r\n-      monthLabels.push(months[monthIndex]);\r\n-\r\n-      // Generate realistic variations (Â±20% of base consumption)\r\n-      let variation = baseConsumption * (0.8 + Math.random() * 0.4);\r\n-      consumptionValues.push(Math.round(variation));\r\n-    }\r\n-\r\n-    return {\r\n-      months: monthLabels,\r\n-      values: consumptionValues,\r\n-    };\r\n-  }\r\n-\r\n-  handleResize() {\r\n-    clearTimeout(this.resizeTimeout);\r\n-    this.resizeTimeout = setTimeout(() => {\r\n-      if (this.charts.consumption) {\r\n-        this.charts.consumption.resize();\r\n-      }\r\n-    }, 250);\r\n-  }\r\n-\r\n-  // Utility methods\r\n-  formatCurrency(value) {\r\n-    return new Intl.NumberFormat(\"en-PK\", {\r\n-      style: \"currency\",\r\n-      currency: \"PKR\",\r\n-      minimumFractionDigits: 0,\r\n-      maximumFractionDigits: 0,\r\n-    }).format(value);\r\n-  }\r\n-\r\n-  calculateDueDays() {\r\n-    const dueDate = new Date(this.billData.dueDate);\r\n-    const today = new Date();\r\n-    const diffTime = Math.abs(dueDate - today);\r\n-    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n-  }\r\n-\r\n-  calculateBillProgress() {\r\n-    const daysInMonth = 30;\r\n-    const today = new Date();\r\n-    const billDate = new Date(this.billData.issueDate);\r\n-    const daysPassed = Math.ceil((today - billDate) / (1000 * 60 * 60 * 24));\r\n-    return Math.min((daysPassed / daysInMonth) * 100, 100);\r\n-  }\r\n-\r\n-  calculateEfficiency() {\r\n-    const avgConsumption = 500; // Example average consumption\r\n-    const efficiency = (this.billData.unitsConsumed / avgConsumption) * 100;\r\n-    return efficiency <= 100 ? \"High\" : \"Low\";\r\n-  }\r\n-\r\n-  formatChange(data) {\r\n-    const lastTwo = data.slice(-2);\r\n-    const change =\r\n-      ((lastTwo[1].consumption - lastTwo[0].consumption) /\r\n-        lastTwo[0].consumption) *\r\n-      100;\r\n-    return change.toFixed(1);\r\n-  }\r\n-\r\n-  attachEventListeners() {\r\n-    const quoteButton = document.getElementById(\"proceed-to-quote\");\r\n-    const mobileQuoteButton = document.getElementById(\r\n-      \"proceed-to-quote-mobile\"\r\n-    );\r\n-\r\n-    if (quoteButton) {\r\n-      quoteButton.addEventListener(\"click\", () => {\r\n-        window.router.push(\"/quote\");\r\n-      });\r\n-    }\r\n-\r\n-    if (mobileQuoteButton) {\r\n-      mobileQuoteButton.addEventListener(\"click\", () => {\r\n-        window.router.push(\"/quote\");\r\n-      });\r\n-    }\r\n-\r\n-    // Add touch event handlers for mobile\r\n-    if (this.isMobileDevice()) {\r\n-      const insightsContainer = document.getElementById(\"insights-container\");\r\n-      let startY = 0;\r\n-      let scrolling = false;\r\n-\r\n-      insightsContainer.addEventListener(\r\n-        \"touchstart\",\r\n-        (e) => {\r\n-          startY = e.touches[0].pageY;\r\n-        },\r\n-        { passive: true }\r\n-      );\r\n-\r\n-      insightsContainer.addEventListener(\r\n-        \"touchmove\",\r\n-        (e) => {\r\n-          if (!scrolling) {\r\n-            const currentY = e.touches[0].pageY;\r\n-            const diff = startY - currentY;\r\n-\r\n-            if (diff > 0) {\r\n-              // Scrolling up\r\n-              scrolling = true;\r\n-              gsap.to(insightsContainer, {\r\n-                height: \"85vh\",\r\n-                duration: 0.3,\r\n-                ease: \"power2.out\",\r\n-              });\r\n-            }\r\n-          }\r\n-        },\r\n-        { passive: true }\r\n-      );\r\n-    }\r\n-  }\r\n-}\r\n"
                },
                {
                    "date": 1731687601757,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -743,13 +743,13 @@\n \r\n           <!-- Next Steps Card -->\r\n           <div class=\"sm:col-span-2 mt-auto\">\r\n             <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-3 sm:p-4 lg:p-6 relative opacity-0\" id=\"next-steps-card\">\r\n-                <div class=\"w-full max-w-none !important border-2 border-red-500\">\r\n+                <div class=\"!w-full !max-w-none !important border-2 !border-red-500\">\r\n                 <h3 class=\"text-base sm:text-lg lg:text-xl font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n                 <p class=\"text-sm sm:text-base text-white/90 mb-4\">\r\n                   We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n-                </p>\r\n+                </p> \r\n                 <button \r\n                   id=\"proceed-to-quote\" \r\n                   class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n                        transition-all duration-300 shadow-sm hover:shadow-lg\r\n"
                },
                {
                    "date": 1731687705659,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -168,36 +168,68 @@\n                                 </div>\r\n                             </div>\r\n \r\n                             <!-- Next Steps Card -->\r\n-                            <div class=\"mt-auto\">\r\n-                                <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg shadow-sm p-3 relative opacity-0\" id=\"next-steps-card\">\r\n-                                    <div class=\"absolute -top-2 -right-2\">\r\n-                                        <div class=\"w-10 h-10 animated-gradient rounded-full flex items-center justify-center\">\r\n-                                            <svg class=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n-                                            </svg>\r\n-                                        </div>\r\n-                                    </div>\r\n-                                    <div class=\"max-w-lg\">\r\n-                                        <h3 class=\"text-base font-semibold text-white mb-2\">Ready For Your Solar Quote?</h3>\r\n-                                        <p class=\"text-sm text-white/90 mb-4\">\r\n-                                            We've analyzed your consumption patterns. Let's see how much you could save with solar energy!\r\n-                                        </p>\r\n-                                        <button \r\n-                                            id=\"proceed-to-quote\" \r\n-                                            class=\"w-full bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-medium\r\n-                                                   transition-all duration-300 shadow-sm hover:shadow-lg\r\n-                                                   flex items-center justify-center gap-2 group\"\r\n-                                        >\r\n-                                            Generate My Solar Quote\r\n-                                            <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n-                                            </svg>\r\n-                                        </button>\r\n-                                    </div>\r\n-                                </div>\r\n-                            </div>\r\n+                            <!-- Next Steps Card -->\r\n+<div class=\"sm:col-span-2 mt-auto\">\r\n+    <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-4 sm:p-6 lg:p-8 relative overflow-hidden opacity-0\" id=\"next-steps-card\">\r\n+        <!-- Decorative Elements -->\r\n+        <div class=\"absolute top-0 right-0 w-64 h-64 opacity-10\">\r\n+            <svg class=\"w-full h-full text-white\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                <path d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n+            </svg>\r\n+        </div>\r\n+\r\n+        <div class=\"relative z-10 flex flex-col sm:flex-row items-start sm:items-center gap-6 sm:gap-8\">\r\n+            <!-- Content Section -->\r\n+            <div class=\"flex-1 space-y-3\">\r\n+                <div class=\"flex items-center gap-2\">\r\n+                    <div class=\"w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center\">\r\n+                        <svg class=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n+                        </svg>\r\n+                    </div>\r\n+                    <h3 class=\"text-lg sm:text-xl font-semibold text-white\">Ready For Your Solar Quote?</h3>\r\n+                </div>\r\n+                \r\n+                <p class=\"text-sm sm:text-base text-white/90 leading-relaxed max-w-xl\">\r\n+                    We've analyzed your consumption patterns and can now provide you with a personalized solar solution. Find out how much you could save!\r\n+                </p>\r\n+                \r\n+                <!-- Key Benefits -->\r\n+                <div class=\"flex flex-wrap gap-3 pt-2\">\r\n+                    <div class=\"inline-flex items-center gap-1.5 bg-white/10 rounded-full px-3 py-1\">\r\n+                        <svg class=\"w-4 h-4 text-emerald-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\" />\r\n+                        </svg>\r\n+                        <span class=\"text-sm text-white\">Personalized Solution</span>\r\n+                    </div>\r\n+                    <div class=\"inline-flex items-center gap-1.5 bg-white/10 rounded-full px-3 py-1\">\r\n+                        <svg class=\"w-4 h-4 text-emerald-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2\" />\r\n+                        </svg>\r\n+                        <span class=\"text-sm text-white\">Cost Savings</span>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+\r\n+            <!-- Button Section -->\r\n+            <div class=\"w-full sm:w-auto flex-shrink-0\">\r\n+                <button \r\n+                    id=\"proceed-to-quote\" \r\n+                    class=\"w-full sm:w-auto bg-white hover:bg-white/90 text-emerald-700 px-6 py-3 rounded-xl font-medium\r\n+                           transition-all duration-300 shadow-lg hover:shadow-xl\r\n+                           flex items-center justify-center gap-2 group\"\r\n+                >\r\n+                    <span>Generate My Quote</span>\r\n+                    <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n+                    </svg>\r\n+                </button>\r\n+            </div>\r\n+        </div>\r\n+    </div>\r\n+</div>\r\n                         </div>\r\n                     </div>\r\n                 </div>\r\n             </div>\r\n"
                },
                {
                    "date": 1731687925337,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,11 +58,13 @@\n                 <div class=\"loading-spinner\"></div>\r\n                 <p class=\"text-emerald-600 font-medium\">Analyzing your bill...</p>\r\n             </div>\r\n \r\n+            <!-- Insights Container -->\r\n             <div class=\"fixed md:relative w-full md:w-1/2 h-[60vh] md:h-full bg-gray-50 rounded-t-3xl md:rounded-none shadow-2xl md:shadow-none\" \r\n                 id=\"insights-container\"\r\n-                style=\"bottom: 0;\">  <!-- Removed initial transform -->                <!-- Drag Handle for mobile -->\r\n+                style=\"bottom: 0;\">\r\n+                <!-- Drag Handle for mobile -->\r\n                 <div class=\"md:hidden w-full flex justify-center py-2 drag-handle\">\r\n                     <div class=\"w-12 h-1.5 rounded-full bg-gray-300\"></div>\r\n                 </div>\r\n \r\n@@ -106,11 +108,12 @@\n                                 </div>\r\n                             </div>\r\n                         </div>\r\n                     </div>\r\n+\r\n                     <!-- Main Content Area: Flexible Height -->\r\n                     <div class=\"flex-1 min-h-0 mt-3\">\r\n-                        <div class=\"h-full grid grid-rows-[auto_1fr_auto] gap-3\">\r\n+                        <div class=\"h-full grid grid-rows-[auto_auto_1fr] gap-3\">\r\n                             <!-- Consumption Analysis Card -->\r\n                             <div class=\"bg-white rounded-lg shadow-sm p-4 opacity-0\" id=\"consumption-card\">\r\n                                 <div class=\"flex justify-between items-center mb-4\">\r\n                                     <h3 class=\"text-sm font-semibold text-gray-900\">Consumption Analysis</h3>\r\n@@ -119,14 +122,14 @@\n                                           trendData\r\n                                         )}% vs last month\r\n                                     </div>\r\n                                 </div>\r\n-                                <div class=\"relative h-[200px] sm:h-[250px] w-full\">  <!-- Added relative and w-full -->\r\n+                                <div class=\"relative h-[200px] sm:h-[250px] w-full\">\r\n                                     <canvas id=\"consumption-trend-chart\"></canvas>\r\n                                 </div>\r\n                             </div>\r\n \r\n-                            <!-- Metrics Cards -->\r\n+                            <!-- Metrics Cards Container -->\r\n                             <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\r\n                                 <!-- Current Bill Card -->\r\n                                 <div class=\"bg-white rounded-lg shadow-sm p-3 opacity-0 consumption-metric\">\r\n                                     <div class=\"flex items-center justify-between mb-2\">\r\n@@ -167,69 +170,66 @@\n                                     )}/kWh</p>\r\n                                 </div>\r\n                             </div>\r\n \r\n-                            <!-- Next Steps Card -->\r\n-                            <!-- Next Steps Card -->\r\n-<div class=\"sm:col-span-2 mt-auto\">\r\n-    <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-4 sm:p-6 lg:p-8 relative overflow-hidden opacity-0\" id=\"next-steps-card\">\r\n-        <!-- Decorative Elements -->\r\n-        <div class=\"absolute top-0 right-0 w-64 h-64 opacity-10\">\r\n-            <svg class=\"w-full h-full text-white\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                <path d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n-            </svg>\r\n-        </div>\r\n+                            <!-- Solar Quote Card -->\r\n+                            <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-4 sm:p-6 lg:p-8 relative overflow-hidden opacity-0\" id=\"next-steps-card\">\r\n+                                <!-- Decorative Elements -->\r\n+                                <div class=\"absolute top-0 right-0 w-64 h-64 opacity-10\">\r\n+                                    <svg class=\"w-full h-full text-white\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                        <path d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n+                                    </svg>\r\n+                                </div>\r\n \r\n-        <div class=\"relative z-10 flex flex-col sm:flex-row items-start sm:items-center gap-6 sm:gap-8\">\r\n-            <!-- Content Section -->\r\n-            <div class=\"flex-1 space-y-3\">\r\n-                <div class=\"flex items-center gap-2\">\r\n-                    <div class=\"w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center\">\r\n-                        <svg class=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n-                        </svg>\r\n-                    </div>\r\n-                    <h3 class=\"text-lg sm:text-xl font-semibold text-white\">Ready For Your Solar Quote?</h3>\r\n-                </div>\r\n-                \r\n-                <p class=\"text-sm sm:text-base text-white/90 leading-relaxed max-w-xl\">\r\n-                    We've analyzed your consumption patterns and can now provide you with a personalized solar solution. Find out how much you could save!\r\n-                </p>\r\n-                \r\n-                <!-- Key Benefits -->\r\n-                <div class=\"flex flex-wrap gap-3 pt-2\">\r\n-                    <div class=\"inline-flex items-center gap-1.5 bg-white/10 rounded-full px-3 py-1\">\r\n-                        <svg class=\"w-4 h-4 text-emerald-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\" />\r\n-                        </svg>\r\n-                        <span class=\"text-sm text-white\">Personalized Solution</span>\r\n-                    </div>\r\n-                    <div class=\"inline-flex items-center gap-1.5 bg-white/10 rounded-full px-3 py-1\">\r\n-                        <svg class=\"w-4 h-4 text-emerald-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2\" />\r\n-                        </svg>\r\n-                        <span class=\"text-sm text-white\">Cost Savings</span>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n+                                <div class=\"relative z-10 flex flex-col sm:flex-row items-start sm:items-center gap-6 sm:gap-8\">\r\n+                                    <!-- Content Section -->\r\n+                                    <div class=\"flex-1 space-y-3\">\r\n+                                        <div class=\"flex items-center gap-2\">\r\n+                                            <div class=\"w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center\">\r\n+                                                <svg class=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n+                                                </svg>\r\n+                                            </div>\r\n+                                            <h3 class=\"text-lg sm:text-xl font-semibold text-white\">Ready For Your Solar Quote?</h3>\r\n+                                        </div>\r\n+                                        \r\n+                                        <p class=\"text-sm sm:text-base text-white/90 leading-relaxed max-w-xl\">\r\n+                                            We've analyzed your consumption patterns and can now provide you with a personalized solar solution. Find out how much you could save!\r\n+                                        </p>\r\n+                                        \r\n+                                        <!-- Key Benefits -->\r\n+                                        <div class=\"flex flex-wrap gap-3 pt-2\">\r\n+                                            <div class=\"inline-flex items-center gap-1.5 bg-white/10 rounded-full px-3 py-1\">\r\n+                                                <svg class=\"w-4 h-4 text-emerald-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\" />\r\n+                                                </svg>\r\n+                                                <span class=\"text-sm text-white\">Personalized Solution</span>\r\n+                                            </div>\r\n+                                            <div class=\"inline-flex items-center gap-1.5 bg-white/10 rounded-full px-3 py-1\">\r\n+                                                <svg class=\"w-4 h-4 text-emerald-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2\" />\r\n+                                                </svg>\r\n+                                                <span class=\"text-sm text-white\">Cost Savings</span>\r\n+                                            </div>\r\n+                                        </div>\r\n+                                    </div>\r\n \r\n-            <!-- Button Section -->\r\n-            <div class=\"w-full sm:w-auto flex-shrink-0\">\r\n-                <button \r\n-                    id=\"proceed-to-quote\" \r\n-                    class=\"w-full sm:w-auto bg-white hover:bg-white/90 text-emerald-700 px-6 py-3 rounded-xl font-medium\r\n-                           transition-all duration-300 shadow-lg hover:shadow-xl\r\n-                           flex items-center justify-center gap-2 group\"\r\n-                >\r\n-                    <span>Generate My Quote</span>\r\n-                    <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n-                    </svg>\r\n-                </button>\r\n-            </div>\r\n-        </div>\r\n-    </div>\r\n-</div>\r\n+                                    <!-- Button Section -->\r\n+                                    <div class=\"w-full sm:w-auto flex-shrink-0\">\r\n+                                        <button \r\n+                                            id=\"proceed-to-quote\" \r\n+                                            class=\"w-full sm:w-auto bg-white hover:bg-white/90 text-emerald-700 px-6 py-3 rounded-xl font-medium\r\n+                                                   transition-all duration-300 shadow-lg hover:shadow-xl\r\n+                                                   flex items-center justify-center gap-2 group\"\r\n+                                        >\r\n+                                            <span>Generate My Quote</span>\r\n+                                            <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n+                                            </svg>\r\n+                                        </button>\r\n+                                    </div>\r\n+                                </div>\r\n+                            </div>\r\n                         </div>\r\n                     </div>\r\n                 </div>\r\n             </div>\r\n"
                },
                {
                    "date": 1731688076078,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -171,65 +171,72 @@\n                                 </div>\r\n                             </div>\r\n \r\n                             <!-- Solar Quote Card -->\r\n-                            <div class=\"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-lg sm:rounded-xl shadow-sm p-4 sm:p-6 lg:p-8 relative overflow-hidden opacity-0\" id=\"next-steps-card\">\r\n-                                <!-- Decorative Elements -->\r\n-                                <div class=\"absolute top-0 right-0 w-64 h-64 opacity-10\">\r\n-                                    <svg class=\"w-full h-full text-white\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                        <path d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n-                                    </svg>\r\n-                                </div>\r\n+                            <div class=\"mt-3 mb-4 md:mb-6\" id=\"next-steps-card-container\">\r\n+                                <div class=\"bg-emerald-600 rounded-lg sm:rounded-xl shadow-sm opacity-0\" id=\"next-steps-card\">\r\n+                                    <!-- Main Content Container with Better Padding -->\r\n+                                    <div class=\"p-4 sm:p-5 md:p-6\">\r\n+                                        <div class=\"relative z-10 flex flex-col gap-4 sm:gap-5\">\r\n+                                            <!-- Header Section -->\r\n+                                            <div class=\"flex items-center gap-3\">\r\n+                                                <div class=\"w-8 h-8 sm:w-10 sm:h-10 rounded-lg bg-white/10 flex items-center justify-center shrink-0\">\r\n+                                                    <svg class=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n+                                                    </svg>\r\n+                                                </div>\r\n+                                                <h3 class=\"text-lg sm:text-xl font-semibold text-white\">Ready For Your Solar Quote?</h3>\r\n+                                            </div>\r\n \r\n-                                <div class=\"relative z-10 flex flex-col sm:flex-row items-start sm:items-center gap-6 sm:gap-8\">\r\n-                                    <!-- Content Section -->\r\n-                                    <div class=\"flex-1 space-y-3\">\r\n-                                        <div class=\"flex items-center gap-2\">\r\n-                                            <div class=\"w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center\">\r\n-                                                <svg class=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n-                                                </svg>\r\n+                                            <!-- Description and Benefits -->\r\n+                                            <div class=\"space-y-4\">\r\n+                                                <p class=\"text-sm sm:text-base text-white/90 leading-relaxed\">\r\n+                                                    We've analyzed your consumption patterns and can now provide you with a personalized solar solution. Find out how much you could save!\r\n+                                                </p>\r\n+                                                \r\n+                                                <!-- Benefits Pills -->\r\n+                                                <div class=\"flex flex-wrap gap-2\">\r\n+                                                    <div class=\"inline-flex items-center gap-1.5 bg-white/10 rounded-full px-3 py-1.5\">\r\n+                                                        <svg class=\"w-3.5 h-3.5 text-emerald-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\" />\r\n+                                                        </svg>\r\n+                                                        <span class=\"text-sm text-white\">Personalized Solution</span>\r\n+                                                    </div>\r\n+                                                    <div class=\"inline-flex items-center gap-1.5 bg-white/10 rounded-full px-3 py-1.5\">\r\n+                                                        <svg class=\"w-3.5 h-3.5 text-emerald-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2\" />\r\n+                                                        </svg>\r\n+                                                        <span class=\"text-sm text-white\">Cost Savings</span>\r\n+                                                    </div>\r\n+                                                </div>\r\n                                             </div>\r\n-                                            <h3 class=\"text-lg sm:text-xl font-semibold text-white\">Ready For Your Solar Quote?</h3>\r\n-                                        </div>\r\n-                                        \r\n-                                        <p class=\"text-sm sm:text-base text-white/90 leading-relaxed max-w-xl\">\r\n-                                            We've analyzed your consumption patterns and can now provide you with a personalized solar solution. Find out how much you could save!\r\n-                                        </p>\r\n-                                        \r\n-                                        <!-- Key Benefits -->\r\n-                                        <div class=\"flex flex-wrap gap-3 pt-2\">\r\n-                                            <div class=\"inline-flex items-center gap-1.5 bg-white/10 rounded-full px-3 py-1\">\r\n-                                                <svg class=\"w-4 h-4 text-emerald-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\" />\r\n+\r\n+                                            <!-- CTA Button -->\r\n+                                            <button \r\n+                                                id=\"proceed-to-quote\" \r\n+                                                class=\"w-full sm:w-auto bg-white hover:bg-white/90 text-emerald-700 px-5 py-2.5 rounded-xl font-medium\r\n+                                                      transition-all duration-300 shadow-sm hover:shadow-md\r\n+                                                      flex items-center justify-center gap-2 group mt-2\"\r\n+                                            >\r\n+                                                <span>Generate My Quote</span>\r\n+                                                <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n                                                 </svg>\r\n-                                                <span class=\"text-sm text-white\">Personalized Solution</span>\r\n-                                            </div>\r\n-                                            <div class=\"inline-flex items-center gap-1.5 bg-white/10 rounded-full px-3 py-1\">\r\n-                                                <svg class=\"w-4 h-4 text-emerald-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2\" />\r\n-                                                </svg>\r\n-                                                <span class=\"text-sm text-white\">Cost Savings</span>\r\n-                                            </div>\r\n+                                            </button>\r\n                                         </div>\r\n                                     </div>\r\n \r\n-                                    <!-- Button Section -->\r\n-                                    <div class=\"w-full sm:w-auto flex-shrink-0\">\r\n-                                        <button \r\n-                                            id=\"proceed-to-quote\" \r\n-                                            class=\"w-full sm:w-auto bg-white hover:bg-white/90 text-emerald-700 px-6 py-3 rounded-xl font-medium\r\n-                                                   transition-all duration-300 shadow-lg hover:shadow-xl\r\n-                                                   flex items-center justify-center gap-2 group\"\r\n-                                        >\r\n-                                            <span>Generate My Quote</span>\r\n-                                            <svg class=\"w-4 h-4 transform group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n-                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n+                                    <!-- Decorative Background (Optimized) -->\r\n+                                    <div class=\"absolute inset-0 overflow-hidden rounded-lg sm:rounded-xl\">\r\n+                                        <div class=\"absolute top-0 right-0 w-48 h-48 md:w-56 md:h-56 translate-x-1/4 -translate-y-1/4 opacity-10\">\r\n+                                            <svg class=\"w-full h-full text-white\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+                                                <path d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n                                             </svg>\r\n-                                        </button>\r\n+                                        </div>\r\n                                     </div>\r\n                                 </div>\r\n                             </div>\r\n+                            </div>\r\n                         </div>\r\n                     </div>\r\n                 </div>\r\n             </div>\r\n"
                }
            ],
            "date": 1731478811255,
            "name": "Commit-0",
            "content": "import { gsap } from \"gsap\";\r\nimport { getBillData }  from \"../store/solarSizingState\";"
        }
    ]
}